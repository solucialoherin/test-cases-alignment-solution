Key;Name;Status;Precondition;Objective;Folder;Priority;Component;Labels;Owner;Estimated Time;Coverage (Issues);Coverage (Pages);IssueKey;QATeam;Test Script (Step-by-Step) - Step;Test Script (Step-by-Step) - Test Data;Test Script (Step-by-Step) - Expected Result;Test Script (Plain Text);Test Script (BDD)
QAP-T2375;Check Allowing internal requests ESP;Automated;;"Precondition:

Set GBP/CAD cross through USD

 

*35=V*
{code:java}
8=FIXT.1.1|9=155|35=V|49=QUOD3|56=QUODFX_UAT|34=3|52=20220628-11:42:21|50=CLIENT1|262=1111222271|263=1|264=0|265=1|267=2|269=0|269=1|146=1|55=GBP/CAD|460=4|63=0|167=FXSPOT|10=014|
{code}
*Mapping*
{code:java}
 Mapped fix message fix MarketDataRequest={ MarketDataRequestBlock={ 
MDReqList={ MDReqBlock=#2:[ 1:{ MDEntryType=Bid } 2:{ MDEntryType=Offer } ] 
} InstrumentMDReqList={ InstrumentMDReqBlock=[ { InstrumentBlock={ 
InstrSymbol=""GBP/CAD"" ProductType=CURRENCY InstrType=FXSpot } } ] } 
MDReqID=""1111222271"" SubscriptionRequestType=Subscribe 
MDUpdateType=IncrementalRefresh ClientAccountGroupID=""CLIENT1"" } {code}
*35=W*
{code:java}
8=FIXT.1.1|9=527|35=W|34=4|49=QUODFX_UAT|52=20220628-11:42:22.487|56=QUOD3|1128=9|55=GBP/CAD|262=1111222271|268=2|269=0|278=4_GBP/CAD_20220628T114222484529284_Bid1|270=1.39578|271=1000000|272=20220628|273=11:42:22|299=4_GBP/CAD_20220628T114222484529284_Bid1|290=1|1024=1|63=0|64=20220630|1070=1|269=1|278=4_GBP/CAD_20220628T114222484529284_Ask1|270=1.39601|271=1000000|272=20220628|273=11:42:22|299=4_GBP/CAD_20220628T114222484529284_Ask1|290=1|1024=1|63=0|64=20220630|1070=1|779=20220628-11:42:22.484|11502=20220628-11:07:30.949|11503=CITI-ID|10=011|{code}
*Mapping*
{code:java}
sending to FIX plugin fix MarketDataSnapshotFullRefresh={ InstrumentBlock={ 
InstrSymbol=""GBP/CAD"" ProductType=CURRENCY InstrType=FXSpot 
InstrSettlDate=""20220630"" } MarketDataFullList={ MarketDataFullBlock=#2:[ 
1:{ MDEntryType=Bid MDEntryID=""4_GBP/CAD_20220628T114222484529284_Bid1"" 
MDEntryPx=1.395780000 MDEntrySize=1000000.000000000 
MDEntryDateTime=2022-Jun-28 11:42:22.484529284 MDEntryPosition=1 
MDOriginType=Book SettlType=Regular SettlDate=2022-Jun-30 
QuoteEntryID=""4_GBP/CAD_20220628T114222484529284_Bid1"" 
MDQuoteType=Tradeable MDEntryPositionNo=1 MDEntryMargin=0.041448000 
MDEntryBaseSize=1000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.395784145 } 2:{ MDEntryType=Offer 
MDEntryID=""4_GBP/CAD_20220628T114222484529284_Ask1"" MDEntryPx=1.396010000 
MDEntrySize=1000000.000000000 MDEntryDateTime=2022-Jun-28 
11:42:22.484529284 MDEntryPosition=1 MDOriginType=Book SettlType=Regular 
SettlDate=2022-Jun-30 
QuoteEntryID=""4_GBP/CAD_20220628T114222484529284_Ask1"" 
MDQuoteType=Tradeable MDEntryPositionNo=1 MDEntryMargin=0.041538000 
MDEntryBaseSize=1000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.396005846 } ] } REC_STATUS=OK MDReqID=""1111222271"" 
MDTime=2022-Jun-28 11:42:22.485171314 ClientClientTierID=""Gold_Day"" 
OrigMDTime=2022-Jun-28 11:07:30.950082000 OrigMDArrivalTime=2022-Jun-28 
11:07:30.949383000 OrigClientVenueID=""CITI-ID"" }
{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-1437;;QAP-8224;PFX;Dissable Allow QuoteRequests and Streaming subscription on Spot for GBP/USD;Via TH2 RestAPI;Data saved;;
;;;;;;;;;;;;;;;Sent Subscription to marketData on this instrument;35=V;Request sent and mapped;;
;;;;;;;;;;;;;;;Check received message;35=W;Receive Receive MarkedDataSnapshotFullREfresh;;
;;;;;;;;;;;;;;;Enable Allow QuoteRequests;Via TH2 RestAPI;Data saved;;
;;;;;;;;;;;;;;;Send again Subscription;;Receive MarkedDataSnapshotFullREfresh;;
QAP-T2376;Check Allowing internal requests RFQ;Automated;;"Precondition:

Set GBP/CAD cross through USD

 

*35=R*
{code:java}
8=FIXT.1.1|9=163|35=R|34=170|49=QUOD9|52=20220628-11:16:08.928|56=QUODFX_UAT|131=687571302|146=1|55=GBP/CAD|167=FXSPOT|537=1|54=1|38=1000000|40=D|63=0|64=20220630|15=GBP|1=CLIENT1|10=021|{code}
*Mapping*
{code:java}
 Mapped fix message fix QuoteRequest={ AuthenticationBlock={ 
UserID=""gtwquod9"" RoleID=FIXClient SessionKey=1656414111000029780 } 
QuoteRequestBlock={ QuoteReqList={ QuoteReqBlock=[ { InstrumentBlock={ 
InstrSymbol=""GBP/CAD"" ProductType=CURRENCY InstrType=FXSpot Tenor=Spot } 
QuoteType=Tradeable Side=Buy SettlType=Regular SettlDate=2022-Jun-30 
Currency=""GBP"" OrdType=PreviouslyQuoted OrdQty=1000000.000000000 
ClientAccountGroupID=""CLIENT1"" } ] } ClientQuoteReqID=""687571302"" } }{code}
*35=S*
{code:java}
8=FIXT.1.1|9=256|35=S|34=170|49=QUODFX_UAT|52=20220628-11:16:10.535|56=QUOD9|1128=9|15=GBP|54=1|55=GBP/CAD|62=20220628-11:18:10.503|63=0|64=20220630|117=01220628111608220002|131=687571302|133=1.39601|135=1000000|167=FXSPOT|190=1.39601|460=4|537=1|1166=01220628111608220002|10=053|{code}
*Mapping*
{code:java}
serializing internal Quote={ RoutingBlock={ DestComponent=""ORS"" } 
QuoteBlock={ QuoteID=495500000038 QuoteRequestID=495100000042 
InstrID=""U5Xja2mf_hin8lMyWwB4gw"" }, persisting Quote={ QuoteID=495500000038 
UserID=""QA1"" RoleID=HeadOfSaleDealer CreationTime=2022-Jun-28 
11:16:08.955817614 Originator=""QS_RFQ_FIX_TH2"" QuoteType=Tradeable 
QuoteStatus=Accepted ListingID=506403873 AccountGroupID=""CLIENT1"" 
OrdQty=1000000.000000000 OfferPx=1.396010000 OfferSize=1000000.000000000 
QuoteRequestID=495100000042 ValidUntilTime=2022-Jun-28 11:18:10.503023135 
OfferSpotRate=1.396010000 SettlType=Regular SettlDate=2022-Jun-30 
Currency=""GBP"" InstrID=""U5Xja2mf_hin8lMyWwB4gw"" Origin=Internal 
ClientQuoteID=""01220628111608220002"" Side=Buy QuoteCategory=Automatic 
AffectPosit=No QuoteTTL=120 ApplicationName=""QS_RFQ_FIX_TH2"", revision 1 } 
on channel 495100000042 {code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-1437;;QAP-8223;PFX;Dissable Allow QuoteRequests and Streaming subscription on Spot for GBP/USD;Via TH2 RestAPI;Data saved;;
;;;;;;;;;;;;;;;Sent RFQ on this instrument;35=R;Request sent and mapped;;
;;;;;;;;;;;;;;;Check received message;35=S;Receive Quote;;
;;;;;;;;;;;;;;;Enable Allow QuoteRequests;Via TH2 RestAPI;Data saved;;
;;;;;;;;;;;;;;;Send again RFQ;;Receive Quote in Reply;;
QAP-T2377;Unexecutable Prices Due to Forward Market Data (RFQ);Manual;;;/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-4070;;QAP-8210;PFX;Open ClientPricing RFQ Tile with USD/CAD-TOM instrument;;Tile is opened;;
;;;;;;;;;;;;;;;Send an RFQ;;"Hover a mouse on the row (not the REJ section) -> ""Executable Off Due To 
Forward Market Data"" tooltip must be appeared in the tile";;
QAP-T2378;Unexecutable Prices Due to Global Status (Pricing/Executable);Manual;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-4070;;QAP-8200;PFX;Open EUR/USD (for example) Spot tile;;Prices displayed on the tiles;;
;;;;;;;;;;;;;;;Set Global Pricing to OFF and hover the mouse on the instrument's bands;;"A tool tip
""Pricing OFF Due to Global Status"" popped up";;
;;;;;;;;;;;;;;;"Set Global Executable to OFF, Global Pricing to ON and hover the mouse on 
the instrument's bands";;"A tool tip
""Executable OFF Due to Global Status"" popped up";;
;;;;;;;;;;;;;;;Change Global Executable to On;;Bands got regular state;;
QAP-T2379;FETrading: FX Position Blotter New Piloting for Currency;Manual;;;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-4539;;QAP-8171;PFX;Open FE => Dealing Positions and Order Book;;Dealing Positions and Order Book is opened with list of orders inside;;
;;;;;;;;;;;;;;;Make Dealing Positions piloted by Order Book and choose Currency;;Blotter was piloted and Currency choosed;;
;;;;;;;;;;;;;;;"Through Ctrl select a one string, and then few strings in Dealing Positions 
with different currency pairs";See .gif;The order book shows orders with the selected currency pairs;;
;;;;;;;;;;;;;;;Repeat steps 3-4, but now Order Book piloted by Dealing Positions;See .gif;The Dealing Positions shows strings with the selected currency;;
;;;;;;;;;;;;;;;Open Aggregated Rates => Rates Tile and Client Pricing => RFQ Tile;;Tiles are opened and being priced;;
;;;;;;;;;;;;;;;Make Dealing Positions piloted by Rates Tile;See .gif;ESP tile change Instrument into selected ones in Dealing Positions;;
;;;;;;;;;;;;;;;Make Dealing Positions piloted by RFQ Tile;See .gif;RFQ tile change Instrument into selected ones in Dealing Positions;;
;;;;;;;;;;;;;;;Make Dealing Positions piloted by Trades book;See .gif;The trade book shows orders with the selected currency;;
QAP-T2380;Check that SATS no sweep qty from non sweep venue;Automated;;"*Precondition :*

Change configs in FXFH set one as *nosweep*
{code:java}


     
 
{code}
 

*35=W*
{code:java}
8=FIXT.1.1|9=596|35=W|34=176|49=TEST|52=20220622-08:05:04.750|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:BNP_21|268=6|269=0|270=1.1815|271=1000000|272=20220622|273=08:05:03|290=1|64=20220624|1070=1|269=1|270=1.18151|271=1000000|272=20220622|273=08:05:03|290=1|64=20220624|1070=1|269=0|270=1.1813|271=2000000|272=20220622|273=08:05:03|290=2|64=20220624|1070=1|269=1|270=1.18165|271=2000000|272=20220622|273=08:05:03|290=2|64=20220624|1070=1|269=0|270=1.181|271=7000000|272=20220622|273=08:05:03|290=3|64=20220624|1070=1|269=1|270=1.18186|271=7000000|272=20220622|273=08:05:03|290=3|64=20220624|1070=1|10=201|{code}
*35=D*
{code:java}
8=FIXT.1.1|9=249|35=D|34=5824|49=QUODTH2|52=20220622-08:05:06.845|56=QUODFX_UAT|1=TH2_Taker|11=064849356|15=EUR|21=2|38=2800000|40=2|44=1.18999|54=1|55=EUR/USD|59=3|60=20220622-08:05:06.000|63=0|64=20220624|167=FXSPOT|847=1008|957=1|958=AllowedVenues|959=14|960=BNP|10=129|{code}
*Mapping*
{code:java}
 Mapped fix message fix NewOrderSingle={ AuthenticationBlock={ 
UserID=""gtwquodth2"" RoleID=FIXClient SessionKey=153400002960 } Header={ 
Target={ TargetCompID=""QUODFX_UAT"" } Sender={ SenderCompID=""QUODTH2"" } 
CreationTime=2022-Jun-22 08:05:06.848565000 } NewOrderSingleBlock={ 
InstrumentBlock={ InstrSymbol=""EUR/USD"" InstrType=FXSpot Tenor=Spot } 
DisplayInstructionBlock={ } AlgoParametersBlock={ AlgoParameterList={ 
AlgoParamBlock=[ { AlgoParameterName=""AllowedVenues"" 
AlgoParameterType=String AlgoParameterValue=""BNP"" } ] } 
AlgoType=MultiListing ClientScenarioID=""1008"" } ClOrdID=""064849356"" 
Side=Buy Price=1.189990000 OrdType=Limit Currency=""EUR"" 
TimeInForce=ImmediateOrCancel TransactTime=2022-Jun-22 08:05:06 
SettlType=Regular SettlDate=2022-Jun-24 ClientAccountGroupID=""TH2_Taker"" 
OrdQty=2800000.000000000 ExecutionPolicy=Synthetic } }{code}
*Execution report*
{code:java}
fix ExecutionReport={ Header={ Target={ TargetCompID=""QUODTH2"" } Sender={ 
SenderCompID=""QUODFX_UAT"" } MsgTime=2022-Jun-22 08:05:07.697705000 
ORSID=""ORS"" CreationTime=2022-Jun-22 08:05:07.697704000 } 
ExecutionReportBlock={ InstrumentBlock={ SecurityAltIDList={ 
SecurityAltIDBlock=#2:[ 1:{ SecurityAltID=""EUR/USD"" 
SecurityAltIDSource=ExchSymb } 2:{ SecurityAltID=""179:2"" 
SecurityAltIDSource=MarketDataKey } ] } InstrDescList={ InstrDescBlock=[ { 
LangCD=""en-US"" InstrLookupSymbol=""EUR/USD-SPO.SPO"" } ] } 
InstrSymbol=""EUR/USD"" Symbol=""EUR/USD"" LookupSymbol=""EUR/USD-SPO.SPO"" 
SecurityID=""EUR/USD"" SecurityIDSource=ExchSymb InstrType=FXSpot 
SecurityExchange=""CITI-SW"" Tenor=Spot BaseCurrency=""EUR"" 
QuoteCurrency=""USD"" LargeNumberPxPrecision=2 PxPrecision=4 
InstrSettlDate=""20220624"" StampFeeExemption=No LevyFeeExemption=No 
PerTransacFeeExemption=No } PartiesList={ PartiesBlock=[ { 
PartyID=""gtwquodth2"" PartyIDSource=Proprietary PartyRole=EnteringTrader 
PartyRoleQualifier=FIXClient } ] } AlgoParametersBlock={ 
AlgoParameterList={ AlgoParamBlock=[ { AlgoParameterName=""AllowedVenues"" 
AlgoParameterType=String AlgoParameterValue=""BNP"" } ] } 
AlgoType=MultiListing AlgoPolicyName=""Default"" ClientScenarioID=""1555"" } 
VenueList={ VenueBlock=#32:[ 1:{ ClientVenueID=""BNP-RFQ"" } 2:{ 
ClientVenueID=""STA-RFQ"" } 3:{ ClientVenueID=""CITI-RFQ"" } 4:{ 
ClientVenueID=""DB-RFQ"" } 5:{ ClientVenueID=""GS-RFQ"" } 6:{ 
ClientVenueID=""JPM-RFQ"" } 7:{ ClientVenueID=""HSBC-RFQ"" } 8:{ 
ClientVenueID=""MS-RFQ"" } 9:{ ClientVenueID=""BARC-RFQ"" } 10:{ 
ClientVenueID=""EBS-CITI"" } 11:{ ClientVenueID=""FM-CITI"" } 12:{ 
ClientVenueID=""CITI-SW"" } 13:{ ClientVenueID=""CITI-FA"" } 14:{ 
ClientVenueID=""GS-SW"" } 15:{ ClientVenueID=""GS-FA"" } 16:{ 
ClientVenueID=""HSBC-SW"" } 17:{ ClientVenueID=""HSBC-FA"" } 18:{ 
ClientVenueID=""JPM-SW"" } 19:{ ClientVenueID=""JPM-FA"" } 20:{ 
ClientVenueID=""MS-SW"" } 21:{ ClientVenueID=""MS-FA"" } 22:{ 
ClientVenueID=""BNP-SW"" } 23:{ ClientVenueID=""BNP-FA"" } 24:{ 
ClientVenueID=""STA-SW"" } 25:{ ClientVenueID=""STA-FA"" } 26:{ 
ClientVenueID=""DB-SW"" } 27:{ ClientVenueID=""DB-FA"" } 28:{ 
ClientVenueID=""BARX"" } 29:{ ClientVenueID=""BARC-FA"" } 30:{ 
ClientVenueID=""XQFX"" } 31:{ ClientVenueID=""D3"" } 32:{ ClientVenueID=""FSSR"" 
} ] } ClOrdID=""064849356"" SecondaryClOrdID=""01220622080506523003"" 
ExecID=""EV1220622080507292002"" OrdID=""AO1220622080506273001"" 
ExecutionPolicy=Synthetic SecondaryOrderID=""1655885107569"" 
TransactTime=2022-Jun-22 08:05:07 FreeNotes=""Hello sim"" OrdType=Limit 
Price=1.189990000 Currency=""EUR"" ExecType=Trade TransExecStatus=Filled 
LastMkt=""BNP-SW"" PrimaryLastMkt=""BNP-SW"" TradeDate=2022-Jun-22 
TimeInForce=ImmediateOrCancel CalculatedCcyLastQty=1181510.000000000 
LastSpotRate=1.181510000 SettlType=Regular SettlDate=2022-Jun-24 
SettlCurrency=""USD"" AggressorIndicator=Yes LastExecutionPolicy=DMA 
ReplyReceivedTime=2022-Jun-22 08:05:07.676825000 TransStatus=Terminated 
OrdQty=2800000.000000000 Side=Buy ExecQty=1000000.000000000 
ExecPrice=1.181510000 AlgoStatus=Terminated PerTransacFeeExemption=No 
StampFeeExemption=No LevyFeeExemption=No LeavesQty=0.000000000 
CumQty=2800000.000000000 AvgPrice=1.181600000 
ClientAccountGroupID=""TH2_Taker"" SecondaryExecID=""1655885107569"" 
ClientUserID=""gtwquodth2"" AccountGroupID=""TH2_Taker"" QtyType=Units 
GrossTradeAmt=1181510.000000000 SpotSettlDate=""20220624"" 
TradeReportingIndicator=NotReported InitialClOrdID=""064849356"" 
MarketExecID=""EX1220622080507298002"" PrimaryListingCurrency=""   "" 
TakerMakerInd=Taker } }{code}
*35= 8*
{code:java}
8=FIXT.1.1|9=836|35=8|34=5847|49=QUODFX_UAT|52=20220622-08:05:07.700|56=QUODTH2|1128=9|6=1.1816|11=064849356|14=2800000|15=EUR|17=EV1220622080507292002|21=2|22=8|30=BNP-SW|31=1.18151|32=1000000|37=AO1220622080506273001|38=2800000|39=2|40=2|44=1.18999|48=EUR/USD|54=1|55=EUR/USD|58=Hello 
sim|59=3|60=20220622-08:05:07.000|63=0|64=20220624|75=20220622|100=BNP-RFQ;STA-RFQ;CITI-RFQ;DB-RFQ;GS-RFQ;JPM-RFQ;HSBC-RFQ;MS-RFQ;BARC-RFQ;EBS-CITI;FM-CITI;CITI-SW;CITI-FA;GS-SW;GS-FA;HSBC-SW;HSBC-FA;JPM-SW;JPM-FA;MS-SW;MS-FA;BNP-SW;BNP-FA;STA-SW;STA-FA;DB-SW;DB-FA;BARX;BARC-FA;XQFX;D3;FSSR|120=USD|150=F|151=0|167=FXSPOT|194=1.18151|198=1655885107569|207=CITI-SW|381=1181510|453=1|448=gtwquodth2|447=D|452=36|2376=1011|460=4|527=1655885107569|847=1008|854=0|957=1|958=AllowedVenues|959=14|960=BNP|2524=0|5053=0|5055=20220624|10014=1555|11505=20220622-08:05:07.676|10=057|{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-4556;;QAP-8169;PFX;Send MD to configured venue;35= W;MD sent and appears on FE;;
;;;;;;;;;;;;;;;Send SOR NewOrderSingle with following parameters;35=D;Order sent and mapped correctly;;
;;;;;;;;;;;;;;;Check Execution report;35=8;Order fiiled and create 2 child with 1M and 1.8M qty;;
QAP-T2381;Unexecutable Prices Due to Spot Market Data;Manual;;"Prepare cross currency (for example NOK/SEK) and attached NO venues to 
Forward Tab";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-4516, PFX-4070;;QAP-8167;PFX;Open ClientPricing Tile with an instrument without Market Data;Remove venues from Spot Venue section for the instrument;"1. Hover a mouse on the Px empty column -> ""Unavailable Due To Spot Market 
Data"" tooltip must be appeared in the tile
2. Only Base and Band column are displayed, others are empty";;
QAP-T2382;Unexecutable Prices Due to Current Volume Band (Pricing/Executable);Manual;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-4070;;QAP-8166;PFX;Open EUR/USD (for example) 1W tile;;Prices displayed on the tiles;;
;;;;;;;;;;;;;;;Set Pricing to OFF for a volume band and hover the mouse on it;;"A tool tip
""Pricing OFF Due to Current Volume Band"" popped up
(a word ""Forward"" instead of ""Current"" is acceptable)";;
;;;;;;;;;;;;;;;Set Executable to OFF for the volume band and hover the mouse on it;;"A tool tip
""Pricing OFF Due to Current Volume Band"" popped up
(a word ""Forward"" instead of ""Current"" is acceptable)";;
;;;;;;;;;;;;;;;Turn Pricing to ON and hover the mouse on the band;;"A tool tip
""Executable OFF Due to Current Volume Band"" popped up
(a word ""Forward"" instead of ""Current"" is acceptable)";;
;;;;;;;;;;;;;;;Turn Executable to On;;Bands got regular state;;
QAP-T2383;Unexecutable Prices Due to Spot Volume Band (Pricing/Executable);Manual;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-4070;;QAP-8165;PFX;Open 2 EUR/USD tiles (for example) with tenors Spot and 1W;;Prices displayed on the tiles;;
;;;;;;;;;;;;;;;"Set Pricing to OFF for a SPOT Volume Band and hover the mouse on the same 
band for spot and forward tenors";;"A tool tip
""Pricing OFF Due to Spot Volume Band"" popped up for each band of both tiles";;
;;;;;;;;;;;;;;;"Set Executable to OFF for a SPOT Volume Band and hover the mouse on the 
same band for spot and forward tenors";;"A tool tip
""Pricing OFF Due to Spot Volume Band"" popped up for each band of both tiles";;
;;;;;;;;;;;;;;;"Turn Pricing to ON and hover the mouse on the same band for spot and 
forward tenors";;"A tool tip
""Executable OFF Due to Spot Volume Band"" popped up for each band of both 
tiles";;
;;;;;;;;;;;;;;;Turn Executable to On;;Bands got regular state in both tiles;;
QAP-T2384;Unexecutable Prices Due to Current Tenor Book (Pricing/Executable);Manual;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-4070;;QAP-8164;PFX;Open EUR/USD (for example) 1W tile;;Prices displayed on the tiles;;
;;;;;;;;;;;;;;;Set Pricing to OFF for 1W and hover the mouse on the bands;;"A tool tip
""Pricing OFF Due to Current Tenor Book"" popped up on each band
(a word ""Forward"" instead of ""Current"" is acceptable)";;
;;;;;;;;;;;;;;;Set Executable to OFF for 1W and hover the mouse on the bands;;"A tool tip
""Pricing OFF Due to Current Tenor Book"" popped up on each band
(a word ""Forward"" instead of ""Current"" is acceptable)";;
;;;;;;;;;;;;;;;Turn Pricing to ON and hover the mouse on the bands;;"A tool tip
""Executable OFF Due to Current Tenor Book"" popped up on each band
(a word ""Forward"" instead of ""Current"" is acceptable)";;
;;;;;;;;;;;;;;;Turn Executable to On;;Bands got regular state;;
QAP-T2385;Check enabling/disabling RFQ throught WebAdmin;Automated;;"*Preconditions*

Go to ClientTier=>ClientTierInstSymbol

 

*35=R*
{code:java}
8=FIXT.1.1|9=163|35=R|34=570|49=QUOD9|52=20220613-13:37:49.355|56=QUODFX_UAT|131=690706539|146=1|55=EUR/USD|167=FXSPOT|537=1|54=1|38=1000000|40=D|63=0|64=20220615|15=EUR|1=CLIENT1|10=106|{code}

*Mapping*
{code:java}
Mapped fix message fix QuoteRequest={ AuthenticationBlock={ 
UserID=""gtwquod9"" RoleID=FIXClient SessionKey=1655124478000025843 } 
QuoteRequestBlock={ QuoteReqList={ QuoteReqBlock=[ { InstrumentBlock={ 
InstrSymbol=""EUR/USD"" ProductType=CURRENCY InstrType=FXSpot Tenor=Spot } 
QuoteType=Tradeable Side=Buy SettlType=Regular SettlDate=2022-Jun-15 
Currency=""EUR"" OrdType=PreviouslyQuoted OrdQty=1000000.000000000 
ClientAccountGroupID=""CLIENT1"" } ] } ClientQuoteReqID=""690706539"" } }{code}
*35=AG*
{code:java}
8=FIXT.1.1|9=218|35=AG|34=570|49=QUODFX_UAT|52=20220613-13:37:49.381|56=QUOD9|1128=9|58=subscriptions 
on this tier/tenor is not currently 
allowed|131=690706539|146=1|55=EUR/USD|167=FXSPOT|537=1|54=1|63=0|64=20220615|15=EUR|40=D|658=99|10=157|{code}
*Mapping*
{code:java}
fix QuoteRequestReject={ QuoteRequestRejectBlock={ QuoteReqRejectList={ 
QuoteReqRejectBlock=[ { InstrumentBlock={ SecurityAltIDList={ 
SecurityAltIDBlock=[ { SecurityAltID=""EUR/USD"" SecurityAltIDSource=ExchSymb 
} ] } InstrDescList={ InstrDescBlock=[ { LangCD=""en-US"" 
InstrLookupSymbol=""EUR/USD-SPO.SPO"" } ] } InstrSymbol=""EUR/USD"" 
Symbol=""EUR/USD-SPO-QUODFX"" LookupSymbol=""EUR/USD-SPO.SPO"" 
SecurityID=""EUR/USD"" SecurityIDSource=ExchSymb InstrType=FXSpot 
SecurityExchange=""XQFX"" Tenor=Spot BaseCurrency=""EUR"" QuoteCurrency=""USD"" 
LargeNumberPxPrecision=2 PxPrecision=4 InstrSettlDate=""20220615"" 
StampFeeExemption=No LevyFeeExemption=No PerTransacFeeExemption=No } 
QuoteType=Tradeable Side=Buy OrdQty=1000000.000000000 SettlType=Regular 
SettlDate=2022-Jun-15 Currency=""EUR"" OrdType=PreviouslyQuoted } ] } 
ClientQuoteReqID=""690706539"" QuoteRequestRejReason=Other 
FreeNotes=""subscriptions on this tier/tenor is not currently allowed"" } 
}{code}
*35=S*
{code:java}
8=FIXT.1.1|9=254|35=S|34=554|49=QUODFX_UAT|52=20220613-13:36:31.086|56=QUOD9|1128=9|15=EUR|54=1|55=EUR/USD|62=20220613-13:38:31.047|63=0|64=20220615|117=01220613133630103001|131=901530292|133=1.1812|135=1000000|167=FXSPOT|190=1.1812|460=4|537=1|1166=01220613133630103001|10=006|{code}

*Mapping*
{code:java}
serializing internal Quote={ RoutingBlock={ DestComponent=""ORS"" } 
QuoteBlock={ QuoteID=449800000039 QuoteRequestID=449300000045 
InstrID=""KExUjnMCR-wK6DgQBZpg8g"" }, persisting Quote={ QuoteID=449800000039 
UserID=""QA1"" RoleID=HeadOfSaleDealer CreationTime=2022-Jun-13 
13:36:30.532108718 Originator=""QS_RFQ_FIX_TH2"" QuoteType=Tradeable 
QuoteStatus=Accepted ListingID=506403761 AccountGroupID=""Silver1"" 
OrdQty=1000000.000000000 OfferPx=1.181200000 OfferSize=1000000.000000000 
QuoteRequestID=449300000045 ValidUntilTime=2022-Jun-13 13:38:31.047826307 
OfferSpotRate=1.181200000 SettlType=Regular SettlDate=2022-Jun-15 
Currency=""EUR"" InstrID=""KExUjnMCR-wK6DgQBZpg8g"" Origin=Internal 
ClientQuoteID=""01220613133630103001"" Side=Buy QuoteCategory=Automatic 
AffectPosit=No QuoteTTL=120 ApplicationName=""QS_RFQ_FIX_TH2"", revision 1 } 
on channel 449300000045 }{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-1437;;QAP-8012;PFX;"Change ""Allow Streaming Subscriptions"" in Instrument to false (uncheck) and 
save";Via RestAPI TH2;Config changed and saved;;
;;;;;;;;;;;;;;;Send RFQ to this client;35=R;Request sent and mapped;;
;;;;;;;;;;;;;;;Check response;35=AG;Should receive QuoteRequestReject;;
;;;;;;;;;;;;;;;"Change ""Allow Streaming Subscriptions"" in Instrument to true (check) and 
save";Via RestAPI TH2;Config changed and saved;;
;;;;;;;;;;;;;;;Send RFQ to this client;35=R;Request sent and mapped;;
;;;;;;;;;;;;;;;Check received message;35=S;Quote received;;
QAP-T2386;Check enabling/disabling subscription to the market data throught WebAdmin;Automated;;"*Preconditions*

Go to ClientTier=>ClientTierInstSymbol

*35=V*
{code:java}
< 
8=FIXT.1.1|9=154|35=V|49=QUOD3|56=QUODFX_UAT|34=3|52=20220609-14:26:56|50=CLIENT1|262=123321129|263=1|264=1|265=0|267=2|269=0|269=1|146=1|55=EUR/USD|460=4|63=0|167=FXSPOT|10=036|{code}
*Mapping*
{code:java}
Mapped fix message fix MarketDataRequest={ MarketDataRequestBlock={ 
MDReqList={ MDReqBlock=#2:[ 1:{ MDEntryType=Bid } 2:{ MDEntryType=Offer } ] 
} InstrumentMDReqList={ InstrumentMDReqBlock=[ { InstrumentBlock={ 
InstrSymbol=""EUR/USD"" ProductType=CURRENCY InstrType=FXSpot } } ] } 
MDReqID=""123321129"" SubscriptionRequestType=Subscribe 
MDUpdateType=FullRefresh ClientAccountGroupID=""CLIENT1"" } {code}
*35=Y*
{code:java}
8=FIXT.1.1|9=147|35=Y|34=36|49=QUODFX_UAT|52=20220609-14:27:05.580|56=QUOD3|1128=9|58=subscriptions 
on this tier/tenor is not currently 
allowed|262=123321129|281=3|10=247|{code}
*Mapping*


{code:java}
sending to FIX plugin fix MarketDataRequestReject={ MessageReply={ 
MessageReplyBlock=[ { ErrorCD=""QS-99999"" ErrorLevel=Error 
ErrorMsg=""subscriptions on this tier/tenor is not currently allowed"" } ] } 
MarketDataRequestRejectBlock={ MDReqID=""123321129"" 
SubscriptionRequestType=Subscribe MDReqRejReason=InsufficientPermissions 
FreeNotes=""subscriptions on this tier/tenor is not currently allowed"" 
ClientAccountGroupID=""CLIENT1"" } MaxErrorLevel=Error }{code}
*35=W*
{code:java}
> 
8=FIXT.1.1|9=1594|35=W|34=91|49=QUODFX_UAT|52=20220609-14:47:04.694|56=QUOD3|1128=9|55=EUR/USD|262=123321131|268=10|269=0|278=_Bid1|270=1.18137|271=1000000|272=20220609|273=14:47:05|299=4_EUR/USD_20220609T144704550515715_Bid1|290=1|1024=1|63=0|64=20220613|1070=1|269=1|278=_Ask1|270=1.18151|271=1000000|272=20220609|273=14:47:05|299=4_EUR/USD_20220609T144704550515715_Ask1|290=1|1024=1|63=0|64=20220613|1070=1|269=0|278=_Bid3|270=1.18126|271=3000000|272=20220609|273=14:47:05|299=4_EUR/USD_20220609T144704550515715_Bid3|290=2|1024=1|63=0|64=20220613|1070=1|269=1|278=_Ask2|270=1.18172|271=2000000|272=20220609|273=14:47:05|299=4_EUR/USD_20220609T144704550515715_Ask2|290=2|1024=1|63=0|64=20220613|1070=1|269=0|278=_Bid2|270=1.18126|271=2000000|272=20220609|273=14:47:05|299=4_EUR/USD_20220609T144704550515715_Bid2|290=3|1024=1|63=0|64=20220613|1070=1|269=1|278=_Ask3|270=1.18172|271=3000000|272=20220609|273=14:47:05|299=4_EUR/USD_20220609T144704550515715_Ask3|290=3|1024=1|63=0|64=20220613|1070=1|269=0|278=_Bid5|270=1.18116|271=5000000|272=20220609|273=14:47:05|299=4_EUR/USD_20220609T144704550515715_Bid5|290=4|1024=1|63=0|64=20220613|1070=1|269=1|278=_Ask4|270=1.18177|271=4000000|272=20220609|273=14:47:05|299=4_EUR/USD_20220609T144704550515715_Ask4|290=4|1024=1|63=0|64=20220613|1070=1|269=0|278=_Bid4|270=1.18116|271=4000000|272=20220609|273=14:47:05|299=4_EUR/USD_20220609T144704550515715_Bid4|290=5|1024=1|63=0|64=20220613|1070=1|269=1|278=_Ask5|270=1.18177|271=5000000|272=20220609|273=14:47:05|299=4_EUR/USD_20220609T144704550515715_Ask5|290=5|1024=1|63=0|64=20220613|1070=1|779=20220609-14:47:04.550|10=115|{code}

*Mapping*
{code:java}
sending to FIX plugin fix MarketDataSnapshotFullRefresh={ InstrumentBlock={ 
InstrSymbol=""EUR/USD"" ProductType=CURRENCY InstrType=FXSpot 
InstrSettlDate=""20220613"" } MarketDataFullList={ MarketDataFullBlock=#10:[ 
1:{ MDEntryType=Bid MDEntryID=""_Bid1"" MDEntryPx=1.181370000 
MDEntrySize=1000000.000000000 MDEntryDateTime=2022-Jun-09 
14:47:04.550515715 MDEntryPosition=1 MDOriginType=Book SettlType=Regular 
SettlDate=2022-Jun-13 
QuoteEntryID=""4_EUR/USD_20220609T144704550515715_Bid1"" 
MDQuoteType=Tradeable MDEntryPositionNo=1 MDEntryMargin=0.080000000 
MDEntryBaseSize=1000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181378000 } 2:{ MDEntryType=Offer MDEntryID=""_Ask1"" 
MDEntryPx=1.181510000 MDEntrySize=1000000.000000000 
MDEntryDateTime=2022-Jun-09 14:47:04.550515715 MDEntryPosition=1 
MDOriginType=Book SettlType=Regular SettlDate=2022-Jun-13 
QuoteEntryID=""4_EUR/USD_20220609T144704550515715_Ask1"" 
MDQuoteType=Tradeable MDEntryPositionNo=1 MDEntryMargin=0.060000000 
MDEntryBaseSize=1000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181504000 } 3:{ MDEntryType=Bid MDEntryID=""_Bid3"" 
MDEntryPx=1.181260000 MDEntrySize=3000000.000000000 
MDEntryDateTime=2022-Jun-09 14:47:04.550515715 MDEntryPosition=3 
MDOriginType=Book SettlType=Regular SettlDate=2022-Jun-13 
QuoteEntryID=""4_EUR/USD_20220609T144704550515715_Bid3"" 
MDQuoteType=Tradeable MDEntryPositionNo=2 MDEntryMargin=0.030000000 
MDEntryBaseSize=3000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181263000 } 4:{ MDEntryType=Offer MDEntryID=""_Ask2"" 
MDEntryPx=1.181720000 MDEntrySize=2000000.000000000 
MDEntryDateTime=2022-Jun-09 14:47:04.550515715 MDEntryPosition=2 
MDOriginType=Book SettlType=Regular SettlDate=2022-Jun-13 
QuoteEntryID=""4_EUR/USD_20220609T144704550515715_Ask2"" 
MDQuoteType=Tradeable MDEntryPositionNo=2 MDEntryMargin=0.050000000 
MDEntryBaseSize=2000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181715000 } 5:{ MDEntryType=Bid MDEntryID=""_Bid2"" 
MDEntryPx=1.181260000 MDEntrySize=2000000.000000000 
MDEntryDateTime=2022-Jun-09 14:47:04.550515715 MDEntryPosition=2 
MDOriginType=Book SettlType=Regular SettlDate=2022-Jun-13 
QuoteEntryID=""4_EUR/USD_20220609T144704550515715_Bid2"" 
MDQuoteType=Tradeable MDEntryPositionNo=3 MDEntryMargin=0.030000000 
MDEntryBaseSize=2000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181263000 } 6:{ MDEntryType=Offer MDEntryID=""_Ask3"" 
MDEntryPx=1.181720000 MDEntrySize=3000000.000000000 
MDEntryDateTime=2022-Jun-09 14:47:04.550515715 MDEntryPosition=3 
MDOriginType=Book SettlType=Regular SettlDate=2022-Jun-13 
QuoteEntryID=""4_EUR/USD_20220609T144704550515715_Ask3"" 
MDQuoteType=Tradeable MDEntryPositionNo=3 MDEntryMargin=0.050000000 
MDEntryBaseSize=3000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181715000 } 7:{ MDEntryType=Bid MDEntryID=""_Bid5"" 
MDEntryPx=1.181160000 MDEntrySize=5000000.000000000 
MDEntryDateTime=2022-Jun-09 14:47:04.550515715 MDEntryPosition=5 
MDOriginType=Book SettlType=Regular SettlDate=2022-Jun-13 
QuoteEntryID=""4_EUR/USD_20220609T144704550515715_Bid5"" 
MDQuoteType=Tradeable MDEntryPositionNo=4 MDEntryMargin=0.030000000 
MDEntryBaseSize=5000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181163000 } 8:{ MDEntryType=Offer MDEntryID=""_Ask4"" 
MDEntryPx=1.181770000 MDEntrySize=4000000.000000000 
MDEntryDateTime=2022-Jun-09 14:47:04.550515715 MDEntryPosition=4 
MDOriginType=Book SettlType=Regular SettlDate=2022-Jun-13 
QuoteEntryID=""4_EUR/USD_20220609T144704550515715_Ask4"" 
MDQuoteType=Tradeable MDEntryPositionNo=4 MDEntryMargin=0.020000000 
MDEntryBaseSize=4000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181768000 } 9:{ MDEntryType=Bid MDEntryID=""_Bid4"" 
MDEntryPx=1.181160000 MDEntrySize=4000000.000000000 
MDEntryDateTime=2022-Jun-09 14:47:04.550515715 MDEntryPosition=4 
MDOriginType=Book SettlType=Regular SettlDate=2022-Jun-13 
QuoteEntryID=""4_EUR/USD_20220609T144704550515715_Bid4"" 
MDQuoteType=Tradeable MDEntryPositionNo=5 MDEntryMargin=0.030000000 
MDEntryBaseSize=4000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181163000 } 10:{ MDEntryType=Offer MDEntryID=""_Ask5"" 
MDEntryPx=1.181770000 MDEntrySize=5000000.000000000 
MDEntryDateTime=2022-Jun-09 14:47:04.550515715 MDEntryPosition=5 
MDOriginType=Book SettlType=Regular SettlDate=2022-Jun-13 
QuoteEntryID=""4_EUR/USD_20220609T144704550515715_Ask5"" 
MDQuoteType=Tradeable MDEntryPositionNo=5 MDEntryMargin=0.020000000 
MDEntryBaseSize=5000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181768000 } ] } REC_STATUS=OK MDReqID=""123321131"" 
MDTime=2022-Jun-09 14:47:04.568599252 ClientClientTierID=""Gold_Day"" 
OrigMDTime=2022-Jun-09 12:10:56.161555000 OrigMDArrivalTime=2022-Jun-09 
12:10:56.161427000 OrigClientVenueID=""HSBC"" }{code}
 ";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-1437;;QAP-8010;PFX;"Change ""Allow Streaming Subscriptions"" in Instrument to false (uncheck) and 
save";Via RestAPI TH2;Config changed and saved;;
;;;;;;;;;;;;;;;Send MD request to this client;35=V;Request sent and mapped;;
;;;;;;;;;;;;;;;Check response;35=Y;Should receive MarkedDataReject;;
;;;;;;;;;;;;;;;"Change ""Allow Streaming Subscriptions"" in Instrument to true (check) and 
save";Via RestAPI TH2;Config changed and saved;;
;;;;;;;;;;;;;;;Send MD request to this client;35=V;Request sent and mapped;;
;;;;;;;;;;;;;;;Check received message;35=W;MarketDataSnapshotFullRefresh received;;
QAP-T2387;Check QuoteRequest without TTL;Specified;;"*35=R*
{code:java}
8=FIXT.1.1|9=165|35=R|34=5415|49=QUOD9|52=20220610-07:31:04.896|56=QUODFX_UAT|131=646841240|146=1|55=EUR/USD|167=FXSPOT|537=1|54=1|38=1000000|40=D|63=0|64=20220614|15=EUR|1=Iridium1|10=163|{code}
*Mapping*
{code:java}
Mapped fix message fix QuoteRequest={ AuthenticationBlock={ 
UserID=""gtwquod9"" RoleID=FIXClient SessionKey=1654815806000056797 } 
QuoteRequestBlock={ QuoteReqList={ QuoteReqBlock=[ { InstrumentBlock={ 
InstrSymbol=""EUR/USD"" ProductType=CURRENCY InstrType=FXSpot Tenor=Spot } 
QuoteType=Tradeable Side=Buy SettlType=Regular SettlDate=2022-Jun-14 
Currency=""EUR"" OrdType=PreviouslyQuoted OrdQty=1000000.000000000 
ClientAccountGroupID=""Iridium1"" } ] } ClientQuoteReqID=""646841240"" } 
}{code}
*ORS logs*
{code:java}
incoming fix QuoteRequest={ AuthenticationBlock={ UserID=""gtwquod9"" 
RoleID=FIXClient SessionKey=1654815806000056797 } QuoteRequestBlock={ 
QuoteReqList={ QuoteReqBlock=[ { InstrumentBlock={ InstrSymbol=""EUR/USD"" 
ProductType=CURRENCY InstrType=FXSpot Tenor=Spot } QuoteType=Tradeable 
Side=Buy SettlType=Regular SettlDate=2022-Jun-14 Currency=""EUR"" 
OrdType=PreviouslyQuoted OrdQty=1000000.000000000 
ClientAccountGroupID=""Iridium1"" QuotingSessionID=10 
LiveQuoteID=447100000030 } ] } ClientQuoteReqID=""646841240"" } }{code}
*Quote*
{code:java}
serializing internal Quote={ RoutingBlock={ DestComponent=""ORS"" } 
QuoteBlock={ QuoteID=447100000030 QuoteRequestID=446700000032 
InstrID=""KExUjnMCR-wK6DgQBZpg8g"" }, persisting Quote={ QuoteID=447100000030 
UserID=""QA1"" RoleID=HeadOfSaleDealer CreationTime=2022-Jun-10 
07:31:04.920973768 Originator=""QS_RFQ_FIX_TH2"" QuoteType=Tradeable 
QuoteStatus=Accepted ListingID=506403761 AccountGroupID=""Iridium1"" 
OrdQty=1000000.000000000 OfferPx=1.181590000 OfferSize=1000000.000000000 
QuoteRequestID=446700000032 ValidUntilTime=2022-Jun-10 07:33:05.435517468 
OfferSpotRate=1.181590000 SettlType=Regular SettlDate=2022-Jun-14 
Currency=""EUR"" InstrID=""KExUjnMCR-wK6DgQBZpg8g"" Origin=Internal 
ClientQuoteID=""01220610073104415001"" Side=Buy QuoteCategory=Automatic 
AffectPosit=No QuoteTTL=120 ApplicationName=""QS_RFQ_FIX_TH2"", revision 1 } 
on channel 446700000032 }{code}
*35=S*
{code:java}
8=FIXT.1.1|9=257|35=S|34=5415|49=QUODFX_UAT|52=20220610-07:31:05.466|56=QUOD9|1128=9|15=EUR|54=1|55=EUR/USD|62=20220610-07:33:05.435|63=0|64=20220614|117=01220610073104415001|131=646841240|133=1.18159|135=1000000|167=FXSPOT|190=1.18159|460=4|537=1|1166=01220610073104415001|10=180|{code}
*35=Z*
{code:java}
8=FIXT.1.1|9=122|35=Z|34=5440|49=QUODFX_UAT|52=20220610-07:33:05.440|56=QUOD9|1128=9|117=0|131=646841240|295=1|55=EUR/USD|167=FXSPOT|298=5|10=034|
2022-06-10 07:33:05.441713886 QUOD.QS_RFQ_FIX_TH2 [19925] INFO 
 ultramessaging (Reader.cpp:767){code}
*Mapping*
{code:java}
serializing internal QuoteCancel={ RoutingBlock={ DestComponent=""ORS"" } 
QuoteCancelBlock={ QuoteRequestID=446700000032 
QuoteCancelType=ByClQuoteReqID }, persisting Quote={ QuoteID=447100000030 
UserID=""QA1"" RoleID=HeadOfSaleDealer CreationTime=2022-Jun-10 
07:31:04.920973768 Originator=""QS_RFQ_FIX_TH2"" QuoteType=Tradeable 
QuoteStatus=Expired ListingID=506403761 AccountGroupID=""Iridium1"" 
OrdQty=1000000.000000000 OfferPx=1.181590000 OfferSize=1000000.000000000 
TerminationTime=2022-Jun-10 07:33:05.435855614 QuoteRequestID=446700000032 
ValidUntilTime=2022-Jun-10 07:33:05.435517468 OfferSpotRate=1.181590000 
SettlType=Regular SettlDate=2022-Jun-14 Currency=""EUR"" 
InstrID=""KExUjnMCR-wK6DgQBZpg8g"" Origin=Internal 
ClientQuoteID=""01220610073118415001"" Side=Buy QuoteCategory=Automatic 
AffectPosit=No QuoteTTL=120 ApplicationName=""QS_RFQ_FIX_TH2"", revision 2 } 
on channel 446700000032 }{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-4488;;QAP-8006;PFX;Set TTL for Venue 50 sec;Via TH2 restApi;Venue saved;;
;;;;;;;;;;;;;;;Send QuoteRequest without TTL (126 tag);35 = R;Request Sent and mapped;;
;;;;;;;;;;;;;;;Check ORS logs;Not need for TH2;In ORS logs quote don`t have ExpireTime;;
;;;;;;;;;;;;;;;Check quote in reply;35= S;Quote still alive;;
;;;;;;;;;;;;;;;Wait 120 sec;35=Z;Quote expire, and receive quote cancel;;
QAP-T2388;FETrading: FX Position Blotter New Piloting for Currency Pair;Manual;;;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-4539;;QAP-7926;PFX;Open FE => Dealing Positions and Order Book;;Dealing Positions and Order Book is opened with list of orders inside;;
;;;;;;;;;;;;;;;Make Dealing Positions piloted by Order Book and choose Currency Pair;;Blotter was piloted and Currency Pair choosed;;
;;;;;;;;;;;;;;;"Through Ctrl select a one string, and then few strings in Dealing Positions 
with different currency pairs";See .gif;The order book shows orders with the selected currency pairs;;
;;;;;;;;;;;;;;;Repeat steps 3-4, but now Order Book piloted by Dealing Positions;See .gif;The Dealing Positions shows strings with the selected currency pairs;;
;;;;;;;;;;;;;;;Open Aggregated Rates => Rates Tile and Client Pricing => RFQ Tile;;Tiles are opened and being priced;;
;;;;;;;;;;;;;;;Make Dealing Positions piloted by Rates Tile;See .gif;ESP tile change Instrument into selected ones in Dealing Positions;;
;;;;;;;;;;;;;;;Make Dealing Positions piloted by RFQ Tile;See .gif;RFQ tile change Instrument into selected ones in Dealing Positions;;
;;;;;;;;;;;;;;;Make Dealing Positions piloted by Trades book;See .gif;The trade book shows orders with the selected currency pairs;;
QAP-T2389;FETrading - Dealer Intervention Ticket : Add Tier To Manual DI RFQ Panel;Automated;;"*Preconditions:*
* Open FE => Dealer Intervention

*#1:*
{code:java}
8=FIXT.1.1|9=155|35=R|49=QUOD5|56=QUODFX_UAT|34=318|52=20220526-12:44:14|131=240736106|146=1|55=GBP/USD|167=FXSPOT|537=1|38=55000000|64=20220530|63=0|15=GBP|1=CLIENT1|40=D|10=187|{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-3237;;QAP-7862;PFX;From miniFix send RFQ request with Qty greater then threshold;#1;Request sent, appeared in FE;;
;;;;;;;;;;;;;;;"In DI window, select your request and press ""Assign to me""";;The request is assigned;;
;;;;;;;;;;;;;;;"Check if the ""Party"" field is displayed correctly";;"Displayed client tier in the top section of the manual DI RFQ panel such 
that ""Party:"" is displayed as Party: {Tier}/{Client} (see attachments)";;
QAP-T2390;Cancel All Quotes When Price Cleansing Rule Is Implemented;Open;;"*{color:#403294}#1{color}*
{code:java}
< 
8=FIXT.1.1|9=137|35=R|49=QUOD5|56=QUODFX_UAT|34=18|52=20220526-10:14:35|131=1054069314|146=1|55=GBP/USD|167=FXSPOT|537=1|38=1000000|63=0|15=USD|1=CLIENT1|10=120| 
{code}
{code:java}
> 
8=FIXT.1.1|9=285|35=S|34=19|49=QUODFX_UAT|52=20220526-10:14:35.810|56=QUOD5|1128=9|15=USD|55=GBP/USD|62=20220526-10:16:35.178|63=0|64=20220530|117=01220526101435400002|131=1054069314|132=1.30438|133=1.3044|134=1000000|135=1000000|167=FXSPOT|188=1.30438|190=1.3044|460=4|537=1|1166=01220526101435400002|10=179| 
{code}
{code:java}
> 
8=FIXT.1.1|9=121|35=Z|34=20|49=QUODFX_UAT|52=20220526-10:14:37.299|56=QUOD5|1128=9|117=0|131=1054069314|295=1|55=GBP/USD|167=FXSPOT|298=5|10=221|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-2053;;QAP-7859;PFX;Configure Price Cleansing -> Rates Following Trades;"Kratos 309 Site:
Remove Detected Price Updates = On
Related Rates Delay = 1
Venue = JPM
Instr Type = FXSpot
Instrument = GBP/USD";Changes are saved;;
;;;;;;;;;;;;;;;Configure Venues for the instrument from previous step;"Instrument = GBP/USD
Venue = JPM";Changes are saved;;
;;;;;;;;;;;;;;;Via MiniFIX send 35=R;#1;35=Z is recieved right after recieving 35=S;;
QAP-T2391;Check ForwarPoints on Dealer Intervention Swap TOD/TOM;Specified;;;/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, SWED;;;PFX-4217;;QAP-7664;PFX;Send Swap Request from miniFIX TOD/TOM with qty greater than treshold;;Request sent and appear in DI window;;
;;;;;;;;;;;;;;;Assing request to self;;Request assigned;;
;;;;;;;;;;;;;;;Estimate request;;Check location for FarLeg Forward Points, they shoud be swapped;;
QAP-T2392;RFQ_MM: Reject NDS RFQ containing tags 38, 192;Automated;;"*35=R*
{code:java}
8=FIXT.1.1|9=262|35=R|34=1084|49=QUOD9|52=20220504-09:49:25.365|56=QUODFX_UAT|131=579955062|146=1|55=USD/PHP|167=FXNDS|54=1|38=1000000|15=USD|1=Iridium1|555=2|600=USD/PHP|609=FXSPOT|624=2|685=1000000|587=0|588=20220505|600=USD/PHP|609=FXNDF|624=1|685=1000000|587=W1|588=20220512|10=246|
{code}
*Mapping*
{code:java}
2022-05-04 09:49:25.364992218 QUOD.QS_RFQ_FIX_TH2 [27147] INFO  quickfixgtw 
(Processor.cpp:98) - Mapped fix message fix QuoteRequest={ 
AuthenticationBlock={ UserID=""gtwquod9"" RoleID=FIXClient 
SessionKey=1651652304000059049 } QuoteRequestBlock={ QuoteReqList={ 
QuoteReqBlock=[ { InstrumentBlock={ InstrSymbol=""USD/PHP"" 
ProductType=CURRENCY InstrType=FXNDS } QuoteReqInstrumentLegList={ 
QuoteReqInstrumentLegBlock=#2:[ 1:{ InstrumentLegBlock={ 
LegInstrSymbol=""USD/PHP"" LegSymbol=""USD/PHP"" LegProductType=CURRENCY 
LegInstrType=FXSpot LegSide=Sell LegTenor=Spot } 
LegOrderQty=1000000.000000000 LegSettlType=Regular LegSettlDate=2022-May-05 
} 2:{ InstrumentLegBlock={ LegInstrSymbol=""USD/PHP"" LegSymbol=""USD/PHP"" 
LegProductType=CURRENCY LegInstrType=FXNDF LegSide=Buy LegTenor=W1 } 
LegOrderQty=1000000.000000000 LegSettlType=W1 LegSettlDate=2022-May-12 } ] 
} Side=Buy Currency=""USD"" OrdQty=1000000.000000000 
ClientAccountGroupID=""Iridium1"" } ] } ClientQuoteReqID=""579955062"" } }
{code}
*QuoteRequestReject*
{code:java}
2022-05-04 09:49:25.727532274 QUOD.QS_RFQ_FIX_TH2 [27150] INFO  quickfixgtw 
(Processor.h:120) - message: fix QuoteRequestReject={ 
QuoteRequestRejectBlock={ QuoteReqRejectList={ QuoteReqRejectBlock=[ { 
InstrumentBlock={ SecurityAltIDList={ SecurityAltIDBlock=[ { 
SecurityAltID=""USD/PHP"" SecurityAltIDSource=ExchSymb } ] } InstrDescList={ 
InstrDescBlock=[ { LangCD=""en-US"" InstrLookupSymbol=""USD/PHP.NDS"" } ] } 
InstrSymbol=""USD/PHP"" Symbol=""USD/PHP--QUODFX"" LookupSymbol=""USD/PHP.NDS"" 
SecurityID=""USD/PHP"" SecurityIDSource=ExchSymb ProductType=CURRENCY 
InstrType=FXNDS SecurityExchange=""XQFX"" BaseCurrency=""USD"" 
QuoteCurrency=""PHP"" LargeNumberPxPrecision=2 PxPrecision=4 } 
QuoteReqRejectInstrumentLegList={ QuoteReqRejectInstrumentLegBlock=#2:[ 1:{ 
InstrumentLegBlock={ LegInstrID=""eswwBFsty1Ii--Nm9Y98Kw"" 
LegInstrSymbol=""USD/PHP"" LegInstrType=FXSpot LegTenor=Spot } 
LegOrderQty=1000000.000000000 LegSettlType=Regular LegSettlDate=2022-May-05 
} 2:{ InstrumentLegBlock={ LegInstrID=""CHFovVEArRCiuM8yH8DHEA"" 
LegInstrSymbol=""USD/PHP"" LegInstrType=FXNDF LegMaturityDate=2022-May-11 
LegTenor=W1 } LegOrderQty=1000000.000000000 LegSettlType=W1 
LegSettlDate=2022-May-12 } ] } QuoteType=Tradeable Side=Buy 
OrdQty=1000000.000000000 Currency=""USD"" } ] } ClientQuoteReqID=""579955062"" 
QuoteRequestRejReason=Other FreeNotes=""11609 'InstrType': NDS error: 
'OrdQty' present"" } }
{code}
{code:java}
8=FIXT.1.1|9=185|35=AG|34=1084|49=QUODFX_UAT|52=20220504-09:49:25.728|56=QUOD9|1128=9|58=11609 
'InstrType': NDS error: 'OrdQty' 
present|131=579955062|146=1|55=USD/PHP|167=FXNDS|537=1|54=1|15=USD|658=99|10=063|
{code}
 ";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-4474;;QAP-7657;PFX;"Send NDS RFQ on tenors Spot/1W
wiht tag 38(OrdQty)";35=R;Send FXS RFQ on tenors Spot/1W;;
;;;;;;;;;;;;;;;Request send and mapped;;Receive QuoteRequestReject;;
QAP-T2393;RFQ_MM: Reject FXS RFQ containing tags 38, 192;Automated;;"*35=R*
{code:java}
8=FIXT.1.1|9=263|35=R|34=1013|49=QUOD9|52=20220504-09:43:33.862|56=QUODFX_UAT|131=064944375|146=1|55=EUR/USD|167=FXSWAP|54=1|38=1000000|15=EUR|1=Iridium1|555=2|600=EUR/USD|609=FXSPOT|624=2|685=1000000|587=0|588=20220506|600=EUR/USD|609=FXFWD|624=1|685=1000000|587=W1|588=20220513|10=081|{code}

*Mapping*
{code:java}
2022-05-04 09:43:34.046499353 QUOD.QS_RFQ_FIX_TH2 [27147] INFO  quickfixgtw 
(Processor.cpp:98) - Mapped fix message fix QuoteRequest={ 
AuthenticationBlock={ UserID=""gtwquod9"" RoleID=FIXClient 
SessionKey=1651652304000059049 } QuoteRequestBlock={ QuoteReqList={ 
QuoteReqBlock=[ { InstrumentBlock={ InstrSymbol=""EUR/USD"" 
ProductType=CURRENCY InstrType=FXSwap } QuoteReqInstrumentLegList={ 
QuoteReqInstrumentLegBlock=#2:[ 1:{ InstrumentLegBlock={ 
LegInstrSymbol=""EUR/USD"" LegSymbol=""EUR/USD"" LegProductType=CURRENCY 
LegInstrType=FXSpot LegSide=Sell LegTenor=Spot } 
LegOrderQty=1000000.000000000 LegSettlType=Regular LegSettlDate=2022-May-06 
} 2:{ InstrumentLegBlock={ LegInstrSymbol=""EUR/USD"" LegSymbol=""EUR/USD"" 
LegProductType=CURRENCY LegInstrType=FXForward LegSide=Buy LegTenor=W1 } 
LegOrderQty=1000000.000000000 LegSettlType=W1 LegSettlDate=2022-May-13 } ] 
} Side=Buy Currency=""EUR"" OrdQty=1000000.000000000 
ClientAccountGroupID=""Iridium1"" } ] } ClientQuoteReqID=""064944375"" } } 
{code}

*QuoteRequestReject*
{code:java}
2022-05-04 09:43:34.990410408 QUOD.QS_RFQ_FIX_TH2 [27150] INFO  quickfixgtw 
(Processor.h:120) - message: fix QuoteRequestReject={ 
QuoteRequestRejectBlock={ QuoteReqRejectList={ QuoteReqRejectBlock=[ { 
InstrumentBlock={ SecurityAltIDList={ SecurityAltIDBlock=[ { 
SecurityAltID=""EUR/USD"" SecurityAltIDSource=ExchSymb } ] } InstrDescList={ 
InstrDescBlock=[ { LangCD=""en-US"" InstrLookupSymbol=""EUR/USD.FXS"" } ] } 
InstrSymbol=""EUR/USD"" Symbol=""EUR/USD--QUODFX"" LookupSymbol=""EUR/USD.FXS"" 
SecurityID=""EUR/USD"" SecurityIDSource=ExchSymb ProductType=CURRENCY 
InstrType=FXSwap SecurityExchange=""XQFX"" BaseCurrency=""EUR"" 
QuoteCurrency=""USD"" LargeNumberPxPrecision=2 PxPrecision=4 } 
QuoteReqRejectInstrumentLegList={ QuoteReqRejectInstrumentLegBlock=#2:[ 1:{ 
InstrumentLegBlock={ LegInstrID=""KExUjnMCR-wK6DgQBZpg8g"" 
LegInstrSymbol=""EUR/USD"" LegInstrType=FXSpot LegTenor=Spot } 
LegOrderQty=1000000.000000000 LegSettlType=Regular LegSettlDate=2022-May-06 
} 2:{ InstrumentLegBlock={ LegInstrID=""us5tb5Ml30c-YAQOXVpmvA"" 
LegInstrSymbol=""EUR/USD"" LegInstrType=FXForward LegTenor=W1 } 
LegOrderQty=1000000.000000000 LegSettlType=W1 LegSettlDate=2022-May-13 } ] 
} QuoteType=Tradeable Side=Buy OrdQty=1000000.000000000 Currency=""EUR"" } ] 
} ClientQuoteReqID=""064944375"" QuoteRequestRejReason=Other FreeNotes=""11609 
'InstrType': FXS error: 'OrdQty' present"" } } {code}
{code:java}
8=FIXT.1.1|9=186|35=AG|34=1013|49=QUODFX_UAT|52=20220504-09:43:34.991|56=QUOD9|1128=9|58=11609 
'InstrType': FXS error: 'OrdQty' 
present|131=064944375|146=1|55=EUR/USD|167=FXSWAP|537=1|54=1|15=EUR|658=99|10=148|
{code}
 ";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-4474;;QAP-7656;PFX;Send FXS RFQ on tenors Spot/1W with tag 38(OrdQty);35=R;Check received messege;;
;;;;;;;;;;;;;;;Request send and mapped;;Receive QuoteRequestReject;;
QAP-T2394;Auto-Hedger, checking that Gating Rules are applied to hedged order (Internal);Specified;;"As requested in PFX-1579 Gating Rules should be applied to hedged orders. 
This test-case checking that Gating Rules are applied in case of External 
hedged order.
*Preconditions:*
You should have configured auto-hedger (internal) to perform this test:

!image-2022-04-27-17-32-03-070.png|thumbnail!

Also, GatingRules should be enabled in ORS configs
{code:java}

true

{code}";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, UAQA;;;PFX-1579;;QAP-7558;PFX;Configure Gating Rules to have 3 criteria;;Changes saved and applied, no errors;;
;;;;;;;;;;;;;;;Form FEWebAdmin set up the new Gating Rule.;See attachments to the step;Rule saved, no errors;;
;;;;;;;;;;;;;;;"After gating rule is created send several orders from FE Trading or FIX to 
trigger the auto-hedger.";"CLIENT1
EUR/USD
3000000";Hedged order created;;
;;;;;;;;;;;;;;;Check that Gating Rule was applied;;Order ExecPolicy wasn't changed;;
;;;;;;;;;;;;;;;Disable created rule via WebAdmin;;Rule disabled successfully;;
QAP-T2395;Cancel All Quotes When Venue Is Not Pricing;Automated;;"{color:#403294}_*#1*_{color}
{code:java}
2022-04-27 14:09:08.054856690 QUOD.QSFE [25676] INFO  cache 
(RecordCache.cpp:337) - updated ClientTierSymbVenue={ ClientTierID=4 
InstrSymbol=""EUR/PHP"" VenueID=""CITI"" Alive=Alive ExcludeWhenUnhealthy=Yes, 
revision 1 } on cache notification
2022-04-27 14:09:08.054866413 QUOD.QSFE [25676] DEBUG quoting 
(MarketManager.cpp:884) - external book update for EUR/PHP (4)
2022-04-27 14:09:08.054886547 QUOD.QSFE [25676] DEBUG quoting 
(MarketManager.cpp:886) - clearing book {code}
_{color:#403294}*#2*{color}_
{code:java}
2022-04-27 14:41:10.086016183 QUOD.QSFE [25676] INFO  ultramessaging 
(Writer.cpp:260) - sent 308-byte UM message 
{MessageType=""Market_MarketDataRequest"" 
MarketDataRequestBlock={MDReqID=""160~QSFE.quod314@luna:23619"" 
MDSource=""TEST"" MDSymbolList={0={FeedType=""D"" ListingID=100000260 
MDSymbol=""EUR/CAD:SPO:REG:CITI"" SubscriptionRequestType=""UNS""}}} qseq=35265 
sent=2022-Apr-27 14:41:10.085889} #268 on subject `QUOD.TEST.SUB', using UM 
lbtrm session mktDataCA
2022-04-27 14:41:10.086176753 QUOD.QSFE [25676] DEBUG marketdata 
(Recorder.cpp:1514) - record 0xc837440 removed from cache
2022-04-27 14:41:10.086180361 QUOD.QSFE [25676] INFO  marketdata 
(Recorder.cpp:1521) - pending disposal of record 0xc837440
2022-04-27 14:41:10.086302795 QUOD.QSFE [25676] DEBUG marketdata 
(Subscription.cpp:24) - destroying subscription
2022-04-27 14:41:10.086336041 QUOD.QSFE [25676] DEBUG quoting 
(MarketManager.cpp:686) - clearing book for EUR/CAD and tier 4
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-2053;;QAP-7556;PFX;Prepare an instrument with one Venue;;Instrument is prepared;;
;;;;;;;;;;;;;;;Open Client Pricing ESP tile with the prepared instrument on FETrading;;Prices are shown;;
;;;;;;;;;;;;;;;Make the Venue Unhealthy on purpose;#1;"Prices are disappeared; logs contain ""clearing book"" message";;
;;;;;;;;;;;;;;;Make the Venue healthy again;;Prices are present on FETrading;;
;;;;;;;;;;;;;;;Delete Venue from the instrument;#2;"Prices are disappeared; logs contain ""clearing book"" message";;
QAP-T2396;Auto-Hedger, checking that Gating Rules are applied to hedged order (External);Specified;;"As requested in PFX-1579 Gating Rules should be applied to hedged orders. 
This test-case checking that Gating Rules are applied in case of External 
hedged order.
*Preconditions:*
You should have configured auto-hedger (external) to perform this test:

!image-2022-04-27-16-36-25-918.png|thumbnail!

Also, GatingRules should be enabled in ORS configs
{code:java}

true

{code}";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, UAQA;;;PFX-1579;;QAP-7554;PFX;Configure Gating Rules to have 3 criteria;;Changes saved and applied, no errors;;
;;;;;;;;;;;;;;;Form FEWebAdmin set up the new Gating Rule.;See attachments to the step;Rule saved, no errors;;
;;;;;;;;;;;;;;;"After gating rule is created send several orders from FE Trading or FIX to 
trigger the auto-hedger.";"Osmium1
EUR/USD
3000000";Hedged order created;;
;;;;;;;;;;;;;;;Check that Gating Rule was applied;;"The strategy changed from 'test' to 'Hedging_Test' also you can see in the 
order book what rule and condition were triggered";;
;;;;;;;;;;;;;;;Disable created rule via WebAdmin;;Rule disabled successfully;;
QAP-T2397;Quoting server should work after FH's restarting;Manual;;;/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-4299;;QAP-7471;PFX;Open ESP taker and ESP maker tiles;;prices are displayed;;
;;;;;;;;;;;;;;;Restart FXFH and wait till FXFH is up;;"Prices are diapered on all tiles,
after FXFH is UP prices must appear on taker and MAKER tiles";;
QAP-T2398;Price Cleansing: Crossed Venue Rates (Taker ESP-Forward);Specified;;"*{color:#0747A6}#1{color}*
{code:java}
2022-04-14 19:07:58.340789913 QUOD.FXFH [27906] INFO qfQuod_any_broker_buy 
(QuickfixQuodLog.h:67) - QUICKFIX: FIXT.1.1:MARKETDATA->TEST: incoming: 
8=FIXT.1.1|9=250|35=W|34=1131|49=TEST|52=20220414-19:07:58.336|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:HSBC_2|268=2|269=0|270=1.18599|271=2000000|273=20220414|290=1|64=20220418|1070=1|269=1|270=1.1881|271=2000000|273=20220414|290=1|64=20220418|1070=1|10=076|

{code}
*{color:#0747A6}#2{color}*
!screenshot-1.png|thumbnail!
*{color:#0747A6}#3{color}*

{code:java}
2022-04-14 19:12:52.339212335 QUOD.FXFH [27906] INFO qfQuod_any_broker_buy 
(QuickfixQuodLog.h:67) - QUICKFIX: FIXT.1.1:MARKETDATA->TEST: incoming: 
8=FIXT.1.1|9=250|35=W|34=1141|49=TEST|52=20220414-19:12:52.336|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:HSBC_2|268=2|269=0|270=1.19599|271=2000000|273=20220414|290=1|64=20220418|1070=1|269=1|270=1.1881|271=2000000|273=20220414|290=1|64=20220418|1070=1|10=068|

{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FX_fix, FXregression;;;PFX-1208;;QAP-7392;PFX;From MiniFix send MD;#1;"MD is sent.
MD is appeared on FE";;
;;;;;;;;;;;;;;;via RestApi create a rule;#2;Rule is created;;
;;;;;;;;;;;;;;;From buy side send crossed Market Data (where Bid price > Ask price );#3;Check that Tile is empty;;
;;;;;;;;;;;;;;;subscribe to same instrument and venue but another tenor (EUR/USD-1W-HSCB);;client receive MD with prices. Rule has no impact at this listing;;
;;;;;;;;;;;;;;;"via Rest Api delete rule or change ""Remove Detected Price Updates"" to OFF 
and Send correct MD to not fail others auto test cases";;;;
QAP-T2399;Price Cleansing: Crossed Venue Rates (MakerESP);Specified;;"*{color:#0747A6}#1{color}*

{code:java}
> 
8=FIXT.1.1|9=551|35=W|34=9|49=QUODFX_UAT|52=20220414-19:46:56.836|56=QUOD3|1128=9|55=EUR/USD|262=1111222263|268=2|269=0|278=4_EUR/USD_20220414T194656825431462_Bid1|270=1.18599|271=3000000|272=20220414|273=19:46:54|299=4_EUR/USD_20220414T194656825431462_Bid1|290=1|1024=1|63=0|64=20220418|1070=1|269=1|278=4_EUR/USD_20220414T194656825431462_Ask1|270=1.1881|271=3000000|272=20220414|273=19:46:54|299=4_EUR/USD_20220414T194656825431462_Ask1|290=1|1024=1|63=0|64=20220418|1070=1|779=20220414-19:46:56.825|11501=20220414-19:46:16.171|11502=20220414-19:46:16.170|11503=HSBC|10=200|

{code}
*{color:#0747A6}#2{color}*
{code:java}
2022-04-14 19:39:50.747528053 QUOD.FXFH [27906] INFO qfQuod_any_broker_buy 
(QuickfixQuodLog.h:67) - QUICKFIX: FIXT.1.1:MARKETDATA->TEST: incoming: 
8=FIXT.1.1|9=252|35=W|34=1197|49=TEST|52=20220414-19:39:50.746|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:HSBC_2|268=2|269=0|270=1.19599|271=10000000|273=20220414|290=1|64=20220418|1070=1|269=1|270=1.1881|271=10000000|273=20220414|290=1|64=20220418|1070=1|10=187|
{code}
*{color:#0747A6}#3{color}*
{code:java}
> 
8=FIXT.1.1|9=498|35=W|34=13|49=QUODFX_UAT|52=20220414-19:47:24.016|56=QUOD3|1128=9|55=EUR/USD|262=1111222263|268=2|269=0|278=4_20220418EUR/USD_20220414T194724015366837_Bid1|272=20220414|273=19:47:22|299=4_20220418EUR/USD_20220414T194724015366837_Bid1|290=1|1024=1|63=0|64=20220418|1070=1|269=1|278=4_20220418EUR/USD_20220414T194724015366837_Ask1|272=20220414|273=19:47:22|299=4_20220418EUR/USD_20220414T194724015366837_Ask1|290=1|1024=1|63=0|64=20220418|1070=1|779=20220414-19:47:24.015|11501=20220414-19:47:24.015|10=191|

{code}
*{color:#0747A6}#4{color}*

{code:java}

2022-04-14 19:50:02.733970481 QUOD.FXFH [27906] INFO qfQuod_any_broker_buy 
(QuickfixQuodLog.h:67) - QUICKFIX: FIXT.1.1:MARKETDATA->TEST: incoming: 
8=FIXT.1.1|9=252|35=W|34=1220|49=TEST|52=20220414-19:50:02.732|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:HSBC_2|268=2|269=0|270=1.18599|271=10000000|273=20220414|290=1|64=20220418|1070=1|269=1|270=1.1881|271=10000000|273=20220414|290=1|64=20220418|1070=1|10=158|

{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FX_fix, FXregression;;;PFX-1208;;QAP-7391;PFX;Having client tier with one attached venue (HSBC, EUR/USD/Spot) send 35=V;#1;receive MD for that tier;;
;;;;;;;;;;;;;;;"via RestAPI create or activate CrossedVenueRules for current listing and 
send crossed MD";"#2
#3";"MD is cleared from maker tile.
Client receive an update with empty MD";;
;;;;;;;;;;;;;;;from buy send correct update;#4;maker client receive new update with prices;;
;;;;;;;;;;;;;;;"Delete or inactive rule and send correct MD to avoid failure with next auto 
test";;;;
QAP-T2400;Unexecutable Prices Due to Spot Tenor Book (Pricing/Executable);Manual;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-4070;;QAP-7304;PFX;Open 2 EUR/USD tiles (for example) with tenors Spot and 1W;;Prices displayed on the tiles;;
;;;;;;;;;;;;;;;"Set Pricing to OFF for SPOT and hover the mouse on the spot and forward 
bands";;"A tool tip
""Pricing OFF Due to Spot Tenor Book"" popped up for each band of both tiles";;
;;;;;;;;;;;;;;;"Set Executable to OFF for SPOT tenor and hover mouse on the spot and 
forward bands";;"A tool tip
""Pricing OFF Due to Spot Tenor Book"" popped up for each band of both tiles";;
;;;;;;;;;;;;;;;Turn Pricing to ON and hover the mouse on the spot and forward bands;;"A tool tip
""Executable OFF Due to Spot Tenor Book"" popped up for each band of both 
tiles";;
;;;;;;;;;;;;;;;Turn Executable to On;;Bands got regular state in both tiles;;
QAP-T2401;Check subscription for tenor TOD when one of currencies is holiday FE;Specified;;"*Configs for ClientTier on WebAdmin*

!image-2022-04-04-15-39-15-805.png|width=564,height=163!

*Holiday*
*!image-2022-04-04-15-39-51-307.png|width=561,height=114!*

*CurrencyEnum*

*!image-2022-04-04-15-40-32-163.png|width=606,height=88!*";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-4147;;QAP-7296;PFX;Set configs from description;1;Values sucsessfully saved and inserted in DB ClientTier table;;
;;;;;;;;;;;;;;;"Open FE=> ClientPricintTile=>
RatesTile";Select Client tier with tenor TODAY;"Rates Tile opened, Executable OFF for all instruments with tenor TODAY on 
selected client tier";;
;;;;;;;;;;;;;;;Set today date as holyday and add this holiday to Currency;"holidayid = 100500
currency = SEK";Value saved;;
;;;;;;;;;;;;;;;"Open FE=> ClientPricingTile=>
Rates tile";"EUR/SEK- TODAY
GBP/USD- TODAY";"EUR/SEK have Executable OFF
because SEK have holiday today
GBP/USD have Executablo ON";;
QAP-T2402;Check RFQ for tenor TOD when its invalid on behalf of client;Specified;;"*Configs for ClientTier on WebAdmin*

*1)*
!image-2022-04-04-14-25-38-742.png|width=707,height=199!

*2)*
*!image-2022-04-04-14-32-08-364.png|width=708,height=197!*

*3)*
*!image-2022-04-04-14-32-52-406.png|width=710,height=205!*";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-4147;;QAP-7292;PFX;Set configs for ClientTier form descr;1);Configs savad;;
;;;;;;;;;;;;;;;Open FE=> ClientRatesTile=>Client RFQ tile;;Client RFQ tile opened;;
;;;;;;;;;;;;;;;Send RFQ on tenor TODAY on some instruments;;Quote requsets was rejected;;
;;;;;;;;;;;;;;;Set configs for ClientTier form descr;2) 3);Configs savad;;
;;;;;;;;;;;;;;;Send RFQ on configured instrument and onother instrument;"GBP/USD-TODAY
EUR/USD-TODAY";"GBP/USD-TODAY was configured and RFQ rejected
EUR/USD-TODAY - receive quote";;
QAP-T2403;Check subscription for tenor TOD when its invalid on FE;Specified;;"*Configs for ClientTier on WebAdmin*

*1)*

*!image-2022-04-04-13-06-58-569.png|width=744,height=208!*

*2)*

*!image-2022-04-04-13-20-10-161.png|width=760,height=222!*

*3)*

*!image-2022-04-04-13-20-56-835.png|width=767,height=222!*";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-4147;;QAP-7290;PFX;Set configs from description;1;Values sucsessfully saved and inserted in DB ClientTier table;;
;;;;;;;;;;;;;;;"Open FE=> ClientPricintTile=>
RatesTile";Select Client tier with tenor TODAY;"Rates Tile opened, Executable OFF for all instruments with tenor TODAY on 
selected client tier";;
;;;;;;;;;;;;;;;Set configs from desc;2) and 3);Values sucsessfully saved and inserted in DB;;
;;;;;;;;;;;;;;;"Open FE=> ClientPricintTile=>
RatesTile";"Silver - GBP/USD-TODAY
Silver - EUR/USD-TODAY";"Rates Tile opened, Executable OFF for GBP/USD
EUR/USD Executable ON";;
QAP-T2404;Check RFQ for tenor TOD when its invalid (ClientTierInstSymbol Settings);Automated;;"*Configs for ClientTier on WebAdmin*
!image-2022-04-04-12-28-02-101.png|width=752,height=207!

*Configs for ClientTier InstrSymbol*

!image-2022-04-04-12-29-06-694.png|width=750,height=207!

*35=R*
{code:java}
8=FIXT.1.1|9=163|35=R|34=223|49=QUOD9|52=20220404-09:11:13.022|56=QUODFX_UAT|131=679393206|146=1|55=GBP/USD|167=FXFWD|537=1|54=1|38=1000000|40=D|63=1|64=20220404|15=GBP|1=Iridium1|10=212|{code}
*Mapping*
{code:java}
Mapped fix message fix QuoteRequest={ AuthenticationBlock={ 
UserID=""gtwquod9"" RoleID=FIXClient SessionKey=1649062286000048838 } 
QuoteRequestBlock={ QuoteReqList={ QuoteReqBlock=[ { InstrumentBlock={ 
InstrSymbol=""GBP/USD"" ProductType=CURRENCY InstrType=FXForward Tenor=Cash } 
QuoteType=Tradeable Side=Buy SettlType=Cash SettlDate=2022-Apr-04 
Currency=""GBP"" OrdType=PreviouslyQuoted OrdQty=1000000.000000000 
ClientAccountGroupID=""Iridium1"" } ] } ClientQuoteReqID=""679393206"" } }
{code}
*QuoteRequestReject*
{code:java}
fix QuoteRequestReject={ QuoteRequestRejectBlock={ QuoteReqRejectList={ 
QuoteReqRejectBlock=[ { InstrumentBlock={ SecurityAltIDList={ 
SecurityAltIDBlock=[ { SecurityAltID=""GBP/USD"" SecurityAltIDSource=ExchSymb 
} ] } InstrDescList={ InstrDescBlock=[ { LangCD=""en-US"" 
InstrLookupSymbol=""GBP/USD-CAS.FXF"" } ] } InstrSymbol=""GBP/USD"" 
Symbol=""GBP/USD"" LookupSymbol=""GBP/USD-CAS.FXF"" SecurityID=""GBP/USD"" 
SecurityIDSource=ExchSymb ProductType=CURRENCY InstrType=FXForward 
SecurityExchange=""XQFX"" Tenor=Cash BaseCurrency=""GBP"" QuoteCurrency=""USD"" 
LargeNumberPxPrecision=2 PxPrecision=4 InstrSettlDate=""20220404"" } 
QuoteType=Tradeable Side=Buy OrdQty=1000000.000000000 SettlType=Cash 
SettlDate=2022-Apr-04 Currency=""GBP"" OrdType=PreviouslyQuoted } ] } 
ClientQuoteReqID=""679393206"" QuoteRequestRejReason=Other FreeNotes=""11900 
Validation failed: current time (11:11:13.041185133) > end time 
(08:10:44.065000000)"" } }{code}
{code:java}
 8=FIXT.1.1|9=250|35=AG|34=226|49=QUODFX_UAT|52=20220404-09:11:13.047|56=QUOD9|1128=9|58=11900 
Validation failed: current time (11:11:13.041185133) > end time 
(08:10:44.065000000)|131=679393206|146=1|55=GBP/USD|167=FXFWD|537=1|54=1|63=1|64=20220404|15=GBP|40=D|658=99|10=068|{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-4147;;QAP-7287;PFX;Set configs for ClientTier form descr;;Configs savad;;
;;;;;;;;;;;;;;;Set configs for ClientTier Instrument form descr;;Configs savad;;
;;;;;;;;;;;;;;;Send RFQ on tenor TOD to configured ClientTier;35=R;Requset send and mapped;;
;;;;;;;;;;;;;;;Check received messege;;Receive QuoteRequestReject;;
QAP-T2405;Synthetic currency Forward : Reasons For Unexecutable Prices;Manual;;"Prepare cross currency (for example NOK/SEK) and attached NO venues to 
Forward Tab";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-4070, PFX-4516;;QAP-7284;PFX;Open ClientPricing Tile with NOK/SEK 1W;;"1. Hover a mouse on the Px empty column -> ""Unavailable Due To Forward 
Market Data"" tooltip must be appeared in the tile
2. Only Base and Band column are displayed, others are empty";;
QAP-T2406;QS: Calculation of sweepable bands with QuoteBook venue;Automated;;"Prepare ClientTier with QuoteBook venue (EBS-CITI or DB)

{code:java}
2022-04-04 10:41:10.541649987 QUOD.FXFH_Q [29988] INFO 
qfQuod_any_broker_buy (QuickfixQuodLog.h:67) - QUICKFIX: 
FIXT.1.1:MARKETDATA->TEST_Q: incoming: 
8=FIXT.1.1|9=395|35=W|34=253|49=TEST_Q|52=20220404-10:41:10.540|56=MARKETDATA|55=EUR/GBP|167=FXSPOT|262=EUR/GBP:SPO:REG:EBS-CITI_31|268=4|269=0|270=1.18137|271=3000000|273=20220404|290=1|64=20220406|1070=1|269=1|270=1.18164|271=3000000|273=20220404|290=1|64=20220406|1070=1|269=0|270=1.18126|271=10000000|273=20220404|290=2|64=20220406|1070=1|269=1|270=1.18177|271=10000000|273=20220404|290=2|64=20220406|1070=1|10=008|
{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FX_fix, FXregression;;;PFX-3885;;QAP-7279;PFX;"From BuySide send a MD to EBS-CITI venue with 2 bands:
3, 10";"#1
+attachments

For TH2 take Silver EUR/GBP-Spot EBS-CITI";MD is sent;;
;;;;;;;;;;;;;;;"On the client tier must be 2 bands: 1, 3
Subscribe Silver, EUR/USD, Spot";+attachments;"Check that price is the same as on the screenshot
Sell 1M = 1.18136 Buy 1M = 1.18165
Sell 3M = 1.18126 Buy 3M = 1.18177";;
;;;;;;;;;;;;;;;;unsubscribe after test;;;
QAP-T2407;MDA Instance added to Pre-Subscription functionality;Manual;;"Prepare *presubscribedlisting* table in DataBase
For example I added one listing 1209856633
!screenshot-1.png|thumbnail!
*1209856633* *=* *AUD/CZK-WK1.FXF*

{color:#0747A6}*#1*{color}

{code:java}
QUOD.UMDRO
QUOD.UMSRS
QUOD.TSMQ
QUOD.TSMU
QUOD.RDS
QUOD.AS
QUOD.AQS
QUOD.UMESTORE
QUOD.WTNS
{code}
*{color:#0747A6}#2{color}*
*true*
*true*
{code:java}

TEST_Q

false
false

0

true
true


{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-3699;;QAP-7270;PFX;Stop all components except only cores;#1;;;
;;;;;;;;;;;;;;;Then we need to start FXFH_Q and MDA_Q;"but before prepare MDA_Q configs
#2";"In MDA_Q and FXFH_Q logs check that MDA presubscribe to that listing 
1209856633

see comments";;
QAP-T2408;FETrading - Base FX RFQ Tile Venue Health On ESP Venue Health (ShortName venues does not match);Specified;;"+*Preconditions:*+
* In _WebAdmin => Reference Data => Venues_ select the same venues for 
Taker RFQ and Taker ESP, with different ShortName
* _Open FE => Aggregated Rates => Rates Tile_ and choose _Direct Venue 
Execution_ (RMC on tile)
* _Open RFQ Tile_
* Select _Exclude Unhealthy Venues_ in both tiles";/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;FXregression;;;PFX-3653, PFX-1380;;QAP-7263;PFX;Change the currency pair in both tiles;EUR/USD-Spot;Currency pair selected;;
;;;;;;;;;;;;;;;"In WebAdmin select the venue and check the checkbox ""Enable Metrics""";Venue - CITI;Checkbox must be OFF;;
;;;;;;;;;;;;;;;Check quotes venue CITI in Rates Tile and in RFQ TIle;;Quotes be visible;;
;;;;;;;;;;;;;;;"In WebAdmin select the venue and check the checkbox ""Enable Metrics""";;Checkbox must be ON;;
;;;;;;;;;;;;;;;Repeat step 3;;"Quotes in Rates Tile should not be displayed and be active
Quotes in RFQ TIle be visible";;
QAP-T2409;FETrading - Base FX RFQ Tile Venue Health On ESP Venue Health (ShortName venues matches);Specified;;"+*Preconditions:*+
* In _WebAdmin => Reference Data => Venues_ select the same venues for 
Taker RFQ and Taker ESP, with the same ShortName.
* _Open FE => Aggregated Rates => Rates Tile_ and choose _Direct Venue 
Execution_ (RMC on tile)
* _Open RFQ Tile_
* Select _Exclude Unhealthy Venues_ in both tiles";/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;FXregression;;;PFX-3653, PFX-1380;;QAP-7262;PFX;Change the currency pair in both tiles;EUR/USD-Spot;Currency pair selected;;
;;;;;;;;;;;;;;;"In WebAdmin select the venue and check the checkbox ""Enable Metrics""";Venue - JPM;Checkbox must be OFF;;
;;;;;;;;;;;;;;;Check quotes venue JPM in Rates Tile and in RFQ TIle;;Quotes be visible;;
;;;;;;;;;;;;;;;"In WebAdmin select the venue and check the checkbox ""Enable Metrics""";;Checkbox must be ON;;
;;;;;;;;;;;;;;;Repeat step 3;;Quotes in Rates Tile and in RFQ Tile should not be displayed and be active;;
QAP-T2410;Check RFQ for tenor TOD when its invalid (ClientTier Settings);Automated;;"*Configs for ClientTier on WebAdmin*
!image-2022-03-29-10-02-28-999.png|width=847,height=216!

 

*35=R*
{code:java}
8=FIXT.1.1|9=163|35=R|34=223|49=QUOD9|52=20220404-09:11:13.022|56=QUODFX_UAT|131=679393206|146=1|55=GBP/USD|167=FXFWD|537=1|54=1|38=1000000|40=D|63=1|64=20220404|15=GBP|1=Iridium1|10=212|{code}
*Mapping*
{code:java}
Mapped fix message fix QuoteRequest={ AuthenticationBlock={ 
UserID=""gtwquod9"" RoleID=FIXClient SessionKey=1649062286000048838 } 
QuoteRequestBlock={ QuoteReqList={ QuoteReqBlock=[ { InstrumentBlock={ 
InstrSymbol=""GBP/USD"" ProductType=CURRENCY InstrType=FXForward Tenor=Cash } 
QuoteType=Tradeable Side=Buy SettlType=Cash SettlDate=2022-Apr-04 
Currency=""GBP"" OrdType=PreviouslyQuoted OrdQty=1000000.000000000 
ClientAccountGroupID=""Iridium1"" } ] } ClientQuoteReqID=""679393206"" } }
{code}
*QuoteRequestReject*
{code:java}
fix QuoteRequestReject={ QuoteRequestRejectBlock={ QuoteReqRejectList={ 
QuoteReqRejectBlock=[ { InstrumentBlock={ SecurityAltIDList={ 
SecurityAltIDBlock=[ { SecurityAltID=""GBP/USD"" SecurityAltIDSource=ExchSymb 
} ] } InstrDescList={ InstrDescBlock=[ { LangCD=""en-US"" 
InstrLookupSymbol=""GBP/USD-CAS.FXF"" } ] } InstrSymbol=""GBP/USD"" 
Symbol=""GBP/USD"" LookupSymbol=""GBP/USD-CAS.FXF"" SecurityID=""GBP/USD"" 
SecurityIDSource=ExchSymb ProductType=CURRENCY InstrType=FXForward 
SecurityExchange=""XQFX"" Tenor=Cash BaseCurrency=""GBP"" QuoteCurrency=""USD"" 
LargeNumberPxPrecision=2 PxPrecision=4 InstrSettlDate=""20220404"" } 
QuoteType=Tradeable Side=Buy OrdQty=1000000.000000000 SettlType=Cash 
SettlDate=2022-Apr-04 Currency=""GBP"" OrdType=PreviouslyQuoted } ] } 
ClientQuoteReqID=""679393206"" QuoteRequestRejReason=Other FreeNotes=""11900 
Validation failed: current time (11:11:13.041185133) > end time 
(08:10:44.065000000)"" } }{code}
{code:java}
 8=FIXT.1.1|9=250|35=AG|34=226|49=QUODFX_UAT|52=20220404-09:11:13.047|56=QUOD9|1128=9|58=11900 
Validation failed: current time (11:11:13.041185133) > end time 
(08:10:44.065000000)|131=679393206|146=1|55=GBP/USD|167=FXFWD|537=1|54=1|63=1|64=20220404|15=GBP|40=D|658=99|10=068|{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-4147;;QAP-7168;PFX;Set configs for ClientTier form descr;;Configs savad;;
;;;;;;;;;;;;;;;Send RFQ on tenor TOD to configured ClientTier;35=R;Requset send and mapped;;
;;;;;;;;;;;;;;;Check received messege;;Receive QuoteRequestReject;;
QAP-T2411;Check subscription for tenor TOD when its invalid (ClientTierInstrumentSettings);Automated;;"*Configs for ClientTier on WebAdmin*
*!image-2022-03-29-09-17-29-467.png|width=919,height=184!*
*Configs for ClientTierInstrument on WebAdmin*
*!image-2022-03-29-09-18-00-565.png|width=923,height=201!*

 

35=V
{code:java}
8=FIXT.1.1|9=167|35=V|34=80|49=QUOD7|52=20220329-07:19:47.470|56=QUODFX_UAT|50=Silver1|262=1879687577|263=1|264=0|265=0|10050=0|146=1|55=GBP/USD|167=FXFWD|460=4|63=1|267=2|269=0|269=1|10=040|{code}
Mapping
{code:java}
Mapped fix message fix MarketDataRequest={ MarketDataRequestBlock={ 
MDReqList={ MDReqBlock=#2:[ 1:{ MDEntryType=Bid } 2:{ MDEntryType=Offer } ] 
} InstrumentMDReqList={ InstrumentMDReqBlock=[ { InstrumentBlock={ 
InstrSymbol=""GBP/USD"" ProductType=CURRENCY InstrType=FXForward Tenor=Cash } 
} ] } MDReqID=""1879687577"" SubscriptionRequestType=Subscribe 
MDUpdateType=FullRefresh ClientAccountGroupID=""Silver1"" BookType=PriceDepth 
} }{code}
35=W
{code:java}
8=FIXT.1.1|9=647|35=W|34=80|49=QUODFX_UAT|52=20220329-07:19:49.183|56=QUOD7|1128=9|55=GBP/USD|262=1879687577|268=2|269=0|278=8_GBP/USD_20220329T071948550335292_Bid1_1_20220329|270=1.18118|271=1000000|272=20220329|273=07:19:49|299=8_GBP/USD_20220329T071948550335292_Bid1_1_20220329|290=1|1024=1|63=1|64=20220329|1070=0|1026=1.18114|1027=0.00004|269=1|278=8_GBP/USD_20220329T071948550335292_Ask1_1_20220329|270=1.18201|271=1000000|272=20220329|273=07:19:49|299=8_GBP/USD_20220329T071948550335292_Ask1_1_20220329|290=1|1024=1|63=1|64=20220329|1070=0|1026=1.182|1027=0.00001|779=20220329-07:19:48.550|11501=20220329-07:13:16.292|11502=20220329-07:13:16.291|11503=HSBC|10=045|{code}
Mapping
{code:java}
sending to FIX plugin fix MarketDataSnapshotFullRefresh={ InstrumentBlock={ 
InstrSymbol=""GBP/USD"" ProductType=CURRENCY InstrType=FXForward Tenor=Cash } 
MarketDataFullList={ MarketDataFullBlock=#2:[ 1:{ MDEntryType=Bid 
MDEntryID=""8_GBP/USD_20220329T071948550335292_Bid1_1_20220329"" 
MDEntryPx=1.181180000 MDEntrySize=1000000.000000000 
MDEntryDateTime=2022-Mar-29 07:19:48.550335292 MDEntryPosition=1 
MDOriginType=Book SettlType=Cash SettlDate=2022-Mar-29 
QuoteEntryID=""8_GBP/USD_20220329T071948550335292_Bid1_1_20220329"" 
MDQuoteType=Indicative MDEntryPositionNo=1 MDEntryForwardPoints=0.000040000 
MDEntryMargin=0.000000000 MDEntrySpotRate=1.181140000 
MDEntryBaseSize=1000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181140000 UnavailablePriceState=ExecutableOff 
UnavailablePriceCause=ForwardMarketData } 2:{ MDEntryType=Offer 
MDEntryID=""8_GBP/USD_20220329T071948550335292_Ask1_1_20220329"" 
MDEntryPx=1.182010000 MDEntrySize=1000000.000000000 
MDEntryDateTime=2022-Mar-29 07:19:48.550335292 MDEntryPosition=1 
MDOriginType=Book SettlType=Cash SettlDate=2022-Mar-29 
QuoteEntryID=""8_GBP/USD_20220329T071948550335292_Ask1_1_20220329"" 
MDQuoteType=Indicative MDEntryPositionNo=1 MDEntryForwardPoints=0.000010000 
MDEntryMargin=0.000000000 MDEntrySpotRate=1.182000000 
MDEntryBaseSize=1000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.182000000 UnavailablePriceState=ExecutableOff 
UnavailablePriceCause=ForwardMarketData } ] } REC_STATUS=OK 
MDReqID=""1879687577"" MDTime=2022-Mar-29 07:19:49.074965630 
OrigMDTime=2022-Mar-29 07:13:16.292370000 OrigMDArrivalTime=2022-Mar-29 
07:13:16.291596000 OrigClientVenueID=""HSBC"" }{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-4147;;QAP-7167;PFX;Set configs from description for ClientTier;;Values sucsessfully saved and inserted in DB ClientTier table;;
;;;;;;;;;;;;;;;Set configs from description for ClientTierInstrument;;Values sucsessfully saved and inserted in DB ClientTierInstSymbol table;;
;;;;;;;;;;;;;;;Send MarketDataRequest on configured ClientTier with tenor Today;35=V;MD sent and maps correctly;;
;;;;;;;;;;;;;;;Check incoming MarketDataSnapshotFullRefresh;35=W;"MDQuoteType should be Indicative despite on that ClientTier should be 
active";;
QAP-T2412;"Cancel All Quotes when ""Pricing"" turned off for a given tier=>currency=>pair=>tenor";Automated;;" 

*{color:#403294}#1{color}*
{code:java}
< 
8=FIXT.1.1|9=141|35=R|49=QUOD5|56=QUODFX_UAT|34=3|52=20220526-10:07:39|131=1054069313|146=1|55=EUR/JPY|167=FXSPOT|537=1|54=2|38=1000000|63=0|15=EUR|1=CLIENT1|10=053| 
{code}
{color:#403294}*#2*{color}
{code:java}
> 
8=FIXT.1.1|9=253|35=S|34=4|49=QUODFX_UAT|52=20220526-10:07:50.770|56=QUOD5|1128=9|15=EUR|54=2|55=EUR/JPY|62=20220526-10:09:48.726|63=0|64=20220530|117=01220526100749400002|131=1054069313|132=123.69|134=1000000|167=FXSPOT|188=123.69|460=4|537=1|1166=01220526100749400002|10=252| 
{code}
{color:#403294}*#3*{color}
{code:java}
> 
8=FIXT.1.1|9=120|35=Z|34=7|49=QUODFX_UAT|52=20220526-10:08:56.599|56=QUOD5|1128=9|117=0|131=1054069313|295=1|55=EUR/JPY|167=FXSPOT|298=5|10=209| 
{code}
 ";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-2053;;QAP-7162;PFX;From Clıent Interface send 35=R;"#1
#2";Check that 35=S is sent to reply;;
;;;;;;;;;;;;;;;"via RestApi change Pricing for that tier=> currency => pair => tenor to 
PRICING OFF";#3;Quote must be canceled;;
QAP-T2413;Check subscription for tenor TOD when its invalid (ClientTierSettings);Automated;;"*Configs for ClientTier on WebAdmin*
!image-2022-03-28-18-21-24-401.png|width=708,height=185!

 

35=V
{code:java}
8=FIXT.1.1|9=168|35=V|34=789|49=QUOD7|52=20220328-16:05:28.131|56=QUODFX_UAT|50=CLIENT1|262=3253054188|263=1|264=0|265=0|10050=0|146=1|55=GBP/USD|167=FXFWD|460=4|63=1|267=2|269=0|269=1|10=140|{code}
Mapping
{code:java}
Mapped fix message fix MarketDataRequest={ MarketDataRequestBlock={ 
MDReqList={ MDReqBlock=#2:[ 1:{ MDEntryType=Bid } 2:{ MDEntryType=Offer } ] 
} InstrumentMDReqList={ InstrumentMDReqBlock=[ { InstrumentBlock={ 
InstrSymbol=""GBP/USD"" ProductType=CURRENCY InstrType=FXForward Tenor=Cash } 
} ] } MDReqID=""3253054188"" SubscriptionRequestType=Subscribe 
MDUpdateType=FullRefresh ClientAccountGroupID=""CLIENT1"" BookType=PriceDepth 
} }{code}
35=W
{code:java}
8=FIXT.1.1|9=653|35=W|34=792|49=QUODFX_UAT|52=20220328-16:05:28.670|56=QUOD7|1128=9|55=GBP/USD|262=3253054188|268=2|269=0|278=8_GBP/USD_20220328T160528157429630_Bid1_1_20220328|270=1.18132|271=1000000|272=20220328|273=16:05:28|299=8_GBP/USD_20220328T160528157429630_Bid1_1_20220328|290=1|1024=1|63=1|64=20220328|1070=0|1026=1.18128|1027=0.00004|269=1|278=8_GBP/USD_20220328T160528157429630_Ask1_1_20220328|270=1.18172|271=1000000|272=20220328|273=16:05:28|299=8_GBP/USD_20220328T160528157429630_Ask1_1_20220328|290=1|1024=1|63=1|64=20220328|1070=0|1026=1.18171|1027=0.00001|779=20220328-16:05:28.157|11501=20220328-12:19:55.280|11502=20220328-12:19:55.280|11503=CITI-ID|10=070|{code}
Mapping
{code:java}
sending to FIX plugin fix MarketDataSnapshotFullRefresh={ InstrumentBlock={ 
InstrSymbol=""GBP/USD"" ProductType=CURRENCY InstrType=FXForward Tenor=Cash } 
MarketDataFullList={ MarketDataFullBlock=#2:[ 1:{ MDEntryType=Bid 
MDEntryID=""8_GBP/USD_20220328T160528157429630_Bid1_1_20220328"" 
MDEntryPx=1.181320000 MDEntrySize=1000000.000000000 
MDEntryDateTime=2022-Mar-28 16:05:28.157429630 MDEntryPosition=1 
MDOriginType=Book SettlType=Cash SettlDate=2022-Mar-28 
QuoteEntryID=""8_GBP/USD_20220328T160528157429630_Bid1_1_20220328"" 
MDQuoteType=Indicative MDEntryPositionNo=1 MDEntryForwardPoints=0.000040000 
MDEntryMargin=0.000000000 MDEntrySpotRate=1.181280000 
MDEntryBaseSize=1000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181280000 UnavailablePriceState=ExecutableOff 
UnavailablePriceCause=ForwardMarketData } 2:{ MDEntryType=Offer 
MDEntryID=""8_GBP/USD_20220328T160528157429630_Ask1_1_20220328"" 
MDEntryPx=1.181720000 MDEntrySize=1000000.000000000 
MDEntryDateTime=2022-Mar-28 16:05:28.157429630 MDEntryPosition=1 
MDOriginType=Book SettlType=Cash SettlDate=2022-Mar-28 
QuoteEntryID=""8_GBP/USD_20220328T160528157429630_Ask1_1_20220328"" 
MDQuoteType=Indicative MDEntryPositionNo=1 MDEntryForwardPoints=0.000010000 
MDEntryMargin=0.000000000 MDEntrySpotRate=1.181710000 
MDEntryBaseSize=1000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181710000 UnavailablePriceState=ExecutableOff 
UnavailablePriceCause=ForwardMarketData } ] } REC_STATUS=OK 
MDReqID=""3253054188"" MDTime=2022-Mar-28 16:05:28.667807548 
ClientClientTierID=""Gold_Day"" OrigMDTime=2022-Mar-28 12:19:55.280656000 
OrigMDArrivalTime=2022-Mar-28 12:19:55.280574000 
OrigClientVenueID=""CITI-ID"" }{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-4147;;QAP-7160;PFX;Set configs from description;;Values sucsessfully saved and inserted in DB ClientTier table;;
;;;;;;;;;;;;;;;Send MarketDataRequest on configured ClientTier with tenor Today;35=V;MD sent and maps correctly;;
;;;;;;;;;;;;;;;Check incoming MarketDataSnapshotFullRefresh;35=W;MDQuoteType should be Indicative;;
QAP-T2414;Order Analysis Auto-Refresh on interval;Specified;;"*Precondition:*

Prepare *functional.config* :";/PFX/FX_Display;High - Must Have;FX_Display;FXregression;;;PFX-2511, PFX-2067;;QAP-7159;PFX;Configure functional.config;See description;Changes are saved;;
;;;;;;;;;;;;;;;Send an order that won't be filled immediately;"A buy order with a price lower then in the market
TIF = Day";Order Sts = Open;;
;;;;;;;;;;;;;;;Open Order Book and Order Analysis windows;;Windows are opened;;
;;;;;;;;;;;;;;;Pilot Order Analysis window by Order Book;;Windows are configured as expected;;
;;;;;;;;;;;;;;;"Left click on the order with Sts = ""Open"" and amend it";Change qty;"The order is displayed in the Order Analysis window, the order has new qty, 
Order Analysis window updates qty after a few moments";;
;;;;;;;;;;;;;;;Hold shift and pick several orders from the Order Book;;Every picked order has appeared in Order Analysis window;;
QAP-T2415;FETrading - RFQ tile TIF : Set TimeInForce=FOK instead of IOC;Automated;;"*{color:#DE350B}!!!!!!!no need to automate now because this is temporary 
solution and we wait for new solution from DEV!!!!!!!{color}*";/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;FXregression;;;PFX-4522, PFX-4529;;QAP-7138;PFX;Open FE Trading => RFQ Taker tile and send a request;;Request is sent, Quote is displayed in the tile;;
;;;;;;;;;;;;;;;Send an order;;"Order is sent.
Check:
OrdType = PreviouslyQuoted
TIF = FillOrKill";;
QAP-T2416;Checking that hedged order is sent to the Quoting Session that configured for ClientierInstrSymbol;Manual;;"This test validates that the hedged order is sent to correct QuotingSession 
if it is set for the instrument in the ClientTierInstrSymbol table in DB.

*Precondition:*
You should have at least two configured QuotingSession and configured auto 
hedger to perform this test.
TestQS (id=13) for example at the Luna314 site.";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression;;;PFX-4493;;QAP-7132;PFX;Sent several orders to trespass the configured limit for auto hedger;"EUR/USD CLIENT1
3000000";Hedged order sent and executed;;
;;;;;;;;;;;;;;;"In ORS.log check that executed order is sent to the DefaultQuotingSession 
that is set in the QuodSetting table.";See comment #1;Orders executed against default QuotingSession;;
;;;;;;;;;;;;;;;"In DB add QuotingSessionID that is not default QuotingSession to the 
ClientTierInstSymbol table. Save and restart ORS";;Value saved, no errors;;
;;;;;;;;;;;;;;;Sent several orders to trespass the configured limit for auto hedger;"EUR/USD CLIENT1
3000000";"Hedged order sent. Due to different QuotingSession, it might be not 
executed.";;
;;;;;;;;;;;;;;;"In ORS.log check that created order is sent to the MainQuotingSession that 
is set in the ClientTierInstrSymbol table.";See comment #2;Order sent to the QuodtingSession that configured for ClienttierInstrSymbol;;
;;;;;;;;;;;;;;;Remove MainQuotingSession from ClienttierInstrSymbol. Save and restart ORS;;Value is set to null, no errors;;
QAP-T2417;Check auto prising for swap when we have only 1M on SPOT without FWD pts;Automated;;"For this test, you need prepare Client Tier with following configuration

On SPOT you should have 1M band 

On FWD you should have 1M and 50M band

 

35=W for Spot
{code:java}
8=FIXT.1.1|9=250|35=W|34=778|49=TEST|52=20220324-11:29:45.844|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=GBP/USD:SPO:REG:HSBC_91|268=2|269=0|270=1.1815|271=1000000|273=20220324|290=1|64=20220328|1070=1|269=1|270=1.18151|271=1000000|273=20220324|290=1|64=20220328|1070=1|10=056|{code}
 

35=W for FWD without FWD points
{code:java}
8=FIXT.1.1|9=251|35=W|34=335|49=TEST|52=20220324-16:35:46.139|56=MARKETDATA|55=EUR/USD|167=FXFWD|262=GBP/USD:FXF:WK1:HSBC_66|268=2|269=0|270=1.1813|271=50000000|273=20220324|290=1|64=20220404|1070=1|269=1|270=1.18165|271=50000000|273=20220324|290=1|64=20220404|1070=1|10=019|
{code}
35=R
{code:java}
8=FIXT.1.1|9=266|35=R|34=1646|49=QUOD9|52=20220324-16:35:46.215|56=QUODFX_UAT|131=463107003|146=1|55=GBP/USD|167=FXSWAP|54=1|38=51000000|15=GBP|1=Iridium1|555=2|600=GBP/USD|609=FXSPOT|624=2|685=51000000|587=0|588=20220328|600=GBP/USD|609=FXFWD|624=1|685=51000000|587=W1|588=20220404|10=157|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-4497;;QAP-7130;PFX;Send MD for Spot and FWD from descr;See descr 35=W;MD sent and apply;;
;;;;;;;;;;;;;;;Send swap RFQ;See descr 35=R;RFQ sent and in QuoteRequestBook AutoQuiting = NO;;
QAP-T2418;Check auto prising for swap when we have only 1M on SPOT  FWD/FWD;Automated;;"For this test, you need prepare Client Tier with following configuration

On SPOT you should have 1M band 

On FWD you should have 1M and 50M band

 

35=W for Spot
{code:java}
8=FIXT.1.1|9=249|35=W|34=313|49=TEST|52=20220324-16:26:43.757|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=GBP/USD:SPO:REG:HSBC_4|268=2|269=0|270=1.1815|271=1000000|273=20220324|290=1|64=20220328|1070=1|269=1|270=1.18151|271=1000000|273=20220324|290=1|64=20220328|1070=1|10=254|
{code}
35=W for FWD with FWD points
{code:java}
8=FIXT.1.1|9=277|35=W|34=314|49=TEST|52=20220324-16:26:44.007|56=MARKETDATA|55=EUR/USD|167=FXFWD|262=GBP/USD:FXF:WK1:HSBC_66|268=2|269=0|270=1.1813|271=50000000|273=20220324|290=1|64=20220404|1070=1|1027=0.00003|269=1|270=1.18165|271=50000000|273=20220324|290=1|64=20220404|1070=1|1027=0.00004|10=195|
{code}
{code:java}
8=FIXT.1.1|9=277|35=W|34=315|49=TEST|52=20220324-16:26:44.230|56=MARKETDATA|55=EUR/USD|167=FXFWD|262=GBP/USD:FXF:WK2:HSBC_67|268=2|269=0|270=1.1813|271=50000000|273=20220324|290=1|64=20220411|1070=1|1027=0.00005|269=1|270=1.18165|271=50000000|273=20220324|290=1|64=20220411|1070=1|1027=0.00006|10=196|{code}
35=R
{code:java}
8=FIXT.1.1|9=266|35=R|34=1536|49=QUOD9|52=20220324-16:26:44.361|56=QUODFX_UAT|131=044093512|146=1|55=GBP/USD|167=FXSWAP|54=1|38=51000000|15=GBP|1=Iridium1|555=2|600=GBP/USD|609=FXFWD|624=2|685=51000000|587=W1|588=20220404|600=GBP/USD|609=FXFWD|624=1|685=51000000|587=W2|588=20220411|10=140|
{code}
35=S NEED TO RECHECK tags 134 and 135
{code:java}
8=FIXT.1.1|9=471|35=S|34=1559|49=QUODFX_UAT|52=20220324-16:26:44.423|56=QUOD9|1128=9|15=GBP|54=1|55=GBP/USD|62=20220324-16:28:44.381|117=01220324162644298002|131=044093512|133=0.00003|135=1|167=FXSWAP|188=1.18151|190=1.18151|460=4|537=1|555=2|600=GBP/USD|602=GBP/USD|603=8|616=XQFX|624=2|685=51000000|587=W1|588=20220404|681=1.18154|1067=0.00003|600=GBP/USD|602=GBP/USD|603=8|616=XQFX|624=1|685=51000000|587=W2|588=20220411|684=1.18157|1068=0.00006|1066=0.00003|1166=01220324162644298002|10=111| 
{code}
35=AB
{code:java}
8=FIXT.1.1|9=336|35=AB|34=1537|49=QUOD9|52=20220324-16:26:44.967|56=QUODFX_UAT|1=Iridium1|11=050853205|15=GBP|21=1|38=51000000|40=D|44=0.00003|54=1|55=GBP/USD|59=3|60=20220324-16:26:45.000|117=01220324162644298002|167=FXSWAP|555=2|600=GBP/USD|609=FXFWD|624=2|685=51000000|587=W1|588=20220404|600=GBP/USD|609=FXFWD|624=1|685=51000000|587=W2|588=20220411|10=180| 
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-4497, PFX-4654;;QAP-7129;PFX;Send MD for Spot and FWD from descr;See descr 35=W;MD sent and apply;;
;;;;;;;;;;;;;;;Send swap RFQ;See descr 35=R;RFQ sent and it autoquoting, receive quote;;
;;;;;;;;;;;;;;;Send NewOrderMultiLeg on received quote;See descr 35=AB;Order sent and filled;;
QAP-T2419;Check auto prising for swap when we have only 1M on SPOT - negatie;Automated;;"For this test, you need prepare Client Tier with following configuration

On SPOT you should have 1M band 

On FWD you should have 1M and 50M band

 

35=W for Spot
{code:java}
8=FIXT.1.1|9=250|35=W|34=778|49=TEST|52=20220324-11:29:45.844|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=GBP/USD:SPO:REG:HSBC_91|268=2|269=0|270=1.1815|271=1000000|273=20220324|290=1|64=20220328|1070=1|269=1|270=1.18151|271=1000000|273=20220324|290=1|64=20220328|1070=1|10=056|{code}
 

35=W for FWD with FWD points
{code:java}
8=FIXT.1.1|9=447|35=W|34=780|49=TEST|52=20220324-11:30:19.154|56=MARKETDATA|55=EUR/USD|167=FXFWD|262=GBP/USD:FXF:WK1:HSBC_821|268=4|269=0|270=1.1815|271=1000000|273=20220324|290=1|64=20220404|1070=1|1027=0.00001|269=1|270=1.18151|271=1000000|273=20220324|290=1|64=20220404|1070=1|1027=0.00001|269=0|270=1.1813|271=50000000|273=20220324|290=2|64=20220404|1070=1|1027=0.00002|269=1|270=1.18165|271=50000000|273=20220324|290=2|64=20220404|1070=1|1027=0.00002|10=142|{code}
35=R
{code:java}
8=FIXT.1.1|9=260|35=R|34=283|49=QUOD9|52=20220324-14:43:10.676|56=QUODFX_UAT|131=871764759|146=1|55=GBP/USD|167=FXSWAP|38=51000001|15=GBP|1=Iridium1|555=2|600=GBP/USD|609=FXFWD|624=2|685=51000001|587=W1|588=20220404|600=GBP/USD|609=FXFWD|624=1|685=51000001|587=W2|588=20220411|10=146|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-4497;;QAP-7126;PFX;Send MD for Spot and FWD from descr;See descr 35=W;MD sent and apply;;
;;;;;;;;;;;;;;;Send swap RFQ;See descr 35=R;"RFQ sent and in QuoteRequestBook
Autoquoting = NO";;
QAP-T2420;Check auto prising for swap when we have only 1M on SPOT;Automated;;"For this test, you need prepare Client Tier with following configuration

On SPOT you should have 1M band 

On FWD you should have 1M and 50M band

 

35=W for Spot
{code:java}
8=FIXT.1.1|9=250|35=W|34=778|49=TEST|52=20220324-11:29:45.844|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=GBP/USD:SPO:REG:HSBC_91|268=2|269=0|270=1.1815|271=1000000|273=20220324|290=1|64=20220328|1070=1|269=1|270=1.18151|271=1000000|273=20220324|290=1|64=20220328|1070=1|10=056|{code}
 

35=W for FWD with FWD points
{code:java}
8=FIXT.1.1|9=447|35=W|34=780|49=TEST|52=20220324-11:30:19.154|56=MARKETDATA|55=EUR/USD|167=FXFWD|262=GBP/USD:FXF:WK1:HSBC_821|268=4|269=0|270=1.1815|271=1000000|273=20220324|290=1|64=20220404|1070=1|1027=0.0000001|269=1|270=1.18151|271=1000000|273=20220324|290=1|64=20220404|1070=1|1027=0.00001|269=0|270=1.1813|271=50000000|273=20220324|290=2|64=20220404|1070=1|1027=0.00002|269=1|270=1.18165|271=50000000|273=20220324|290=2|64=20220404|1070=1|1027=0.0000002|10=142|{code}
35=R
{code:java}
8=FIXT.1.1|9=266|35=R|34=3993|49=QUOD9|52=20220324-12:24:32.187|56=QUODFX_UAT|131=723388937|146=1|55=GBP/USD|167=FXSWAP|54=1|38=51000000|15=GBP|1=Iridium1|555=2|600=GBP/USD|609=FXSPOT|624=2|685=51000000|587=0|588=20220328|600=GBP/USD|609=FXFWD|624=1|685=51000000|587=W1|588=20220404|10=184|{code}
35=S NEED TO RECHECK tags 134 and 135
{code:java}
8=FIXT.1.1|9=469|35=S|34=1376|49=QUODFX_UAT|52=20220324-16:11:42.378|56=QUOD9|1128=9|15=GBP|54=1|55=GBP/USD|62=20220324-16:13:42.348|117=01220324161142298002|131=024639031|133=0.00004|135=1|167=FXSWAP|188=1.18151|190=1.18151|460=4|537=1|555=2|600=GBP/USD|602=GBP/USD|603=8|616=XQFX|624=2|685=51000000|587=0|588=20220328|681=1.18151|684=1.18151|600=GBP/USD|602=GBP/USD|603=8|616=XQFX|624=1|685=51000000|587=W1|588=20220404|684=1.18155|1068=0.00004|1066=0.00004|1166=01220324161142298002|10=234|
{code}
35=AB
{code:java}
8=FIXT.1.1|9=336|35=AB|34=1355|49=QUOD9|52=20220324-16:11:42.976|56=QUODFX_UAT|1=Iridium1|11=030943419|15=GBP|21=1|38=51000000|40=D|44=0.00004|54=1|55=GBP/USD|59=3|60=20220324-16:11:43.000|117=01220324161142298002|167=FXSWAP|555=2|600=GBP/USD|609=FXSPOT|624=2|685=51000000|587=0|588=20220328|600=GBP/USD|609=FXFWD|624=1|685=51000000|587=W1|588=20220404|10=179|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-4497;;QAP-7125;PFX;Send MD for Spot and FWD from descr;See descr 35=W;MD sent and apply;;
;;;;;;;;;;;;;;;Send swap RFQ;See descr 35=R;RFQ sent and it autoquoting, receive quote;;
;;;;;;;;;;;;;;;Send NewOrderMultiLeg on received quote;See descr 35=AB;Order sent and filled;;
QAP-T2421;Order Analysis interface;Specified;;"*Precondition:*

Order Book should contain DMA, Algo and Care Orders";/PFX/FX_Display;High - Must Have;FX_Display;FXregression;;;PFX-1993, PFX-2337, PFX-2331;;QAP-7109;PFX;Create DMA, Algo and Care orders;;Orders are created;;
;;;;;;;;;;;;;;;Open Order Book;;Order Book is opened;;
;;;;;;;;;;;;;;;RMC on DMA order and click on Order Analysis;;Order Analysis window is opened;;
;;;;;;;;;;;;;;;Check that summary section and perfomance tab contain all required data;;"Summary section should contain Creation Time,
Side, Qty @ Price, Instrument Name,
Status and Filled Qty.
Perfomance tab should contain the Execution pie chart, hyper-linked text 
above the pie and columns ""Venue"", ""%Qty"", ""Quantity"", ""Executions"", ""Avg 
Qty"", ""Avg Px"" under it";;
;;;;;;;;;;;;;;;Open Events tab;;"Events tab has a list of events with columns ""TimeStamp"", ""Type"" and 
""Description""; only expansion of event type ""BestExecEvent"" is allowed";;
;;;;;;;;;;;;;;;Open Chart tab;;"Chart tab has ""Price"", ""Open qty"" and ""Executed qty"" panels opened";;
;;;;;;;;;;;;;;;Open Parameters tab;;"Parameters tab has ""Origin"" and ""Name"" rows; ""AlgoParameters"", ""Algo 
priorities"" and ""Positions"" tabs";;
;;;;;;;;;;;;;;;Repeat 3-7 steps for Algo and Care Orders;;Every type of orders should has the same interface with the DMA order;;
QAP-T2422;Order Analysis display for Child Orders;Specified;;"*Precondition:*

Order book should contain an order with at least one child order";/PFX/FX_Display;High - Must Have;FX_Display;FXregression;;;PFX-1993, PFX-2337, PFX-2067, PFX-2338;;QAP-7094;PFX;Open Order Book;;Order Book is opened;;
;;;;;;;;;;;;;;;"Open Order Analysis, pilot it with Order Book and pick an order with child 
orders";;Order Analysis window is opened, Order with Child Orders are in it;;
;;;;;;;;;;;;;;;Right click on the Order in the Order Analysis window;;Context menu has NOT appeared;;
;;;;;;;;;;;;;;;"Click ""plus"" button to open a list with Child Orders and check that the 
order has no ""Parameters"" tab available";;"""Parameters"" tab is not present";;
;;;;;;;;;;;;;;;"Open ""Events"" tab";;Different event types are available;;
QAP-T2423;Resubscribe correctly after a disconnection of FH (UI);Automated;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-4200;;QAP-7081;PFX;Open ESP MM tile;;All prices are published and priced;;
;;;;;;;;;;;;;;;Stop Feed Handler;;All Prices disappeared from ESP MM Tile;;
;;;;;;;;;;;;;;;Start FeedHandler;;All Prices appear on the ESP MM tile;;
QAP-T2424;Sorting of Tiered and Sweepable qty's  UI (Tenor Level);Specified;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-3704;;QAP-7079;PFX;Open WebAdmin => Client Tier and change some Instrument;EUR/USD;Changing window is opened;;
;;;;;;;;;;;;;;;There must be added some Sweepable and Tiered qty;"For example:
Sweepable: 1M and 4M
Tiered: 3M";;;
;;;;;;;;;;;;;;;"Change SPOT tenor and add QTY to the Sweepable section (TENOR LEVEL) in the 
following order:
8M -> 5M -> 3M
and save";;"Check that it displayed in the same order like:
8M -> 5M -> 3M";;
;;;;;;;;;;;;;;;"Change SPOT tenor and add QTY to the Tiered section (TENOR LEVEL) in the 
following order:
4M -> 2M -> 1M
and save";;"Check that it displayed in order like:
1M -> 2M -> 3M -> 4M";;
;;;;;;;;;;;;;;;"Go to TradingFE and Open Client Tier -> EUR/USD -> Tenor -> Sweepable 
section";;"Qty must be ordered the same as on the WebAdmin (All sweepable is above and 
tenor level is below)";;
;;;;;;;;;;;;;;;Go to TradingFE and Open Client Tier -> EUR/USD -> Tenor -> Tiered section;;"Qty must be ordered in the same way as on the WebAdmin
(in ascending order)";;
QAP-T2425;Sorting of Tiered and Sweepable qty's  UI;Specified;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-3704;;QAP-7078;PFX;Open WebAdmin => Client Tier and change some Instrument;EUR/USD;Changing window is opened;;
;;;;;;;;;;;;;;;"Add QTY to the Sweepable section in the following order:
8M -> 5M -> 3M
and save";;"Check that it displayed in the same order like:
8M -> 5M -> 3M";;
;;;;;;;;;;;;;;;"Add QTY to the Tiered section in the following order:
3M -> 2M -> 1M
and save";;"Check that it displayed in order like:
1M -> 2M -> 3M";;
;;;;;;;;;;;;;;;"Go to TradingFE and Open Client Tier -> EUR/USD -> Tenor -> Sweepable 
section";;See that ordering is the same as in WebAdmin for Sweepable section;;
;;;;;;;;;;;;;;;Go to TradingFE and Open Client Tier -> EUR/USD -> Tenor -> Tiered section;;See that ordering is the same as in WebAdmin for Tiered section;;
;;;;;;;;;;;;;;;"Go to admin and change instrument.
Go to SPOT tenor -> Sweepable qty and move bands as on the pictures and 
save";;no errors;;
;;;;;;;;;;;;;;;Go to client tile;;Check that ordering is the same as on the admin;;
QAP-T2426;Check Executable, Pricing and Publish for tenor level qty;Automated;;"*{color:#0747A6}#1{color}*

{code:java}
> 
8=FIXT.1.1|9=1627|35=W|34=157|49=QUODFX_UAT|52=20220318-14:18:08.342|56=QUOD3|1128=9|55=EUR/USD|262=1111222263|268=8|
269=0|278=4_EUR/USD_20220318T140955934392420_Bid3|270=1.18201|271=3000000|272=20220318|273=14:18:08|299=4_EUR/USD_20220318T140955934392420_Bid3|290=1|1024=1|63=0|64=20220322|1070=1|
269=1|278=4_EUR/USD_20220318T140955934392420_Ask2|270=1.18201|271=2000000|272=20220318|273=14:18:08|299=4_EUR/USD_20220318T140955934392420_Ask2|290=1|1024=1|63=0|64=20220322|1070=1|
269=0|278=4_EUR/USD_20220318T140955934392420_Bid2|270=1.182|271=2000000|272=20220318|273=14:18:08|299=4_EUR/USD_20220318T140955934392420_Bid2|290=2|1024=1|63=0|64=20220322|1070=1|
269=1|278=4_EUR/USD_20220318T140955934392420_Ask3|270=1.18202|271=3000000|272=20220318|273=14:18:08|299=4_EUR/USD_20220318T140955934392420_Ask3|290=2|1024=1|63=0|64=20220322|1070=1|
269=0|278=4_EUR/USD_20220318T140955934392420_Bid1|270=1.1814|271=1000000|272=20220318|273=14:18:08|299=4_EUR/USD_20220318T140955934392420_Bid1|290=3|1024=1|63=0|64=20220322|1070=1|
269=1|278=4_EUR/USD_20220318T140955934392420_Ask1|270=1.1826|271=1000000|272=20220318|273=14:18:08|299=4_EUR/USD_20220318T140955934392420_Ask1|290=3|1024=1|63=0|64=20220322|1070=1|
269=0|278=4_EUR/USD_20220318T140955934392420_Bid4|270=1.18128|272=20220318|273=14:18:08|276=B|299=4_EUR/USD_20220318T140955934392420_Bid4|290=4|1024=1|63=0|64=20220322|1070=0|
269=1|278=4_EUR/USD_20220318T140955934392420_Ask4|270=1.18172|272=20220318|273=14:18:08|276=B|299=4_EUR/USD_20220318T140955934392420_Ask4|290=4|1024=1|63=0|64=20220322|1070=0|
779=20220318-14:18:08.164|11501=20220318-11:52:48.768|11502=20220318-11:52:48.768|11503=CITI-ID|10=010|
{code}";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FX_fix, FXregression;;;PFX-3704;;QAP-7073;PFX;"Prepare a sample data or send via REST to have one row with:
Executable OFF
Pricing OFF
Publish OFF";see attachment;;;
;;;;;;;;;;;;;;;From FIX client subscribe to tenor with prepared tenor qty;#1;Check that MD contains the row with tag 1070=0, 276=B and without tag 271;;
QAP-T2427;FETrading: Renaming Panel To Blank Uses Default Name;Manual;;;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-4126;;QAP-6996;PFX;Open Order Book blotter and rename it to some name;;Name of blotter is changed;;
;;;;;;;;;;;;;;;Rename the same blotter and delete all name (leaving empty place);;Name must be returned to Default name (Order Book);;
;;;;;;;;;;;;;;;"Check those steps with all windows:
1. Aggregated Rates
2. Best Rates
3. Market Ticks
4. Quote Request Book
5. Quote Book
6. Dealing Order Book
7. Child Order Book
8. Order Book Archive
9. Dealing Trade Book
10. Trade Book Archive
11. Dealing Positions
12. Client Price Tiles
13. Client Price Summary
14. Quote Request Dealer Intervention";;;;
QAP-T2428;MDA to ignore MDSource;Specified;;can be automated with readlog;/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;;;QAP-6995;PFX;Start MDA_NO_SOURCE instance on the quod314@lune;quod314@luna;The instance is started;;
;;;;;;;;;;;;;;;"From the ESP Taker tile subscribe to CITI (TEST source) and DB (TEST_Q 
source)";comment #1;check log files;;
QAP-T2429;LastMkt returns the CLientVenueID;Specified;;"check config for client_ors.xml
*ClientVenueID*
{code:java}


ClientVenueID


{code}
*{color:#0747A6}#1{color}*

{code:java}
< 
8=FIXT.1.1|9=220|35=D|49=QUOD1|56=QUODFX_UAT|34=76|52=20220304-14:31:20|1=ASPECT_CITI|11=1031978942|21=1|15=EUR|38=1000000|40=2|44=1.18200|54=1|55=EUR/USD|59=1|60=20220304-14:31:20|63=0|64=20220308|167=FXSPOT|22=6|100=CITI-SW|77=O|114=N|10=218|
{code}

*{color:#0747A6}#2{color}*

{code:java}
> 
8=FIXT.1.1|9=540|35=8|34=84|49=QUODFX_UAT|52=20220304-14:31:21.462|56=QUOD1|1128=9|1=ASPECT_CITI|6=1.182|11=1031978942|14=1000000|15=EUR|17=EX1220304143121929001|21=1|22=8|30=CITI-ID|31=1.182|32=1000000|37=MO1220304143120890001|38=1000000|39=2|40=2|44=1.182|48=EUR/USD|54=1|55=EUR/USD|58=Hello 
sim|59=1|60=20220304-14:31:21.000|63=0|64=20220308|75=20220304|77=O|100=CITI-SW|120=USD|150=F|151=0|167=FXSPOT|194=1.182|198=1646404281355|207=CITI-SW|381=1182000|453=2|448=CITIPB|447=D|452=79|448=gtwquod1|447=D|452=36|460=4|527=1646404281355|854=0|2524=0|5053=0|10=056|
{code}

*{color:#0747A6}#3{color}*

{code:java}
select clientvenueid from venue where venueid ='CITI'
{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FX_fix, FXregression;;;PFX-4078;;QAP-6993;PFX;"From fix client (esp taker)
send an order to the venue CITI";"#1
#2";order is sent and filled. In execution report check that tag 30=CITI-ID;;
;;;;;;;;;;;;;;;Check that clientvenueid in DB;#3;clientvenueid should be the same as tag 30;;
QAP-T2430;Pricing Engine: Configurable Volume bands Per tenor - Checking that added bands priced by QS;Specified;;"Checking that bands added to tenor are priced correctly.

*Precondition:*
Prepare instrument with some Sweepable QTYs. For example:
Silver
EUR/USD
[1000000, 5000000, 10000000]";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-3704;;QAP-6975;PFX;Subscribe to instrument via MiniFIX;EUR/USD Silver1;Subscription sent, MD snapshot received in response.;;
;;;;;;;;;;;;;;;Check received MD snapshot;"Bands =
[1000000, 5000000, 10000000]";MD contains prices for all bands set to the instrument;;
;;;;;;;;;;;;;;;Add additional band at tenor level via WebAdmin and save;6000000, priced, executable, published;Band added and saved;;
;;;;;;;;;;;;;;;Check subscription in MiniFIX;"Bands =
[1000000, 5000000, 10000000, 6000000]";"New MD snapshot received and contains new additional band, from both sides 
(Bid/Ask)";;
;;;;;;;;;;;;;;;Remove band;"Bands =
[1000000, 5000000, 10000000]";New MD snapshot received and contains only original bands;;
QAP-T2431;Duplicate band in the list of sweepable quantities (Tenor level);Specified;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-3704;;QAP-6974;PFX;Open WebAdmin =>Client Tier => Gold_Day => EUR/USD and modify it;;modification window is opened;;
;;;;;;;;;;;;;;;Go to Tenor Sweepable Quantities tab and add duplicate rows and save;Tenor = SPO;no errors appear;;
;;;;;;;;;;;;;;;Open FETrading => ESP_MM => Gold_Day => EUR/USD;;you must see all duplicate rows in order they are displayed in Admin;;
;;;;;;;;;;;;;;;Remove all added bands and save;;no errors;;
QAP-T2432;Market FOK spot orders against FX MM streaming feed rejected;Automated;;"{code:java}
< 
8=FIXT.1.1|9=165|35=D|49=QUOD3|56=QUODFX_UAT|34=24|52=20220222-14:58:44|1=CLIENT1|11=864322406|21=1|15=EUR|38=10000000|40=1|54=1|55=EUR/USD|59=4|60=20220222-14:58:44|63=0|167=FXSPOT|10=157| 
{code}
{code:java}
> 
8=FIXT.1.1|9=457|35=8|34=32|49=QUODFX_UAT|52=20220222-14:58:45.757|56=QUOD3|1128=9|6=0|11=864322406|14=0|15=EUR|17=58400000002|21=1|22=8|31=0|32=0|37=MO1220222145844552001|38=10000000|39=8|40=1|48=EUR/USD|54=1|55=EUR/USD|58=not 
enough quantity in 
book|59=4|60=20220222-14:58:45.556|63=0|64=20220224|120=USD|150=8|151=0|167=FXSPOT|207=XQFX|378=4|453=4|448=gtwquod5|447=D|452=117|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod3|447=D|452=36|2376=1011|460=4|528=A|854=0|10=052|
{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FX_fix, FXregression;;;PFX-3686;;QAP-6933;PFX;Open interface / client FE / Minifix and send a market data request;EUR/USD SPOT, Gold_Day;"The instrument is open, prices and market data with quantity < 10 000 000 
are visible";;
;;;;;;;;;;;;;;;"Send a Market FOK order with larger quantity than it is available in market 
data";;"The order has status ""Rejected"", qty = 10 000 000";;
QAP-T2433;Limit FOK forward orders against FX MM streaming feed fully executed (UI);Automated;;"{code:java}
< 
8=FIXT.1.1|9=176|35=D|49=QUOD3|56=QUODFX_UAT|34=297|52=20220222-16:57:15|1=CLIENT1|11=864322436|21=1|15=EUR|38=1000000|40=2|44=1.18159|54=1|55=EUR/USD|59=4|60=20220222-16:57:15|63=0|167=FXSPOT|10=186|
{code}
{code:java}
> 
8=FIXT.1.1|9=531|35=8|34=358|49=QUODFX_UAT|52=20220222-16:57:15.850|56=QUOD3|1128=9|6=1.18159|11=864322436|14=1000000|15=EUR|17=EX1220222165715584001|21=1|22=8|31=1.18159|32=1000000|37=MO1220222165715552001|38=1000000|39=2|40=2|44=1.18159|48=EUR/USD|54=1|55=EUR/USD|59=4|60=20220222-16:57:15.826|63=0|64=20220224|75=20220222|100=XQFX|120=USD|150=F|151=0|167=FXSPOT|194=1.18159|207=XQFX|381=1181590|453=4|448=gtwquod5|447=D|452=117|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod3|447=D|452=36|2376=1011|460=4|528=A|854=0|2524=0|5055=20220224|10=199| 
{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-164;;QAP-6932;PFX;Open Client Pricing Tile with an instrument and see prices;EUR/USD 1W, Gold_Day;"The instrument is open, prices and market data with quantity >= 1 000 000 
is visible";;
;;;;;;;;;;;;;;;Send a Limit FOK order with the quantity = 1 000 000;;The order is executed;;
;;;;;;;;;;;;;;;Open the Order Book;;"Fully executed order is present in the Order Book. Qty = 1 000 000, TIF = 
FOK";;
QAP-T2434;Market IOC forward orders against FX MM streaming feed rejected;Automated;;"*Precondition:*

There must be an instrument with only RFQ venues

 

!chrome_LzGBpUQnxg.png|width=976,height=241!

{color:#403294}*#1*{color}
{code:java}
< 
8=FIXT.1.1|9=166|35=D|49=QUOD3|56=QUODFX_UAT|34=237|52=20220222-16:34:07|1=CLIENT1|11=864322424|21=1|15=EUR|38=10000000|40=1|54=1|55=EUR/CAD|59=3|60=20220222-16:34:07|63=W1|167=FXFWD|10=152| 
{code}
{code:java}
> 
8=FIXT.1.1|9=441|35=8|34=284|49=QUODFX_UAT|52=20220222-16:34:07.204|56=QUOD3|1128=9|6=0|11=864322424|14=0|15=EUR|17=58400000011|21=1|22=8|31=0|32=0|37=MO1220222163407552001|38=10000000|39=8|40=1|48=EUR/CAD|54=1|55=EUR/CAD|58=empty 
book|59=3|60=20220222-16:34:07.196|63=W1|64=20220303|120=CAD|150=8|151=0|167=FXFWD|207=XQFX|378=4|453=4|448=gtwquod5|447=D|452=117|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod3|447=D|452=36|2376=1011|460=4|528=A|854=0|10=110|
{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FX_fix, FXregression;;;PFX-164, PFX-3686;;QAP-6931;PFX;Open interface / client FE / Minifix and send a market data request;EUR/CAD 1W, Gold_Day, qty = 1000000;Prices are not present;;
;;;;;;;;;;;;;;;Send a Market IOC order;#1;Order is rejected;;
QAP-T2435;FETrading - Automatically Query Additional Listings From FX ESP Tiles;Manual;;"When typing characters in the instrument drop-down list that do not match 
existing records, after the user enters a full currency pair (i.e. 7 
characters - CCY/CCY), query the BE for all listings (tenors/venues) of 
that currency pair from the BE.

*Preconditions:*

!cfg_rds.png!
* In configs RDS, change dictionaryFile to ""false"" (on default ""true"") 
* restart RDS and FE
* open FE  ";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-3904;;QAP-6731;PFX;"In Aggregated Rates Tile => Rates Tile enter the characters in the tool 
drop-down list that do not match existing entries";;"Currency pairs that you entered should be automatically loaded in the 
instruments without the need to close/open it";;
;;;;;;;;;;;;;;;"In Client Pricing => Rates Tile enter the characters in the tool drop-down 
list that do not match existing entries";;"Currency pairs that you entered should be automatically loaded in the 
instruments without the need to close/open it";;
;;;;;;;;;;;;;;;;change configuration back;;;
QAP-T2436;FETrading - Checking the sell/buy price in the FX Rates Tile for USD/RUB;Specified;;"*Preconditions:*

Open FE => Aggregated Rates => Rates Tile";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FX_SKB, FXregression;;;PFX-4305;;QAP-6711;PFX;Change currency pair;USD/RUB-Spot;Currency pair selected;;
;;;;;;;;;;;;;;;Click SELL on TOB;;Check that price in order ticket the same as price in tile.;;
;;;;;;;;;;;;;;;Close order ticket;;Order ticket has closed;;
;;;;;;;;;;;;;;;Click BUY on TOB;;Check that price in order ticket the same as price in tile.;;
QAP-T2437;Check Administrative FIX Feed Plugin From The QS - set false;Automated;;"Workflow of ESP quote requests and replies for Spot instruments

In the case of ESP, marketdata subscription is handled by 35=V, replies are 
coming with 35=W with new tags which we can configure.

*On quod314@luna:*
{code:java}
vi ${CFG_DIR}/${CFG_PREFIX}qf_kharkiv_quod7_th2.xml{code}
To enable the functionality developed in this task 
the *adminOrEndUserFeed* should be set to *true*

The default value is {*}false{*}, in this case, tags 11501, 11502, 11503, 
11504 would be mapped.
* Admin feed: map:
** if OrigMDTime is present, map it to tag 11501. Otherwise, map MDTime to 
tag 11501
** if OrigMDArrivalTime is present, map it to tag 11502. Otherwise, map 
MDArrivalTime to tag 11502
** OrigClientVenueID -> tag 11503
** OrigQuoteEntryID -> 11504

Example of enabled tags mapping:
{code:java}

false
{code}
*!image-2022-02-04-15-54-57-903.png!*

*Example of messages*
*35=V*
{code:java}
8=FIXT.1.1|9=169|35=V|34=116|49=QUOD7|52=20220204-13:05:28.832|56=QUODFX_UAT|50=Silver1|262=7283502419|263=1|264=0|265=0|10050=0|146=1|55=EUR/GBP|167=FXSPOT|460=4|63=0|267=2|269=0|269=1|10=151|
{code}
*Mapping*
{code:java}
Mapped fix message fix MarketDataRequest={ MarketDataRequestBlock={ 
MDReqList={ MDReqBlock=#2:[ 1:{ MDEntryType=Bid } 2:{ MDEntryType=Offer } ] 
} InstrumentMDReqList={ InstrumentMDReqBlock=[ { InstrumentBlock={ 
InstrSymbol=""EUR/GBP"" ProductType=CURRENCY InstrType=FXSpot } } ] } 
MDReqID=""7283502419"" SubscriptionRequestType=Subscribe 
MDUpdateType=FullRefresh ClientAccountGroupID=""Silver1"" BookType=PriceDepth 
} }{code}
*35=W*
{code:java}
8=FIXT.1.1|9=964|35=W|34=46|49=QUODFX_UAT|52=20220204-14:12:12.590|56=QUOD7|1128=9|55=EUR/GBP|262=7264571098|268=4|269=0|278=8_EUR/GBP_20220204T141212583391356_Bid1|270=1.1814|271=3000000|272=20220204|273=14:12:13|299=8_EUR/GBP_20220204T141212583391356_Bid1|290=1|1024=1|63=0|64=20220208|1070=1|269=1|278=8_EUR/GBP_20220204T141212583391356_Ask1|270=1.18163|271=3000000|272=20220204|273=14:12:13|299=8_EUR/GBP_20220204T141212583391356_Ask1|290=1|1024=1|63=0|64=20220208|1070=1|269=0|278=8_EUR/GBP_20220204T141212583391356_Bid2|270=1.18136|271=1000000|272=20220204|273=14:12:13|299=8_EUR/GBP_20220204T141212583391356_Bid2|290=2|1024=1|63=0|64=20220208|1070=1|269=1|278=8_EUR/GBP_20220204T141212583391356_Ask2|270=1.18165|271=1000000|272=20220204|273=14:12:13|299=8_EUR/GBP_20220204T141212583391356_Ask2|290=2|1024=1|63=0|64=20220208|1070=1|779=20220204-14:12:12.586|11501=20220204-14:12:12.572|11502=20220204-14:12:12.470|11503=EBS-CITI|11504=1_EUR/GBP_202202047CF995368A46B899_Bid2|10=024|
{code}
*Mapping*
{code:java}
sending to FIX plugin fix MarketDataSnapshotFullRefresh={ InstrumentBlock={ 
InstrSymbol=""EUR/GBP"" ProductType=CURRENCY InstrType=FXSpot } 
MarketDataFullList={ MarketDataFullBlock=#4:[ 1:{ MDEntryType=Bid 
MDEntryID=""8_EUR/GBP_20220204T141212583391356_Bid1"" MDEntryPx=1.181400000 
MDEntrySize=3000000.000000000 MDEntryDateTime=2022-Feb-04 
14:12:12.586330370 MDEntryPosition=1 MDOriginType=Book SettlType=Regular 
SettlDate=2022-Feb-08 
QuoteEntryID=""8_EUR/GBP_20220204T141212583391356_Bid1"" 
MDQuoteType=Tradeable MDEntryPositionNo=1 MDEntryMargin=0.050000000 
MDEntryBaseSize=3000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181405000 } 2:{ MDEntryType=Offer 
MDEntryID=""8_EUR/GBP_20220204T141212583391356_Ask1"" MDEntryPx=1.181630000 
MDEntrySize=3000000.000000000 MDEntryDateTime=2022-Feb-04 
14:12:12.586330370 MDEntryPosition=1 MDOriginType=Book SettlType=Regular 
SettlDate=2022-Feb-08 
QuoteEntryID=""8_EUR/GBP_20220204T141212583391356_Ask1"" 
MDQuoteType=Tradeable MDEntryPositionNo=1 MDEntryMargin=0.080000000 
MDEntryBaseSize=3000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181622000 } 3:{ MDEntryType=Bid 
MDEntryID=""8_EUR/GBP_20220204T141212583391356_Bid2"" MDEntryPx=1.181360000 
MDEntrySize=1000000.000000000 MDEntryDateTime=2022-Feb-04 
14:12:12.586330370 MDEntryPosition=2 MDOriginType=Book SettlType=Regular 
SettlDate=2022-Feb-08 
QuoteEntryID=""8_EUR/GBP_20220204T141212583391356_Bid2"" 
MDQuoteType=Tradeable MDEntryPositionNo=2 MDEntryMargin=0.110000000 
MDEntryBaseSize=1000000.000000000 MDEntryBaseMargin=0.100000000 
MDEntryCorePx=1.181371000 } 4:{ MDEntryType=Offer 
MDEntryID=""8_EUR/GBP_20220204T141212583391356_Ask2"" MDEntryPx=1.181650000 
MDEntrySize=1000000.000000000 MDEntryDateTime=2022-Feb-04 
14:12:12.586330370 MDEntryPosition=2 MDOriginType=Book SettlType=Regular 
SettlDate=2022-Feb-08 
QuoteEntryID=""8_EUR/GBP_20220204T141212583391356_Ask2"" 
MDQuoteType=Tradeable MDEntryPositionNo=2 MDEntryMargin=0.190000000 
MDEntryBaseSize=1000000.000000000 MDEntryBaseMargin=0.100000000 
MDEntryCorePx=1.181631000 } ] } REC_STATUS=OK MDReqID=""7264571098"" 
MDTime=2022-Feb-04 14:12:12.586956917 OrigMDTime=2022-Feb-04 
14:12:12.572199000 OrigMDArrivalTime=2022-Feb-04 14:12:12.470232000 
OrigQuoteEntryID=""1_EUR/GBP_202202047CF995368A46B899_Bid2"" 
OrigClientVenueID=""EBS-CITI"" }
{code}
OrigMDTime=2022-Feb-04 14:12:12.572199000
OrigMDArrivalTime=2022-Feb-04 14:12:12.470232000
OrigClientVenueID=""EBS-CITI""
OrigQuoteEntryID=1_EUR/GBP_202202047CF995368A46B899_Bid2

 

{color:#de350b}*!!!!!*
*To receive OrigQuoteEntryID you need to have QuoteBasedVenue like 
EBS-CITI*{color}";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression;;;PFX-3912, PFX-1697;;QAP-6697;PFX;From miniFIX send MarketData Request;"35 = V
Client=Silver1
Instr = EUR/GBP-Spot";Market data sent and MarketDataSnapshotFullRefresh received;;
;;;;;;;;;;;;;;;"Check that:
OrigMDTime,
OrigMDArrivalTime,
OrigClientVenueID
mapped correctly in fix msg";35=W;Tags 11501, 11502, 11503, 11504 present in 35=W msg;;
QAP-T2438;Check Administrative FIX Feed Plugin From The QS - set true;Automated;;"Workflow of ESP quote requests and replies for Spot instruments

In the case of ESP, marketdata subscription is handled by 35=V, replies are 
coming with 35=W with new tags which we can configure.

*On quod314@luna:*
{code:java}
vi ${CFG_DIR}/${CFG_PREFIX}qf_kharkiv_quod7_th2.xml{code}
To enable the functionality developed in this task 
the *adminOrEndUserFeed* should be set to *true*

The default value is {*}false{*}, in this case, tags 11501, 11502, 11503, 
11504 would be mapped.
* Admin feed: map:
** if OrigMDTime is present, map it to tag 11501. Otherwise, map MDTime to 
tag 11501
** if OrigMDArrivalTime is present, map it to tag 11502. Otherwise, map 
MDArrivalTime to tag 11502
** OrigClientVenueID -> tag 11503
** OrigQuoteEntryID -> 11504

Example of disabled tags mapping:
{code:java}

true
{code}
*!image-2022-02-04-14-54-57-773.png!*

*Example of messages*
*35=V*
{code:java}
8=FIXT.1.1|9=169|35=V|34=116|49=QUOD7|52=20220204-13:05:28.832|56=QUODFX_UAT|50=Silver1|262=7283502419|263=1|264=0|265=0|10050=0|146=1|55=EUR/GBP|167=FXSPOT|460=4|63=0|267=2|269=0|269=1|10=151|
{code}
*Mapping*
{code:java}
Mapped fix message fix MarketDataRequest={ MarketDataRequestBlock={ 
MDReqList={ MDReqBlock=#2:[ 1:{ MDEntryType=Bid } 2:{ MDEntryType=Offer } ] 
} InstrumentMDReqList={ InstrumentMDReqBlock=[ { InstrumentBlock={ 
InstrSymbol=""EUR/GBP"" ProductType=CURRENCY InstrType=FXSpot } } ] } 
MDReqID=""7283502419"" SubscriptionRequestType=Subscribe 
MDUpdateType=FullRefresh ClientAccountGroupID=""Silver1"" BookType=PriceDepth 
} }{code}
*35=W*
{code:java}
8=FIXT.1.1|9=849|35=W|34=148|49=QUODFX_UAT|52=20220204-13:08:09.609|56=QUOD7|1128=9|55=EUR/GBP|262=8834783011|268=4|269=0|278=8_EUR/GBP_20220204T130532306874691_Bid1|270=1.18138|271=3000000|272=20220204|273=13:08:07|299=8_EUR/GBP_20220204T130532306874691_Bid1|290=1|1024=1|63=0|64=20220208|1070=1|269=1|278=8_EUR/GBP_20220204T130532306874691_Ask1|270=1.18161|271=3000000|272=20220204|273=13:08:07|299=8_EUR/GBP_20220204T130532306874691_Ask1|290=1|1024=1|63=0|64=20220208|1070=1|269=0|278=8_EUR/GBP_20220204T130532306874691_Bid2|270=1.18135|271=1000000|272=20220204|273=13:08:07|299=8_EUR/GBP_20220204T130532306874691_Bid2|290=2|1024=1|63=0|64=20220208|1070=1|269=1|278=8_EUR/GBP_20220204T130532306874691_Ask2|270=1.18164|271=1000000|272=20220204|273=13:08:07|299=8_EUR/GBP_20220204T130532306874691_Ask2|290=2|1024=1|63=0|64=20220208|1070=1|779=20220204-13:08:09.603|10=192|
{code}
*Mapping*
{code:java}
sending to FIX plugin fix MarketDataSnapshotFullRefresh={ InstrumentBlock={ 
InstrSymbol=""EUR/GBP"" ProductType=CURRENCY InstrType=FXSpot } 
MarketDataFullList={ MarketDataFullBlock=#4:[ 1:{ MDEntryType=Bid 
MDEntryID=""8_EUR/GBP_20220204T130532306874691_Bid1"" MDEntryPx=1.181380000 
MDEntrySize=3000000.000000000 MDEntryDateTime=2022-Feb-04 
13:08:09.603289397 MDEntryPosition=1 MDOriginType=Book SettlType=Regular 
SettlDate=2022-Feb-08 
QuoteEntryID=""8_EUR/GBP_20220204T130532306874691_Bid1"" 
MDQuoteType=Tradeable MDEntryPositionNo=1 MDEntryMargin=0.080000000 
MDEntryBaseSize=3000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181388000 } 2:{ MDEntryType=Offer 
MDEntryID=""8_EUR/GBP_20220204T130532306874691_Ask1"" MDEntryPx=1.181610000 
MDEntrySize=3000000.000000000 MDEntryDateTime=2022-Feb-04 
13:08:09.603289397 MDEntryPosition=1 MDOriginType=Book SettlType=Regular 
SettlDate=2022-Feb-08 
QuoteEntryID=""8_EUR/GBP_20220204T130532306874691_Ask1"" 
MDQuoteType=Tradeable MDEntryPositionNo=1 MDEntryMargin=0.073333333 
MDEntryBaseSize=3000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181602667 } 3:{ MDEntryType=Bid 
MDEntryID=""8_EUR/GBP_20220204T130532306874691_Bid2"" MDEntryPx=1.181350000 
MDEntrySize=1000000.000000000 MDEntryDateTime=2022-Feb-04 
13:08:09.603289397 MDEntryPosition=2 MDOriginType=Book SettlType=Regular 
SettlDate=2022-Feb-08 
QuoteEntryID=""8_EUR/GBP_20220204T130532306874691_Bid2"" 
MDQuoteType=Tradeable MDEntryPositionNo=2 MDEntryMargin=0.190000000 
MDEntryBaseSize=1000000.000000000 MDEntryBaseMargin=0.100000000 
MDEntryCorePx=1.181369000 } 4:{ MDEntryType=Offer 
MDEntryID=""8_EUR/GBP_20220204T130532306874691_Ask2"" MDEntryPx=1.181640000 
MDEntrySize=1000000.000000000 MDEntryDateTime=2022-Feb-04 
13:08:09.603289397 MDEntryPosition=2 MDOriginType=Book SettlType=Regular 
SettlDate=2022-Feb-08 
QuoteEntryID=""8_EUR/GBP_20220204T130532306874691_Ask2"" 
MDQuoteType=Tradeable MDEntryPositionNo=2 MDEntryMargin=0.160000000 
MDEntryBaseSize=1000000.000000000 MDEntryBaseMargin=0.100000000 
MDEntryCorePx=1.181624000 } ] } REC_STATUS=OK MDReqID=""8834783011"" 
MDTime=2022-Feb-04 13:08:09.605088622 OrigMDTime=2022-Feb-04 
13:08:09.496305000 OrigMDArrivalTime=2022-Feb-04 13:08:09.489831000 
OrigQuoteEntryID=""1_EUR/GBP_20220204C338D0741E2598D9_Bid2"" 
OrigClientVenueID=""EBS-CITI"" }{code}
OrigMDTime=2022-Feb-04 13:08:09.496305000
OrigMDArrivalTime=2022-Feb-04 13:08:09.489831000
OrigClientVenueID=""EBS-CITI""
OrigQuoteEntryID=""1_EUR/GBP_20220204C338D0741E2598D9_Bid2""

 

{color:#de350b}*!!!!!*
*To receive OrigQuoteEntryID you need to have QuoteBasedVenue like 
EBS-CITI*{color}";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression;;;PFX-3912;;QAP-6691;PFX;From miniFIX send MarketData Request;"35 = V
Client=Silver1
Instr = EUR/GBP-Spot";Market data sent and MarketDataSnapshotFullRefresh received;;
;;;;;;;;;;;;;;;"Check that:
OrigMDTime,
OrigMDArrivalTime,
OrigClientVenueID,
OrigQuoteEntryID
not mapped in fix msg";35=W;Tags 11501, 11502, 11503, 11504 not in 35=W msg;;
QAP-T2439;FETrading - Impact of Default FX values to Client Order Ticket;Specified;;"*Preconditions:*

Open Options => Order Ticket => Default FX Values

 

In this window you can change the default settings to the desired ones and 
they should not affect the Client Order Ticket.";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-3870;;QAP-6624;PFX;In Default FX Values change Algo and DMA Slippage and save this options;"Algo Slippage = 0.4
DMA Slippage = 0.8
Client = ASPECT_CITI";Changed options are saved;;
;;;;;;;;;;;;;;;"Client Price Tiles => Rates Tile

Click on TOB";EUR/USD-Spot;Client Order Ticket opened;;
;;;;;;;;;;;;;;;"In Client Order Ticket checked field ""Slippage""";;The value of the field must be 0;;
;;;;;;;;;;;;;;;"In Default FX Values => Custom Currency Slippage select options and save 
them";"Currency Pair = EUR/USD
DMA Slippage = 0.6
Algo Slippage = 0.3";Changed options are saved;;
;;;;;;;;;;;;;;;Redo step 2;;Client Order Ticket opened;;
;;;;;;;;;;;;;;;Redo step 3;;The result will be the same as step 3;;
QAP-T2440;Check ReplyReceivedTime in ExecutionReport for autoheger orders;Automated;;"*35 = D*
{code:java}
8=FIXT.1.1|9=208|35=D|34=2551|49=QUODTH2|52=20220128-16:20:54.158|56=QUODFX_UAT|1=QUOD|11=526797119|15=EUR|21=2|38=1674731|40=2|44=1.18999|54=1|55=EUR/USD|59=3|60=20220128-16:20:52.000|63=0|64=20220201|100=CITI-SW|167=FXSPOT|10=122|
{code}
*QUOD.QS_DROPCOPY*

*35 = 8*
{code:java}
8=FIXT.1.1|9=794|35=8|34=2637|49=QUODFX_UAT|52=20220128-16:21:03.760|56=QUOD8|1128=9|6=1.18125|11=AO1220128162057158002|14=1674731|15=EUR|17=EV1220128162103228003|21=2|22=8|30=MS-SW|31=1.18125|32=674731|37=AO1220128162057158002|38=1674731|39=2|40=1|48=EUR/USD|54=2|55=EUR/USD|58=Hello 
sim|59=0|60=20220128-16:21:03.000|63=0|64=20220201|75=20220128|100=JPM-RFQ;MS-RFQ;FSSR;BNP-RFQ;BNP-SW;EBS-CITI;DB-SW;BARX;DB-RFQ;HSBC-FA;D3;GS-FA;FM-CITI;CITI-FA;JPM-SW;HSBC-SW;GS-SW;XQFX;BARC-FA;STA-SW;MS-SW;DB-FA;JPM-FA;MS-FA;STA-FA;BNP-FA;CITI-SW;HSBC-RFQ;STA-RFQ;BARC-RFQ;GS-RFQ;CITI-RFQ|120=USD|150=F|151=0|167=FXSPOT|194=1.18125|198=1643386863156|207=CITI-SW|381=797025.99|453=1|448=AH_TECHNICAL_USER|447=D|452=36|460=4|527=1643386863156|847=1008|854=0|2524=0|5053=0|5055=20220201|10014=1555|11505=20220128-16:21:03.168|10=056|{code}";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression;;;PFX-1699;;QAP-6598;PFX;"Send NewOrderSingle on taker from miniFIX on internal client to trigger 
AutoHedger";35=D;Order sent and filled;;
;;;;;;;;;;;;;;;Check that AutoHedger create order;;Order created and filled;;
;;;;;;;;;;;;;;;In execution report for AutoHedgers order check tag 11505(ReplyReceiveTime);35=8;Tag is present;;
QAP-T2441;Check ReplyReceivedTime in ExecutionReport for taker orders;Automated;;"*35 = D*
{code:java}
8=FIXT.1.1|9=255|35=D|34=7122|49=QUODTH2|52=20220128-09:55:10.127|56=QUODFX_UAT|1=ASPECT_CITI|11=086192203|15=EUR|21=2|38=1687848|40=2|44=1.18999|54=1|55=EUR/USD|59=3|60=20220128-09:55:08.000|63=0|64=20220201|167=FXSPOT|847=1008|957=1|958=AllowedVenues|959=14|960=MS/CITI|10=192|{code}
*35 = 8*
{code:java}
8=FIXT.1.1|9=679|35=8|34=5832|49=QUODFX_UAT|52=20220128-08:08:30.280|56=QUOD8|1128=9|6=1.181561|11=AO1220128080821129002|14=5000000|15=EUR|17=EV1220128080830203002|21=2|22=8|30=CITI-SW|31=1.181561|32=1000000|37=AO1220128080821129002|38=5000000|39=2|40=2|44=1.18157|48=EUR/USD|54=1|55=EUR/USD|58=Hello 
sim|59=3|60=20220128-08:08:30.000|63=0|64=20220201|75=20220128|100=BARX;BNP-SW;CITI-SW;D3;DB-SW;EBS-CITI;FM-CITI;GS-SW;HSBC-SW;JPM-SW;MS-SW;STA-SW|120=USD|150=F|151=0|167=FXSPOT|194=1.181561|198=1643357310157|207=CITI-SW|381=1181561|453=2|448=CITIPB|447=D|452=79|448=ostronov|447=D|452=36|460=4|527=1643357310157|847=1008|854=0|2524=0|5053=0|5055=20220201|10014=1555|11505=20220128-08:08:30.247|10=103|{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, refactored_FX;;;PFX-1699;;QAP-6593;PFX;Send NewOrderSingle on taker from miniFIX;35=D;Order sent and filled;;
;;;;;;;;;;;;;;;In execution report check tag 11505(ReplyReceiveTime);35=8;Tag is present;;
QAP-T2442;Fwd RFQ requests go to DI when receiving fwd points with MDquodtype =IND (Manual Intervention);Automated;;"*AutoRFQClientPricingFallback=Manual Intervention*
*{color:#0747A6}#1{color}*

{code:java}
8=FIXT.1.1|9=302|35=W|34=215|49=TEST|52=20211230-12:42:46.954|56=MARKETDATA|55=GBP/USD|167=FXSPOT|262=GBP/USD:FXF:WK1:HSBC_218|268=2|269=0|270=1.18039|271=1000000|273=20211230|290=1|64=20220110|1070=0|1027=0.0002|1026=1.18038|269=1|270=1.18051|271=1000000|273=20211230|290=1|64=20220110|1070=0|1027=0.0002|1026=1.18052|10=140|
{code}

{code:java}
2021-12-30 12:42:46.956401640 QUOD.FXFH [19773] INFO mip_common 
(Message.cpp:132) - serializing market MarketDataSnapshotFullRefresh={ 
InstrumentBlock={ InstrSymbol=""GBP/USD:FXF:WK1:HSBC"" } MarketDataFullList={ 
MarketDataFullBlock=#2:[ 1:{ MDEntryType=Bid MDEntryPx=1.180390000 
OrdType=Limit MDEntrySize=1000000.000000000 MDEntryPosition=1 
MDQuoteType=Indicative MDEntryForwardPoints=0.000200000 
MDEntrySpotRate=1.180380000 } 2:{ MDEntryType=Offer MDEntryPx=1.180510000 
OrdType=Limit MDEntrySize=1000000.000000000 MDEntryPosition=1 
MDQuoteType=Indicative MDEntryForwardPoints=0.000200000 
MDEntrySpotRate=1.180520000 } ] } MDTime=2021-Dec-30 12:42:46.955599000 
SEQ_NO=0 VenueMDSeqNum=215 RefreshIndicator=false MDBookType=PriceDepth 
MDArrivalTime=2021-Dec-30 12:42:46.955236000 }
{code}

*{color:#0747A6}#2{color}*";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, SWED;;;;;QAP-6571;PFX;From BUY side send MD with MDquodtype =IND;"#1
Iridium1
GBP/USD
HSBC
1W";MD is sent and appeared on the ESP taker tile;;
;;;;;;;;;;;;;;;"From Fix client send RFQ
Tenor = 1W
Qty = 1000000
Client = Iridium1
Symbol = GBP/USD";#2;"Check that request is appeared in QuoteRequestBook with AutomaticQuoting = 
No
because of INDICATIVE Forward";;
;;;;;;;;;;;;;;;From BUY side send the same MD with MDQuoteType=1;;;;
QAP-T2443;Manual DI:  swap RFQ TOM/Spot for instrument where SPOT = T+1;Automated;;"*#1*
{code:java}
8=FIXT.1.1|9=276|35=R|49=QUOD5|56=QUODFX_UAT|34=184|52=20220120-15:57:49|131=1154545014|146=1|55=USD/CAD|167=FXSWAP|54=2|38=1000000|64=20220120|15=USD|1=CLIENT1|40=D|555=2|600=USD/CAD|609=FXFWD|624=2|587=2|588=20220121|685=1000000|600=USD/CAD|609=FXFWD|624=1|587=W1|588=20220131|685=1000000|10=106|
{code}
*{color:#0747a6}#2{color}*
{code:java}
 8=FIXT.1.1|9=278|35=R|49=QUOD5|56=QUODFX_UAT|34=171|52=20220120-15:52:57|131=1154545011|146=1|55=USD/CAD|167=FXSWAP|54=2|38=1000000|64=20220120|15=USD|1=CLIENT1|40=D|555=2|600=USD/CAD|609=FXFWD|624=2|587=2|588=20220121|685=1000000|600=USD/CAD|609=FXSPOT|624=1|587=0|588=20220121|685=1000000|10=045|{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, refactored_FX, SWED;;;PFX-2772;;QAP-6531;PFX;From miniFix send swap RFQ for instrument USD/CAD with tenors TOM/1W;#1;"Request should go to manual DI with free notes
""tomorrow is spot date, prices are indicative - manual intervention 
required""
(Check QuoteRequestBlotter to check for TH2)";;
;;;;;;;;;;;;;;;From miniFix send swap RFQ for instrument USD/CAD with tenors TOM/SPOT;#2;"Request should go to manual DI with free notes
""tomorrow is spot date, prices are indicative - manual intervention 
required""
(Check QuoteRequestBlotter to check for TH2)";;
QAP-T2444;TOD/TOM swap -> Explicitly;Automated;;"*AutoRFQClientPricingFallback=Interpolation*
Add RFQ venue to Forward Panel

*{color:#0747A6}#1{color}*
{code:java}
< 
8=FIXT.1.1|9=266|35=R|49=QUOD5|56=QUODFX_UAT|34=139|52=20220323-08:34:39|131=120152740|146=1|55=EUR/USD|167=FXSWAP|38=1000000|64=20220323|15=EUR|1=Konstantin1|555=2|600=EUR/USD|609=FXFWD|624=2|587=1|588=20220323|685=1000000|600=EUR/USD|609=FXFWD|624=1|587=2|588=20220324|685=1000000|10=065|
{code}
*{color:#0747A6}#2{color}*
{code:java}
> 
8=FIXT.1.1|9=548|35=S|34=167|49=QUODFX_UAT|52=20220323-08:34:42.650|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20220323-08:36:39.472|64=20220323|117=01220323083439841002|131=120152740|132=0|133=0.000007|134=1|135=1|167=FXSWAP|188=1.1815|190=1.1815|460=4|537=1|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=2|685=1000000|587=1|588=20220323|681=1.18151|684=1.181525|1067=0.00001|1068=0.000025|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=1|685=1000000|587=2|588=20220324|681=1.181525|684=1.181517|1067=0.000017|1068=0.000025|1065=0|1066=0.000007|1166=01220323083439841002|10=159|

{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, SWED;;;PFX-4217;;QAP-6519;PFX;"From Fix Client send RFQ swap
TOD / TOM";"#1
#2";Request is sent and quote is sent to reply;;
;;;;;;;;;;;;;;;"Check that LegBidForwardPoints and LegOfferForwardPoints for near leg and 
far leg are the same as QUOD receive from a venue";"It can be tested with TH2 if write specific rule for some venue which will 
send points beforehand, so you know expected result (or you can use read 
log)";"LegBidForwardPoints and LegOfferForwardPoints must be the same
(see attachment as an example)";;
;;;;;;;;;;;;;;;Check that swap points in 35=S;;"They are calculated by formula:
BID SWAP PRICE = Far Leg Ask Forward Points - Near Leg Ask Forward Points
and
OFFER SWAP PRICE= Far Leg Bid Forward Points - Near Leg Bid Forward Points";;
QAP-T2445;Specifications for TOM equal Spot situation;Manual;;"  Check that *holidayid* = 100500 by the following query *select * from 
currencyenum where currencycode ='USD'*

{color:#0747a6}*#1*{color}
{code:java}
insert into holidaycalendar 
(HOLIDAYID,HOLIDAYDATE,HOLIDAYDESCRIPTION,alive)
values (100500,'tomorrow','Test of holidays','Y');
{code}
{code:java}
insert into holiday(HOLIDAYID,HOLIDAYNAME,alive)
values (100500,'Test of holidays','Y');{code}
 

*{color:#0747a6}#2{color}*
{code:java}
8=FIXT.1.1|9=274|35=R|49=QUOD5|56=QUODFX_UAT|34=108|52=20220125-14:20:51|131=1064425272|146=1|55=USD/KRW|167=FXSWAP|54=2|38=1000000|64=20220125|15=USD|1=CLIENT1|40=D|555=2|600=USD/KRW|609=FXNDF|624=2|587=2|588=20220127|685=1000000|600=USD/KRW|609=FXNDF|624=1|587=W1|588=20220203|685=1000000|10=025|
{code}
*{color:#0747a6}#3{color}*
{code:java}
8=FIXT.1.1|9=273|35=R|49=QUOD5|56=QUODFX_UAT|34=98|52=20220125-14:17:13|131=1064425269|146=1|55=USD/KRW|167=FXSWAP|54=2|38=1000000|64=20220125|15=USD|1=CLIENT1|40=D|555=2|600=USD/KRW|609=FXNDF|624=2|587=2|588=20220127|685=1000000|600=USD/KRW|609=FXSPOT|624=1|587=0|588=20220127|685=1000000|10=021|
{code}
 ";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-2772;;QAP-6501;PFX;;;;;
QAP-T2446;ForwardPoints = 0 for tenor TOM = SPOT (USD/CAD) (UI);Specified;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-2772, PFX-4571;;QAP-6499;PFX;"Open Client Price Tiles -> Rates Tile, select instrument ""USD/CAD"" with 
tenor = ""TOM""";"Instrument = USD/CAD
tenor = TOM";"Instrument and tenor are displayed in the tile, sweepable rows are gray 
colored";;
;;;;;;;;;;;;;;;Check Bid and Ask Forward Points;;"Bid and Ask Forward Points equal to zero for the tenor = ""TOM""
Executable button is RED";;
;;;;;;;;;;;;;;;"Open another Rates Tile and select the same instrument with tenor = ""Spot""";"Instrument = USD/CAD
Tenor = Spot";"Instrument and tenor are displayed in the tile, sweepable rows are 
displayed, Bid price and Ask price are red and green colored respectively";;
;;;;;;;;;;;;;;;"Compare rows from tiles with ""TOM"" and ""Spot"" tenors";;"Check that values from Ask Spot, Bid Spot, Ask Price and Bid Price for 
""TOM"" and ""Spot"" tenors equal to each other for each corresponding quantity";;
QAP-T2447;Cross currency pairs job is using broken date without date when the cross instrid doesn't fall on a known cross;Manual;;"*{color:#0747a6}#1{color}*
1. EUR/NOK must be a cross pair through USD (EUR/NOK = USD/NOK + EUR/USD)
2. Make a SPOT date for EUR/NOK and USD/NOK 3 days more than on EUR/USD
For this, you need to add some holidays to HOLIDAYCALENDAR
!screenshot-1.png|thumbnail!
Add that HOLIDAYID to the table CURRENCYENUM
!screenshot-2.png|thumbnail!

*{color:#0747a6}#2{color}*
{quote}SELECT * FROM INSTRUMENT i WHERE INSTRID ='8mQAu1dLa6LIIJKU80yQbA' 
OR INSTRID ='pNpQwuXtH_L1OL7ieeyY-g'
{quote}
*{color:#0747a6}#3{color}*

!image-2022-02-23-19-22-33-441.png!";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression;;;PFX-4276, PFX-4071, PFX-4039, PFX-4138;;QAP-6447;PFX;Start ITK with the following;"#1

+ see comment";"In INSTRUMENT table check that date SPO for EUR/NOK and USD/NOK more than 
for EUR/USD for 3 days";;
;;;;;;;;;;;;;;;"Check INSTRUMENT table => USDMAJORPAIRINSTRID1 and USDMAJORPAIRINSTRID2 for 
USD/NOK";#2;Check that for USDMAJORPAIRINSTRID1 ITK used EUR/USD Broken Date;;
;;;;;;;;;;;;;;;"Add the same HolidayID for EUR in CURRENCYENUM like for NOK before (to have 
the same SPOT date for both)
and run ITK with another";"#3

+ see comment";"check INSTRUMENT table that SPOT date for EUR/USD, USD/NOK and EUR/NOK are 
the same";;
;;;;;;;;;;;;;;;Open ESP MM tile with EUR/USD, USD/NOK and EUR/NOK;;check that SPOT date for EUR/USD, USD/NOK and EUR/NOK are the same;;
;;;;;;;;;;;;;;;Check INSTRUMENT table;;check that USDMAJORPAIRINSTRID1 for EUR/NOK is EUR/USD with tenor SPOT;;
QAP-T2448;Fwd RFQ requests go to DI when receiving fwd points with MDquodtype =IND (Interpolation);Automated;;"*AutoRFQClientPricingFallback=Interpolation*
*{color:#0747A6}#1{color}*

{code:java}
8=FIXT.1.1|9=302|35=W|34=215|49=TEST|52=20211230-12:42:46.954|56=MARKETDATA|55=GBP/USD|167=FXSPOT|262=GBP/USD:FXF:WK1:HSBC_218|268=2|269=0|270=1.18039|271=1000000|273=20211230|290=1|64=20220110|1070=0|1027=0.0002|1026=1.18038|269=1|270=1.18051|271=1000000|273=20211230|290=1|64=20220110|1070=0|1027=0.0002|1026=1.18052|10=140|
{code}

{code:java}
2021-12-30 12:42:46.956401640 QUOD.FXFH [19773] INFO mip_common 
(Message.cpp:132) - serializing market MarketDataSnapshotFullRefresh={ 
InstrumentBlock={ InstrSymbol=""GBP/USD:FXF:WK1:HSBC"" } MarketDataFullList={ 
MarketDataFullBlock=#2:[ 1:{ MDEntryType=Bid MDEntryPx=1.180390000 
OrdType=Limit MDEntrySize=1000000.000000000 MDEntryPosition=1 
MDQuoteType=Indicative MDEntryForwardPoints=0.000200000 
MDEntrySpotRate=1.180380000 } 2:{ MDEntryType=Offer MDEntryPx=1.180510000 
OrdType=Limit MDEntrySize=1000000.000000000 MDEntryPosition=1 
MDQuoteType=Indicative MDEntryForwardPoints=0.000200000 
MDEntrySpotRate=1.180520000 } ] } MDTime=2021-Dec-30 12:42:46.955599000 
SEQ_NO=0 VenueMDSeqNum=215 RefreshIndicator=false MDBookType=PriceDepth 
MDArrivalTime=2021-Dec-30 12:42:46.955236000 }
{code}

*{color:#0747A6}#2{color}*";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, SWED;;;PFX-3869, PFX-4093;;QAP-6364;PFX;From BUY side send MD with MDquodtype =IND;"#1
Iridium1
GBP/USD
HSBC
1W";MD is sent and appeared on the ESP taker tile;;
;;;;;;;;;;;;;;;"From Fix client send RFQ
Tenor = 1W
Qty = 1000000
Client = Iridium1
Symbol = GBP/USD";#2;"Check that request is appeared in QuoteRequestBook with AutomaticQuoting = 
No
because of INDICATIVE Forward";;
;;;;;;;;;;;;;;;From BUY side send the same MD with MDQuoteType=1;;;;
QAP-T2449;FETrading - Scrolling behavior check when turned OFF checkbox;Manual;;"Checking that scrolling in the main blotter should not freeze when 
selecting some row

*Preconditions:*
Open FE => Options => User Interface
In ""Lock Grid Auto-Scrolling On Selection"" choose checkbox is _False - 
default value _False__

 _ !False_LockGridAuto-Scrolling.png|width=531,height=258!_";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression, SWED;;;PFX-4212, PFX-4406;;QAP-6360;PFX;Open Order Book and ESP Tile;;Windows opened, prices appears on ESP tile;;
;;;;;;;;;;;;;;;Send several order from ESP tile;;Check that order book scrolling when new orders appears;;
;;;;;;;;;;;;;;;Scroll order book down, with order still unselected, place some orders;;Check that order book not scrolling when new orders appears;;
;;;;;;;;;;;;;;;Select the last created order in the order book and send some more orders;;Check that order book scrolling when new orders appears;;
;;;;;;;;;;;;;;;Scroll order book down, select any order and sent few more orders;;Order book freezes on one position, selected order is visible;;
;;;;;;;;;;;;;;;"Repeat steps 3-5 and check this behavior at all other places (Quote Request 
Book, Market Ticks, TradeBook, Quote Book, Times&Sales)";;Behavior is the same;;
QAP-T2450;FX Auto-Hedger Decision Audit Trail Storage;Specified;;"*Can be automated with ReadLog
{quote}When sending a hedge order because position thresholds are breached, 
populate a AutoHedgerDecision record with:

fields of the position that caused the hedge order creation
the triggering event that caused the position limit breach. TBD what if it 
is just a market data cross rate?
some fields of the hedge order{quote}
*{color:#0747A6}#1{color}*

{code:java}
2021-12-24 16:30:22.892306114 QUOD.MPAS [16991] INFO cache 
(RecordCache.cpp:379) - inserting in cache and database 
AutoHedgerDecision={ AutoHedgerDecisionID=88100000003 
CreationTime=2021-Dec-24 16:30:22.892262178 AccountID=""QUOD4_1"" 
InstrSymbol=""EUR/USD"" PositionType=Net InitialQty=0.000000000 
CumBuyQty=6000000.000000000 CumSellQty=9000000.000000000 
BaseCurrSysCurrFxRate=1.181490000 HedgeOrdID=""AO1211224163022881001"" 
HedgeSide=Buy HedgeOrdQty=3000000.000000000 
TriggeringExecID=""EX1211224163022940002"" 
TriggeringOrdD=""MO1211224163022865001"" TriggeringQuoteID=87600000014 
FreeNotes=""open quantity of position (3.54447e+06) exceeds the low 
watermark (0)"", no revision }
{code}";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, SWED;;;PFX-3592;;QAP-6354;PFX;"Send an order with qty=3M
EUR/USD
Aurum
Spot";;"Order is sent and executed.
AH is triggered";;
;;;;;;;;;;;;;;;Check log files;#1;"When sending a hedge order because position thresholds are breached, 
populate a AutoHedgerDecision record";;
QAP-T2451;Indicative MD for Tenor TOM=SPOT (USD/CAD) (fix);Automated;;"{code:java}
8=FIXT.1.1|9=156|35=V|49=QUOD3|56=QUODFX_UAT|34=472|52=20220125-18:05:10|50=CLIENT1|262=1064425274|263=1|264=0|265=0|267=2|269=0|269=1|146=1|55=USD/CAD|460=4|63=2|167=FXFWD|10=051|
{code}
{code:java}
2022-01-25 18:05:10.203927000 QUOD.QS_ESP_STANDARD_SELL [12304] INFO 
quickfixgtw (Processor.cpp:98) - Mapped fix message fix MarketDataRequest={ 
MarketDataRequestBlock={ MDReqList={ MDReqBlock=#2:[ 1:{ MDEntryType=Bid } 
2:{ MDEntryType=Offer } ] } InstrumentMDReqList={ InstrumentMDReqBlock=[ { 
InstrumentBlock={ InstrSymbol=""USD/CAD"" ProductType=CURRENCY 
InstrType=FXForward Tenor=NextDay } } ] } MDReqID=""1064425274"" 
SubscriptionRequestType=Subscribe MDUpdateType=FullRefresh 
ClientAccountGroupID=""CLIENT1"" } }{code}
{code:java}
8=FIXT.1.1|9=2703|35=W|34=490|49=QUODFX_UAT|52=20220125-18:05:10.724|56=QUOD3|1128=9|55=USD/CAD|262=1064425274|268=12|269=0|278=4_USD/CAD_20220125T180510717341058_Bid1|270=1.181378|271=6000000|272=20220125|273=18:05:11|276=B|299=4_USD/CAD_20220125T180510717341058_Bid1|290=1|1024=1|63=2|64=20220127|1070=0|1026=1.181378|1027=0|269=1|278=4_USD/CAD_20220125T180510717341058_Ask1|270=1.1816287|271=6000000|272=20220125|273=18:05:11|276=B|299=4_USD/CAD_20220125T180510717341058_Ask1|290=1|1024=1|63=2|64=20220127|1070=0|1026=1.1816287|1027=0|269=0|278=4_USD/CAD_20220125T180510717341058_Bid2|270=1.181234|271=8000000|272=20220125|273=18:05:11|276=B|299=4_USD/CAD_20220125T180510717341058_Bid2|290=2|1024=1|63=2|64=20220127|1070=0|1026=1.181234|1027=0|269=1|278=4_USD/CAD_20220125T180510717341058_Ask2|270=1.181786|271=8000000|272=20220125|273=18:05:11|276=B|299=4_USD/CAD_20220125T180510717341058_Ask2|290=2|1024=1|63=2|64=20220127|1070=0|1026=1.181786|1027=0|269=0|278=4_USD/CAD_20220125T180510717341058_Bid3|270=1.18117|271=3000000|272=20220125|273=18:05:11|276=B|299=4_USD/CAD_20220125T180510717341058_Bid3|290=3|1024=1|63=2|64=20220127|1070=0|1026=1.18117|1027=0|269=1|278=4_USD/CAD_20220125T180510717341058_Ask3|270=1.1818557|271=3000000|272=20220125|273=18:05:11|276=B|299=4_USD/CAD_20220125T180510717341058_Ask3|290=3|1024=1|63=2|64=20220127|1070=0|1026=1.1818557|1027=0|269=0|278=4_USD/CAD_20220125T180510717341058_Bid4|270=1.181042|271=1000000|272=20220125|273=18:05:11|276=B|299=4_USD/CAD_20220125T180510717341058_Bid4|290=4|1024=1|63=2|64=20220127|1070=0|1026=1.181042|1027=0|269=1|278=4_USD/CAD_20220125T180510717341058_Ask4|270=1.181995|271=1000000|272=20220125|273=18:05:11|276=B|299=4_USD/CAD_20220125T180510717341058_Ask4|290=4|1024=1|63=2|64=20220127|1070=0|1026=1.181995|1027=0|269=0|278=4_USD/CAD_20220125T180510717341058_Bid5|270=1.181042|271=2000000|272=20220125|273=18:05:11|276=B|299=4_USD/CAD_20220125T180510717341058_Bid5|290=5|1024=1|63=2|64=20220127|1070=0|1026=1.181042|1027=0|269=1|278=4_USD/CAD_20220125T180510717341058_Ask5|270=1.181995|271=2000000|272=20220125|273=18:05:11|276=B|299=4_USD/CAD_20220125T180510717341058_Ask5|290=5|1024=1|63=2|64=20220127|1070=0|1026=1.181995|1027=0|269=0|278=4_USD/CAD_20220125T180510717341058_Bid6|270=1.181042|271=5000000|272=20220125|273=18:05:11|276=B|299=4_USD/CAD_20220125T180510717341058_Bid6|290=6|1024=1|63=2|64=20220127|1070=0|1026=1.181042|1027=0|269=1|278=4_USD/CAD_20220125T180510717341058_Ask6|270=1.181995|271=5000000|272=20220125|273=18:05:11|276=B|299=4_USD/CAD_20220125T180510717341058_Ask6|290=6|1024=1|63=2|64=20220127|1070=0|1026=1.181995|1027=0|779=20220125-18:05:10.717|11501=20220125-15:32:19.537|11502=20220125-15:32:19.536|11503=CITI|10=084|{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FX_fix, FXregression, SWED;;;PFX-2772;;QAP-6353;PFX;From MiniFIX send Market Data Request for instrument USD/CAD with tenor TOM;See description;Market Data Quote Type is indicative for each band (tag 1070=0);;
QAP-T2452;QS is picking correctly cross settlement dates changes;Specified;;"*{color:#FF8B00}WILL BE AUTOMATED VIA FIX ONLY{color}*
*Environment quod314@luna*
SGD/RUB is cross through USD (USD/RUB and USD/SGD with single venue HSBC)
*{color:#0747A6}#1{color}*
MARKET DATA FOR USD/RUB HSBC SPOT
*{color:#0747A6}#2{color}*
MARKET DATA FOR USD/SGD HSBC SPOT
*{color:#0747A6}#3{color}*
update instrument set usdmajorpairinstrid1 = '6PmipPm4c296Keb7niIG9g' where 
instrsymbol ='SGD/RUB' and instrtype ='SPO'
update instrument set usdmajorpairinstrid2 = 'OfE6V00PaJWIZSM04tiWPA' where 
instrsymbol ='SGD/RUB' and instrtype ='SPO'
*{color:#0747A6}#4{color}*
{code:java}
8=FIXT.1.1|9=525|35=W|34=166|49=TEST|52=20211222-17:36:58.854|56=MARKETDATA|55=USD/SGD|167=FXSPOT|262=USD/SGD:SPO:REG:HSBC_334|268=6|269=0|270=1.18599|271=1000000|273=20211222|290=1|64=20211224|1070=1|269=1|270=1.1881|271=1000000|273=20211222|290=1|64=20211224|1070=1|269=0|270=1.18397|271=5000000|273=20211222|290=2|64=20211224|1070=1|269=1|270=1.18909|271=5000000|273=20211222|290=2|64=20211224|1070=1|269=0|270=1.18351|271=13000000|273=20211222|290=3|64=20211224|1070=1|269=1|270=1.18999|271=13000000|273=20211222|290=3|64=20211224|1070=1|10=055|
{code}
{color:#0747A6}*#5*{color}
select usdmajorpairinstrid1 from instrument where instrsymbol ='SGD/RUB' 
and instrtype ='SPO'
select usdmajorpairinstrid2 from instrument where instrsymbol ='SGD/RUB' 
and instrtype ='SPO'";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, SWED;;;PFX-4076;;QAP-6337;PFX;"Run the query from the Description to change usdmajorpairinstrid1 and 
usdmajorpairinstrid2 and restart QSFE";#3;QSFE is restarted;;
;;;;;;;;;;;;;;;Send MD request (35=V) to SGD/RUB SPOT;;MarketDataSnapshotFullRefresh was sent in reply;;
;;;;;;;;;;;;;;;Unsubscribe from MD. check and save prices for SGD/RUB;;;;
;;;;;;;;;;;;;;;"Run ITK (settldate) and wait some time till ITK update usdmajorpairinstrid1 
and usdmajorpairinstrid2";;ITK worked out;;
;;;;;;;;;;;;;;;Send MD to one of the major pair USD/SGD;#4;MD is sent;;
;;;;;;;;;;;;;;;Run the query from the Description;#5;"Check that usdmajorpairinstrid1 = m1J_Tia0bp_A1Yjpq5rkng and 
usdmajorpairinstrid2 = 5buw5bbM9SokmzeKNZBMpw";;
;;;;;;;;;;;;;;;Send MD request (35=V) to SGD/RUB SPOT;;"MD's been recalculated and changed according to correct 
usdmajorpairinstrid1 and usdmajorpairinstrid2";;
QAP-T2453;Market data subscribe check that tag 64 overide tag 63 and set tenor BrokenDate;Automated;;"*Precondition:*

Start component FIXMARKETDATA (port 14055)

 

*35 = V*
{code:java}
< 
8=FIXT.1.1|9=191|35=V|49=MD1|56=QUODFX_UAT|34=74|52=20211215-07:57:42|262=EUR/USD:FXF:BDA:MS_2|263=1|264=10|265=0|267=2|269=0|269=1|146=1|55=EUR/USD|460=4|63=0|461=MS-SW|64=20211223|22=8|167=FXFWD|1301=MS-SW|10=135|
{code}
{code:java}
Mapping
Mapped fix message fix MarketDataRequest={ MarketDataRequestBlock={ 
MDReqList={ MDReqBlock=#2:[ 1:{ MDEntryType=Bid } 2:{ MDEntryType=Offer } ] 
} InstrumentMDReqList={ InstrumentMDReqBlock=[ { InstrumentBlock={ 
InstrSymbol=""EUR/USD"" SecurityIDSource=ExchSymb ProductType=CURRENCY 
CFI=""MS-SW"" InstrType=FXNDF Tenor=BrokenDate } SettlDate=2021-Dec-23 
MarketID=""MS-SW"" } ] } MDReqID=""EUR/USD:FXF:BDA:MS_1"" 
SubscriptionRequestType=Subscribe MDUpdateType=FullRefresh } } }

{code}
 *35=W*
{code:java}
> 
8=FIXT.1.1|9=1013|35=W|34=93|49=QUODFX_UAT|52=20211215-07:57:42.720635|56=MD1|1128=9|55=EUR/USD|262=EUR/USD:FXF:BDA:MS_2|268=10|269=0|270=1.181994|40=2|271=1000000|64=20211223|1026=1.18197|1027=0.000024|269=0|270=1.181989|40=2|271=6000000|64=20211223|1026=1.18197|1027=0.000019|269=0|270=1.181984|40=2|271=12000000|64=20211223|1026=1.18197|1027=0.000014|269=0|270=1.181979|40=2|271=5000000|64=20211223|1026=1.18197|1027=0.000009|269=0|270=1.181974|40=2|271=4000000|64=20211223|1026=1.18197|1027=0.000004|269=1|270=1.182004|40=2|271=1000000|64=20211223|1026=1.18202|1027=-0.000016|269=1|270=1.182009|40=2|271=6000000|64=20211223|1026=1.18202|1027=-0.000011|269=1|270=1.182014|40=2|271=12000000|64=20211223|1026=1.18202|1027=-0.000006|269=1|270=1.182019|40=2|271=5000000|64=20211223|1026=1.18202|1027=-0.000001|269=1|270=1.182024|40=2|271=4000000|64=20211223|1026=1.18202|1027=0.000004|461=MS-SW|779=20211215-07:57:42.710674|1301=MS-SW|1500=EUR/USD:FXF:20211223:MS.D.FSS|11501=20211215-07:57:42.710674|11502=20211215-07:57:42.710491|10=128|
{code}
{code:java}
Mapping
fix MarketDataSnapshotFullRefresh={ Header={ MsgTime=2021-Dec-15 
07:57:42.719876000 } InstrumentBlock={ InstrSymbol=""EUR/USD"" 
SecurityIDSource=ExchSymb ProductType=CURRENCY CFI=""MS-SW"" 
InstrType=FXForward Tenor=BrokenDate InstrSettlDate=""20211223"" } 
MarketDataFullList={ MarketDataFullBlock=#10:[ 1:{ MDEntryType=Bid 
MDEntryPx=1.181994000 OrdType=Limit MDEntrySize=1000000.000000000 
MDEntryPosition=1 MDEntryForwardPoints=0.000024000 
MDEntrySpotRate=1.181970000 } 2:{ MDEntryType=Bid MDEntryPx=1.181989000 
OrdType=Limit MDEntrySize=6000000.000000000 MDEntryPosition=2 
MDEntryForwardPoints=0.000019000 MDEntrySpotRate=1.181970000 } 3:{ 
MDEntryType=Bid MDEntryPx=1.181984000 OrdType=Limit 
MDEntrySize=12000000.000000000 MDEntryPosition=3 
MDEntryForwardPoints=0.000014000 MDEntrySpotRate=1.181970000 } 4:{ 
MDEntryType=Bid MDEntryPx=1.181979000 OrdType=Limit 
MDEntrySize=5000000.000000000 MDEntryPosition=4 
MDEntryForwardPoints=0.000009000 MDEntrySpotRate=1.181970000 } 5:{ 
MDEntryType=Bid MDEntryPx=1.181974000 OrdType=Limit 
MDEntrySize=4000000.000000000 MDEntryPosition=5 
MDEntryForwardPoints=0.000004000 MDEntrySpotRate=1.181970000 } 6:{ 
MDEntryType=Offer MDEntryPx=1.182004000 OrdType=Limit 
MDEntrySize=1000000.000000000 MDEntryPosition=1 
MDEntryForwardPoints=-0.000016000 MDEntrySpotRate=1.182020000 } 7:{ 
MDEntryType=Offer MDEntryPx=1.182009000 OrdType=Limit 
MDEntrySize=6000000.000000000 MDEntryPosition=2 
MDEntryForwardPoints=-0.000011000 MDEntrySpotRate=1.182020000 } 8:{ 
MDEntryType=Offer MDEntryPx=1.182014000 OrdType=Limit 
MDEntrySize=12000000.000000000 MDEntryPosition=3 
MDEntryForwardPoints=-0.000006000 MDEntrySpotRate=1.182020000 } 9:{ 
MDEntryType=Offer MDEntryPx=1.182019000 OrdType=Limit 
MDEntrySize=5000000.000000000 MDEntryPosition=4 
MDEntryForwardPoints=-0.000001000 MDEntrySpotRate=1.182020000 } 10:{ 
MDEntryType=Offer MDEntryPx=1.182024000 OrdType=Limit 
MDEntrySize=4000000.000000000 MDEntryPosition=5 
MDEntryForwardPoints=0.000004000 MDEntrySpotRate=1.182020000 } ] } 
MDStreamID=""EUR/USD:FXF:20211223:MS.D.FSS"" MarketID=""MS-SW"" 
MDReportID=""27436-659871"" MDReqID=""EUR/USD:FXF:BDA:MS_2"" MDTime=2021-Dec-15 
07:57:42.710674000 MDArrivalTime=2021-Dec-15 07:57:42.710491000 }

{code}
 ";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-3492;;QAP-6289;PFX;Send msg 35=V with tags 63 and 64;;Message successfully sent and receives md in 35=W;;
;;;;;;;;;;;;;;;Check mapping of message;;"Tag 64 should overide tag 63 and set tenor=BrokenDate,
settleDate from tag 64";;
QAP-T2454;SWAP RFQ without tag 64;Automated;;"35=R #1
{code:java}
8=FIXT.1.1|9=213|35=R|49=QUOD5|56=QUODFX_UAT|34=82|52=20211207-16:28:04|131=219746484|146=1|55=EUR/USD|167=FXSWAP|38=1000000|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|587=W1|685=1000000|600=EUR/USD|609=FXFWD|587=W2|685=1000000|10=044|


{code}
35=S #2
{code:java}
8=FIXT.1.1|9=546|35=S|34=86|49=QUODFX_UAT|52=20211207-16:28:08.884|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20211207-16:30:06.083|117=01211207162806528002|131=219746484|132=-0.00037|133=0.00023|134=1000000|135=1000000|167=FXSWAP|188=1.18151|190=1.18151|460=4|537=1|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|685=1000000|587=W1|588=20211216|681=1.18141|684=1.18182|1067=-0.0001|1068=0.00031|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|685=1000000|587=W2|588=20211223|681=1.18145|684=1.18164|1067=-0.00006|1068=0.00013|1065=-0.00037|1066=0.00023|1166=01211207162806528002|10=195|
{code}
{code:java}
8=FIXT.1.1|9=546|35=S|34=88|49=QUODFX_UAT|52=20211207-16:28:46.232|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20211207-16:30:06.083|117=01211207162846528002|131=219746484|132=-0.00037|133=0.00023|134=1000000|135=1000000|167=FXSWAP|188=1.18151|190=1.18151|460=4|537=1|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|685=1000000|587=W1|588=20211216|681=1.18141|684=1.18182|1067=-0.0001|1068=0.00031|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|685=1000000|587=W2|588=20211223|681=1.18145|684=1.18164|1067=-0.00006|1068=0.00013|1065=-0.00037|1066=0.00023|1166=01211207162846528002|10=194|

{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-4145;;QAP-6192;PFX;"from Client interface send SWAP for FWD/FWD without tag 588 and 64 but with 
tenor in tag 587 for each leg";#1;35=S is sent to reply;;
;;;;;;;;;;;;;;;check that quote is being sent correctly for request without tag 64, 588;;see description;;
QAP-T2455;Client Pricing: Checking that 3 leg cross pair is correctly priced if RFQ goes to dealer intervention;Specified;;"Checking that RFQ with qty > sweepable pricing correctly if it placed with 
3-leg configured currency pair.

*Precondition:*

There is should be configured cross currency:

NOK/SEK: Cross Through EUR to USD and Cross Through USD to EUR

Also there is should be client tier with configured currencies:

NOK/SEK (without venues) EUR/NOK, EUR/USD, USD/SEK (with venues attached)

#1
{code:java}
8=FIXT.1.1|9=143|35=R|49=QUOD5|56=QUODFX_UAT|34=49|52=20211206-15:59:04|131=659986004|146=1|55=NOK/SEK|167=FXSPOT|537=1|38=22000000|63=0|15=NOK|1=Iridium1|40=D|10=139|
{code}
#2
{code:java}
8=FIXT.1.1|9=265|35=S|34=98|49=QUODFX_UAT|52=20211206-16:19:02.187|56=QUOD5|1128=9|15=NOK|55=NOK/SEK|62=20211206-16:21:02.173|117=01211206161902987002|131=659986007|132=1.18129|133=1.18176|134=22000000|135=22000000|167=FXSPOT|188=1.18129|190=1.18176|460=4|1166=01211206161902987002|10=133| 
{code}
 #3
{code:java}
8=FIXT.1.1|9=202|35=D|49=QUOD5|56=QUODFX_UAT|34=95|52=20211206-16:19:47|1=CLIENT1|11=659986008|21=1|15=NOK|38=22000000|40=D|54=1|55=NOK/SEK|59=3|60=20211206-16:19:47|63=0|64=20211208|167=FXSPOT|117=01211206161902987002|10=196|
{code}";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression;;;PFX-4081;;QAP-6164;PFX;"Through MiniFIX/Client Interface send an RFQ on configured 3-leg currency 
pair with Qty > Sweepable";"NOK/SEK 22000000
#1";No quotes received, RFQ goes in DI window;;
;;;;;;;;;;;;;;;From FETrading => Dealer Intervention assign quote by yourself and estimate;;No errors, prices appears;;
;;;;;;;;;;;;;;;Send quote;#2;35=S messages received in miniFIX;;
QAP-T2456;Market data subscribe check that tag 64 overide tag 63 and set tenor BrokenDate NDF;Specified;;"*Precondition:*

Start component FIXMARKETDATA (port 14055)

 

*35 = V*
{code:java}
8=FIXT.1.1|9=191|35=V|49=MD1|56=QUODFX_UAT|34=20|52=20211215-07:49:25|262=USD/PHP:FXF:BDA:MS_1|263=1|264=10|265=0|267=2|269=0|269=1|146=1|55=USD/PHP|460=4|63=0|461=MS-SW|64=20211223|22=8|167=FXNDF|1301=MS-SW|10=110|

{code}
{code:java}
Mapping
Mapped fix message fix MarketDataRequest={ MarketDataRequestBlock={ 
MDReqList={ MDReqBlock=#2:[ 1:{ MDEntryType=Bid } 2:{ MDEntryType=Offer } ] 
} InstrumentMDReqList={ InstrumentMDReqBlock=[ { InstrumentBlock={ 
InstrSymbol=""USD/PHP"" SecurityIDSource=ExchSymb ProductType=CURRENCY 
CFI=""MS-SW"" InstrType=FXNDF Tenor=BrokenDate } SettlDate=2021-Dec-23 
MarketID=""MS-SW"" } ] } MDReqID=""USD/PHP:FXF:BDA:MS_1"" 
SubscriptionRequestType=Subscribe MDUpdateType=FullRefresh } }

{code}
 *35=W*
{code:java}
8=FIXT.1.1|9=723|35=W|34=23|49=QUODFX_UAT|52=20211215-07:49:25.887961|56=MD1|1128=9|55=USD/PHP|262=USD/PHP:FXF:BDA:MS_1|268=6|269=0|270=48.304982|40=2|271=2000000|64=20211223|1026=48.30496|1027=0.000022|269=0|270=48.304977|40=2|271=7000000|64=20211223|1026=48.30496|1027=0.000017|269=0|270=48.304972|40=2|271=10000000|64=20211223|1026=48.30496|1027=0.000012|269=1|270=48.304992|40=2|271=2000000|64=20211223|1026=48.30501|1027=-0.000018|269=1|270=48.304997|40=2|271=7000000|64=20211223|1026=48.30501|1027=-0.000013|269=1|270=48.305002|40=2|271=10000000|64=20211223|1026=48.30501|1027=-0.000008|461=MS-SW|779=20211215-07:49:25.406567|1301=MS-SW|1500=USD/PHP:NDF:20211223:MS.D.FSS|11501=20211215-07:49:25.406567|11502=20211215-07:49:25.406475|10=010|{code}
 
{code:java}
Mapping
message: fix MarketDataSnapshotFullRefresh={ Header={ MsgTime=2021-Dec-15 
07:49:25.887177000 } InstrumentBlock={ InstrSymbol=""USD/PHP"" 
SecurityIDSource=ExchSymb ProductType=CURRENCY CFI=""MS-SW"" InstrType=FXNDF 
Tenor=BrokenDate InstrSettlDate=""20211223"" } MarketDataFullList={ 
MarketDataFullBlock=#6:[ 1:{ MDEntryType=Bid MDEntryPx=48.304982000 
OrdType=Limit MDEntrySize=2000000.000000000 MDEntryPosition=1 
MDEntryForwardPoints=0.000022000 MDEntrySpotRate=48.304960000 } 2:{ 
MDEntryType=Bid MDEntryPx=48.304977000 OrdType=Limit 
MDEntrySize=7000000.000000000 MDEntryPosition=2 
MDEntryForwardPoints=0.000017000 MDEntrySpotRate=48.304960000 } 3:{ 
MDEntryType=Bid MDEntryPx=48.304972000 OrdType=Limit 
MDEntrySize=10000000.000000000 MDEntryPosition=3 
MDEntryForwardPoints=0.000012000 MDEntrySpotRate=48.304960000 } 4:{ 
MDEntryType=Offer MDEntryPx=48.304992000 OrdType=Limit 
MDEntrySize=2000000.000000000 MDEntryPosition=1 
MDEntryForwardPoints=-0.000018000 MDEntrySpotRate=48.305010000 } 5:{ 
MDEntryType=Offer MDEntryPx=48.304997000 OrdType=Limit 
MDEntrySize=7000000.000000000 MDEntryPosition=2 
MDEntryForwardPoints=-0.000013000 MDEntrySpotRate=48.305010000 } 6:{ 
MDEntryType=Offer MDEntryPx=48.305002000 OrdType=Limit 
MDEntrySize=10000000.000000000 MDEntryPosition=3 
MDEntryForwardPoints=-0.000008000 MDEntrySpotRate=48.305010000 } ] } 
MDStreamID=""USD/PHP:NDF:20211223:MS.D.FSS"" MarketID=""MS-SW"" 
MDReportID=""27436-653492"" MDReqID=""USD/PHP:FXF:BDA:MS_1"" MDTime=2021-Dec-15 
07:49:25.406567000 MDArrivalTime=2021-Dec-15 07:49:25.406475000 }
{code}
 ";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-3492;;QAP-6155;PFX;Send msg 35=V with tags 63 and 64;;Message successfully sent and receives md in 35=W;;
;;;;;;;;;;;;;;;Check mapping of message;;"Tag 64 should overide tag 63 and set tenor=BrokenDate,
settleDate from tag 64";;
QAP-T2457;The cross tiles become indicative when one major pair is indicative;Automated;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FX_fix, FXregression, SWED;;;PFX-4091;;QAP-6153;PFX;From REST API change major pair Executable to OFF for whole tenor SPOT;"quod314@luna
Palladium2
EUR/USD";request is sent;;
;;;;;;;;;;;;;;;From FIX send MD request for cross pair NOK/SEK;;All bands are priced but MD must be INDICATIVE;;
;;;;;;;;;;;;;;;From REST API change major pair Executable to ON for whole tenor SPOT;;;;
QAP-T2458;Market data subscribe to FWD NDF with fix sell plugin;Automated;;"The main goal is to check that message 35=V now supports message with tag 
63
*35=V*
{code:java}
8=FIXT.1.1|9=171|35=V|34=8126|49=QUOD7|52=20211206-11:16:51.023|56=QUODFX_UAT|50=Iridium1|262=2098679215|263=1|264=0|265=0|10050=0|146=1|55=USD/PHP|167=FXNDF|460=4|63=W2|267=2|269=0|269=1|10=031
{code}
{code:java}
Mapped fix message fix MarketDataRequest={ MarketDataRequestBlock={ 
MDReqList={ MDReqBlock=#2:[ 1:{ MDEntryType=Bid } 2:{ MDEntryType=Offer } ] 
} InstrumentMDReqList={ InstrumentMDReqBlock=[ { InstrumentBlock={ 
InstrSymbol=""USD/PHP"" ProductType=CURRENCY InstrType=FXNDF Tenor=W2 } } ] } 
MDReqID=""2098679215"" SubscriptionRequestType=Subscribe 
MDUpdateType=FullRefresh ClientAccountGroupID=""Iridium1"" 
BookType=PriceDepth } }

{code}
*35=W*
{code:java}
8=FIXT.1.1|9=1567|35=W|34=8155|49=QUODFX_UAT|52=20211206-11:16:56.860|56=QUOD7|1128=9|55=USD/PHP|262=2098679215|268=6|269=0|278=8_USD/PHP_20211206T103414944233864_Bid1_20211221|270=1.18137|271=1000000|272=20211206|273=11:16:57|299=8_USD/PHP_20211206T103414944233864_Bid1_20211221|290=1|1024=1|63=W2|64=20211221|1070=1|1026=1.18133|1027=0.00004|269=1|278=8_USD/PHP_20211206T103414944233864_Ask1_20211221|270=1.18155|271=1000000|272=20211206|273=11:16:57|299=8_USD/PHP_20211206T103414944233864_Ask1_20211221|290=1|1024=1|63=W2|64=20211221|1070=1|1026=1.18154|1027=0.00001|269=0|278=8_USD/PHP_20211206T103414944233864_Bid2_20211221|270=1.18124|271=5000000|272=20211206|273=11:16:57|299=8_USD/PHP_20211206T103414944233864_Bid2_20211221|290=2|1024=1|63=W2|64=20211221|1070=1|1026=1.1812|1027=0.00004|269=1|278=8_USD/PHP_20211206T103414944233864_Ask2_20211221|270=1.18178|271=5000000|272=20211206|273=11:16:57|299=8_USD/PHP_20211206T103414944233864_Ask2_20211221|290=2|1024=1|63=W2|64=20211221|1070=1|1026=1.18177|1027=0.00001|269=0|278=8_USD/PHP_20211206T103414944233864_Bid3_20211221|270=1.18118|271=10000000|272=20211206|273=11:16:57|299=8_USD/PHP_20211206T103414944233864_Bid3_20211221|290=3|1024=1|63=W2|64=20211221|1070=1|1026=1.18114|1027=0.00004|269=1|278=8_USD/PHP_20211206T103414944233864_Ask3_20211221|270=1.18187|271=10000000|272=20211206|273=11:16:57|299=8_USD/PHP_20211206T103414944233864_Ask3_20211221|290=3|1024=1|63=W2|64=20211221|1070=1|1026=1.18186|1027=0.00001|779=20211206-11:16:56.859|11501=20211206-11:16:56.859|11503=20211206-10:11:37.929|11504=20211206-10:11:37.929|10=056|

{code}
{code:java}
sending to FIX plugin fix MarketDataSnapshotFullRefresh={ InstrumentBlock={ 
InstrSymbol=""USD/PHP"" ProductType=CURRENCY InstrType=FXNDF Tenor=W2 } 
MarketDataFullList={ MarketDataFullBlock=#6:[ 1:{ MDEntryType=Bid 
MDEntryID=""8_USD/PHP_20211206T103414944233864_Bid1_20211221"" 
MDEntryPx=1.181370000 MDEntrySize=1000000.000000000 
MDEntryDateTime=2021-Dec-06 11:16:56.847558682 MDEntryPosition=1 
MDOriginType=Book SettlType=W2 SettlDate=2021-Dec-21 
QuoteEntryID=""8_USD/PHP_20211206T103414944233864_Bid1_20211221"" 
MDQuoteType=Tradeable MDEntryPositionNo=1 MDEntryForwardPoints=0.000040000 
MDEntryMargin=0.000000000 MDEntrySpotRate=1.181330000 PublishPrices=Yes 
MDEntryBaseSize=1000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181338000 } 2:{ MDEntryType=Offer 
MDEntryID=""8_USD/PHP_20211206T103414944233864_Ask1_20211221"" 
MDEntryPx=1.181550000 MDEntrySize=1000000.000000000 
MDEntryDateTime=2021-Dec-06 11:16:56.847558682 MDEntryPosition=1 
MDOriginType=Book SettlType=W2 SettlDate=2021-Dec-21 
QuoteEntryID=""8_USD/PHP_20211206T103414944233864_Ask1_20211221"" 
MDQuoteType=Tradeable MDEntryPositionNo=1 MDEntryForwardPoints=0.000010000 
MDEntryMargin=0.000000000 MDEntrySpotRate=1.181540000 PublishPrices=Yes 
MDEntryBaseSize=1000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181533000 } 3:{ MDEntryType=Bid 
MDEntryID=""8_USD/PHP_20211206T103414944233864_Bid2_20211221"" 
MDEntryPx=1.181240000 MDEntrySize=5000000.000000000 
MDEntryDateTime=2021-Dec-06 11:16:56.847558682 MDEntryPosition=2 
MDOriginType=Book SettlType=W2 SettlDate=2021-Dec-21 
QuoteEntryID=""8_USD/PHP_20211206T103414944233864_Bid2_20211221"" 
MDQuoteType=Tradeable MDEntryPositionNo=2 MDEntryForwardPoints=0.000040000 
MDEntryMargin=0.000000000 MDEntrySpotRate=1.181200000 PublishPrices=Yes 
MDEntryBaseSize=5000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181202000 } 4:{ MDEntryType=Offer 
MDEntryID=""8_USD/PHP_20211206T103414944233864_Ask2_20211221"" 
MDEntryPx=1.181780000 MDEntrySize=5000000.000000000 
MDEntryDateTime=2021-Dec-06 11:16:56.847558682 MDEntryPosition=2 
MDOriginType=Book SettlType=W2 SettlDate=2021-Dec-21 
QuoteEntryID=""8_USD/PHP_20211206T103414944233864_Ask2_20211221"" 
MDQuoteType=Tradeable MDEntryPositionNo=2 MDEntryForwardPoints=0.000010000 
MDEntryMargin=0.000000000 MDEntrySpotRate=1.181770000 PublishPrices=Yes 
MDEntryBaseSize=5000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181768000 } 5:{ MDEntryType=Bid 
MDEntryID=""8_USD/PHP_20211206T103414944233864_Bid3_20211221"" 
MDEntryPx=1.181180000 MDEntrySize=10000000.000000000 
MDEntryDateTime=2021-Dec-06 11:16:56.847558682 MDEntryPosition=3 
MDOriginType=Book SettlType=W2 SettlDate=2021-Dec-21 
QuoteEntryID=""8_USD/PHP_20211206T103414944233864_Bid3_20211221"" 
MDQuoteType=Tradeable MDEntryPositionNo=3 MDEntryForwardPoints=0.000040000 
MDEntryMargin=0.000000000 MDEntrySpotRate=1.181140000 PublishPrices=Yes 
MDEntryBaseSize=10000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181140500 } 6:{ MDEntryType=Offer 
MDEntryID=""8_USD/PHP_20211206T103414944233864_Ask3_20211221"" 
MDEntryPx=1.181870000 MDEntrySize=10000000.000000000 
MDEntryDateTime=2021-Dec-06 11:16:56.847558682 MDEntryPosition=3 
MDOriginType=Book SettlType=W2 SettlDate=2021-Dec-21 
QuoteEntryID=""8_USD/PHP_20211206T103414944233864_Ask3_20211221"" 
MDQuoteType=Tradeable MDEntryPositionNo=3 MDEntryForwardPoints=0.000010000 
MDEntryMargin=0.000000000 MDEntrySpotRate=1.181860000 PublishPrices=Yes 
MDEntryBaseSize=10000000.000000000 MDEntryBaseMargin=0.000000000 
MDEntryCorePx=1.181855500 } ] } REC_STATUS=OK MDReqID=""2098679215"" 
MDTime=2021-Dec-06 11:16:56.859786265 OrigMDTime=2021-Dec-06 
10:11:37.929764000 OrigMDArrivalTime=2021-Dec-06 10:11:37.929438000 
OrigClientVenueID=""HSBC"" }
OrigClientVenueID=""HSBC"" }
{code}";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX;;;PFX-3492;;QAP-6151;PFX;Send subscribe for MD to fix sell gtw for FXNDF with tag 63;35=V;"Subscription success,
received message 35=W with prices for our instrument.";;
;;;;;;;;;;;;;;;Check msg tags;;"Number of band is same as displayed for this Currency and Tenor on ESP 
tile.
Prices send for bid and for offer.
Tenor is the same as we expected.";;
;;;;;;;;;;;;;;;Send MarketDataRequest (unsubscribe) message;;Message 35=W stop coming;;
QAP-T2459;Calculate prices for the cross currency if major is IND;Automated;;"*{color:#0747A6}#1{color}*

{code:java}
2022-01-12 15:14:29.358115191 QUOD.FXFH [16647] INFO qfQuod_any_broker_buy 
(QuickfixQuodLog.h:67) - QUICKFIX: FIXT.1.1:MARKETDATA->TEST: incoming: 
8=FIXT.1.1|9=525|35=W|34=166|49=TEST|52=20220112-15:14:29.355|56=MARKETDATA|55=GBP/USD|167=FXSPOT|262=GBP/USD:SPO:REG:HSBC_174|268=6|269=0|270=1.18599|271=1000000|273=20220112|290=1|64=20220114|1070=0|269=1|270=1.1881|271=1000000|273=20220112|290=1|64=20220114|1070=0|269=0|270=1.18397|271=5000000|273=20220112|290=2|64=20220114|1070=0|269=1|270=1.18909|271=5000000|273=20220112|290=2|64=20220114|1070=0|269=0|270=1.18251|271=13000000|273=20220112|290=3|64=20220114|1070=0|269=1|270=1.18999|271=13000000|273=20220112|290=3|64=20220114|1070=0|10=002|
{code}




*{color:#0747A6}#4{color}*
{code:java}
2022-01-12 15:14:57.185699679 QUOD.FXFH [16647] INFO qfQuod_any_broker_buy 
(QuickfixQuodLog.h:67) - QUICKFIX: FIXT.1.1:MARKETDATA->TEST: incoming: 
8=FIXT.1.1|9=525|35=W|34=167|49=TEST|52=20220112-15:14:57.184|56=MARKETDATA|55=GBP/USD|167=FXSPOT|262=GBP/USD:SPO:REG:HSBC_174|268=6|269=0|270=1.18599|271=1000000|273=20220112|290=1|64=20220114|1070=1|269=1|270=1.1881|271=1000000|273=20220112|290=1|64=20220114|1070=1|269=0|270=1.18397|271=5000000|273=20220112|290=2|64=20220114|1070=1|269=1|270=1.18909|271=5000000|273=20220112|290=2|64=20220114|1070=1|269=0|270=1.18251|271=13000000|273=20220112|290=3|64=20220114|1070=1|269=1|270=1.18999|271=13000000|273=20220112|290=3|64=20220114|1070=1|10=010|
{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, Regression, SWED;;;PFX-4224, PFX-4238;;QAP-6149;PFX;Send MD with IND to one of the major pairs;#1;MD is sent and applied;;
;;;;;;;;;;;;;;;Send MD request to cross currency;#2;MD is INDICATIVE;;
;;;;;;;;;;;;;;;Send MD with TRD to one of the major pairs;#3;MD is sent and applied;;
;;;;;;;;;;;;;;;Send MD request to cross currency;;MD is TRADABLE;;
QAP-T2460;Set indicative to the Underlying BID/OFFER if the Points are indicative;Automated;;"*{color:#0747A6}#1{color}*
35=W

{code:java}
8=FIXT.1.1|9=300|35=W|34=189|49=TEST|52=20211203-17:14:02.437|56=MARKETDATA|55=EUR/USD|167=FXFWD|262=EUR/USD:FXF:WK1:CITI_10|268=2|269=0|270=1.18039|271=1000000|273=20211203|290=1|64=20211214|1070=0|1027=0.0002|1026=1.18038|269=1|270=1.18051|271=1000000|273=20211203|290=1|64=20211214|1070=0|1027=0.0002|1026=1.18052|10=247|
{code}
mapping

{code:java}
serializing market MarketDataSnapshotFullRefresh={ InstrumentBlock={ 
InstrSymbol=""EUR/USD:FXF:WK1:CITI"" } MarketDataFullList={ 
MarketDataFullBlock=#2:[ 1:{ MDEntryType=Bid MDEntryPx=1.180390000 
OrdType=Limit MDEntrySize=1000000.000000000 MDEntryPosition=1 
MDQuoteType=Indicative MDEntryForwardPoints=0.000200000 
MDEntrySpotRate=1.180380000 } 2:{ MDEntryType=Offer MDEntryPx=1.180510000 
OrdType=Limit MDEntrySize=1000000.000000000 MDEntryPosition=1 
MDQuoteType=Indicative MDEntryForwardPoints=0.000200000 
MDEntrySpotRate=1.180520000 } ] } MDTime=2021-Dec-03 17:14:02.439173000 
SEQ_NO=0 VenueMDSeqNum=189 RefreshIndicator=false MDBookType=PriceDepth 
MDArrivalTime=2021-Dec-03 17:14:02.438614000 }
{code}

*{color:#0747A6}#2{color}*
{code:java}
8=FIXT.1.1|9=300|35=W|34=189|49=TEST|52=20211203-17:14:02.437|56=MARKETDATA|55=EUR/USD|167=FXFWD|262=EUR/USD:FXF:WK1:CITI_10|268=2|269=0|270=1.18039|271=1000000|273=20211203|290=1|64=20211214|1070=1|1027=0.0002|1026=1.18038|269=1|270=1.18051|271=1000000|273=20211203|290=1|64=20211214|1070=1|1027=0.0002|1026=1.18052|10=247|
{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, needs_refactoring_FX, SWED;;;PFX-4088, PFX-4174;;QAP-6148;PFX;"From BUY side send MD with
MDQuoteType=Indicative";;MD is sent;;
;;;;;;;;;;;;;;;Open ESP tile with that instrument and forward tenor;"For example :
1W
EUR/USD";All bands are grey and Executable button is red;;
;;;;;;;;;;;;;;;From Client Pricing Tile send an order with forward tenor;;order is sent and rejected with the reason `empty book`;;
;;;;;;;;;;;;;;;From Client Pricing Tile send an order with Spot tenor;;order is sent and filled;;
;;;;;;;;;;;;;;;"From BUY side send MD with
MDQuoteType=Tradable";;;;
QAP-T2461;TOD/TOM swap -> Interpolation;Automated;;"*AutoRFQClientPricingFallback=Interpolation*
Add only {color:#0747A6}*ESP*{color} venue to a Forward Venue tab
*{color:#0747A6}#1{color}*

{code:java}
2022-03-23 09:52:56.604237585 QUOD.QS_RFQ_STANDARD_SELL [10493] INFO 
qfQuod_any_client_sell (QuickfixQuodLog.h:67) - QUICKFIX: 
FIXT.1.1:QUODFX_UAT->QUOD5: incoming: 
8=FIXT.1.1|9=266|35=R|49=QUOD5|56=QUODFX_UAT|34=222|52=20220323-09:52:56|131=120152742|146=1|55=EUR/USD|167=FXSWAP|38=1000000|64=20220323|15=EUR|1=Konstantin1|555=2|600=EUR/USD|609=FXFWD|624=2|587=1|588=20220323|685=1000000|600=EUR/USD|609=FXFWD|624=1|587=2|588=20220324|685=1000000|10=060|
{code}
mapping

{code:java}
2022-03-23 09:52:56.604850300 QUOD.QS_RFQ_STANDARD_SELL [10493] INFO 
quickfixgtw (Processor.cpp:98) - Mapped fix message fix QuoteRequest={ 
AuthenticationBlock={ UserID=""gtwquod5"" RoleID=FIXClient 
SessionKey=1646923199000044244 } QuoteRequestBlock={ QuoteReqList={ 
QuoteReqBlock=[ { InstrumentBlock={ InstrSymbol=""EUR/USD"" 
ProductType=CURRENCY InstrType=FXSwap } QuoteReqInstrumentLegList={ 
QuoteReqInstrumentLegBlock=#2:[ 1:{ InstrumentLegBlock={ 
LegInstrSymbol=""EUR/USD"" LegSymbol=""EUR/USD"" LegProductType=CURRENCY 
LegInstrType=FXForward LegSide=Sell LegTenor=Cash } 
LegOrderQty=1000000.000000000 LegSettlType=Cash LegSettlDate=2022-Mar-23 } 
2:{ InstrumentLegBlock={ LegInstrSymbol=""EUR/USD"" LegSymbol=""EUR/USD"" 
LegProductType=CURRENCY LegInstrType=FXForward LegSide=Buy LegTenor=NextDay 
} LegOrderQty=1000000.000000000 LegSettlType=NextDay 
LegSettlDate=2022-Mar-24 } ] } SettlDate=2022-Mar-23 Currency=""EUR"" 
OrdQty=1000000.000000000 ClientAccountGroupID=""Konstantin1"" } ] } 
ClientQuoteReqID=""120152742"" } }
{code}

*{color:#0747A6}#2{color}*
mip

{code:java}
2022-03-23 09:52:57.228060531 QUOD.QS_RFQ_STANDARD_SELL [10404] INFO 
mip_common (Message.cpp:132) - serializing internal Quote={ RoutingBlock={ 
DestComponent=""ORS"" } QuoteBlock={ LegQuoteList={ LegQuoteBlock=#2:[ 1:{ 
LegInstrID=""mQPfjYuv4XRgGONlmIBEyw"" LegSide=Sell 
LegOrderQty=1000000.000000000 LegSettlType=Cash LegSettlDate=2022-Mar-23 
LegBidPx=1.181540000 LegOfferPx=1.181510000 LegBidForwardPoints=0.000040000 
LegOfferForwardPoints=0.000010000 } 2:{ LegInstrID=""Fg_ezKfsxwg_gVEw86mO7g"" 
LegSide=Buy LegOrderQty=1000000.000000000 LegSettlType=NextDay 
LegSettlDate=2022-Mar-24 LegBidPx=1.181510000 LegOfferPx=1.181550000 
LegBidForwardPoints=0.000050000 LegOfferForwardPoints=0.000010000 } ] } 
QuoteID=172800000005 QuoteRequestID=171300000031 
InstrID=""dsB_d9-Pz7BIGnQpYZ8SeQ"" }, persisting Quote={ QuoteID=172800000005 
UserID=""QA1"" RoleID=HeadOfSaleDealer CreationTime=2022-Mar-23 
09:52:56.623432097 Originator=""QS_RFQ_STANDARD_SELL"" QuoteType=Tradeable 
QuoteStatus=Accepted ListingID=506403760 AccountGroupID=""Konstantin1"" 
OrdQty=1000000.000000000 BidPx=0.000000000 BidSize=1.000000000 
OfferPx=0.000010000 OfferSize=1.000000000 QuoteRequestID=171300000031 
ValidUntilTime=2022-Mar-23 09:54:56.619310000 BidSpotRate=1.181500000 
OfferSpotRate=1.181500000 BidSwapPoints=0.000000000 
OfferSwapPoints=0.000010000 SettlDate=2022-Mar-23 Currency=""EUR"" 
InstrID=""dsB_d9-Pz7BIGnQpYZ8SeQ"" Origin=Internal 
ClientQuoteID=""01220323095256841002"" QuoteCategory=Automatic AffectPosit=No 
QuoteTTL=120, revision 1 } QuoteLeg={ QuoteID=172800000005 
InstrID=""dsB_d9-Pz7BIGnQpYZ8SeQ"" LegNumber=1 
LegInstrID=""mQPfjYuv4XRgGONlmIBEyw"" LegOrderQty=1000000.000000000 
LegSettlType=Cash LegSettlDate=2022-Mar-23 LegSide=Sell 
LegBidPx=1.181540000 LegOfferPx=1.181510000 LegBidForwardPoints=0.000040000 
LegOfferForwardPoints=0.000010000, revision 1 } QuoteLeg={ 
QuoteID=172800000005 InstrID=""dsB_d9-Pz7BIGnQpYZ8SeQ"" LegNumber=2 
LegInstrID=""Fg_ezKfsxwg_gVEw86mO7g"" LegOrderQty=1000000.000000000 
LegSettlType=NextDay LegSettlDate=2022-Mar-24 LegSide=Buy 
LegBidPx=1.181510000 LegOfferPx=1.181550000 LegBidForwardPoints=0.000050000 
LegOfferForwardPoints=0.000010000, revision 1 } ClientTierSymbTenQtyTrd={ 
ClientTierID=2800013 InstrSymbol=""EUR/USD"" Tenor=Cash IndiceUpperQty=2 
ActiveQuote=Yes MDQuoteType=Tradeable, revision 1 } 
ClientTierSymbTenQtyTrd={ ClientTierID=2800013 InstrSymbol=""EUR/USD"" 
Tenor=Cash IndiceUpperQty=3 ActiveQuote=Yes MDQuoteType=Tradeable, revision 
1 } on channel 171300000031 }

{code}

{code:java}
2022-03-23 09:52:57.239253113 QUOD.QS_RFQ_STANDARD_SELL [10362] INFO 
qfQuod_any_client_sell (QuickfixQuodLog.h:86) - QUICKFIX: 
FIXT.1.1:QUODFX_UAT->QUOD5: outgoing: 
8=FIXT.1.1|9=540|35=S|34=253|49=QUODFX_UAT|52=20220323-09:52:57.238|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20220323-09:54:56.619|64=20220323|117=01220323095256841002|131=120152742|132=0|133=0.00001|134=1|135=1|167=FXSWAP|188=1.1815|190=1.1815|460=4|537=1|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=2|685=1000000|587=1|588=20220323|681=1.18154|684=1.18151|1067=0.00004|1068=0.00001|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=1|685=1000000|587=2|588=20220324|681=1.18151|684=1.18155|1067=0.00005|1068=0.00001|1065=0|1066=0.00001|1166=01220323095256841002|10=253|

{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, SWED;;;PFX-4217;;QAP-6147;PFX;"Send RFQ swap
TOD/TOM";"#1
#2";See quote in reply;;
;;;;;;;;;;;;;;;Check Swap points;;"They are calculated by formula:
BID SWAP PRICE = Far Leg Ask Forward Points - Near Leg Ask Forward Points
and
OFFER SWAP PRICE= Far Leg Bid Forward Points - Near Leg Bid Forward Points";;
QAP-T2462;Market data subscribe to Spot with fix sell plugin  without tag 63/64;Automated;;"The main goal is to check that message 35=V now supports message without 
tag 63
*35=V*
{code:java}
< 
8=FIXT.1.1|9=153|35=V|49=QUOD3|56=QUODFX_UAT|34=264|52=20211203-10:55:28|50=Iridium1|262=1915066008|263=1|264=0|265=0|267=2|269=0|269=1|146=1|55=GBP/USD|460=4|167=FXSPOT|10=228|
{code}

{code:java}
Mapped fix message fix MarketDataRequest={ MarketDataRequestBlock={ 
MDReqList={ MDReqBlock=#2:[ 1:{ MDEntryType=Bid } 2:{ MDEntryType=Offer } ] 
} InstrumentMDReqList={ InstrumentMDReqBlock=[ { InstrumentBlock={ 
InstrSymbol=""GBP/USD"" ProductType=CURRENCY InstrType=FXSpot } } ] } 
MDReqID=""1915066008"" SubscriptionRequestType=Subscribe 
MDUpdateType=FullRefresh ClientAccountGroupID=""Iridium1"" } }
{code}



*35=W*

{code:java}
8=FIXT.1.1|9=1297|35=W|34=261|49=QUODFX_UAT|52=20211203-10:55:28.725|56=QUOD3|1128=9|55=GBP/USD|262=1915066008|268=6|269=0|278=4_GBP/USD_20211203T105528723295205_Bid1|270=1.18146|271=1000000|272=20211203|273=10:55:28|299=4_GBP/USD_20211203T105528723295205_Bid1|290=1|1024=1|63=0|64=20211207|1070=1|269=1|278=4_GBP/USD_20211203T105528723295205_Ask1|270=1.18154|271=1000000|272=20211203|273=10:55:28|299=4_GBP/USD_20211203T105528723295205_Ask1|290=1|1024=1|63=0|64=20211207|1070=1|269=0|278=4_GBP/USD_20211203T105528723295205_Bid2|270=1.18126|271=5000000|272=20211203|273=10:55:28|299=4_GBP/USD_20211203T105528723295205_Bid2|290=2|1024=1|63=0|64=20211207|1070=1|269=1|278=4_GBP/USD_20211203T105528723295205_Ask2|270=1.18173|271=5000000|272=20211203|273=10:55:28|299=4_GBP/USD_20211203T105528723295205_Ask2|290=2|1024=1|63=0|64=20211207|1070=1|269=0|278=4_GBP/USD_20211203T105528723295205_Bid3|270=1.18121|271=10000000|272=20211203|273=10:55:28|299=4_GBP/USD_20211203T105528723295205_Bid3|290=3|1024=1|63=0|64=20211207|1070=1|269=1|278=4_GBP/USD_20211203T105528723295205_Ask3|270=1.18178|271=10000000|272=20211203|273=10:55:28|299=4_GBP/USD_20211203T105528723295205_Ask3|290=3|1024=1|63=0|64=20211207|1070=1|779=20211203-10:55:28.724|11501=20211203-10:55:28.724|11503=20211203-10:26:03.633|11504=20211203-10:26:03.633|10=063|

{code}

{code:java}
sending to FIX plugin fix MarketDataSnapshotFullRefresh={ InstrumentBlock={ 
InstrSymbol=""GBP/USD"" ProductType=CURRENCY InstrType=FXSpot } 
MarketDataFullList={ MarketDataFullBlock=#6:[ 1:{ MDEntryType=Bid 
MDEntryID=""4_GBP/USD_20211203T105528723295205_Bid1"" MDEntryPx=1.181460000 
MDEntrySize=1000000.000000000 MDEntryDateTime=2021-Dec-03 
10:55:28.723295205 MDEntryPosition=1 MDOriginType=Book SettlType=Regular 
SettlDate=2021-Dec-07 
QuoteEntryID=""4_GBP/USD_20211203T105528723295205_Bid1"" 
MDQuoteType=Tradeable MDEntryPositionNo=1 MDEntryMargin=0.010000000 
PublishPrices=Yes MDEntryBaseSize=1000000.000000000 
MDEntryBaseMargin=0.000000000 MDEntryCorePx=1.181461000 } 2:{ 
MDEntryType=Offer MDEntryID=""4_GBP/USD_20211203T105528723295205_Ask1"" 
MDEntryPx=1.181540000 MDEntrySize=1000000.000000000 
MDEntryDateTime=2021-Dec-03 10:55:28.723295205 MDEntryPosition=1 
MDOriginType=Book SettlType=Regular SettlDate=2021-Dec-07 
QuoteEntryID=""4_GBP/USD_20211203T105528723295205_Ask1"" 
MDQuoteType=Tradeable MDEntryPositionNo=1 MDEntryMargin=0.080000000 
PublishPrices=Yes MDEntryBaseSize=1000000.000000000 
MDEntryBaseMargin=0.000000000 MDEntryCorePx=1.181532000 } 3:{ 
MDEntryType=Bid MDEntryID=""4_GBP/USD_20211203T105528723295205_Bid2"" 
MDEntryPx=1.181260000 MDEntrySize=5000000.000000000 
MDEntryDateTime=2021-Dec-03 10:55:28.723295205 MDEntryPosition=2 
MDOriginType=Book SettlType=Regular SettlDate=2021-Dec-07 
QuoteEntryID=""4_GBP/USD_20211203T105528723295205_Bid2"" 
MDQuoteType=Tradeable MDEntryPositionNo=2 MDEntryMargin=0.070000000 
PublishPrices=Yes MDEntryBaseSize=5000000.000000000 
MDEntryBaseMargin=0.000000000 MDEntryCorePx=1.181267000 } 4:{ 
MDEntryType=Offer MDEntryID=""4_GBP/USD_20211203T105528723295205_Ask2"" 
MDEntryPx=1.181730000 MDEntrySize=5000000.000000000 
MDEntryDateTime=2021-Dec-03 10:55:28.723295205 MDEntryPosition=2 
MDOriginType=Book SettlType=Regular SettlDate=2021-Dec-07 
QuoteEntryID=""4_GBP/USD_20211203T105528723295205_Ask2"" 
MDQuoteType=Tradeable MDEntryPositionNo=2 MDEntryMargin=0.030000000 
PublishPrices=Yes MDEntryBaseSize=5000000.000000000 
MDEntryBaseMargin=0.000000000 MDEntryCorePx=1.181727000 } 5:{ 
MDEntryType=Bid MDEntryID=""4_GBP/USD_20211203T105528723295205_Bid3"" 
MDEntryPx=1.181210000 MDEntrySize=10000000.000000000 
MDEntryDateTime=2021-Dec-03 10:55:28.723295205 MDEntryPosition=3 
MDOriginType=Book SettlType=Regular SettlDate=2021-Dec-07 
QuoteEntryID=""4_GBP/USD_20211203T105528723295205_Bid3"" 
MDQuoteType=Tradeable MDEntryPositionNo=3 MDEntryMargin=0.050000000 
PublishPrices=Yes MDEntryBaseSize=10000000.000000000 
MDEntryBaseMargin=0.000000000 MDEntryCorePx=1.181215000 } 6:{ 
MDEntryType=Offer MDEntryID=""4_GBP/USD_20211203T105528723295205_Ask3"" 
MDEntryPx=1.181780000 MDEntrySize=10000000.000000000 
MDEntryDateTime=2021-Dec-03 10:55:28.723295205 MDEntryPosition=3 
MDOriginType=Book SettlType=Regular SettlDate=2021-Dec-07 
QuoteEntryID=""4_GBP/USD_20211203T105528723295205_Ask3"" 
MDQuoteType=Tradeable MDEntryPositionNo=3 MDEntryMargin=0.090000000 
PublishPrices=Yes MDEntryBaseSize=10000000.000000000 
MDEntryBaseMargin=0.000000000 MDEntryCorePx=1.181771000 } ] } REC_STATUS=OK 
MDReqID=""1915066008"" MDTime=2021-Dec-03 10:55:28.724132372 
OrigMDTime=2021-Dec-03 10:26:03.633591000 OrigMDArrivalTime=2021-Dec-03 
10:26:03.633147000 OrigClientVenueID=""HSBC"" }
{code}";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX;;;PFX-3492;;QAP-6145;PFX;Connect to the FIX ESP Feed-handler;;Logon is success and hart bit is sending correct.;;
;;;;;;;;;;;;;;;"Send MarkeDartaRequest(subscribe) message 35=V(tag 263=1) with bid and 
offer sides and without tags 63,64";;"Subscription success,
received message 35=W with prices for SPOT tenor";;
;;;;;;;;;;;;;;;check message tags;;"Number of band is same as displayed for this Currency and Tenor on ESP 
tile.
Prices send for bid and for offer.
Tenor is the same as we expected.";;
;;;;;;;;;;;;;;;Send MarketDataRequest (unsubscribe) message;;Message 35=W stop coming;;
QAP-T2463;Order Velocity Limit positive check FIX;Specified;;"add config to ors.xml






{color:#de350b}*Root*{color}


 

*35=D*
{code:java}
8=FIXT.1.1|9=225|35=D|34=26|49=QUOD9|52=20211202-16:41:37.147|56=QUODFX_UAT|1=Silver1|11=957553811|15=EUR|21=1|38=5000000|40=D|44=1.1816|54=1|55=EUR/USD|59=4|60=20211202-16:41:35.000|63=0|64=20211206|117=01211202164136978002|167=FXSPOT|460=4|10=168|{code}
*35=8 Pending new*
{code:java}
8=FIXT.1.1|9=359|35=8|34=29|49=QUODFX_UAT|52=20211202-16:41:37.167|56=QUOD9|1128=9|6=0|11=957553811|14=0|15=EUR|17=MO1211202164137771001|21=1|22=8|31=0|32=0|37=MO1211202164137771001|38=5000000|39=A|40=D|44=1.1816|48=EUR/USD|54=1|55=EUR/USD|59=4|60=20211202-16:41:35.000|120=USD|150=A|151=5000000|167=FXSPOT|207=XQFX|453=1|448=gtwquod9|447=D|452=36|2376=1011|460=4|528=A|854=0|10=059|{code}
*35=8 Filled*
{code:java}
8=FIXT.1.1|9=507|35=8|34=30|49=QUODFX_UAT|52=20211202-16:41:37.180|56=QUOD9|1128=9|6=1.1816|11=957553811|14=5000000|15=EUR|17=EX1211202164137824001|21=1|22=8|30=XQFX|31=1.1816|32=5000000|37=MO1211202164137771001|38=5000000|39=2|40=D|44=1.1816|48=EUR/USD|54=1|55=EUR/USD|59=4|60=20211202-16:41:37.166|63=0|64=20211206|75=20211202|100=XQFX|120=USD|150=F|151=0|167=FXSPOT|194=1.1816|207=XQFX|381=5908000|453=3|448=QA1|447=D|452=12|448=QUOD|447=D|452=1|448=gtwquod9|447=D|452=36|2376=1011|460=4|528=A|854=0|2524=0|5055=20211206|10=243|{code}
*35= 8 Rejected*
{code:java}
8=FIXT.1.1|9=479|35=8|34=33|49=QUODFX_UAT|52=20211202-16:41:46.156|56=QUOD9|1128=9|6=0|11=046481778|14=0|15=EUR|17=MO1211202164146771001|21=1|22=8|31=0|32=0|37=MO1211202164146771001|38=5000000|39=8|40=D|44=1.1816|48=EUR/USD|54=1|55=EUR/USD|58=17568 
Accumulated quantity of order creation/modification reached the limit 
5000000 of 'OrderVelocityLimit' 
1200005|59=4|60=20211202-16:41:44.000|103=99|120=USD|150=8|151=0|167=FXSPOT|207=XQFX|453=1|448=gtwquod9|447=D|452=36|2376=1011|460=4|528=A|854=0|10=019|{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-1363;;QAP-6141;PFX;Create new Order Velociti limit via WebAdmin;"Max Qty = 5000000
Client = Silver1
Side = Buy
InstSymb =EUR/SUD";New limit successfully created;;
;;;;;;;;;;;;;;;Send RFQ with qty=5M and after receiving quote send NewOrder Single;35=D;"Order send and filled

see descr 35=8 Filled";;
;;;;;;;;;;;;;;;Send RFQ with qty=5M and after receiving quote send NewOrder Single;35=D;"Order send and rejected

See descr 35=8 Rejected";;
QAP-T2464;Order Velocity Limit positive check MM;Specified;;"add config to ors.xml






{color:#de350b}*Root*{color}
";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-1363;;QAP-6140;PFX;Create new Order Velociti limit via WebAdmin;"Max Qty = 5000000
Client = Silver1
Side = Buy
InstSymb =EUR/SUD
Moving Time Window: 30sec
AutoReset: True";New limit successfully created;;
;;;;;;;;;;;;;;;Send NewOrderSingle from MM ESP;"Inst = EUR/USD
Qty=5000000
Client = Silver1
Side = Buy";Order filled;;
;;;;;;;;;;;;;;;Send NewOrderSingle from MM ESP;"Inst = EUR/USD
Qty=5000000
Client = Silver1
Side = Buy";"You cant send order,
Check Technical Rejections Blotter
Order rejected ( 17568 Accumulated quantity of order creation/modification 
reached the limit 5000000 of 'OrderVelocityLimit' ...))

TODO: Investigate why order doesn`t appear in OrderBook";;
;;;;;;;;;;;;;;;Wait 30 sec and send NewOrderSingle from ESP Taker;"Inst = EUR/USD
Qty=5000000
Client = Silver1
Side = Buy";Order filled;;
QAP-T2465;Client Pricing Engine: Checking that quote still valid even if Active Quote Age time expired but no quotes were published;Specified;;"From parent description:
* An exception to this is when there are _no_ quotes published within the 
Quote Age of the current time, only the most recent quote is still valid 
(unless it has reached its maximum TTL.

*{color:#00875a}Set up Quote Update Interval (ms) = 20000{color}* and 
*{color:#00875a}Active Quote Age (ms) = 5000{color}*
{color:#0747a6}*#0*{color}

sell: 270=1.18060 buy:270=1.1813
{code:java}
8=FIXT.1.1|9=250|35=W|34=1566|49=TEST|52=20211013-20:13:25.707|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.18060|271=1000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1813|271=1000000|273=20211013|290=1|64=20211015|1070=1|10=044|
{code}
{color:#0747a6}*#1*{color}
{code:java}
< 
8=FIXT.1.1|9=155|35=R|49=QUOD5|56=QUODFX_UAT|34=163|52=20211013-20:13:22|131=1729294943|146=1|55=EUR/USD|167=FXSPOT|537=1|38=1000000|64=20211015|63=0|15=EUR|1=CLIENT1|40=D|10=218|
{code}
{color:#0747a6}*#2*{color}

*{color:#ff8b00}132=1.18060 133=1.1813{color}*
{code:java}
> 
8=FIXT.1.1|9=286|35=S|34=171|49=QUODFX_UAT|52=20211013-20:13:21.249|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20211013-20:15:21.236|63=0|64=20211015|117=01211013201321130001|131=1729294943|132=1.18060|133=1.1813|134=1000000|135=1000000|167=FXSPOT|188=1.18060|190=1.1813|460=4|537=1|1166=01211013201321130001|10=216|
{code}
{color:#0747a6}*#3*{color}
sell: 270=1.18079 buy:270=1.1814
{code:java}
8=FIXT.1.1|9=250|35=W|34=1566|49=TEST|52=20211013-20:13:25.707|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.18079|271=1000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1814|271=1000000|273=20211013|290=1|64=20211015|1070=1|10=044|
{code}
sell: 270=1.17079 buy:270=1.1714
{code:java}
8=FIXT.1.1|9=250|35=W|34=1567|49=TEST|52=20211013-20:13:25.881|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.17079|271=2000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1714|271=2000000|273=20211013|290=1|64=20211015|1070=1|10=048|
{code}
sell: 270=1.16079 buy:270=1.1614
{code:java}
8=FIXT.1.1|9=250|35=W|34=1568|49=TEST|52=20211013-20:13:25.989|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.16079|271=3000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1614|271=3000000|273=20211013|290=1|64=20211015|1070=1|10=058|
{code}
sell: 270=1.15079 buy:270=1.1514
{code:java}
8=FIXT.1.1|9=250|35=W|34=1569|49=TEST|52=20211013-20:13:26.104|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.15079|271=3000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1514|271=3000000|273=20211013|290=1|64=20211015|1070=1|10=037|
{code}
{color:#0747a6}*#4*{color}
*{color:#ff8b00}132=1.15079 |133=1.1514{color}*
{code:java}
8=FIXT.1.1|9=286|35=S|34=172|49=QUODFX_UAT|52=20211013-20:13:25.724|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20211013-20:15:21.236|63=0|64=20211015|117=01211013201325130001|131=1729294943|132=1.15079|133=1.1514|134=1000000|135=1000000|167=FXSPOT|188=1.15079|190=1.1514|460=4|537=1|1166=01211013201325130001|10=235|
{code}
{color:#0747a6}*#5*{color}
{code:java}
8=FIXT.1.1|9=201|35=D|49=QUOD5|56=QUODFX_UAT|34=16|52=20211101-08:51:58|1=CLIENT1|11=222109097|21=1|15=EUR|38=1000000|40=D|54=1|55=EUR/USD|59=3|60=20211101-08:51:58|63=0|64=20211103|167=FXSPOT|117=01211013201321130001|10=102|
{code}
*#6*
{code:java}
8=FIXT.1.1|9=500|35=8|34=86|49=QUODFX_UAT|52=20211202-16:14:18.379|56=QUOD5|1128=9|6=1.18132|11=659985996|14=1000000|15=EUR|17=EX1211202161418823001|21=1|22=8|30=XQFX|31=1.18132|32=1000000|37=MO1211202161418771001|38=1000000|39=2|40=D|48=GBP/USD|54=2|55=EUR/USD|59=4|60=20211202-16:14:18.366|63=B|64=20211206|75=20211202|100=XQFX|120=USD|150=F|151=0|167=FXSPOT|194=1.18132|207=XQFX|381=1181320|453=3|448=QA1|447=D|452=12|448=QUOD|447=D|452=1|448=gtwquod5|447=D|452=36|2376=1011|460=4|528=A|854=0|2524=0|5055=20211206|10=140|

{code}
 

 

 ";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-2052;;QAP-6139;PFX;"Send MD from BUY side to venues which is attached to your client tier and 
instrument";#0;;;
;;;;;;;;;;;;;;;From Fix send RFQ;"#1
#2";"QS calculates quote and send back
(notice that price 132=1.18060 133=1.1813)";;
;;;;;;;;;;;;;;;From Buy side sends 4-th 35=W;#3;MD sent with no errors;;
;;;;;;;;;;;;;;;Wait for the next update interval;#4;Received new 35=S message with prices from the last sent MD;;
;;;;;;;;;;;;;;;"Wait mere than 5 sec and send NewOrderSingle with QuoteID (tag 117) from 
latest 35=S";"#5
#6";NewOrderSingle executed and filled, last quote valid;;
QAP-T2466;Client Pricing Engine: Checking that quote from previous update not valid if Active Quote Age time expire;Specified;;"*{color:#00875a}Set up Quote Update Interval (ms) = 20000{color}* and 
*{color:#00875a}Active Quote Age (ms) = 5000{color}*
{color:#0747a6}*#0*{color}

sell: 270=1.18060 buy:270=1.1813
{code:java}
8=FIXT.1.1|9=250|35=W|34=1566|49=TEST|52=20211013-20:13:25.707|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.18060|271=1000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1813|271=1000000|273=20211013|290=1|64=20211015|1070=1|10=044|
{code}
{color:#0747a6}*#1*{color}
{code:java}
< 
8=FIXT.1.1|9=155|35=R|49=QUOD5|56=QUODFX_UAT|34=163|52=20211013-20:13:22|131=1729294943|146=1|55=EUR/USD|167=FXSPOT|537=1|38=1000000|64=20211015|63=0|15=EUR|1=CLIENT1|40=D|10=218|
{code}
{color:#0747a6}*#2*{color}

*{color:#ff8b00}132=1.18060 133=1.1813{color}*
{code:java}
> 
8=FIXT.1.1|9=286|35=S|34=171|49=QUODFX_UAT|52=20211013-20:13:21.249|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20211013-20:15:21.236|63=0|64=20211015|117=01211013201321130001|131=1729294943|132=1.18060|133=1.1813|134=1000000|135=1000000|167=FXSPOT|188=1.18060|190=1.1813|460=4|537=1|1166=01211013201321130001|10=216|
{code}
{color:#0747a6}*#3*{color}
sell: 270=1.18079 buy:270=1.1814
{code:java}
8=FIXT.1.1|9=250|35=W|34=1566|49=TEST|52=20211013-20:13:25.707|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.18079|271=1000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1814|271=1000000|273=20211013|290=1|64=20211015|1070=1|10=044|
{code}
sell: 270=1.17079 buy:270=1.1714
{code:java}
8=FIXT.1.1|9=250|35=W|34=1567|49=TEST|52=20211013-20:13:25.881|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.17079|271=2000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1714|271=2000000|273=20211013|290=1|64=20211015|1070=1|10=048|
{code}
sell: 270=1.16079 buy:270=1.1614
{code:java}
8=FIXT.1.1|9=250|35=W|34=1568|49=TEST|52=20211013-20:13:25.989|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.16079|271=3000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1614|271=3000000|273=20211013|290=1|64=20211015|1070=1|10=058|
{code}
sell: 270=1.15079 buy:270=1.1514
{code:java}
8=FIXT.1.1|9=250|35=W|34=1569|49=TEST|52=20211013-20:13:26.104|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.15079|271=3000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1514|271=3000000|273=20211013|290=1|64=20211015|1070=1|10=037|
{code}
{color:#0747a6}*#4*{color}
*{color:#ff8b00}132=1.15079 |133=1.1514{color}*
{code:java}
8=FIXT.1.1|9=286|35=S|34=172|49=QUODFX_UAT|52=20211013-20:13:25.724|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20211013-20:15:21.236|63=0|64=20211015|117=01211013201325130001|131=1729294943|132=1.15079|133=1.1514|134=1000000|135=1000000|167=FXSPOT|188=1.15079|190=1.1514|460=4|537=1|1166=01211013201325130001|10=235|
{code}
{color:#0747a6}*#5*{color}
{code:java}
8=FIXT.1.1|9=201|35=D|49=QUOD5|56=QUODFX_UAT|34=16|52=20211101-08:51:58|1=CLIENT1|11=222109097|21=1|15=EUR|38=1000000|40=D|54=1|55=EUR/USD|59=3|60=20211101-08:51:58|63=0|64=20211103|167=FXSPOT|117=01211013201321130001|10=102|
{code}
*#6*
{code:java}
8=FIXT.1.1|9=432|35=8|34=32|49=QUODFX_UAT|52=20211202-13:38:45.252|56=QUOD5|1128=9|1=CLIENT1|6=0|11=659985991|14=0|15=EUR|17=166300000004|21=1|22=8|31=0|32=0|37=MO1211202133845745001|38=1000000|39=8|40=D|48=EUR/USD|54=2|55=EUR/USD|58=not 
a live 
quote|59=4|60=20211202-13:38:45.244|63=B|64=20211206|120=USD|150=8|151=0|167=FXSPOT|207=XQFX|378=4|453=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|2376=1011|460=4|528=A|854=0|10=008|

{code}
 

 

 ";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-2052;;QAP-6135;PFX;"Send MD from BUY side to venues which is attached to your client tier and 
instrument";#0;;;
;;;;;;;;;;;;;;;From Fix send RFQ;"#1
#2";"QS calculates quote and send back
(notice that price 132=1.18060 133=1.1813)";;
;;;;;;;;;;;;;;;From Buy side sends 4-th 35=W;#3;MD sent with no errors;;
;;;;;;;;;;;;;;;Wait for the next update interval;#4;Received new 35=S message with prices from the last sent MD;;
;;;;;;;;;;;;;;;"Wait 5 sec and send NewOrderSingle with QuoteID (tag 117) from previous 
35=S";"#5
#6";"NewOrderSingle rejected with reason ""not a live quote""";;
QAP-T2467;Auto-Hedger Panic Controls: checking that changing of 'Send Hedged Orders' requires a confirmation;Automated;;"Checking that after panic status was changed MPAS canceling all live hedged 
orders and re-evaluate positions when panic status returned to normal 
state.
# In the admin FE Auto Hedgers screen:
** Much like the header of the Client Tiers screen, place an 
indicator/button to the right of the Auto Hedgers label in the page header.
The label of the indicator should be ""Send Hedger Orders"" to the right of 
its indicator icon, and use the same font size/style of the Expand All / 
Collapse All labels.
The indicator should show the status of and let the user disable and enable 
the global status of this setting, per points below. The tooltip on the 
indicator should be:
*** ""Enabled, Click to Disable"" / ""Disabled, Click to Enable""
** Clicking this setting in the admin FE to be enabled/disabled should 
prompt the user first about whether they want to perform this action to 
avoid accidentally changing these settings.";/PFX/FX_UAQA;High - Must Have;FX_UAQA;FXregression;;;PFX-1333;;QAP-6118;PFX;Go to WebAdmin -> Market Making -> Auto Hedgers;;Page loaded no errors occurred;;
;;;;;;;;;;;;;;;Disable 'Send Hedged Orders' button/indicator;;Confirmation form appeared;;
;;;;;;;;;;;;;;;Confirm action;;"After disabling is confirmed 'Send Hedged Orders' button/indicator turns 
red";;
;;;;;;;;;;;;;;;Re-enable 'Send Hedged Orders';;Confirmation appears and after it accepted button/indicator turns green;;
QAP-T2468;Auto-Hedger Panic Controls: disabling of  Send Hedge Orders prevents MPAS from placing orders;Specified;;"Checking that after panic status was changed MPAS canceling all live hedged 
orders and re-evaluate positions when panic status returned to normal 
state.";/PFX/FX_MM_Autohedging;High - Must Have;FX_MM_Autohedging;FXregression, UAQA;;;PFX-1333;;QAP-6117;PFX;From TradingFE -> Panic -> stop 'Send Hedge Orders';;Icon changed, button replaced from 'Stop' to 'Resume', no errors;;
;;;;;;;;;;;;;;;Send several orders on currency pair with configured AH;;Threshold passed, no orders sent;;
;;;;;;;;;;;;;;;From Panic control resume 'Send Hedge Orders';;Icon changed, button replaced from 'Resume' to 'Stop', no errors;;
;;;;;;;;;;;;;;;Open order book;;"Check that after re-enabling AH was triggered and there are hedged orders 
in order book";;
QAP-T2469;Auto-Hedger Panic Controls: cancel live AH orders;Automated;;"Checking that after panic status was changed MPAS canceling all live hedged 
orders and re-evaluate positions when panic status returned to normal 
state.";/PFX/FX_MM_Autohedging;High - Must Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX, UAQA;;;PFX-1333;;QAP-6116;PFX;Send several orders to trigger AH.;Config auto-hedger in way that orders it send were in open status;AH triggered and sent order;;
;;;;;;;;;;;;;;;"Go to WebAdmin -> Market Making -> Auto Hedgers and push 'Send Hedger 
Orders' indicator/button to make it disabled.";;"Confirmation shown. After accept button/indicator of 'Send Hedger Orders' 
became red.";;
;;;;;;;;;;;;;;;On trading FE open Order Book;;"Check that after disabling global Send Hedged Orders status, all live AH 
orders were cancelled";;
;;;;;;;;;;;;;;;Go back to WebAdmin and re-enable Send Hedger Order status;;Button/indicator became red;;
;;;;;;;;;;;;;;;"On trading FE check that after Send Hedged Order MPAS re-evaluate all 
position and sent orders on positions with qty > threshold";;"In order book there is open order from auto-hedger that was triggered in 
the beginning";;
QAP-T2470;FETrading - Scrolling behavior check when turned ON checkbox;Manual;;"Checking that scrolling in main blotter freezes when some row selected 
Preconditions:
Open FE => Options => User Interface
In ""Lock Grid Auto-Scrolling On Selection"" choose checkbox is True  - 
default value False


";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression, SWED;;;PFX-3028, PFX-4212;;QAP-6080;PFX;Open Order Book and ESP Tile;;Windows opened, prices appears on ESP tile;;
;;;;;;;;;;;;;;;Send several order from ESP tile;;Check that order book scrolling when new orders appears;;
;;;;;;;;;;;;;;;Scroll order book down, with order still unselected, place some orders;;Check that order book must scrolling when new orders appears;;
;;;;;;;;;;;;;;;Select the last created order in the order book and send some more orders;;Order book freezes on one position, selected order visible;;
;;;;;;;;;;;;;;;Scroll order book down, with order still selected, place some orders;;Order book freezes on one position, selected order visible;;
;;;;;;;;;;;;;;;"Repeat steps 3-6 and check this behavior at all other places (Quote Request 
Book, Market Ticks, TradeBook, Quote Book, Times&Sales, Bookings, Basket 
Book, OrderBag Book)";;Behavior is the same;;
QAP-T2471;FETrading - OrderTicket: Checking scrolling behavior with specific Tick-Size;Specified;;"Checking that Price properly scrolling up and down with instruments which 
have unusual Tick-Size (0.0005, 0.5, 0.0025 etc.)

*Precondition:* you need have instruments with specific tick size 
configured in DB table Listings

!image-2021-11-22-18-57-55-803.png!";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-3879;;QAP-6043;PFX;"Open FETrading => Aggregated rates => ESP tile and select instrument with 
unusual tick size";USD/RUB-SPO;Opened, prices appears;;
;;;;;;;;;;;;;;;Open Direct Venue Execution and place order;Venue: EBS-CITI;Order ticket opened;;
;;;;;;;;;;;;;;;Scroll price up and down using mouse wheel or arrows in order ticket;;"Price scrolling properly, with every arrow click increasing or decreasing 
with size of configured tick size,";;
QAP-T2472;Auto-Hedger, checking that after adding active day to schedule MPAS recalculate positions;Automated;;"When receiving an Internal_AutoHedgerNotification from the ACS, re-evaluate 
all the monitored positions and see if they should now trigger a hedge 
order, because some settings have changed.

 ";/PFX/FX_MM_Autohedging;High - Must Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX;;;PFX-1736, PADM-996;;QAP-6010;PFX;Set parameter to Auto-Hedger via WebAdmin;"AUTOHEDGER0
EUR/USD
Threshold=3000000
Schedule enabled=TRUE
No active days in schedule";Setting applied with no errors;;
;;;;;;;;;;;;;;;"Form TradingFE / miniFIX send order with Qty > Threshold directly on 
position book";"EUR/USD-Spot QUOD
7000000";"Order sent and executed, positions for position book updated, no hedged 
orders sent.";;
;;;;;;;;;;;;;;;Add current day to the schedule;"Example
Thursday
From time 6:00
To time 22:00";"Settings applied with no errors.
Check that hedged order sent.";;
QAP-T2473;Auto-Hedger, checking that after changing position book MPAS recalculate positions;Automated;;"When receiving an Internal_AutoHedgerNotification from the ACS, re-evaluate 
all the monitored positions and see if they should now trigger a hedge 
order, because some settings have changed.";/PFX/FX_MM_Autohedging;High - Must Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX;;;PFX-1736, PADM-996;;QAP-6008;PFX;Set parameter to Auto-Hedger via WebAdmin;"AUTOHEDGER0
EUR/USD
LongQty 5000000
Position book: QUOD";Setting applied with no errors;;
;;;;;;;;;;;;;;;"Form TradingFE / miniFIX send order with Qty > Threshold but on another 
position book";"EUR/USD-Spot QUOD2
7000000";"Order sent and executed, positions for position book updated, no hedged 
orders sent.";;
;;;;;;;;;;;;;;;Change position book to QUOD2;;"Settings applied with no errors.
Check that hedged order sent.";;
QAP-T2474;Auto-Hedger, checking that after changing threshold MPAS recalculate positions;Automated;;"When receiving an Internal_AutoHedgerNotification from the ACS, re-evaluate 
all the monitored positions and see if they should now trigger a hedge 
order, because some settings have changed.";/PFX/FX_MM_Autohedging;High - Must Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX;;;PFX-1736, PADM-996;;QAP-6007;PFX;Set parameter to Auto-Hedger via WebAdmin;"AUTOHEDGER0
EUR/USD
LongQty 5000000";Setting applied with no errors;;
;;;;;;;;;;;;;;;Form TradingFE / miniFIX send order with Qty < Threshold;EUR/USD-Spot CLIENT1 4000000;"Order sent and executed, positions for client and position book updated, no 
hedged orders sent.";;
;;;;;;;;;;;;;;;Change Long Threshold Qty to 3000000;;"Settings applied with no errors.
Check that hedged order sent.";;
QAP-T2475;Explicitly Request Swap Points for Forward/Spot Swaps;Automated;;"to the client, tier must be attached forward venue (like CITIR)
in table quodsettings check *AutoRFQClientPricingFallback=Interpolation*
{color:#0747a6}*#1*{color}
{code:java}
8=FIXT.1.1|9=264|35=R|34=1113|49=QUOD9|52=20220218-12:27:23.756|56=QUODFX_UAT|131=433444196|146=1|55=GBP/USD|167=FXSWAP|54=1|38=1000000|15=GBP|1=Argentina1|555=2|600=GBP/USD|609=FXFWD|624=2|685=1000000|587=1|588=20220218|600=GBP/USD|609=FXSPOT|624=1|685=1000000|587=0|588=20220222|10=110|
{code}
+mapping+
{code:java}
Mapped fix message fix QuoteRequest={ AuthenticationBlock={ 
UserID=""gtwquod9"" RoleID=FIXClient SessionKey=1645178445000086133 } 
QuoteRequestBlock={ QuoteReqList={ QuoteReqBlock=[ { InstrumentBlock={ 
InstrSymbol=""GBP/USD"" ProductType=CURRENCY InstrType=FXSwap } 
QuoteReqInstrumentLegList={ QuoteReqInstrumentLegBlock=#2:[ 1:{ 
InstrumentLegBlock={ LegInstrSymbol=""GBP/USD"" LegSymbol=""GBP/USD"" 
LegProductType=CURRENCY LegInstrType=FXForward LegSide=Sell LegTenor=Cash } 
LegOrderQty=1000000.000000000 LegSettlType=Cash LegSettlDate=2022-Feb-18 } 
2:{ InstrumentLegBlock={ LegInstrSymbol=""GBP/USD"" LegSymbol=""GBP/USD"" 
LegProductType=CURRENCY LegInstrType=FXSpot LegSide=Buy LegTenor=Spot } 
LegOrderQty=1000000.000000000 LegSettlType=Regular LegSettlDate=2022-Feb-22 
} ] } Side=Buy Currency=""GBP"" OrdQty=1000000.000000000 
ClientAccountGroupID=""Argentina1"" } ] } ClientQuoteReqID=""433444196"" } }
{code}
{color:#0747a6}*#2*{color}
+mapping+
{code:java}
serializing internal Quote={ RoutingBlock={ DestComponent=""ORS"" } 
QuoteBlock={ LegQuoteList={ LegQuoteBlock=#2:[ 1:{ 
LegInstrID=""0pPO_eCe8lnuIBxvKtLB7Q"" LegSide=Sell 
LegOrderQty=1000000.000000000 LegSettlType=Cash LegSettlDate=2022-Feb-18 
LegBidPx=1.196040000 LegBidForwardPoints=0.000010000 } 2:{ 
LegInstrID=""6PmipPm4c296Keb7niIG9g"" LegSide=Buy 
LegOrderQty=1000000.000000000 LegSettlType=Regular LegSettlDate=2022-Feb-22 
LegBidPx=1.196030000 LegOfferPx=1.196030000 } ] } QuoteID=41400000016 
QuoteRequestID=40500000060 InstrID=""qtO5Agwi_-_HpiPGqd1HYQ"" }, forwarding 
QuoteLeg={ QuoteID=41400000016 InstrID=""qtO5Agwi_-_HpiPGqd1HYQ"" LegNumber=1 
LegInstrID=""0pPO_eCe8lnuIBxvKtLB7Q"" LegOrderQty=1000000.000000000 
LegSettlType=Cash LegSettlDate=2022-Feb-18 LegSide=Sell 
LegBidPx=1.196040000 LegBidForwardPoints=0.000010000, revision 1 } 
QuoteLeg={ QuoteID=41400000016 InstrID=""qtO5Agwi_-_HpiPGqd1HYQ"" LegNumber=2 
LegInstrID=""6PmipPm4c296Keb7niIG9g"" LegOrderQty=1000000.000000000 
LegSettlType=Regular LegSettlDate=2022-Feb-22 LegSide=Buy 
LegBidPx=1.196030000 LegOfferPx=1.196030000, revision 1 } Quote={ 
QuoteID=41400000016 UserID=""QA1"" RoleID=HeadOfSaleDealer 
CreationTime=2022-Feb-18 12:27:23.766249178 Originator=""QS_RFQ_FIX_TH2"" 
QuoteType=Tradeable QuoteStatus=Accepted ListingID=506404432 
AccountGroupID=""Argentina1"" OrdQty=1000000.000000000 BidPx=0.000000000 
BidSize=1000000.000000000 OfferPx=-0.000010000 OfferSize=1000000.000000000 
QuoteRequestID=40500000060 ValidUntilTime=2022-Feb-18 12:29:23.763051000 
BidSpotRate=1.196030000 OfferSpotRate=1.196030000 BidSwapPoints=0.000000000 
OfferSwapPoints=-0.000010000 Currency=""GBP"" 
InstrID=""qtO5Agwi_-_HpiPGqd1HYQ"" Origin=Internal 
ClientQuoteID=""01220218122723730002"" Side=Buy QuoteCategory=Automatic 
AffectPosit=No QuoteTTL=120, revision 1 } } {code}
{code:java}
8=FIXT.1.1|9=485|35=S|34=1143|49=QUODFX_UAT|52=20220218-12:27:25.303|56=QUOD9|1128=9|15=GBP|54=1|55=GBP/USD|62=20220218-12:29:23.763|117=01220218122723730002|131=433444196|133=-0.00001|135=1000000|167=FXSWAP|188=1.19603|190=1.19603|460=4|537=1|555=2|600=GBP/USD|602=GBP/USD|603=8|616=XQFX|624=2|685=1000000|587=1|588=20220218|681=1.19604|1067=0.00001|600=GBP/USD-SPO-QUODFX|602=GBP/USD|603=8|616=XQFX|624=1|685=1000000|587=0|588=20220222|681=1.19603|684=1.19603|1066=-0.00001|1166=01220218122723730002|10=182| 
{code}
{color:#0747a6}*#3*{color}
{code:java}
8=FIXT.1.1|9=335|35=AB|34=1114|49=QUOD9|52=20220218-12:27:28.336|56=QUODFX_UAT|1=Argentina1|11=480268155|15=GBP|21=1|38=1000000|40=D|44=-0.00001|54=1|55=GBP/USD|59=3|60=20220218-12:27:28.000|117=01220218122723730002|167=FXSWAP|555=2|600=GBP/USD|609=FXFWD|624=2|685=1000000|587=1|588=20220218|600=GBP/USD|609=FXSPOT|624=1|685=1000000|587=0|588=20220222|10=169| 
{code}
+mapping+
{code:java}
Mapped fix message fix NewOrderMultiLeg={ AuthenticationBlock={ 
UserID=""gtwquod9"" RoleID=FIXClient SessionKey=1645178445000086133 } 
Header={ Target={ TargetCompID=""QUODFX_UAT"" } Sender={ SenderCompID=""QUOD9"" 
} CreationTime=2022-Feb-18 12:27:28.336978000 } NewOrderMultiLegBlock={ 
InstrumentBlock={ InstrSymbol=""GBP/USD"" InstrType=FXSwap Tenor=Spot } 
LegOrderElements={ LegOrderBlock=#2:[ 1:{ InstrumentLegBlock={ 
LegInstrSymbol=""GBP/USD"" LegSymbol=""GBP/USD"" LegProductType=CURRENCY 
LegInstrType=FXForward LegSide=Sell LegTenor=Cash } 
LegOrderQty=1000000.000000000 LegSettlType=Cash LegSettlDate=2022-Feb-18 } 
2:{ InstrumentLegBlock={ LegInstrSymbol=""GBP/USD"" LegSymbol=""GBP/USD"" 
LegProductType=CURRENCY LegInstrType=FXSpot LegSide=Buy LegTenor=Spot } 
LegOrderQty=1000000.000000000 LegSettlType=Regular LegSettlDate=2022-Feb-22 
} ] } ClOrdID=""480268155"" Side=Buy Price=-0.000010000 
OrdType=PreviouslyQuoted Currency=""GBP"" TimeInForce=ImmediateOrCancel 
TransactTime=2022-Feb-18 12:27:28 SettlType=Regular 
ClientAccountGroupID=""Argentina1"" OrdQty=1000000.000000000 
ExecutionPolicy=DMA ClientQuoteID=""01220218122723730002"" } } {code}
{color:#0747a6}*#4*{color}
{code:java}
8=FIXT.1.1|9=783|35=8|34=1145|49=QUODFX_UAT|52=20220218-12:27:28.402|56=QUOD9|1128=9|6=-0.00001|11=480268155|14=1000000|15=GBP|17=EX1220218122728437001|21=1|22=8|31=-0.00001|32=1000000|37=MO1220218122728405001|38=1000000|39=2|40=D|44=-0.00001|48=GBP/USD|54=1|55=GBP/USD|59=3|60=20220218-12:27:28.363|63=0|75=20220218|100=XQFX|120=USD|150=F|151=0|167=FXSWAP|194=1.19603|207=XQFX|381=-10|453=3|448=QA1|447=D|452=12|448=QUOD|447=D|452=1|448=gtwquod9|447=D|452=36|2376=1011|460=4|528=A|555=2|600=GBP/USD|602=GBP/USD|603=8|609=FXFWD|616=XQFX|624=2|685=1000000|587=1|588=20220218|637=1.19604|1073=0.00001|1418=1000000|566=1.19604|600=GBP/USD-SPO-QUODFX|602=GBP/USD|603=8|609=FXSPOT|616=XQFX|624=1|685=1000000|587=0|588=20220222|637=1.19603|1418=1000000|566=1.19603|854=0|1071=-0.00001|2524=0|5055=20220222|10=055| 
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, refactored_FX, swapMM, SWED;;;PFX-3957;;QAP-5992;;"From Fix client send 35=R
leg1=TOD
leg2=SPOT";"#1
#2";QS sends quote in reply;;
;;;;;;;;;;;;;;;Check quote;;"tag 588 for leg1 = today date
tag 588 for leg2 = spot date";;
;;;;;;;;;;;;;;;take quoteID (tag 117) and send 35=AB;#3;order is sent and filled;;
;;;;;;;;;;;;;;;check Execution reports;#4;39 OrdStatus 2;;
;;;;;;;;;;;;;;;Check order book;for manual test;Order is filled and executed;;
QAP-T2476;FETrading: FE Revision should be bigger or equal than in DB;Specified;;"Checking that if FE revision lesser than minRevision set in DB, _update 
available_ icon is shown.

UPDATE_SERVER_URL, UPDATE_URL_PASSWORD, UPDATE_URL_USERNAME should be 
empty.

{color:#DE350B} *it's working just with a timestamp integer*{color}";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-1266;;QAP-5988;;"Open DB ""QuodSettings"" and add the revision to 'FEMinRevisionNumber'";1895068374;Save DB and restart FE;;
;;;;;;;;;;;;;;;Open FE Trading with lower revision;;"the ""update available"" icon in the main trading interface and the About 
window
(see attached)";;
;;;;;;;;;;;;;;;;Delete revision from DataBase;;;
QAP-T2477;Outgoing External Check : Reject from Buy Side (ESP taker);Specified;;"*{color:#0747A6}#1{color}*

{code:java}
> 
8=FIXT.1.1|9=256|35=D|34=15|49=LMTSENDER|52=20211112-10:33:10.161|56=QUODFX_UAT|1=ASPECT_DB|11=MO1211112103310245001|15=EUR|21=1|22=8|38=1000000|40=2|44=1.18159|48=EUR/USD|54=1|55=EUR/USD|59=4|60=20211112-10:33:11.403|63=0|64=20211116|120=USD|167=FXSPOT|207=BNP-SW|10051=2|10=192|
{code}

*{color:#0747A6}#2{color}*

{code:java}
< 
8=FIXT.1.1|9=215|35=8|49=QUODFX_UAT|56=LMTSENDER|34=19|52=20211112-10:35:11|11=MO1211112103310245001|14=0|17=EXECID000158202103010000002439|37=ORDID000158202103010000002440|39=8|54=1|55=EUR/USD|150=8|151=0|583=MO1211112103310245001|10=161|
{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-1257;;QAP-5974;;Connect miniFix as a Listener (port 15101);"in gtw config put ip of your PC
(ipconfig)";Venues are priced;;
;;;;;;;;;;;;;;;Open Trading FE => ESP => Direct Venue Execution;;Venues are priced;;
;;;;;;;;;;;;;;;Send an order to BNP venue with client ASPECT_DB FXSpot;check you created rule for External Check from Description;"Check that new order in Order Book has
Sts = PendingValidation";;
;;;;;;;;;;;;;;;Check miniFix;#1;35=D is sent to MiniFix;;
;;;;;;;;;;;;;;;"from MiniFix send execution report
(from 35=D take tag 11 and put it to 35=8 to tag 11)
with tag 39=8 (Rejected)
with tag 150=8 Rejected";#2;"Gateway_NewOrderReply is sent to ORS and order is executed.
Check in OrderBook order is REJECTED";;
QAP-T2478;Outgoing External Check : Canceled (ESP taker);Specified;;"*{color:#0747A6}#1{color}*

{code:java}
> 
8=FIXT.1.1|9=256|35=D|34=96|49=LMTSENDER|52=20211111-17:35:05.871|56=QUODFX_UAT|1=ASPECT_DB|11=MO1211111173505242001|15=EUR|21=1|22=8|38=1000000|40=2|44=1.17165|48=EUR/USD|54=1|55=EUR/USD|59=4|60=20211111-17:35:07.445|63=0|64=20211115|120=USD|167=FXSPOT|207=BNP-SW|10051=2|10=244|
{code}
*{color:#0747A6}#2{color}*
{code:java}
< 
8=FIXT.1.1|9=215|35=8|49=QUODFX_UAT|56=LMTSENDER|34=83|52=20211111-17:35:22|11=MO1211111173505242001|14=0|17=EXECID000158202103010000002439|37=ORDID000158202103010000002440|39=0|54=1|55=EUR/USD|150=0|151=0|583=MO1211111173505242001|10=172|
{code}
*{color:#0747A6}#3{color}*
PendingNew from ORS
{code:java}
> 
8=FIXT.1.1|9=185|35=8|34=97|49=LMTSENDER|52=20211111-17:35:20.711|56=QUODFX_UAT|1=ASPECT_DB|11=MO1211111173505242001|14=0|30=BNP-SW|38=1000000|40=2|44=1.17165|60=20211111-17:35:20.708|150=A|151=1000000|10=113|
{code}
PendingNew from LP
{code:java}
> 
8=FIXT.1.1|9=198|35=8|34=98|49=LMTSENDER|52=20211111-17:35:20.948|56=QUODFX_UAT|1=ASPECT_DB|11=MO1211111173505242001|14=0|30=BNP-SW|38=1000000|40=2|44=1.17165|58=Hello 
sim|60=20211111-17:35:20.000|150=A|151=1000000|10=123|
{code}
New from LP
{code:java}
> 
8=FIXT.1.1|9=185|35=8|34=99|49=LMTSENDER|52=20211111-17:35:20.954|56=QUODFX_UAT|1=ASPECT_DB|11=MO1211111173505242001|14=0|30=BNP-SW|38=1000000|40=2|44=1.17165|60=20211111-17:35:20.947|150=0|151=1000000|10=112|
{code}
Eliminated from LP
{code:java}
> 
8=FIXT.1.1|9=208|35=8|34=100|49=LMTSENDER|52=20211111-17:35:20.962|56=QUODFX_UAT|1=ASPECT_DB|11=MO1211111173505242001|14=0|30=BNP-SW|38=1000000|40=2|44=1.17165|58=Limit 
Price is incorrect|60=20211111-17:35:20.000|150=4|151=0|10=251|
{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-1257;;QAP-5973;;Connect miniFix as a Listener (port 15101);"in gtw config put ip of your PC
(ipconfig)";Venues are priced;;
;;;;;;;;;;;;;;;Open Trading FE => ESP => Direct Venue Execution;;Venues are priced;;
;;;;;;;;;;;;;;;"Send an order to BNP venue with client ASPECT_DB FXSpot with bad price for 
buy";check you created rule for External Check from Description;"Check that new order in Order Book has
Sts = PendingValidation";;
;;;;;;;;;;;;;;;Check miniFix;#1;35=D is sent to MiniFix;;
;;;;;;;;;;;;;;;"from MiniFix send execution report
(from 35=D take tag 11 and put it to 35=8 to tag 11)";#2;"Gateway_NewOrderReply is sent to ORS and order is executed.
Check in OrderBook order is Eliminated";;
;;;;;;;;;;;;;;;Check miniFix;#3;"Check that ORS sends Gateway_ExecutionReport and Gateway_OrdReport to gtw 
=> to MiniFix";;
QAP-T2479;Client NDF ESP: Checking instrument Maturity date;Open;;"Checking that instrument Maturity date parameter (According to FSS tag 
6203) is presented in Market Data snapshots.

#1
{code:java}
< 
8=FIXT.1.1|9=155|35=V|49=QUOD3|56=QUODFX_UAT|34=13|52=20211108-10:30:38|50=CLIENT1|262=457521786|263=1|264=0|265=0|267=2|269=0|269=1|146=1|55=USD/BRL|460=4|63=W1|167=FXNDF|10=057|
{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-736;;QAP-5924;;From Client Interface, MiniFIX send subscription for NDF instrument;#1;Subscription sent, BE starts send 35=W in reply;;
;;;;;;;;;;;;;;;Check that every MD entry in 35=W have tag 6203;;Tag presented in every MD entry;;
;;;;;;;;;;;;;;;Send NewOrderSingle;;Check that tag 6203 presented in ExecutionReport;;
QAP-T2480;Client Pricing Engine: Checking that quote from previous update still valid if Active Quote Age time doesn't expire;Specified;;"*{color:#00875a}Set up Quote Update Interval (ms) = 10000{color}* and 
*{color:#00875a}Active Quote Age (ms) = 120000{color}*
{color:#0747a6}*#0*{color}

sell: 270=1.18060 buy:270=1.1813
{code:java}
8=FIXT.1.1|9=250|35=W|34=1566|49=TEST|52=20211013-20:13:25.707|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.18060|271=1000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1813|271=1000000|273=20211013|290=1|64=20211015|1070=1|10=044|
{code}
{color:#0747a6}*#1*{color}
{code:java}
< 
8=FIXT.1.1|9=155|35=R|49=QUOD5|56=QUODFX_UAT|34=163|52=20211013-20:13:22|131=1729294943|146=1|55=EUR/USD|167=FXSPOT|537=1|38=1000000|64=20211015|63=0|15=EUR|1=CLIENT1|40=D|10=218|
{code}
{color:#0747a6}*#2*{color}

*{color:#ff8b00}132=1.18060 133=1.1813{color}*
{code:java}
> 
8=FIXT.1.1|9=286|35=S|34=171|49=QUODFX_UAT|52=20211013-20:13:21.249|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20211013-20:15:21.236|63=0|64=20211015|117=01211013201321130001|131=1729294943|132=1.18060|133=1.1813|134=1000000|135=1000000|167=FXSPOT|188=1.18060|190=1.1813|460=4|537=1|1166=01211013201321130001|10=216|
{code}
{color:#0747a6}*#3*{color}
sell: 270=1.18079 buy:270=1.1814
{code:java}
8=FIXT.1.1|9=250|35=W|34=1566|49=TEST|52=20211013-20:13:25.707|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.18079|271=1000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1814|271=1000000|273=20211013|290=1|64=20211015|1070=1|10=044|
{code}
sell: 270=1.17079 buy:270=1.1714
{code:java}
8=FIXT.1.1|9=250|35=W|34=1567|49=TEST|52=20211013-20:13:25.881|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.17079|271=2000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1714|271=2000000|273=20211013|290=1|64=20211015|1070=1|10=048|
{code}
sell: 270=1.16079 buy:270=1.1614
{code:java}
8=FIXT.1.1|9=250|35=W|34=1568|49=TEST|52=20211013-20:13:25.989|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.16079|271=3000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1614|271=3000000|273=20211013|290=1|64=20211015|1070=1|10=058|
{code}
sell: 270=1.15079 buy:270=1.1514
{code:java}
8=FIXT.1.1|9=250|35=W|34=1569|49=TEST|52=20211013-20:13:26.104|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.15079|271=3000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1514|271=3000000|273=20211013|290=1|64=20211015|1070=1|10=037|
{code}
{color:#0747a6}*#4*{color}
*{color:#ff8b00}132=1.15079 |133=1.1514{color}*
{code:java}
8=FIXT.1.1|9=286|35=S|34=172|49=QUODFX_UAT|52=20211013-20:13:25.724|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20211013-20:15:21.236|63=0|64=20211015|117=01211013201325130001|131=1729294943|132=1.15079|133=1.1514|134=1000000|135=1000000|167=FXSPOT|188=1.15079|190=1.1514|460=4|537=1|1166=01211013201325130001|10=235|
{code}
{color:#0747a6}*#5*{color}
{code:java}
8=FIXT.1.1|9=201|35=D|49=QUOD5|56=QUODFX_UAT|34=16|52=20211101-08:51:58|1=CLIENT1|11=222109097|21=1|15=EUR|38=1000000|40=D|54=1|55=EUR/USD|59=3|60=20211101-08:51:58|63=0|64=20211103|167=FXSPOT|117=01211013201321130001|10=102|
{code}
*#6*
{code:java}
> 
8=FIXT.1.1|9=445|35=8|34=59|49=QUODFX_UAT|52=20211101-09:09:53.093|56=QUOD5|1128=9|6=1.1813|11=222109099|14=1000000|15=EUR|17=EX1211101090953518001|21=1|22=8|30=XQFX|31=1.1813|32=1000000|37=MO1211101090952472001|38=1000000|39=2|40=D|48=EUR/USD|54=1|55=EUR/USD|59=3|60=20211101-09:09:53.064|63=0|64=20211103|75=20211101|100=XQFX|120=USD|150=F|151=0|167=FXSPOT|194=1.1813|207=XQFX|381=1181300|453=1|448=gtwquod5|447=D|452=36|460=4|528=A|854=0|2524=0|5055=20211103|10=224|
{code}
 

 

 ";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-2052;;QAP-5856;;"Send MD from BUY side to venues which is attached to your client tier and 
instrument";#0;;;
;;;;;;;;;;;;;;;From Fix send RFQ;"#1
#2";"QS calculates quote and send back
(notice that price 132=1.18060 133=1.1813)";;
;;;;;;;;;;;;;;;From Buy side sends 4-th 35=W;#3;MD sent with no errors;;
;;;;;;;;;;;;;;;Wait for the next update interval;#4;Received new 35=S message with prices from the last sent MD;;
;;;;;;;;;;;;;;;Send NewOrderSingle with QuoteID (tag 117) from previous 35=S;"#5
#6";NewOrderSingle executed and filled against prices from previous quote;;
QAP-T2481;Client Pricing Engine: Publish Client Quotes On Every MD Update When Update Interval is 0 (null);Automated;;"*{color:#00875a}Set up Quote Update Interval (ms) = 0{color}*
{color:#0747a6}*#0*{color}
{code:java}
8=FIXT.1.1|9=250|35=W|34=1566|49=TEST|52=20211013-20:13:25.707|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.16079|271=1000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1614|271=1000000|273=20211013|290=1|64=20211015|1070=1|10=044|
{code}
{color:#0747a6}*#1*{color}
{code:java}
< 
8=FIXT.1.1|9=155|35=R|49=QUOD5|56=QUODFX_UAT|34=163|52=20211013-20:13:22|131=1729294943|146=1|55=EUR/USD|167=FXSPOT|537=1|38=1000000|64=20211015|63=0|15=EUR|1=CLIENT1|40=D|10=218|
{code}
{color:#0747a6}*#2*{color}
{code:java}
> 
8=FIXT.1.1|9=286|35=S|34=171|49=QUODFX_UAT|52=20211013-20:13:21.249|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20211013-20:15:21.236|63=0|64=20211015|117=01211013201321130001|131=1729294943|132=1.16079|133=1.1614|134=1000000|135=1000000|167=FXSPOT|188=1.16079|190=1.1614|460=4|537=1|1166=01211013201321130001|10=216|
{code}
{color:#0747a6}*#3*{color}
sell: 270=1.18079 buy:270=1.1814
{code:java}
8=FIXT.1.1|9=250|35=W|34=1566|49=TEST|52=20211013-20:13:25.707|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.18079|271=1000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1814|271=1000000|273=20211013|290=1|64=20211015|1070=1|10=044|
{code}
sell: 270=1.17079 buy:270=1.1714
{code:java}
8=FIXT.1.1|9=250|35=W|34=1567|49=TEST|52=20211013-20:13:25.881|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.17079|271=2000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1714|271=2000000|273=20211013|290=1|64=20211015|1070=1|10=048|
{code}
sell: 270=1.16079 buy:270=1.1614
{code:java}
8=FIXT.1.1|9=250|35=W|34=1568|49=TEST|52=20211013-20:13:25.989|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.16079|271=3000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1614|271=3000000|273=20211013|290=1|64=20211015|1070=1|10=058|
{code}
sell: 270=1.15079 buy:270=1.1514
{code:java}
8=FIXT.1.1|9=250|35=W|34=1569|49=TEST|52=20211013-20:13:26.104|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.15079|271=3000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1514|271=3000000|273=20211013|290=1|64=20211015|1070=1|10=037|
{code}
{color:#0747a6}*#4*{color}
*{color:#ff8b00}132=1.18079|133=1.1814{color}*
{code:java}
> 
8=FIXT.1.1|9=286|35=S|34=172|49=QUODFX_UAT|52=20211013-20:13:25.724|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20211013-20:15:21.236|63=0|64=20211015|117=01211013201325130001|131=1729294943|132=1.18079|133=1.1814|134=1000000|135=1000000|167=FXSPOT|188=1.18079|190=1.1814|460=4|537=1|1166=01211013201325130001|10=235|
{code}
{color:#0747a6}*#5*{color}
*{color:#ff8b00}132=1.17079 |133=1.1714{color}*
{code:java}
> 
8=FIXT.1.1|9=286|35=S|34=173|49=QUODFX_UAT|52=20211013-20:13:43.311|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20211013-20:15:21.236|63=0|64=20211015|117=01211013201343130001|131=1729294943|132=1.17079|133=1.1714|134=1000000|135=1000000|167=FXSPOT|188=1.17079|190=1.1714|460=4|537=1|1166=01211013201343130001|10=216|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-2052;;QAP-5848;;"Send MD from BUY side to venues which is attached to your client tier and 
instrument";#0;;;
;;;;;;;;;;;;;;;From Fix send RFQ;"#1
#2";"QS calculates quote and send back
(notice that price 132=1.16079|133=1.1614)";;
;;;;;;;;;;;;;;;From Buy side sends 4-th 35=W;#3;MD sent with no errors;;
;;;;;;;;;;;;;;;Check received messages;"#4
#5
etc";"On every received MD update QS should send new 35=S with prices set in MD 
update, total 4 messages";;
;;;;;;;;;;;;;;;Waite the end of TTL;;QS sends no update (because no update comes from the LP);;
QAP-T2482;Rejecting RFQ with no Client (tag 1) sent via FIX;Automated;;"RFQ`s sent via FIX and with no Client (tag 1) should be rejected by BE

1#
{code:java}
< 
8=FIXT.1.1|9=142|35=R|49=QUOD5|56=QUODFX_UAT|34=20|52=20211025-14:16:53|131=210266668|146=1|55=EUR/USD|167=FXFWD|537=1|54=2|38=1000000|64=20211028|15=EUR|40=D|10=176|{code}
2#
{code:java}
> 
8=FIXT.1.1|9=218|35=AG|34=46|49=QUODFX_UAT|52=20211025-14:16:53.944|56=QUOD5|1128=9|58=11505 
Runtime error (cannot process request without 
client)|131=210266668|146=1|55=EUR/USD|167=FXFWD|537=1|54=2|63=C|64=20211028|15=EUR|40=D|658=99|10=075|{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-327;;QAP-5814;;From fix send request for quote without tag 1 (Client);#1, 2;"Received message 35=AG with reason '11505 Runtime error (cannot process 
request without client)'";;
QAP-T2483;MM ESP - Checking applying of auto-select behavior;Manual;;Checking applying of auto-select behavior to Taker ESP workflow;/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression;;;PFX-3507;;QAP-5797;;Open FETrading => Client Pricing tiles => Rates tile;"EUR/USD-Spot
Gold_Day";Tile opened. Prices published;;
;;;;;;;;;;;;;;;Open order ticket (click ToB price or any published row);;"Order ticket opened. Check that next field applies auto-select behavior:
1. Qty
2. big Figure Price
3. Pips
4. Limit Price
5. Stop Price";;
QAP-T2484;MM RFQ - Checking applying of auto-select behavior;Manual;;Checking applying of auto-select behavior to MM RFQ tile;/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression;;;PFX-3507;;QAP-5796;;Open FETrading => Client Pricing tiles => RFQ tile;"EUR/USD Gold_Day
Spot/1W";Tile opened;;
;;;;;;;;;;;;;;;Click on near Qty field;;Field value was auto-selected;;
;;;;;;;;;;;;;;;Click on far Qty field;;Field value was auto-selected;;
QAP-T2485;Taker RFQ - Checking applying of auto-select behavior;Manual;;Checking applying of auto-select behavior to Taker RFQ workflow;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression;;;PFX-3507;;QAP-5795;;Open FETrading => Aggregated Rates => RFQ tile;"EUR/USD
Spot/1W";Tile opened;;
;;;;;;;;;;;;;;;Click on near Qty field;;Field value was auto-selected;;
;;;;;;;;;;;;;;;Click on far Qty field;;Field value was auto-selected;;
QAP-T2486;Taker ESP - Checking applying of auto-select behavior;Manual;;Checking applying of auto-select behavior to Taker ESP workflow;/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression;;;PFX-3507;;QAP-5794;;Open FETrading => Aggregated Rates => ESP tile;EUR/USD-Spot;Tile opened. Prices published;;
;;;;;;;;;;;;;;;Click on default Qty field;;Field value was auto-selected;;
;;;;;;;;;;;;;;;Open VWAP section and click on Qty field.;;Field value was auto-selected;;
;;;;;;;;;;;;;;;Open order ticket (click ToB price or Bid/Ask buttons);;"Order ticket opened. Check that next field applies auto-select behavior:
1. Qty
2. Display Qty
3. big Figure Price
4. Pips
5. Limit Price
6. Stop Price";;
QAP-T2487;Do not send order to venue which is not quote based;Automated;;"1. You need to have QuoteBased venue EBS-CITI and DB which is not quote 
based
2. MD should contain MDQuoteType=Tradeable
{color:#0747A6}*#1*{color}
*{color:#00875A}EBS-CITI{color}*

{code:java}
8=FIXT.1.1|9=571|35=W|34=19|49=TEST_Q|52=20211001-15:49:20.076|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:EBS-CITI_1|268=4|269=0|270=1.18066|271=1000000|273=20211001|299=1_EUR/USD_2021100176E27F147A3E1310_Bid1|290=1|64=20211005|1070=1|269=1|270=1.18146|271=1000000|273=20211001|299=1_EUR/USD_2021100176E27F147A3E1310_Offer1|290=1|64=20211005|1070=1|269=0|270=1.18061|271=2000000|273=20211001|299=1_EUR/USD_2021100176E27F147A3E1310_Bid2|290=1|64=20211005|1070=1|269=1|270=1.18149|271=2000000|273=20211001|299=1_EUR/USD_2021100176E27F147A3E1310_Offer2|290=1|64=20211005|1070=1|10=232|
{code}



*{color:#00875A}DB{color}*

{code:java}
8=FIXT.1.1|9=565|35=W|34=20|49=TEST_Q|52=20211001-15:49:20.238|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:DB_4|268=4|269=0|270=1.18075|271=1000000|273=20211001|290=1|64=20211005|1070=1|269=1|270=1.18141|271=1000000|273=20211001|290=1|64=20211005|1070=1|269=0|270=1.18071|271=2000000|273=20211001|290=1|64=20211005|1070=1|269=1|270=1.18145|271=2000000|273=20211001|290=1|64=20211005|1070=1|10=056|
{code}

{color:#0747A6}*#2*{color}

{code:java}
< 
8=FIXT.1.1|9=247|35=D|49=QUOD1|56=QUODFX_UAT|34=4232|52=20211021-14:13:43|1=TH2_Taker|11=804117569|21=2|15=EUR|38=2000000|40=2|44=1.18999|54=1|55=EUR/USD|59=0|60=20211021-14:13:43|63=0|64=20211025|167=FXSPOT|847=1008|957=1|958=AllowedVenues|959=14|960=EBS-CITI/DB|10=042|
{code}


{color:#4C9AFF}In the first range which is aggressive, SATS sends IOC child 
orders with Limit, if there is no Limit => SATS sends 
PreviouslyQuoted{color}";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FX_ALGO, FXregression, needs_refactoring_FX;;;PFX-3424;;QAP-5635;;From Buy-Side sends MD;#1;MD is set and displayed in the ESP tile;;
;;;;;;;;;;;;;;;"Click on the TOB buy and send Algo Order to 2 venues (EBS and HSBC which 
are support PreviouslyQuoted IOC):
TIF=DAY
OrdType = Limit
Price = 1.18999
Side = Buy
QTY=2000000";"FOR TH2 send message from FIX
#2";"SOR creates only one child order (because DB is not QuoteBased and there is 
no Limit with IOC as parrent order has) :
EBS-CITI with OrdType PreviouslyQuoted and TIF IOC with price 1.18149 and 
qty = 2M";;
;;;;;;;;;;;;;;;For manual test check log;see comment;;;
QAP-T2488;IGNORE AggressiveSingleOrderOnImmediateOrCancel if parent TIF != IOC;Automated;;"{color:#00875A}*HSBC*{color}

{code:java}
8=FIXT.1.1|9=250|35=W|34=1703|49=TEST|52=20210929-13:55:27.423|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:HSBC_2|268=2|269=0|270=1.18079|271=5000000|273=20210929|290=1|64=20211001|1070=0|269=1|270=1.1814|271=5000000|273=20210929|290=1|64=20211001|1070=0|10=070|
{code}

{color:#00875A}*CITI*{color}

{code:java}
8=FIXT.1.1|9=238|35=W|34=1275|49=TEST|52=20210929-13:02:48.592|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_10|268=2|269=0|270=1.18075|271=1000000|273=20210929|290=1|64=20211001|269=1|270=1.18141|271=1000000|273=20210929|290=1|64=20211001|10=067|
{code}

{color:#00875A}*BARX*{color}


{code:java}
8=FIXT.1.1|9=252|35=W|34=1274|49=TEST|52=20210929-13:02:48.452|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:BARX_15|268=2|269=0|270=1.18066|271=5000000|273=20210929|290=1|64=20211001|1070=1|269=1|270=1.18146|271=5000000|273=20210929|290=1|64=20211001|1070=1|10=189|
{code}
!screenshot-1.png|thumbnail!
{color:#0747A6}*1.2*{color} If no venues have quantity >= the order 
quantity, we only consider the subset of venues that have the largest (and 
equal) quantity. e.g. if we have a parent order for 10m and LP1 has only 5m 
and LP2 and LP3 both have only 8m, then we pick from only either LP2 or 
LP3.";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FX_ALGO, FXregression, needs_refactoring_FX;;;PFX-2693;;QAP-5600;;"From ESP tile or FIX send SOR:
Venues: CITI, BARX, HSBC
TIF: GTC
OrdType: Limit
Side= BUY
Price: 1.18999
""Aggressive single IOC"" = true";;"SATS ignores Lone passive= true according to point 1.2 and send child order 
to all available venues as on the picture.
Check that 3 child orders were created with the best price accordingly";;
QAP-T2489;SOR IOC Order To Send Child Order To Single Venue: If any venues have quantity (best VWAP);Automated;;"DB: ""AggressiveSingleOrderOnImmediateOrCancelCheck"" = FE: ""Aggressive 
single IOC""
check that AggressiveSingleOrderOnImmediateOrCancelCheck is added to 
scenarioparameter
!screenshot-1.png|thumbnail!

{color:#00875A}*HSBC*{color}

{code:java}
8=FIXT.1.1|9=250|35=W|34=1703|49=TEST|52=20210929-13:55:27.423|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:HSBC_2|268=2|269=0|270=1.18079|271=5000000|273=20210929|290=1|64=20211001|1070=0|269=1|270=1.1814|271=5000000|273=20210929|290=1|64=20211001|1070=0|10=070|
{code}

{color:#00875A}*CITI*{color}

{code:java}
8=FIXT.1.1|9=238|35=W|34=1275|49=TEST|52=20210929-13:02:48.592|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_10|268=2|269=0|270=1.18075|271=1000000|273=20210929|290=1|64=20211001|269=1|270=1.18141|271=1000000|273=20210929|290=1|64=20211001|10=067|
{code}

{color:#00875A}*BARX*{color}


{code:java}
8=FIXT.1.1|9=252|35=W|34=1274|49=TEST|52=20210929-13:02:48.452|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:BARX_15|268=2|269=0|270=1.18066|271=5000000|273=20210929|290=1|64=20211001|1070=1|269=1|270=1.18146|271=5000000|273=20210929|290=1|64=20211001|1070=1|10=189|
{code}

{color:#0747A6}*2.1*{color} Once identifying the subset of venues based on 
quantity, we then can apply the Criteria to determine priority of venue 
selection. For instance, if ""Price"" is a first Criteria, like a TIF FOK 
that also only targets a single venue, we target the venue with the best 
VWAP up to the quantity of the parent order.

!screenshot-2.png|thumbnail!";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FX_ALGO, FXregression, needs_refactoring_FX;;;PFX-2693;;QAP-5598;;"From ESP tile or FIX send SOR:
Venues: CITI, BARX, HSBC
TIF: IOC
OrdType: Limit
Side= BUY
Price: 1.18999
QTY= 5M
""Aggressive single IOC""= true";;"Order is executed completely only on HSBC venue (because the best VWAP) 
with price 1.1814";;
;;;;;;;;;;;;;;;"From ESP tile or FIX send SOR:
Venues: CITI, BARX, HSBC
TIF: IOC
OrdType: Limit
Side= SELL
Price: 1.18000
QTY= 5M
""Aggressive single IOC"" = true";;"Order is executed completely only on HSBC venue (because the best VWAP) 
with price 1.18079";;
QAP-T2490;SOR IOC Order To Send Child Order To Single Venue: If no venues have quantity;Automated;;"*{color:#0747a6}35=D{color}*
{code:java}
< 
8=FIXT.1.1|9=308|35=D|49=QUOD1|56=QUODFX_UAT|34=875|52=20211001-11:17:38|1=ASPECT_CITI|11=357928565|21=2|15=EUR|38=10000000|40=2|44=1.18999|54=1|55=EUR/USD|59=3|60=20211001-11:17:38|63=0|64=20211005|167=FXSPOT|847=1008|957=2|958=AllowedVenues|959=14|960=CITI/BARX/HSBC|958=ForbiddenVenues|959=14|960=BNP/DB/EBS-CITI/GS/JPM/MS|10=212|
{code}
{color:#00875a}*HSBC*{color}
{code:java}
8=FIXT.1.1|9=250|35=W|34=1703|49=TEST|52=20210929-13:55:27.423|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:HSBC_2|268=2|269=0|270=1.18079|271=5000000|273=20210929|290=1|64=20211001|1070=0|269=1|270=1.1814|271=5000000|273=20210929|290=1|64=20211001|1070=0|10=070|
{code}
{color:#00875a}*CITI*{color}
{code:java}
8=FIXT.1.1|9=238|35=W|34=1275|49=TEST|52=20210929-13:02:48.592|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_10|268=2|269=0|270=1.18075|271=1000000|273=20210929|290=1|64=20211001|269=1|270=1.18141|271=1000000|273=20210929|290=1|64=20211001|10=067|
{code}
{color:#00875a}*BARX*{color}
{code:java}
8=FIXT.1.1|9=252|35=W|34=1274|49=TEST|52=20210929-13:02:48.452|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:BARX_15|268=2|269=0|270=1.18066|271=5000000|273=20210929|290=1|64=20211001|1070=1|269=1|270=1.18146|271=5000000|273=20210929|290=1|64=20211001|1070=1|10=189|
{code}
{color:#0747a6}*1*{color} If no venues have quantity >= the order quantity, 
we only consider the subset of venues that have the largest (and equal) 
quantity. e.g. if we have a parent order for 10m and LP1 has only 5m and 
LP2 and LP3 both have only 8m, then we pick from only either LP2 or LP3.";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FX_ALGO, FXregression, needs_refactoring_FX;;;PFX-2693;;QAP-5591;;"From ESP tile or FIX send an order SOR:
Side: Buy
Price: 1.18999
OrderType: Limit
TIF: IOC
QTY=10M
Venues: CITI, BARX, HSBC
""Aggressive single IOC""= true";;Order is PARTIALLY FILLED on the HSBC venue with Limit price = 1.1814;;
QAP-T2491;SOR IOC Order To Send Child Order To Single Venue: If any venues have quantity (SELL);Automated;;"DB: ""AggressiveSingleOrderOnImmediateOrCancelCheck"" = FE: """"Aggressive 
single IOC""""
check that AggressiveSingleOrderOnImmediateOrCancelCheck is added to 
scenarioparameter
!screenshot-1.png|thumbnail!

1. From the BUY side send MD to two venues that support TIF = IOC
(for example BARX and CITI)
send worst MD for BARX that for CITI (BUY side)
send worst MD for BARX that for CITI (SELL side)
with different quantity
*{color:#00875A}BARX{color}*
{code:java}
8=FIXT.1.1|9=252|35=W|34=1274|49=TEST|52=20210929-13:02:48.452|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:BARX_15|268=2|269=0|270=1.18066|271=5000000|273=20210929|290=1|64=20211001|1070=1|269=1|270=1.18146|271=5000000|273=20210929|290=1|64=20211001|1070=1|10=189|
{code}
*{color:#00875A}CITI{color}*
{code:java}
8=FIXT.1.1|9=238|35=W|34=1275|49=TEST|52=20210929-13:02:48.592|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_10|268=2|269=0|270=1.18075|271=1000000|273=20210929|290=1|64=20211001|269=1|270=1.18141|271=1000000|273=20210929|290=1|64=20211001|10=067|
{code}
!screenshot-3.png|thumbnail!

{color:#0747A6}*1.1*{color} If any venues have quantity >= the order 
quantity, we only consider that subset of venues.";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FX_ALGO, FXregression, needs_refactoring_FX;;;PFX-2693;;QAP-5589;;"Send SOR order from ESP taker tile (or fix) with checked ""Aggressive single 
IOC"" parameter
Side: Sell
Price: lower that in TOB
Qty: 1M
TIF: IOC
OrdType: Limit";for BARX and CITI;"Order creates one child order to venue CITI (because it has better price), 
with TIF = IOC.
Child order is filled completely and executed with price 1.18075 as on the 
CITI venue";;
;;;;;;;;;;;;;;;"Send SOR order from ESP taker tile (or fix) with checked ""Aggressive single 
IOC"" parameter
Side: Sell
Price: lower that in TOB
Qty: 5M
TIF: IOC
OrdType: Limit";;"Order creates one child order to venue BARX (despite the fact that CITI has 
better price SATS choose only one venue according to point 1.1 [see 
Descr]), with TIF = IOC.
Child order is filled completely and executed with price 1.18066 as on the 
BARX venue";;
QAP-T2492;Child Order Instrument needs to be the same as the Parent Care order;To Review;;"*Precondition :*

Open FE=>Aggregated rates, Order book";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-3644;;QAP-5585;;From ESP tile send buy Care order on broken date and accept it;EUR/USD-Broken;Order appear in Order Book with Sts Open and tenor Broken;;
;;;;;;;;;;;;;;;RMC on created order in order book and select Split ESP;;Split ESP tile appears with tenor Broken and date same as parent order;;
;;;;;;;;;;;;;;;Click on Bid button;;"Order split window opened, check that opened order ticket window is similar 
to the ESP tile order ticket";;
;;;;;;;;;;;;;;;Place order;;Check that child orders created with same tenor and SettleDate;;
;;;;;;;;;;;;;;;Redo Step 1;;Order appear in Order Book with Sts Open and tenor Broken;;
;;;;;;;;;;;;;;;Double click on order;;"Order split window opened, check that opened order ticket window is similar 
to the ESP tile order ticket";;
;;;;;;;;;;;;;;;Place order;;Check that child orders created with same tenor and SettleDate;;
QAP-T2493;SOR IOC Order To Send Child Order To Single Venue: If any venues have quantity (BUY);Automated;;"DB: ""AggressiveSingleOrderOnImmediateOrCancel"" = FE: ""Aggressive single 
IOC""
check that AggressiveSingleOrderOnImmediateOrCancel is added to 
scenarioparameter
!screenshot-1.png|thumbnail!

1. From the BUY side send MD to two venues that support TIF = IOC
(for example BARX and CITI)
send worst MD for BARX that for CITI (BUY side)
send worst MD for CITI that for BARX(SELL side)
with different quantity
{color:#00875a}*BARX*{color}
{code:java}
8=FIXT.1.1|9=252|35=W|34=1274|49=TEST|52=20210929-13:02:48.452|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:BARX_15|268=2|269=0|270=1.18066|271=5000000|273=20210929|290=1|64=20211001|1070=1|269=1|270=1.18146|271=5000000|273=20210929|290=1|64=20211001|1070=1|10=189|
{code}
*{color:#00875a}CITI{color}*
{code:java}
8=FIXT.1.1|9=238|35=W|34=1275|49=TEST|52=20210929-13:02:48.592|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_10|268=2|269=0|270=1.18075|271=1000000|273=20210929|290=1|64=20211001|269=1|270=1.18141|271=1000000|273=20210929|290=1|64=20211001|10=067|
{code}
!screenshot-3.png|thumbnail!
{color:#0747a6}*1.1*{color} If any venues have quantity >= the order 
quantity, we only consider that subset of venues.";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FX_ALGO, FXregression, needs_refactoring_FX;;;PFX-2693;;QAP-5564;;"Send SOR order from ESP taker tile (or fix) with checked ""Aggressive single 
IOC"" parameter
Side: Buy
Price: higher that in TOB
Qty: 1M
TIF: IOC
OrdType: Limit
AllowedVenues: CITI and BARX";for BARX and CITI;"Order creates one child order to venue CITI (because it has better price), 
with TIF = IOC.
Child order is filled completely and executed with price 1.18141 as on the 
CITI venue";;
;;;;;;;;;;;;;;;"Send SOR order from ESP taker tile (or fix) with checked ""Aggressive single 
IOC"" parameter
Side: Buy
Price: higher that in TOB
Qty: 5M
TIF: IOC
OrdType: Limit
AllowedVenues: CITI and BARX";;"Order creates one child order to venue BARX (despite the fact that CITI has 
better price SATS choose only one venue according to point 1.1 [see 
Descr]), with TIF = IOC.
Child order is filled completely and executed with price 1.18146 as on the 
BARX venue";;
QAP-T2494;Ticksize is applied properly for SOR orders;To Review;;"1. Two venues with passive mode (Limit: IOC, DAY...)
2. Two venues with different ticksize
EUR/SEK SPO is configured for VENUE1 venue with Ticksize = 0.0005
EUR/SEK SPO is configured for VENUE2 with Ticksize = 0.00001


*{color:#DE350B}CHANGE FIX MESSAGE{color}*
{code:java}
< 
8=FIXT.1.1|9=317|35=D|49=QUOD1|56=QUODFX_UAT|34=276|52=20210928-12:08:52|1=ASPECT_CITI|11=357928560|21=2|15=EUR|38=8000000|40=2|44=1.17999|54=1|55=EUR/SEK|59=1|60=20210928-12:08:52|63=0|64=20210930|167=FXSPOT|957=3|958=AllowedVenues|959=14|960=MS/BARX|958=PostMode|959=14|960=Spraying|958=VenueWeights|959=14|960=MS=1/BARX=1|847=1008|10=165|
{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, refactored_FX;;;PFX-3889;;QAP-5553;;"From ESP taker tile or FIX send Algo order (SOR) to two venues which have 
different ticksize for listing
1) sparing 0.5
2) with lower price that best buy
3) TIF: GTC
4) OrderType: Limit";"On TH2 (314)
MS EUR/SEK-SPO = 7
BARX EUR/SEK-SPO = 8
(MS and CITI on 308)";"Order is send and two child orders are created with status Open.
Despite the fact that venues have different tickSize.
Prices for venues correspond to ticksize";;
;;;;;;;;;;;;;;;;see my comments under PFX-3889;;;
QAP-T2495;Test for multiple auto hedgers : default auto hedger book (Default Position);Automated;;"settings are the same as for QAP-2322
except that we should not have instruments in autohedgerinstrsymbol";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX;;;;;QAP-5551;;"From webadmin, go to market making / autohedging and delete client from 
External Client section";but current instrument must be in autohedgerinstrsymbol;No clients attached to Auto Hedger;;
;;;;;;;;;;;;;;;Place a client Order;"TH2
Palladium1
EUR/USD";"1. A position should be generated for the default internal account which is 
set in the QS configuration file
2. NO AH order was sent";;
QAP-T2496;SOR To Use Parent Order Type Even On Quote Based Market Data;Automated;;"1. You need to have QuoteBased venues (A venue is quote based if the market 
date messages contains a QuoteEntryID)
2. MD should contain MDQuoteType=Tradeable
{color:#0747A6}*#1*{color}
*{color:#00875A}EBS-CITI{color}*

{code:java}
8=FIXT.1.1|9=571|35=W|34=19|49=TEST_Q|52=20211001-15:49:20.076|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:EBS-CITI_1|268=4|269=0|270=1.18066|271=1000000|273=20211001|299=1_EUR/USD_2021100176E27F147A3E1310_Bid1|290=1|64=20211005|1070=1|269=1|270=1.18146|271=1000000|273=20211001|299=1_EUR/USD_2021100176E27F147A3E1310_Offer1|290=1|64=20211005|1070=1|269=0|270=1.18061|271=2000000|273=20211001|299=1_EUR/USD_2021100176E27F147A3E1310_Bid2|290=1|64=20211005|1070=1|269=1|270=1.18149|271=2000000|273=20211001|299=1_EUR/USD_2021100176E27F147A3E1310_Offer2|290=1|64=20211005|1070=1|10=232|
{code}

*{color:#00875A}DB{color}*

{code:java}
8=FIXT.1.1|9=565|35=W|34=20|49=TEST_Q|52=20211001-15:49:20.238|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:DB_4|268=4|269=0|270=1.18075|271=1000000|273=20211001|299=2_EUR/USD_2021100176E27F147A3E1310_Bid1|290=1|64=20211005|1070=1|269=1|270=1.18141|271=1000000|273=20211001|299=2_EUR/USD_2021100176E27F147A3E1310_Offer1|290=1|64=20211005|1070=1|269=0|270=1.18071|271=2000000|273=20211001|299=2_EUR/USD_2021100176E27F147A3E1310_Bid2|290=1|64=20211005|1070=1|269=1|270=1.18145|271=2000000|273=20211001|299=2_EUR/USD_2021100176E27F147A3E1310_Offer2|290=1|64=20211005|1070=1|10=056|
{code}

{color:#0747A6}*#2*{color}

{code:java}
< 
8=FIXT.1.1|9=247|35=D|49=QUOD1|56=QUODFX_UAT|34=4232|52=20211021-14:13:43|1=TH2_Taker|11=804117569|21=2|15=EUR|38=2000000|40=2|44=1.18999|54=1|55=EUR/USD|59=0|60=20211021-14:13:43|63=0|64=20211025|167=FXSPOT|847=1008|957=1|958=AllowedVenues|959=14|960=EBS-CITI/DB|10=042|
{code}

{color:#4C9AFF}In the first range which is aggressive, SATS sends IOC child 
orders with Limit, if there is no Limit => SATS sends 
PreviouslyQuoted{color}";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FX_ALGO, FXregression, needs_refactoring_FX;;;PFX-3424;;QAP-5537;;From Buy-Side sends MD;#1;MD is set and displayed in the ESP tile;;
;;;;;;;;;;;;;;;"Click on the TOB and send Algo Order to 2 venues (EBS and DB which are 
support PreviouslyQuoted IOC):
TIF=DAY
OrdType = Limit
Price = 1.18999
Side = Buy
QTY=2000000";"FOR TH2 send message from FIX
#2";"SOR creates two child orders :
DB with OrdType PreviouslyQuoted and TIF IOC with price 1.18141
EBS-CITI with OrdType Limit and TIF IOC with price 1.18146";;
QAP-T2497;Indicate Underlying Trigger Venue In MM Admin Updates;Automated;;Attached some venue which has QuoteEntryID (EBS-CITI or DB on quod314);/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FX_Java_API, FXregression, needs_refactoring_FX;;;PFX-3532;;QAP-5389;;Subscribe to ClientTier=>Instrument which priced by EBS-CITI or DB;from java API for TH2;"Check log files (see desc)
Check that MarketDataSnapshotFullRefresh in MDA log contains:
OrigMDTime
OrigQuoteEntryID
OrigVenueID
(with comes from BUY side)";;
QAP-T2498;Support MDQuoteType  for ESP taker;Specified;;"*{color:#0747A6}#1{color}*
*1070=0*

{code:java}
8=FIXT.1.1|9=525|35=W|34=636|49=TEST|52=20210910-15:26:18.581|56=MARKETDATA|55=GBP/NOK|167=FXSPOT|262=GBP/NOK:SPO:REG:BARX_188|268=6|269=0|270=1.19599|271=1000000|273=20210910|290=1|64=20210914|1070=0|269=1|270=1.1981|271=1000000|273=20210910|290=1|64=20210914|1070=0|269=0|270=1.19397|271=6000000|273=20210910|290=1|64=20210914|1070=0|269=1|270=1.19909|271=6000000|273=20210910|290=1|64=20210914|1070=0|269=0|270=1.19301|271=12000000|273=20210910|290=2|64=20210914|1070=0|269=1|270=1.19999|271=12000000|273=20210910|290=2|64=20210914|1070=0|10=091|
{code}
*{color:#0747A6}#2{color}*
*MIP*

{code:java}
2021-09-10 15:26:18.582717186 QUOD.FXFH [12363] DEBUG 
qfixfh_qfAutobahn_fx_esp_buy (EventHandler.cpp:248) - {onFullRefresh} 
Processing full refresh: MarketDataUpdate={ Symbol=<n/a> SeqNo=<n/a> 
VenueMDSeqNum=636 MDTime=<n/a> MDArrivalTime=2021-Sep-10 15:26:18.582675000 
MDBookType=<n/a> NoMDEntries=#6:[ 1:{ Entry_t={ MDEntryPx=1.195990000 
MDEntrySize=1000000.000000000 MDEntrySide=Bid MDPosition=1 
MDEntryOrdType=Limit MDEntryDateTime=not-a-date-time MDQuoteType=Indicative 
} } 2:{ Entry_t={ MDEntryPx=1.198100000 MDEntrySize=1000000.000000000 
MDEntrySide=Ask MDPosition=1 MDEntryOrdType=Limit 
MDEntryDateTime=not-a-date-time MDQuoteType=Indicative } } 3:{ Entry_t={ 
MDEntryPx=1.193970000 MDEntrySize=6000000.000000000 MDEntrySide=Bid 
MDPosition=1 MDEntryOrdType=Limit MDEntryDateTime=not-a-date-time 
MDQuoteType=Indicative } } 4:{ Entry_t={ MDEntryPx=1.199090000 
MDEntrySize=6000000.000000000 MDEntrySide=Ask MDPosition=1 
MDEntryOrdType=Limit MDEntryDateTime=not-a-date-time MDQuoteType=Indicative 
} } 5:{ Entry_t={ MDEntryPx=1.193010000 MDEntrySize=12000000.000000000 
MDEntrySide=Bid MDPosition=2 MDEntryOrdType=Limit 
MDEntryDateTime=not-a-date-time MDQuoteType=Indicative } } 6:{ Entry_t={ 
MDEntryPx=1.199990000 MDEntrySize=12000000.000000000 MDEntrySide=Ask 
MDPosition=2 MDEntryOrdType=Limit MDEntryDateTime=not-a-date-time 
MDQuoteType=Indicative } } ] }
{code}

*{color:#0747A6}#3{color}*
*1070=1*
{code:java}
8=FIXT.1.1|9=525|35=W|34=630|49=TEST|52=20210910-15:24:14.548|56=MARKETDATA|55=GBP/NOK|167=FXSPOT|262=GBP/NOK:SPO:REG:BARX_188|268=6|269=0|270=1.19599|271=1000000|273=20210910|290=1|64=20210914|1070=1|269=1|270=1.1981|271=1000000|273=20210910|290=1|64=20210914|1070=1|269=0|270=1.19397|271=6000000|273=20210910|290=1|64=20210914|1070=1|269=1|270=1.19909|271=6000000|273=20210910|290=1|64=20210914|1070=1|269=0|270=1.19301|271=12000000|273=20210910|290=2|64=20210914|1070=1|269=1|270=1.19999|271=12000000|273=20210910|290=2|64=20210914|1070=1|10=088|
{code}
*#4*
*MIP*
{code:java}
2021-09-10 15:24:14.568262680 QUOD.FXFH [12363] DEBUG 
qfixfh_qfAutobahn_fx_esp_buy (EventHandler.cpp:248) - {onFullRefresh} 
Processing full refresh: MarketDataUpdate={ Symbol=<n/a> SeqNo=<n/a> 
VenueMDSeqNum=630 MDTime=<n/a> MDArrivalTime=2021-Sep-10 15:24:14.550348000 
MDBookType=<n/a> NoMDEntries=#6:[ 1:{ Entry_t={ MDEntryPx=1.195990000 
MDEntrySize=1000000.000000000 MDEntrySide=Bid MDPosition=1 
MDEntryOrdType=Limit MDEntryDateTime=not-a-date-time MDQuoteType=Tradeable 
} } 2:{ Entry_t={ MDEntryPx=1.198100000 MDEntrySize=1000000.000000000 
MDEntrySide=Ask MDPosition=1 MDEntryOrdType=Limit 
MDEntryDateTime=not-a-date-time MDQuoteType=Tradeable } } 3:{ Entry_t={ 
MDEntryPx=1.193970000 MDEntrySize=6000000.000000000 MDEntrySide=Bid 
MDPosition=1 MDEntryOrdType=Limit MDEntryDateTime=not-a-date-time 
MDQuoteType=Tradeable } } 4:{ Entry_t={ MDEntryPx=1.199090000 
MDEntrySize=6000000.000000000 MDEntrySide=Ask MDPosition=1 
MDEntryOrdType=Limit MDEntryDateTime=not-a-date-time MDQuoteType=Tradeable 
} } 5:{ Entry_t={ MDEntryPx=1.193010000 MDEntrySize=12000000.000000000 
MDEntrySide=Bid MDPosition=2 MDEntryOrdType=Limit 
MDEntryDateTime=not-a-date-time MDQuoteType=Tradeable } } 6:{ Entry_t={ 
MDEntryPx=1.199990000 MDEntrySize=12000000.000000000 MDEntrySide=Ask 
MDPosition=2 MDEntryOrdType=Limit MDEntryDateTime=not-a-date-time 
MDQuoteType=Tradeable } } ] }
{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FX_fix, FXregression, needs_refactoring_FX;;;PFX-3727;;QAP-5369;;"From Buy side send MD with
MDQuoteType = Indicative (1070=0)";"#1
#2";"see it went to FH and mapped correctly
(FXFH)";;
;;;;;;;;;;;;;;;"From Buy side send MD with
MDQuoteType = Tradable (1070=1)";"#3
#4";"see it went to FH and mapped correctly
(FXFH)";;
;;;;;;;;;;;;;;;;can be tested on TH2 with java api;;;
QAP-T2499;Chek Selecting ClientTier by typing on keyboard;Specified;;"*Preconditions:* 

Open FE=>Client Pricing Tile";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-3719;;QAP-5355;;Open rates tile;;rates tile opened;;
;;;;;;;;;;;;;;;Click on client tier and try to select ClientTier by typing by keyboard;;Searching in ClientTier Column;;
QAP-T2500;RFQ with ccy1=Base Currency  and order with ccy1=Quote Currency;Automated;;"*{color:#0747A6}#1{color}*
*15=EUR*
{code:java}
8=FIXT.1.1|9=264|35=R|34=243|49=QUOD9|52=20210910-06:41:36.694|56=QUODFX_UAT|131=974044761|146=1|55=EUR/USD|167=FXSWAP|54=1|38=1000000|15=EUR|1=Argentina1|555=2|600=EUR/USD|609=FXFWD|624=2|685=1000000|587=W1|588=20210921|600=EUR/USD|609=FXFWD|624=1|685=1000000|587=W2|588=20210928|10=234|
{code}

*{color:#0747A6}#2{color}*
{code:java}
8=FIXT.1.1|9=530|35=S|34=188|49=QUODFX_UAT|52=20210910-08:15:36.903|56=QUOD9|1128=9|15=EUR|54=1|55=EUR/USD|62=20210910-08:17:36.891|117=01210910081536441002|131=369594113|133=-0.00004|135=1000000|167=FXSWAP|188=1.18278|190=1.18278|460=4|537=1|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=2|685=1000000|587=W1|588=20210921|681=1.18283|684=1.1827901|1067=0.00005|1068=0.0000101|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=1|685=1000000|587=W2|588=20210928|681=1.18283|684=1.18279|1067=0.00005|1068=0.00001|1066=-0.00004|1166=01210910081536441002|10=239|
{code}

*{color:#0747A6}#3{color}*
*15=USD*
*120=EUR*
{code:java}
8=FIXT.1.1|9=296|35=AB|34=244|49=QUOD9|52=20210910-06:41:38.723|56=QUODFX_UAT|1=Argentina1|11=974044760|15=USD|38=1000000|40=D|54=1|55=EUR/USD|59=4|60=20210910-06:41:37.000|117=01210910064137305002|120=EUR|167=FXSWAP|460=4|555=2|600=EUR/USD|609=FXFWD|587=W1|588=20210921|600=EUR/USD|609=FXFWD|587=W2|588=20210928|10=125|
{code}

*{color:#0747A6}#4{color}*
*15=USD*
*120=EUR*
{code:java}
8=FIXT.1.1|9=706|35=8|34=190|49=QUODFX_UAT|52=20210910-08:15:37.776|56=QUOD9|1128=9|6=0.0000399|11=369594112|14=1000000|15=USD|17=EX1210910081537173001|21=1|22=8|30=XQFX|31=0.0000399|32=1000000|37=MO1210910081537153001|38=1000000|39=2|40=D|48=EUR/USD|54=1|55=EUR/USD|59=4|60=20210910-08:15:37.761|63=0|75=20210910|100=XQFX|120=EUR|150=F|151=0|167=FXSWAP|194=1.18278|207=XQFX|381=39.9|453=1|448=gtwquod9|447=D|452=36|460=4|528=A|555=2|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=2|685=1000000|587=W1|588=20210921|637=1.1827901|1073=0.0000101|1418=1000000|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=1|685=1000000|587=W2|588=20210928|637=1.18283|1073=0.00005|1418=1000000|854=0|1071=0.0000399|5055=20210914|10=010|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, refactored_FX, SWED;;;PFX-3799;;QAP-5353;;"Send RFQ 35=R with ccy1 = EUR
Side = Buy";"TH2
Argentina
""EUR/USD""
#1
#2";Quote is sent to reply with only OfferPx (133 OfferPx -0.00004);;
;;;;;;;;;;;;;;;"Send an order 35=AB with ccy1=USD
without price
Side = Buy";"#3
#4";"Despite the fact that quote has only OfferPx, QS calculates BidPx
(1067 far leg [0.00005]- 1068 near leg [0.0000101] = [0.0000399]), because 
order is sent with ccu1=USD (quote currency)";;
QAP-T2501;RFQ_MM:Request For Quote on behalf of client: Manual DI (Reject);Specified;;"Checking workflow of manual handled quote, rejection case.

*Precondition:*

On trading FE open Client pricing tile => RFQ Tile, open Dealer 
Intervention window. There is need to be some assigned quotes in DI window.";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-3566;;QAP-5328;;"From MM RFQ Tile send a swap with Qty > Max Sweepable Qty for selected 
instrument";"Gold_Day 1W/2W
Client1
EUR/USD
20000000";Quote appears in Dealer Intervention window in Unassigned section.;;
;;;;;;;;;;;;;;;Assign quote to yourself;;Quote moved to assigned RFQ section.;;
;;;;;;;;;;;;;;;Select quote and estimate;;Quote selected, prices appears;;
;;;;;;;;;;;;;;;Send quote;;Prices appears at Client RFQ window;;
;;;;;;;;;;;;;;;Reject quote;;No more prices at RFQ window;;
;;;;;;;;;;;;;;;In Assigned RFQs swap go to any other quote and back;;"Check that all fields is filled and shows properly.
Request state: Cancelled
Quote State: RemovedFromMarket";;
QAP-T2502;Check Configurable Increments For DisplayQty in order ticket;Open;;"As a trader, I want to configure the increment by which the quantity 
changes in the order ticket so that I can easily and quickly change the 
quantity to amounts that I typically use.";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-1952;;QAP-5203;;Go to Options=>Order Ticket=>Order Quantity Increments;;Options window opened;;
;;;;;;;;;;;;;;;Fill in values like in screen;"Qty=500; Increment=1
Qty=1000; Increment=100
Qty=50000; Increment=1000
Etc";Values entered;;
;;;;;;;;;;;;;;;Open ESP tile and click on TOB;;Order Ticket opened;;
;;;;;;;;;;;;;;;"In DisplayQty field enter 500 and try change qty by scrolling mouse wheel 
or press up or down";;DisplayQty should change on 1;;
;;;;;;;;;;;;;;;"In DisplayQty field enter 1000 and try change qty by scrolling mouse wheel 
or press up or down";;DisplayQty should change on 100;;
;;;;;;;;;;;;;;;Redo step 4 for other qtys;Look on attached gif;DisplayQty should change on increment which we set in setting;;
;;;;;;;;;;;;;;;"In DisplayQty field enter 0 and try change qty by scrolling mouse wheel 
down";;Qty not going to negative values, and stay at 0;;
;;;;;;;;;;;;;;;"In DisplayQty field enter 10M and try to change qty by scrolling mouse 
wheel";;Qty can be change down but not up;;
QAP-T2503;FETrading - Checking that FE accept configured Qty precision;Specified;;"Checking that all described Qty inputs accepts configured qty precision.

For details see parent story.

Precondition: Open FE => Aggregated Rates => Rates Tile";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-3506;;QAP-5190;;"Open VWAP section and check that Default Qty and VWAP Qty have in decimal 
part amount that configured in configs (by default its 2)";"technical.config
";In all field presented decimal part with configured length;;
;;;;;;;;;;;;;;;In technical.config change default value and restart FE;"technical.config
";In all previous field now decimal part with new configured length;;
;;;;;;;;;;;;;;;Change back to default values and restart;;FE restarted and field display qty with set decimal length;;
QAP-T2504;FETrading - Checking that ESP tile applies 'VWAP of default Qty' option;Specified;;"Checking that with 'VWAP of default Qty' option Big Fig values still shows.

For details see parent story description ";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-3546;;QAP-5186;;"Go to Options=>ForEx Configs and set 'Header Prices Format' to 'VWAP of 
default Quantity' and save";;Options saved, no errors;;
;;;;;;;;;;;;;;;Open Aggregated Rates => Rates tile, select instrument;;Instrument selected, prices appears;;
;;;;;;;;;;;;;;;Open VWAP section and enter same Qty into default Qty and VWAP;10,000,000;Check that price is the same in ToP pips and VWAP section;;
;;;;;;;;;;;;;;;"Enter Big Qty in both VWAP and default qty field (more than Aggregated 
Rates depth)";;"Check that pips clears from TOB and VWAP section, Big Fig is still 
presented";;
;;;;;;;;;;;;;;;Set options back to 'Aggregated Top Of Book' and save;;Check that prices shows after settings applied;;
QAP-T2505;Do Not Send Non-Resting (IOC/FOK) Order Types During SOR Post Mode;Specified;;"*Prepared Execution Strategies*
!screenshot-1.png|thumbnail!
!screenshot-2.png|thumbnail!

{quote}Ben Ernest-Jones added a comment - 02/Aug/21 20:32
Resting orders would typically be those with order type Limit (not Market) 
and a TIF that does not execute immediately. So it would not include TIF 
IOC/FOK but it would include Day/GTD/GTC.{quote}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FX_ALGO, FXregression;;;PFX-2047;;QAP-5140;;Open ESP taker tile and press on BID button (to send passive mode AO);set buy price is lower than on the market;order ticket is opened;;
;;;;;;;;;;;;;;;"Set prepared strategy ""Passive_MS_JPM"" where only Non-Resting venues are 
configured and press Buy";MS and JPM have only TIF = FOK or IOC;"order is placed in order book:
Sts: Open";;
;;;;;;;;;;;;;;;Roll down child level;;"Check that AO doesn't send any child to MS and JPM because those venues are 
not Resting";;
QAP-T2506;Care Order with big ReportedCumQty and ReportedCumAmt;Specified;;;/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-3151;;QAP-5020;;"From FIX (or ESP Aggregated Rates Tile if manualy)
send care order with big qty";;Order is placed in OrderBook with Sts=Open;;
;;;;;;;;;;;;;;;RMC and select Manual Execution;;Trade Ticket is opened;;
;;;;;;;;;;;;;;;"Set Venue
and big price
and press Add";;Order is placed in Executions To Create window;;
;;;;;;;;;;;;;;;Press Create and check Order Book;;ReportedCumQty=999999999(that was entered in the ticket);;
;;;;;;;;;;;;;;;Check log files;see comment #1;no ERRORS in CS log files;;
QAP-T2507;FIX API: VWAP order with Broken Date (fix);Specified;;"create fubon_data and start script ./mongoImport.pl today 
(/home/quod314/best/Emulator)
script to change data in fubon_data.csv (:%s//27//30)
check that Script fills correct listing
use HSBC venue for quod314
{code:java}
my $SQL = ""SELECT listingid FROM vlisting WHERE alive='Y' AND 
venueid='HSBC' AND symbol = ? AND lookupsymbol ='EUR/USD-BDA.FXF'"";
{code}
*QUOD.FIXSELLQUOD1* instance on quod308@mercury
+StartDate and EndDate are now - 3hour+
*{color:#0747a6}#1{color}*
{code:java}
< 
8=FIXT.1.1|9=319|35=D|49=QUOD1|56=QUODFX_UAT|34=60|52=20210812-13:54:15|1=ASPECT_CITI|11=606482236|21=2|15=EUR|38=800000|40=1|54=1|55=EUR/USD|59=1|60=20210812-13:54:15|63=B|64=20210820|167=FXFWD|528=A|847=1|957=4|958=StartDate|959=14|960=13:55:30|958=EndDate|959=14|960=14:30:00|958=Waves|959=1|960=10|958=AllowedVenues|959=14|960=HSBC|10=223|
{code}
{color:#0747a6}*#2*{color}
{code:java}
> 
8=FIXT.1.1|9=450|35=8|34=65|49=QUODFX_UAT|52=20210812-13:54:15.224|56=QUOD1|1128=9|1=ASPECT_CITI|6=0|11=606482236|14=0|15=EUR|17=AO1210812135415397001|21=2|31=0|32=0|37=AO1210812135415397001|38=800000|39=A|40=1|54=1|55=EUR/USD|59=1|60=20210812-13:54:15.000|120=USD|150=A|151=800000|453=1|448=gtwquod1|447=D|452=36|460=4|528=A|847=1|854=0|957=4|958=StartDate|959=14|960=13:55:30|958=EndDate|959=14|960=14:30:00|958=Waves|959=1|960=10|958=AllowedVenues|959=14|960=HSBC|10=147|
{code}
{code:java}
> 
8=FIXT.1.1|9=481|35=8|34=66|49=QUODFX_UAT|52=20210812-13:54:15.250|56=QUOD1|1128=9|1=ASPECT_CITI|6=0|11=606482236|14=0|15=EUR|17=41800000003|21=2|31=0|32=0|37=AO1210812135415397001|38=800000|39=0|40=1|54=1|55=EUR/USD|59=1|60=20210812-13:54:15.245|63=B|64=20210820|120=USD|150=0|151=800000|378=4|453=1|448=gtwquod1|447=D|452=36|460=4|528=A|847=1|854=0|957=4|958=StartDate|959=19|960=20210812-13:55:30|958=EndDate|959=19|960=20210812-14:30:00|958=Waves|959=1|960=10|958=AllowedVenues|959=14|960=HSBC|10=002|
{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;PFX-2710;;QAP-5006;;From miniFix send a VWAP order 35=D;#1;order is sent;;
;;;;;;;;;;;;;;;Check Fix Client;#2;"Fix Client receives 35=8
Pending
New";;
;;;;;;;;;;;;;;;Waite until the Algo is finished (according with EndTime) and check reports;"#3
????";There must be 10 ExecReports with LastQty = 100000 each order.;;
;;;;;;;;;;;;;;;check Order and Trades blotters;;there must be 10 child orders;;
QAP-T2508;MDA to allow Static Load Balancing for FIX Subscriptions;Specified;;"Different MDA instances are configured to support different market data 
sources (i.e. different Feed Handlers on our side)
The idea here was that all MDA instances would listen to the subscriptions 
but only the one configured to serve that source would reply

add cfg:
For MDA
{code:java}

FSS

{code}
For MDA_3
{code:java}

TEST

{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-2791;;QAP-4888;;"Start 2 MDA instances (QUOD.MDA and QUOD.MDA_3) send MD from FSS feed 
source and TEST feed source";TEST feed source is ESP BUY side gwt on quod308;MD is sent to FE;;
;;;;;;;;;;;;;;;Check logs;see comments;"QUOD.MDA listens only FSS source
QUOD.MDA_3 listens only TEST source";;
QAP-T2509;Check Configurable Increments For ESP Tile Quantity (VWAP);Specified;;;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-3508;;QAP-4867;;Go to Options=>Order Ticket=>Order Quantity Increments;;Options window opened;;
;;;;;;;;;;;;;;;Fill in values like in screen;"Qty= Increment=
100,000 10,000
1,000,000 500,000
10,000,000 1,000,000";Values entered;;
;;;;;;;;;;;;;;;Open ESP Tile and add VWAP tab;;Tile opened;;
;;;;;;;;;;;;;;;"In Qty field in VWAP section enter 5 and try change qty by scrolling mouse 
wheel or press up or down";;Qty should change on 0.5;;
;;;;;;;;;;;;;;;"In Qty field in VWAP section enter 0.5 and try change qty by scrolling 
mouse wheel or press up or down";;Qty should change on 0.1;;
;;;;;;;;;;;;;;;"In Qty field in VWAP section enter 10 and try change qty by scrolling mouse 
wheel or press up or down";;Qty should change on 1;;
;;;;;;;;;;;;;;;In Qty field enter 0 and try change qty by scrolling mouse wheel down;;Qty not going to negative values, and stay at 0;;
QAP-T2510;Check Configurable Increments For ESP Tile Quantity;Specified;;;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-3508, PFX-3821;;QAP-4866;;Go to Options=>Order Ticket=>Order Quantity Increments;;Options window opened;;
;;;;;;;;;;;;;;;Fill in values like in screen;"Qty= Increment=
100,000 10,000
1,000,000 500,000
10,000,000 1,000,000";Values entered;;
;;;;;;;;;;;;;;;Open ESP Tile and add VWAP tab;;Tile opened;;
;;;;;;;;;;;;;;;"In Qty field enter 5M and try change qty by scrolling mouse wheel or press 
up or down";;Qty should change on 500K;;
;;;;;;;;;;;;;;;"In Qty field enter 500K and try change qty by scrolling mouse wheel or 
press up or down";;Qty should change on 10K;;
;;;;;;;;;;;;;;;"In Qty field enter 10M and try change qty by scrolling mouse wheel or press 
up or down";;Qty should change on 1M;;
;;;;;;;;;;;;;;;In Qty field enter 0 and try change qty by scrolling mouse wheel down;;Qty not going to negative values, and stay at 0;;
QAP-T2511;FETrading - Checking that Maker ESP Tile display difference of Big Fig FX Prices;To Review;;"_According to the parent story:_

In all trading FE locations where we display only the pips part of an FX 
price, and display the big fig part of the price if it does not match the 
top of book big fig, change the price display to only show the part of the 
big fig that differs, not the full price.

Locations impacted:
* ESP Tile Aggregated Rates
* ESP Tile Direct Venue Execution
* ESP Tile VWAP
* ESP Tile Full Amounts
* RFQ Tile Quotes
* Client ESP Tile Client Rates
* Client RFQ Tile Quotes

*Precondition:*

Open trading FE => Client Pricing Tiles=> Rates Tile";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-1574;;QAP-4828;;Select Instrument and ClientTier;EUR/USD-Spot Gold_Day;Prices appears;;
;;;;;;;;;;;;;;;"With use of arrows modify prices of several rows to have different Big Fig 
values in it";;"Modified prices starts displaying different Big Fig values with smaller 
font";;
QAP-T2512;FETrading - Checking that Taker RFQ Tile display difference of Big Fig FX Prices;To Review;;"_According to the parent story:_

In all trading FE locations where we display only the pips part of an FX 
price, and display the big fig part of the price if it does not match the 
top of book big fig, change the price display to only show the part of the 
big fig that differs, not the full price.

Locations impacted:
* ESP Tile Aggregated Rates
* ESP Tile Direct Venue Execution
* ESP Tile VWAP
* ESP Tile Full Amounts
* RFQ Tile Quotes
* Client ESP Tile Client Rates
* Client RFQ Tile Quotes

*Precondition:*

Open trading FE => Aggregated Rates => RFQ Tile";/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;FXregression;;;PFX-1574;;QAP-4824;;Select instrument, tenor, qty, client and send quote request.;"GBP/JPY Spot
ASPECT_CITI
1000000";Quote request sent, prices appears;;
;;;;;;;;;;;;;;;Check that prices displays differences of Big Fig;;Prices that has different Big fig, displays it with smaller font;;
;;;;;;;;;;;;;;;;;;;
QAP-T2513;FETrading - Checking that Taker ESP Tile display difference of Big Fig FX Prices;To Review;;"_According to the parent story:_

In all trading FE locations where we display only the pips part of an FX 
price, and display the big fig part of the price if it does not match the 
top of book big fig, change the price display to only show the part of the 
big fig that differs, not the full price.

Locations impacted:
* ESP Tile Aggregated Rates
* ESP Tile Direct Venue Execution
* ESP Tile VWAP
* ESP Tile Full Amounts
* RFQ Tile Quotes
* Client ESP Tile Client Rates
* Client RFQ Tile Quotes

*Precondition:*

Open trading FE => Aggregated Rates => Rates Tile";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-1574;;QAP-4823;;"Select instrument and open VWAP, Full Amount, Direct Venue Executions and 
Aggregated Rates panels";GBP/JPY-Spot;All panels opened properly and prices appears;;
;;;;;;;;;;;;;;;Check that prices able to display differences between prices Big Fig;;Different prices displays Big Fig number with smaller font;;
QAP-T2514;Risk Limit rules are applied for the combination of User and InstrSymbol;Specified;;"Prepare Risk Limits => TradingLimits for user and instrument
!screenshot-1.png|thumbnail!
backend.xml: = `*{color:#00875A}true{color}*'
!screenshot-2.png|thumbnail!";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-3249;;QAP-4802;;"Send an order for current user and instrument that are set in TradingLimit 
with
Quantity> Max Quantity";qty=3000000;"Order is not sent.
On the order ticket an issue appears";;
;;;;;;;;;;;;;;;Check order book;;"Order is sent and rejected with the reason
'11814 'OrdQty' (5910450) greater than 'MaxOrdQty' (2000000)'";;
QAP-T2515;FETrading: System Memory Intro Log Data;Specified;;"*2021-07-22 15:06:17:201, P:14804, TH:6748, [Info,Start,0] : ### Available 
Physical Memory: 19666 MB*
*2021-07-22 15:06:17:201, P:14804, TH:6748, [Info,Start,0] : ### Total 
Physical Memory: 32617 MB*
{code:java}
2021-07-22 15:06:17:188, P:14804, TH:6748, [Info,Start,0] : ### Quod 
Financial Front End
2021-07-22 15:06:17:200, P:14804, TH:6748, [Info,Start,0] : ### Version 
5.1.136.149.1626894604_420df694 (7/22/2021 11:08:05 AM)
2021-07-22 15:06:17:200, P:14804, TH:6748, [Info,Start,0] : ### OS: 
Microsoft Windows NT 6.2.9200.0
2021-07-22 15:06:17:200, P:14804, TH:6748, [Info,Start,0] : ### .NET: 
4.0.30319.42000
2021-07-22 15:06:17:200, P:14804, TH:6748, [Info,Start,0] : ### 64-bit OS: 
True
2021-07-22 15:06:17:200, P:14804, TH:6748, [Info,Start,0] : ### 64-bit 
proc: True
2021-07-22 15:06:17:201, P:14804, TH:6748, [Info,Start,0] : ### CPU: 
Intel64 Family 6 Model 158 Stepping 10, GenuineIntel; 12 cores
2021-07-22 15:06:17:201, P:14804, TH:6748, [Info,Start,0] : ### Available 
Physical Memory: 19666 MB
2021-07-22 15:06:17:201, P:14804, TH:6748, [Info,Start,0] : ### Total 
Physical Memory: 32617 MB
2021-07-22 15:06:17:201, P:14804, TH:6748, [Info,Start,0] : ### Timer High 
Res: True
2021-07-22 15:06:17:201, P:14804, TH:6748, [Info,Start,0] : ### Timer 
Accurate to 100 ns
2021-07-22 15:06:17:201, P:14804, TH:6748, [Info,Start,0] : ### Command 
Line: ""QuodFrontEnd.exe""
2021-07-22 15:06:17:201, P:14804, TH:6748, [Info,Start,0] : ### Culture: 
en-US / English (United States)
{code}";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-3279;;QAP-4797;;start FE trading;wait for total loading;FE is loaded completely;;
;;;;;;;;;;;;;;;Open log files and check;see Description;;;
QAP-T2516;FETrading - MM ESP Order Ticket checking applying of tick size;Specified;;"_Acceptance criteria:_

Apply the same price tick size profile logic we already have from the 
equities order ticket to:
* the FX taker order ticket Pips and Stop Price
** when only a single venue is selected, use the listing's tick size
** as we already do in the equity ticket, when more than one venue is 
selected, use the most granular tick size available across all selected 
venue listings
* the FX on behalf of client order ticket Pips (which uses the 
SingleBankPlatform listing)

You can find listing ticksize in the DB it is stored in 'ticksizeprofile' 
and 'listing' tables which connected by 'ticksizeprofileid' column. (QUODFX 
venue)

Notice:

Currency with JPY : is 10^-3 for spots (DB:listing:ticksizeprofileid =5), 
10^-5 for forwards  (DB:listing:ticksizeprofileid =7)

In another cases 10^-5 for spots (DB:listing:ticksizeprofileid =7), 10^-7 
for spots (DB:listing:ticksizeprofileid =17)

It is default values but it can be different for different venues

*Precondition:*

Open trading FE => Client Pricing Tiles => Rates Tile";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression;;;PFX-3536;;QAP-4794;;"From MM ESP Tile select instrument and place order by clicking ToB or 
double click on row in Client Rates panel";GBP/USD-Spot Gold_Day;Client order ticket opened;;
;;;;;;;;;;;;;;;Try to change pips value and stop price with use of arrows;;"Values changes properly and according to the listing ticksize (in case of 
GBP/USD-Spot Gold_Day its 0.00001)";;
;;;;;;;;;;;;;;;Change instrument and open order ticket, try to change values;GBP/USD-1W Gold_Day;"Values changes properly and according to the listing ticksize (in case of 
GBP/USD-1W Gold_Day its 0.0000001)";;
QAP-T2517;Check that reorder select only venues from the original order;Specified;;"*Precondition:*

Open FE=>Aggregates Rates + Order Book";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-3530;;QAP-4780;;From ESP tile send algo order on two venues;CITI and JPM;Order appears in Order Book with selected venues;;
;;;;;;;;;;;;;;;Reorder this order;;Order Ticket open, check that only venue from original order selected;;
QAP-T2518;Duplicate band in the list of sweepable quantities;Specified;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-538, PFX-3707, PFX-3704;;QAP-4779;;Open WebAdmin =>Client Tier => Gold_Day => EUR/USD and modify it;;modification window is opened;;
;;;;;;;;;;;;;;;Go to Sweepable Quantities tab and add duplicate rows and save;;no errors appear;;
;;;;;;;;;;;;;;;Open FETrading => ESP_MM => Gold_Day => EUR/USD;;you must see all duplicate rows in order they are displayed in Admin;;
;;;;;;;;;;;;;;;Remove added bands and save;;No errors;;
QAP-T2519;RFQ: Swap is priced if qty disabled for spot but active for forward;Automated;;;/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, refactored_FX;;;PFX-528, PFX-3688;;QAP-4777;;Open Spot and 1W ESP tiles;"There must be several rows. The last row on the Spot is disabled, but 
enabled on forward.
All others bands are disabled on forward";see picture;;
;;;;;;;;;;;;;;;Send swap request Spot/1W with qty =300M (the last band);;"despite the disabling this band on the spot tenor, QS should send quote in 
reply
(because this tenor is active on the forward leg)";;
QAP-T2520;Reject request from QuoteRequestBook;Specified;;;/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-3624;;QAP-4769;;From FIX Client send RFQ with qty> sweep_qty;;"request goes to DI
Status = NEW";;
;;;;;;;;;;;;;;;Assign to yourself, estimate and send quote;;"quote is appeared in QuoteRequestBook => child level
Request with Status = New
Quote with Status = Accepted";;
;;;;;;;;;;;;;;;RightMouseClick on the request and Reject it;;"Request with Status = Canceled
Quote with Status = RemovedFromMarket";;
;;;;;;;;;;;;;;;From RFQ MM Tile send RFQ with qty> sweep_qty;;"request goes to DI
Status = NEW";;
;;;;;;;;;;;;;;;Assign to yourself, estimate and send quote;;"quote is appeared in QuoteRequestBook => child level
Request with Status = New
Quote with Status = Accepted";;
;;;;;;;;;;;;;;;RightMouseClick on the request and Reject it;;"Request with Status = Canceled
Quote with Status = RemovedFromMarket";;
QAP-T2521;FETrading - Taker ESP Order Ticket checking applying of tick size;Automated;;"_Acceptance criteria:_

Apply the same price tick size profile logic we already have from the 
equities order ticket to:
* the FX taker order ticket Pips and Stop Price
** when only a single venue is selected, use the listing's tick size
** as we already do in the equity ticket, when more than one venue is 
selected, use the most granular tick size available across all selected 
venue listings
* the FX on behalf of client order ticket Pips (which uses the 
SingleBankPlatform listing)

You can find listing ticksize in the DB it is stored in 'ticksizeprofile' 
and 'listing' tables which connected by 'ticksizeprofileid' column.

Notice:

Currency with JPY : is 10^-3 for spots (DB:listing:ticksizeprofileid =5), 
10^-5 for forwards  (DB:listing:ticksizeprofileid =7)

In another cases 10^-5 for spots (DB:listing:ticksizeprofileid =7), 10^-7 
for spots (DB:listing:ticksizeprofileid =17)

It is default values but it can be different for different venues

*Precondition:*

Open trading FE (qoud314 site) => Aggregated Rates => Rates Tile";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;PFX-3536, PFX-3737;;QAP-4768;;"From ESP Tile select instrument and place order by clicking ToB or BID ASK 
btn";GBP/USD-Spot;Order ticket opened;;
;;;;;;;;;;;;;;;Change pips value and Stop price with arrows;;"Values changes properly and according with selected listing tick size (In 
case of EUR/USD-SPO with all selected venues its 0.00001)";;
;;;;;;;;;;;;;;;Select forward tenor and place order;GBP/USD-1W;"Values changes properly and according with selected listing tick size (In 
case of several venues selected its the most granulated tick size, for 
GBP/USD-WK1 its 0.0000001)";;
;;;;;;;;;;;;;;;"Open order ticket with one selected venue, You can use Direct Venue 
Execution Panel)";GBP/USD-1W GS;Check that price in order ticket the same as price in tile.;;
;;;;;;;;;;;;;;;Modify fields;;"Values changes properly and according with selected listing tick size (In 
case of GBP/USD-WK1 GS its 0.00001).";;
QAP-T2522;Check Configurable Increments For Order Quantity;Specified;;"As a trader, I want to configure the increment by which the quantity 
changes in the order ticket so that I can easily and quickly change the 
quantity to amounts that I typically use.";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-1952;;QAP-4767;;Go to Options=>Order Ticket=>Order Quantity Increments;;Options window opened;;
;;;;;;;;;;;;;;;Fill in values like in screen;"Qty=500; Increment=1
Qty=1000; Increment=100
Qty=50000; Increment=1000
Etc";Values entered;;
;;;;;;;;;;;;;;;Open ESP tile and click on TOB;;Order Ticket opened;;
;;;;;;;;;;;;;;;"In Qty field enter 500 and try change qty by scrolling mouse wheel or press 
up or down";;Qty should change on 1;;
;;;;;;;;;;;;;;;"In Qty field enter 1000 and try change qty by scrolling mouse wheel or 
press up or down";;Qty should change on 100;;
;;;;;;;;;;;;;;;Redo step 4 for other qtys;Look on attached gif;Qty should change on increment which we set in setting;;
;;;;;;;;;;;;;;;In Qty field enter 0 and try change qty by scrolling mouse wheel down;;Qty not going to negative values, and stay at 0;;
QAP-T2523;Subscription rejection on Sell-Side API Taking Streams;Specified;;"QUOD.FIXMARKETDATA
QUODFX_UAT
MD1
14055

{color:#0747A6}*#1*{color}
{code:java}
< 
8=FIXT.1.1|9=190|35=V|49=MD1|56=QUODFX_UAT|34=3|52=20210720-14:57:03|262=EUR/USD:SPO:REG:CITI_1|263=1|264=0|265=0|267=2|269=0|269=1|146=1|55=EUR/USD|461=CITI-SW|167=FXSPOT|63=0|64=20210722|22=8|1301=CITI-SW|10=051|
{code}
{color:#0747A6}*#2*{color}

{code:java}
> 
8=FIXT.1.1|9=111|35=Y|34=3|49=QUODFX_UAT|52=20210720-14:57:03.904292|56=MD1|1128=9|58=source 
is down|262=EUR/USD:SPO:REG:CITI_1|10=095|

{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-3318;;QAP-4726;;Stop FH you are going to subscribe to;QFSSESP for quod308;component's stopped;;
;;;;;;;;;;;;;;;"Connect to FIX Sell side (taker)
and send MD subscription 35=V";"#1
#2";"35=Y is sent to reply
with tag 58 = source is down";;
QAP-T2524;FETrading - Checking that double-click on care orders leads to split;Automated;;"This test checking ability to split an care order with double-click.

*Precondition*:

Open FE => Aggregated rates => Rates Tile

 ";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;PFX-3505;;QAP-4677;;Place care order;;Order is placed and presented in order book with status 'dealing';;
;;;;;;;;;;;;;;;From order book double-click on the placed order;;"Order split window opened, check that opened order ticket window is similar 
to the ESP tile order ticket (there is 'buy' or 'sell' buttons to place the 
order)";;
;;;;;;;;;;;;;;;"Set mandatory fields and place the order (click 'sell' for sell side orders 
or 'buy' for buy side)";;Child order is created and represented in order book sub-section;;
QAP-T2525;FETrading - Checking that double-click on non-care orders leads to order amending;Automated;;"This test checking ability to amend an non-care order with double-click.

*Precondition*:

Open FE => Aggregated rates => Rates Tile

 ";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;PFX-3505;;QAP-4673;;"Place order which won't be filled immediately (for ex. with high price for 
sell side or low price for buy side orders)";;Order is placed and presented in order book with status 'open';;
;;;;;;;;;;;;;;;From order book double-click on the placed order;;"Order ticket window opened, check that order amend window is opened (there 
is 'Modify' button for both, sell and buy, sides)";;
;;;;;;;;;;;;;;;Change some values and click 'Modify';;"Changes applies to the order and child orders immediately and represents in 
order book";;
QAP-T2526;FETrading - Checking the ability of on/off confirmation on order cancelling;Manual;;"Check that user able to configure order cancel confirmation thru functional 
config

Following to the parent story:
h4. Goal:

To add a config which would allow a user to disable the order cancellation 
pop-up window in trading FE.
h4. Expected result:

When Cancel option is selected from the right-click for an order, the 
cancellation request gets sent to BE immediately instead of opening the 
confirmation pop-up window.

In functional.config:
{code:java}

...

...

{code}
 ";/PFX/FX_Display;High - Must Have;FX_Display;FXregression;;;PFX-3380;;QAP-4514;;Check functional.config and start FE;;FE started properly with configured parameter;;
;;;;;;;;;;;;;;;Send order which won't be filled immediately;;Order present in order book with status Open;;
;;;;;;;;;;;;;;;With right-click select 'Cancel';;Pop-up confirmation shown;;
;;;;;;;;;;;;;;;Set option to 'false' at config and restart FE;;FE started properly with configured parameter;;
;;;;;;;;;;;;;;;Send order which won't be filled immediately;;Order present in order book with status Open;;
;;;;;;;;;;;;;;;With right-click select 'Cancel';;Order cancelled immediately with no confirmation;;
QAP-T2527;Check Spot Date on Swap Drop Copy trades;Automated;;"h4. {color:#172b4d}When reporting forward and swap trades to drop copy 
through standard sell-side FIX API, in addition to the settlement date, 
also report the Spot Value date.{color}

 

{color:#172b4d}in client_ors.xml configure{color}
  !image-2021-06-30-11-15-41-762.png!

 

*Precondition:*

Connect via miniFIX to QS_RFQ_Standatrt_sell - (10.0.22.77:14063) 
(quod308@mercury)

 

*35=R*
{code:java}
< 
8=FIXT.1.1|9=264|35=R|49=QUOD5|56=QUODFX_UAT|34=612|52=20210630-09:31:11|131=350011258|146=1|55=EUR/USD|167=FXSWAP|38=1000000|64=20210702|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|624=1|587=W1|588=20210709|685=1000000|600=EUR/USD|609=FXFWD|624=2|587=W2|588=20210716|685=1000000|10=129|
{code}
*35=S*
{code:java}
> 
8=FIXT.1.1|9=593|35=S|34=731|49=QUODFX_UAT|52=20210630-09:31:19.797|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20210630-09:33:11.493|64=20210702|117=01210630093119331002|131=350011258|132=0.0040612|133=-0.0010283|134=1000000|135=1000000|167=FXSWAP|188=1.18193|190=1.18193|460=4|537=1|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=1|685=1000000|587=W1|588=20210709|681=1.1832793|684=1.1794866|1067=0.0013493|1068=-0.0024434|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=2|685=1000000|587=W2|588=20210716|681=1.1835478|684=1.182251|1067=0.0016178|1068=0.000321|1065=0.0040612|1066=-0.0010283|1166=01210630093119331002|10=219|
{code}
*35=AB*
{code:java}
< 
8=FIXT.1.1|9=292|35=AB|49=QUOD5|56=QUODFX_UAT|34=615|52=20210630-09:31:30|1=CLIENT1|11=350011259|15=EUR|38=1000000|40=D|54=2|55=EUR/USD|59=4|60=20210630-09:31:30|63=6|117=01210630093119331002|167=FXSWAP|460=4|555=2|600=EUR/USD|609=FXFWD|654=1|587=0|588=20210709|600=EUR/USD|609=FXFWD|654=1|587=6|588=20210716|10=138|
{code}
*35=8*
{code:java}
> 
8=FIXT.1.1|9=795|35=8|34=735|49=QUODFX_UAT|52=20210630-09:31:30.826|56=QUOD5|1128=9|1=CLIENT1_1|6=0.0040612|11=350011259|14=1000000|15=EUR|17=EX1210630093130635001|21=1|22=8|31=0.0040612|32=1000000|37=MO1210630093130593001|38=1000000|39=2|40=D|48=EUR/USD|54=2|55=EUR/USD|59=4|60=20210630-09:31:30.773|63=6|64=20210702|75=20210630|100=XQFX|120=USD|150=F|151=0|167=FXSWAP|194=1.18193|207=XQFX|381=4061.2|453=4|448=CLIENT1|447=D|452=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|555=2|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=1|685=1000000|587=W1|588=20210709|637=1.1794866|1073=-0.0024434|1418=1000000|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=2|685=1000000|587=W2|588=20210716|637=1.1835478|1073=0.0016178|1418=1000000|854=0|1071=0.0040612|5055=20210702|10=199|
{code}
 ";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, refactored_FX;;;PFX-3298;;QAP-4510;;From miniFIX send RFQ;see description 35=R;"Receive Quote
see description 35=S";;
;;;;;;;;;;;;;;;On received Quote send new order multileg;see description 35=AB;Order sent and filled;;
;;;;;;;;;;;;;;;Check execution report;see description 35=8;"Execution report contain tag
5055 and it equal Spot Date";;
QAP-T2528;Client Pricing Engine: Publish Client Quotes On First Market Update Within Interval;Automated;;"*{color:#00875A}Set up Quote Update Interval (ms) = 10000{color}*
{color:#0747A6}*#0*{color}
{code:java}
35=W
{code}
{color:#0747A6}*#1*{color}
{code:java}
< 
8=FIXT.1.1|9=155|35=R|49=QUOD5|56=QUODFX_UAT|34=163|52=20211013-20:13:22|131=1729294943|146=1|55=EUR/USD|167=FXSPOT|537=1|38=1000000|64=20211015|63=0|15=EUR|1=CLIENT1|40=D|10=218|
{code}
{color:#0747A6}*#2*{color}
{code:java}
> 
8=FIXT.1.1|9=286|35=S|34=171|49=QUODFX_UAT|52=20211013-20:13:21.249|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20211013-20:15:21.236|63=0|64=20211015|117=01211013201321130001|131=1729294943|132=1.16079|133=1.1614|134=1000000|135=1000000|167=FXSPOT|188=1.16079|190=1.1614|460=4|537=1|1166=01211013201321130001|10=216|
{code}
{color:#0747A6}*#3*{color}
sell: 270=1.18079 buy:270=1.1814
{code:java}
8=FIXT.1.1|9=250|35=W|34=1566|49=TEST|52=20211013-20:13:25.707|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.18079|271=1000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1814|271=1000000|273=20211013|290=1|64=20211015|1070=1|10=044|
{code}
sell: 270=1.17079 buy:270=1.1714
{code:java}
8=FIXT.1.1|9=250|35=W|34=1567|49=TEST|52=20211013-20:13:25.881|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.17079|271=2000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1714|271=2000000|273=20211013|290=1|64=20211015|1070=1|10=048|
{code}
sell: 270=1.16079 buy:270=1.1614
{code:java}
8=FIXT.1.1|9=250|35=W|34=1568|49=TEST|52=20211013-20:13:25.989|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.16079|271=3000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1614|271=3000000|273=20211013|290=1|64=20211015|1070=1|10=058|
{code}
sell: 270=1.15079 buy:270=1.1514
{code:java}
8=FIXT.1.1|9=250|35=W|34=1569|49=TEST|52=20211013-20:13:26.104|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:CITI_6|268=2|269=0|270=1.15079|271=3000000|273=20211013|290=1|64=20211015|1070=1|269=1|270=1.1514|271=3000000|273=20211013|290=1|64=20211015|1070=1|10=037|
{code}
{color:#0747A6}*#4*{color}
*{color:#FF8B00}132=1.18079|133=1.1814{color}*
{code:java}
> 
8=FIXT.1.1|9=286|35=S|34=172|49=QUODFX_UAT|52=20211013-20:13:25.724|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20211013-20:15:21.236|63=0|64=20211015|117=01211013201325130001|131=1729294943|132=1.18079|133=1.1814|134=1000000|135=1000000|167=FXSPOT|188=1.18079|190=1.1814|460=4|537=1|1166=01211013201325130001|10=235|
{code}
{color:#0747A6}*#5*{color}
*{color:#FF8B00}132=1.15079|133=1.1514{color}*
{code:java}
> 
8=FIXT.1.1|9=286|35=S|34=173|49=QUODFX_UAT|52=20211013-20:13:43.311|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20211013-20:15:21.236|63=0|64=20211015|117=01211013201343130001|131=1729294943|132=1.15079|133=1.1514|134=1000000|135=1000000|167=FXSPOT|188=1.15079|190=1.1514|460=4|537=1|1166=01211013201343130001|10=216|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-2066, PFX-3623, PFX-2052;;QAP-4505;;"Send MD from BUY side to venues which is attached to your client tier and 
instrument";#0;;;
;;;;;;;;;;;;;;;From Fix send RFQ;"#1
#2";"QS calculates quote and send back
(notice that price 132=1.16079|133=1.1614)";;
;;;;;;;;;;;;;;;From Buy side sends 4-th 35=W;"#3
#4";"During this interval QS receives 4-th 35=W and calculates quote based on 
the first LP update (price match price from the first MD update
132=1.18079|133=1.1814)";;
;;;;;;;;;;;;;;;Waite start of the second interval (10sec);#5;"QS calculates quote based on the last LP update on the end boundary of that 
interva (price match price from the last MD update
132=1.15079|133=1.1514)";;
;;;;;;;;;;;;;;;Waite start of the third interval (10sec);;QS sends no quote;;
;;;;;;;;;;;;;;;Waite the end of TTL;;QS sends no update (because no update comes from the LP);;
;;;;;;;;;;;;;;;;see analyses in the comments;;;
QAP-T2529;Check that SATS inherits Settle date only for broken dates orders;Manual;;"Check that only Broken Dates child orders inherits Settle Date from parent 
orders.

*Precondition:*

FETrading => Aggregated Rates => Rates Tile

{color:#0747A6}#1{color} Spot child order log
{code:java}
2021-06-29 09:06:45.975532780 QUOD.SATS [23588] INFO mip_common 
(Message.cpp:132) - serializing internal BackendNewOrderBatch={ 
InternalHeaderBlock={ CreationTime=2021-Jun-29 09:06:45.975418703 } 
BackendNewOrderBatchBlock={ BackendNewOrderSingleBlock=[ { ParentOrdrList={ 
ParentOrdrBlock=[ { ParentOrdID=""AO1210629090644541001"" } ] } ListingList={ 
ListingBlock=[ { ListingID=1107425084 } ] } CounterpartList={ 
CounterpartBlock=[ { PartyRole=PrimeBrokerGeneralTradeServices 
CounterpartID=200004 } ] } OrderAttributeList={ OrderAttributeBlock=[ { 
OrderAttributeType=AlgorithmicOrder } ] } OrdID=""MO1210629090645543011"" 
ParentTransOriginator=""SATS"" Side=Sell Price=104.629000000 QtyType=Units 
OrdType=Limit TimeInForce=Day SettlCurrency=""JPY"" AggressorIndicator=No 
SettlType=Regular ExecutionOnly=No ClientInstructionsOnly=No 
OrdQty=5000000.000000000 AccountGroupID=""ASPECT_CITI"" 
InstrID=""Jbuei4sRIyA1Ttsa8mXiKg"" ExecutionPolicy=DMA 
SORParentOrdID=""AO1210629090644541001"" AlgoPolicyID=600022 
ChildBatchID=54300000021 } ] } } 2021-06-29 09:06:45.975829094 QUOD.SATS 
[23588] INFO ultramessaging (Writer.cpp:312) - sent UM message 
{MessageType=""Internal_BackendNewOrderBatch"" Body=<255-byte sequence> 
sender=""SATS/quod308@mercury:21753"" qseq=16058} on subject 
`QUOD.INTERNAL.ORS', using UM lbtrm session backendCM
{code}
*{color:#0747A6}#2{color}* Forward child order log (not broken date)
{code:java}
2021-06-29 10:16:22.087785143 QUOD.SATS [23595] INFO mip_common 
(Message.cpp:132) - serializing internal BackendNewOrderBatch={ 
InternalHeaderBlock={ CreationTime=2021-Jun-29 10:16:22.087695440 } 
BackendNewOrderBatchBlock={ BackendNewOrderSingleBlock=[ { ParentOrdrList={ 
ParentOrdrBlock=[ { ParentOrdID=""AO1210629101621541001"" } ] } ListingList={ 
ListingBlock=[ { ListingID=1107425088 } ] } CounterpartList={ 
CounterpartBlock=[ { PartyRole=PrimeBrokerGeneralTradeServices 
CounterpartID=200004 } ] } OrderAttributeList={ OrderAttributeBlock=[ { 
OrderAttributeType=AlgorithmicOrder } ] } OrdID=""MO1210629101622543005"" 
ParentTransOriginator=""SATS"" Side=Sell Price=104.630030000 QtyType=Units 
OrdType=Limit TimeInForce=Day SettlCurrency=""JPY"" AggressorIndicator=No 
SettlType=W1 ExecutionOnly=No ClientInstructionsOnly=No 
OrdQty=5000000.000000000 AccountGroupID=""ASPECT_CITI"" 
InstrID=""_LwE31a5a4aQYbJPzmaAaw"" ExecutionPolicy=DMA 
SORParentOrdID=""AO1210629101621541001"" AlgoPolicyID=600022 
ChildBatchID=54300000032 } ] } }
2021-06-29 10:16:22.088011377 QUOD.SATS [23595] INFO ultramessaging 
(Writer.cpp:312) - sent UM message 
{MessageType=""Internal_BackendNewOrderBatch"" Body=<255-byte sequence> 
sender=""SATS/quod308@mercury:21753"" qseq=17956} on subject 
`QUOD.INTERNAL.ORS', using UM lbtrm session backendCM
{code}
*{color:#0747A6}#3{color}* Forward child order (Broken date, settle date 
parametr is present in child order)
{code:java}
2021-06-29 09:12:22.918549705 QUOD.SATS [23578] INFO mip_common 
(Message.cpp:132) - serializing internal BackendNewOrderBatch={ 
InternalHeaderBlock={ CreationTime=2021-Jun-29 09:12:22.918424274 } 
BackendNewOrderBatchBlock={ BackendNewOrderSingleBlock=[ { ParentOrdrList={ 
ParentOrdrBlock=[ { ParentOrdID=""AO1210629091151541001"" } ] } ListingList={ 
ListingBlock=[ { ListingID=1107425110 } ] } CounterpartList={ 
CounterpartBlock=[ { PartyRole=PrimeBrokerGeneralTradeServices 
CounterpartID=200004 } ] } OrderAttributeList={ OrderAttributeBlock=[ { 
OrderAttributeType=AlgorithmicOrder } ] } OrdID=""MO1210629091222543001"" 
ParentTransOriginator=""SATS"" Side=Sell Price=104.630010000 QtyType=Units 
OrdType=Limit TimeInForce=Day SettlCurrency=""JPY"" AggressorIndicator=No 
SettlType=BrokenDate SettlDate=2021-Jul-06 ExecutionOnly=No 
ClientInstructionsOnly=No OrdQty=5000000.000000000 
AccountGroupID=""ASPECT_CITI"" InstrID=""DHtVdQ05dxSyLVVxlf9i1w"" 
ExecutionPolicy=DMA SORParentOrdID=""AO1210629091151541001"" 
AlgoPolicyID=600022 ChildBatchID=54300000027 } ] } }
2021-06-29 09:12:22.918888055 QUOD.SATS [23578] INFO ultramessaging 
(Writer.cpp:312) - sent UM message 
{MessageType=""Internal_BackendNewOrderBatch"" Body=<265-byte sequence> 
sender=""SATS/quod308@mercury:21753"" qseq=16235} on subject 
`QUOD.INTERNAL.ORS', using UM lbtrm session backendCM
{code}";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;BDA, FXregression;;;PFX-3458;;QAP-4497;;Send algo order with standard tenor (not broken date) from ESP taker tile;;Order is sent;;
;;;;;;;;;;;;;;;"Go to BE logs, in SATS log check that messages about child orders does not 
contains SettlDate parameter";#1, #2;There is no settle date parameter in massages;;
;;;;;;;;;;;;;;;Send order with broken date tenor;;Order is sent;;
;;;;;;;;;;;;;;;"Go to BE logs, in SATS log check that messages about child orders contains 
SettlDate parameter which is inherited from Parent order";#3;Settle date parameter is presented in messages;;
QAP-T2530;Aspect: Split Care Order (childManipulationOnly = true);Specified;;"connect to *FIXSELLQUOD1* (quod308@mecury)
*{color:#0747A6}#1{color}*

{code:java}
< 
8=FIXT.1.1|9=179|35=D|49=QUOD1|56=QUODFX_UAT|34=217|52=20210623-13:13:08|1=ASPECT_DB|11=273632620|21=3|15=EUR|38=1000000|40=1|54=1|55=EUR/USD|59=4|60=20210623-13:13:08|64=20210625|167=FXSPOT|22=6|10=134|
{code}

{color:#0747A6}*#2*{color}

{code:java}
> 
8=FIXT.1.1|9=736|35=8|34=220|49=QUODFX_UAT|52=20210623-13:13:29.220|56=QUOD1|1128=9|1=ASPECT_DB1|6=1.196646529|11=273632620|14=1000000|15=EUR|17=EV1210623131328497002|21=3|22=8|30=DB-RFQ|31=1.196646529|32=1000000|37=CO1210623131308464001|38=1000000|39=2|40=1|48=32:2|54=1|55=EUR/USD|59=4|60=20210623-13:13:28.232|63=0|64=20210625|75=20210623|100=BNP-RFQ;STA-RFQ;CITI-RFQ;DB-RFQ;GS-RFQ;JPM-RFQ;HSBC-RFQ;MS-RFQ;BARC-RFQ;EBS-CITI;FM-CITI;RTSL-CITI;CITI-SW;CITI-FA;GS-SW;GS-FA;HSBC;HSBC-FA;JPM-SW;JPM-FA;MS-SW;MS-FA;BNP-SW;BNP-FA;STA-FA;DB-SW;DB-FA;BARC-SW;BARC-FA;XQFX;D3;FSSR|120=USD|150=F|151=0|167=FXSPOT|194=1.196646529|207=EBS-CITI|381=1196646.53|453=2|448=KKL|447=D|452=12|448=gtwquod1|447=D|452=36|460=4|527=SimExe-SimOrd-01210623131328124002|854=0|10=022|

{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;PFX-841;;QAP-4456;;Send CO order from FIX;#1;"Order is sent and placed in OrderBook
CO has status Sent";;
;;;;;;;;;;;;;;;Open ClientInbox and accept request;;Status for CO order is changed from Sent to Open;;
;;;;;;;;;;;;;;;Right mouse click and Split RFQ the order;;RFQ tile is opened;;
;;;;;;;;;;;;;;;Press SEND button;;you see quotes buy side (because order CO was sent with tag 54=1 Buy);;
;;;;;;;;;;;;;;;Press on the TOB;#2;"Order is filled and executed:
1.Check that FIX client receives 35=8
2. Order book created child order
3. Trade blotter contains execution";;
QAP-T2531;Aspect: RFQ and ESP tiles are not available (childManipulationOnly = true);Specified;;"Go to *functional.config* and change childManipulationOnly to true

{code:java}


{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-841;;QAP-4455;;Open FE trading => RFQ tile;;RFQ tile is opened;;
;;;;;;;;;;;;;;;Send request;;Quotes are sent in reply;;
;;;;;;;;;;;;;;;Try to execute an order;;"You can't do it. Quote are in ""read-only mode""";;
;;;;;;;;;;;;;;;Open ESP tile and try to send any order;;You can't do it;;
;;;;;;;;;;;;;;;;change config back to false;;;
QAP-T2532;FE Trading: check ESP Tile Support for Broken Date Orders (DMA);Specified;;"_Acceptance Criteria_
* Subscribe to Broken Date ESP FX market data through the FX ESP tile
** Select a broken date tenor for a given pair from the instrument 
drop-down
** When the selected instrument is not a broken date tenor, we should 
display the read-only settlement date like we do now
** When the selected instrument is a broken date tenor, we should change 
the settlement date to be a date picker, but let the user change to any 
date they want
*** The default value for the date picker can be null / blank, and no 
subscriptions need to be sent from the FE until a date is selected
*** The display of the date picker should be the same as the date pickers 
in the RFQ tile, hiding the border, only showing the drop-down arrow on 
mouse hover, etc.
* Change the tooltip on the settlement date control from ""Value Date"" to 
""Settle Date""
* Execute Broken Date FX SOR, DMA, VWAP, and TWAP orders through the 
trading FE order ticket.
* See broken date parent and child orders in the order blotter.
* See broken date trades in the trade blotter.
* See appropriate settlement date positions updated from broken date orders 
and trades.

*To see MarketData in ESP tile you should have Venue.SupportBrokenDateFeed 
= Y*

 

 

Preconditions:

Open FE=>Aggregates Rates=> Rates tile, Direct Venue Executions, 
AggregatesRates";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FX_ALGO, FXregression;;;PFX-2393;;QAP-4401;;From ESP tile select instrument with tenor Broken;EUR/USD Broken;Instrument selected, settlement date change to a date picker;;
;;;;;;;;;;;;;;;Select some date from date from calendar;;Prices appear in TOB, Direct Venue Executions and Aggregates rates;;
;;;;;;;;;;;;;;;Send Sell DMA order;"Qty=2000000
Side= Sell
Price<TOB
TIF=Limit";Order sent and filled;;
;;;;;;;;;;;;;;;Check order book;;"Order Tenor is Broken,
child orders Tenor is Broken";;
;;;;;;;;;;;;;;;Check trades blotter;;Tenor is Broken;;
QAP-T2533;FE Trading: check ESP Tile Support for Broken Date Orders (TWAP);Specified;;"_Acceptance Criteria_
* Subscribe to Broken Date ESP FX market data through the FX ESP tile
** Select a broken date tenor for a given pair from the instrument 
drop-down
** When the selected instrument is not a broken date tenor, we should 
display the read-only settlement date like we do now
** When the selected instrument is a broken date tenor, we should change 
the settlement date to be a date picker, but let the user change to any 
date they want
*** The default value for the date picker can be null / blank, and no 
subscriptions need to be sent from the FE until a date is selected
*** The display of the date picker should be the same as the date pickers 
in the RFQ tile, hiding the border, only showing the drop-down arrow on 
mouse hover, etc.
* Change the tooltip on the settlement date control from ""Value Date"" to 
""Settle Date""
* Execute Broken Date FX SOR, DMA, VWAP, and TWAP orders through the 
trading FE order ticket.
* See broken date parent and child orders in the order blotter.
* See broken date trades in the trade blotter.
* See appropriate settlement date positions updated from broken date orders 
and trades.

*To see MarketData in ESP tile you should have Venue.SupportBrokenDateFeed 
= Y*

 

 

Preconditions:

Open FE=>Aggregates Rates=> Rates tile, Direct Venue Executions, 
AggregatesRates";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FX_ALGO, FXregression;;;PFX-2393;;QAP-4400;;From ESP tile select instrument with tenor Broken;EUR/USD Broken;Instrument selected, settlement date change to a date picker;;
;;;;;;;;;;;;;;;Select some date from date from calendar;;Prices appear in TOB, Direct Venue Executions and Aggregates rates;;
;;;;;;;;;;;;;;;Send Sell Algo order;"Qty=3000000
Quod TWAP";Order sent and filled;;
;;;;;;;;;;;;;;;Check order book;;"Order Tenor is Broken,
child orders Tenor is Broken";;
;;;;;;;;;;;;;;;Check trades blotter;;Tenor is Broken;;
QAP-T2534;Verify that Strategy string has an Italic font on Default Strategy in FX ESP Tile;Specified;;"*Testing*
*Acceptance Criteria:*
Anywhere a strategy policy can be selected, instead of using a Blank entry 
to indicate default policy, use the string ""Default"" in Italics (if 
possible) - Trading FE order ticket, Trading FE Quick Order Button, Trading 
FE FX ESP Tile Algos section, Admin FE AH execution strategy, etc

*Precondition:*
Open FETraiding

*Note:*
*Need update test steps*
See details in the attachments

_Attachment updates_: default policy name of ""[Scenario Name] Default"" 
(e.g. ""Quod TWAP Default""), change the static data to  name each default 
policy ""Default""";/PFX/FX_Display;High - Must Have;FX_Display;FETrading, FXregression;;;PADM-372, PEQ-4655;;QAP-4391;;Open ForEx Tab;;ForEx Tab is opened;;
;;;;;;;;;;;;;;;"Click on button ""Rated Tile""";;Rates Tile is added on Aggregated Market Rates workspace;;
;;;;;;;;;;;;;;;"Click on ""Aggregated Rates""";;Aggregated Rates windows is opened;;
;;;;;;;;;;;;;;;Set algo;Quod TWAP;Algo is set;;
;;;;;;;;;;;;;;;"Verify field ""Strategy""";Quod TWAP Default;Default Strategy has Italic font;;
QAP-T2535;Check that ORS doesn't send drop-copy of FX MM Trades;Specified;;"Connect from miniFIX to *10.0.22.77:14064* (ESP component on 
quod308@mercury) ";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;;;QAP-4387;;Edit configuration of ors.xml;false;config saved;;
;;;;;;;;;;;;;;;Open FE=>Client Pricing Tile=>send new order single;;Order sent and filled;;
;;;;;;;;;;;;;;;Check Trades blotter;;Trades blotter has two executions, for external and internal;;
;;;;;;;;;;;;;;;Check execution report received on miniFIX;;Received one execution report with ExecId only for External;;
QAP-T2536;FETrading - Ribbon Search Panel;Specified;;" 

*Precondition:*

 

Open FE => Ribbon panel => Search field";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-3500;;QAP-4379;;Select the search field and start entering data for search (for ex. 'Cli');Cli;"All results containing 'cli' (case insensitive) appears in the dropdown 
list";;
;;;;;;;;;;;;;;;Select item from the list;;Selected element window opened;;
QAP-T2537;Don't do Explicitly for rfq spot/forward;Automated;;attached one RFQ venue in forward venue tab for client tier => instrument;/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, refactored_FX, swapMM;;;PFX-749;;QAP-4234;;"Send RFQ swap
Spot/1W";;"Open FE Trading => QuoteRequest blotter =>
request goes to manual DI with a reason :""no bid forward points for client 
tier `2600011' on GBP/USD WK1 on QUODFX - manual intervention required""";;
QAP-T2538;RFQ: reject with invalid client;Automated;;"Having DUMMY account
!screenshot-1.png|thumbnail!";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FX_fix, FXregression, needs_refactoring_FX;;;PFX-3527;;QAP-4228;;Send 35=R with invalid client;;"Ors sends reject to FE
Check that Client is DUMMY
and free Notes:
""11620 unknown client CLIENT14785""";;
QAP-T2539;RFQ_MM:Request For Quote on behalf of client: Swap (spot/frw);Specified;;;/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, swapMM;;;PFX-219, PFX-3504;;QAP-4223;;Open Trading FE => RFQ MM tile and send an even swap order;"quod308:
CLIENT1
tenor1: SPOT
tenor2: W1
tier: Gold_Day
qty=1000000
instr=EUR/USD
CCY1 = EUR";"request is sent
quote is received in reply";;
;;;;;;;;;;;;;;;Send an order;;order is sent and filled;;
;;;;;;;;;;;;;;;Open Order Book, Quote Request Book , Quote Book and Trade book;;Check that ExecPrice is the same in each window for the current order/quote;;
QAP-T2540;FX Order ticket : Apply K, M, B shortcut multipilers for DisplayQty field;Automated;;"*Precondition:*

Open FE=> Aggregated Rates=>ESP tile=> Order Ticket";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;PFX-3398;;QAP-4156;;Change the Display Qty typing 1M;;"Quantity updated to 1 000 000,
no error beep";;
;;;;;;;;;;;;;;;Change the Display Qty typing 1K;;"Quantity updated to 1 000,
no error beep";;
;;;;;;;;;;;;;;;Change the Display Qty typing 1B;;"Quantity updated to 1 000 000 000,
no error beep";;
;;;;;;;;;;;;;;;Change the Display Qty typing 1KK;;"Quantity updated to 1 000 ,
no error beep";;
QAP-T2541;Auto-Hedger works after manual AH (inter);Specified;;AURUM GBP/DKK may be used in automation.;/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression;;;PFX-3135;;QAP-4149;;From client interface (RFQ MM tile) send a request with qty > sweepable;;request is sent to DI;;
;;;;;;;;;;;;;;;Estimate quote and send an order;;"External AH was triggered and sent orders, orders have TIF IOC and they are 
partially filled until the position is reached its short QTY (0 for 
example)
";;
QAP-T2542;AH against AH for Pair with SystemCurrency (fix);Automated;;"1)External AH
!screenshot-4.png|thumbnail!
2)Configure to send dropCopy to the same gtw
3) Internal AH
!screenshot-5.png|thumbnail!
{color:#0747A6}*#1*{color}
{code:java}
< 
8=FIXT.1.1|9=177|35=D|49=QUOD3|56=QUODFX_UAT|34=239|52=20210528-09:46:18|1=CLIENT1|11=459271928|21=1|15=SEK|38=1000000|40=1|54=1|55=USD/SEK|59=4|60=20210528-09:46:18|63=0|64=20210601|167=FXSPOT|10=234|

{code}

*{color:#0747A6}#2{color}*

{code:java}
8=FIXT.1.1|9=525|35=8|34=445|49=QUODFX_UAT|52=20210528-09:46:17.857|56=QUOD3|1128=9|1=CLIENT1_1|6=8.64017|11=459271928|14=1000000|15=SEK|17=EX1210528094617902001|21=1|22=8|31=8.64017|32=1000000|37=MO1210528094617856001|38=1000000|39=2|40=1|48=USD/SEK|54=1|55=USD/SEK|59=4|60=20210528-09:46:17.708|63=0|64=20210601|75=20210528|100=XQFX|120=USD|150=F|151=0|167=FXSPOT|194=8.64017|207=XQFX|381=8640170|453=5|448=CLIENT1|447=D|452=3|448=gtwquod3|447=D|452=117|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod3|447=D|452=36|460=4|528=A|854=0|10=032|
{code}

*{color:#0747A6}#3{color}*

{code:java}
> 
8=FIXT.1.1|9=486|35=8|34=447|49=QUODFX_UAT|52=20210528-09:46:17.906|56=QUOD3|1128=9|1=QUOD_1|6=8.64151|11=MO1210528094617876001|14=1000000|15=USD|17=EX1210528094617906001|21=1|22=8|31=8.64151|32=1000000|37=MO1210528094617876001|38=1000000|39=2|40=1|48=USD/SEK|54=1|55=USD/SEK|59=4|60=20210528-09:46:17.863|63=0|64=20210601|75=20210528|100=XQFX|120=SEK|150=F|151=0|167=FXSPOT|194=8.64151|207=XQFX|381=8641510|453=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=AH_TECHNICAL_USER|447=D|452=36|460=4|854=0|10=010|
{code}

*{color:#0747A6}#4{color}*

{code:java}
< 
8=FIXT.1.1|9=177|35=D|49=QUOD3|56=QUODFX_UAT|34=241|52=20210528-09:46:20|1=CLIENT1|11=459271929|21=1|15=SEK|38=1000000|40=1|54=1|55=USD/SEK|59=4|60=20210528-09:46:20|63=0|64=20210601|167=FXSPOT|10=214|
{code}

*{color:#0747A6}#5{color}*

{code:java}
> 
8=FIXT.1.1|9=525|35=8|34=451|49=QUODFX_UAT|52=20210528-09:46:19.654|56=QUOD3|1128=9|1=CLIENT1_1|6=8.64075|11=459271929|14=1000000|15=SEK|17=EX1210528094619902001|21=1|22=8|31=8.64075|32=1000000|37=MO1210528094619856001|38=1000000|39=2|40=1|48=USD/SEK|54=1|55=USD/SEK|59=4|60=20210528-09:46:19.627|63=0|64=20210601|75=20210528|100=XQFX|120=USD|150=F|151=0|167=FXSPOT|194=8.64075|207=XQFX|381=8640750|453=5|448=CLIENT1|447=D|452=3|448=gtwquod3|447=D|452=117|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod3|447=D|452=36|460=4|528=A|854=0|10=049|
{code}

*{color:#0747A6}#6{color}*

{code:java}
> 
8=FIXT.1.1|9=486|35=8|34=452|49=QUODFX_UAT|52=20210528-09:46:19.715|56=QUOD3|1128=9|1=QUOD_1|6=8.64151|11=MO1210528094619876001|14=1000000|15=USD|17=EX1210528094619906001|21=1|22=8|31=8.64151|32=1000000|37=MO1210528094619876001|38=1000000|39=2|40=1|48=USD/SEK|54=1|55=USD/SEK|59=4|60=20210528-09:46:19.664|63=0|64=20210601|75=20210528|100=XQFX|120=SEK|150=F|151=0|167=FXSPOT|194=8.64151|207=XQFX|381=8641510|453=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=AH_TECHNICAL_USER|447=D|452=36|460=4|854=0|10=013|
{code}

*{color:#0747A6}#7{color}*

{code:java}
> 
8=FIXT.1.1|9=730|35=8|34=454|49=QUODFX_UAT|52=20210528-09:46:20.974|56=QUOD3|1128=9|1=QUOD2_1|6=8.719098|11=AO1210528094619876002|14=2000000|15=USD|17=EV1210528094620909001|21=2|22=8|30=CITI|31=8.719098|32=2000000|37=AO1210528094619876002|38=2000000|39=2|40=1|48=USD/SEK|54=1|55=USD/SEK|59=0|60=20210528-09:46:20.786|63=B|64=20210531|75=20210528|100=BNP-RFQ;RTSL-CITI;BARC-RFQ;DB-FA;DB-SW;MS-RFQ;JPM-RFQ;HSBC-RFQ;FM-CITI;MS-SW;XQFX;GS-SW;JPM-SW;D3;HSBC;EBS-CITI;CITI-FA;CITI-SW;STA-RFQ;CITI-RFQ;DB-RFQ;GS-RFQ;MS-FA;BARC-SW;FSSR|120=SEK|150=F|151=0|167=FXSPOT|194=8.719098|198=O20210528L1NY2000000955|207=EBS-CITI|381=17438196|453=2|448=CITIPB|447=D|452=79|448=AH_TECHNICAL_USER|447=D|452=36|460=4|527=E20210528L1NY2000000890|847=1008|854=0|5053=0|10=051|
{code}";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FX_fix, FXregression, needs_refactoring_FX;;;PFX-2837;;QAP-4122;;From client interface send an order USD/SEK qty = 1M;"USD/SEK is crossed through EUR
Threshold = 1000000
#1
#2
#3";"order is sent and trigger EXTERNAL AH:
There must be Executions reports for two orders (order from client and 
external AH)
35=8
(150 ExecType F TRADE
39 OrdStatus 2 FILLED)";;
;;;;;;;;;;;;;;;send one more order USD/SEK qty=1M;"#4
#5
#6
#7";"order is sent and trigger external AH:
There must be Executions reports for three orders : (from client , external 
AH and internal AH = AO)
35=8
(150 ExecType F TRADE
39 OrdStatus 2 FILLED)";;
;;;;;;;;;;;;;;;subscribe on QUOD_1 and QUOD2_1 position;FOR FUTURE once PFX-1990 is done;check position;;
;;;;;;;;;;;;;;;Open FE Trading => Order Book and Position blotter;For manual test;see picture;;
QAP-T2543;Reject of market data request via fix with wrong settlDate;Automated;;"In case the quoting session rejects the FIX subscription request, the 
MarketDataRequestReject is sent back over the same FIX session.

{color:#0747A6}* #1*{color}
{code:java}
< 
8=FIXT.1.1|9=155|35=V|49=QUOD3|56=QUODFX_UAT|34=3|52=20210614-06:56:13|50=CLIENT1|262=1111222241|263=1|264=0|265=0|267=2|269=0|269=1|146=1|55=USD/XXX|460=4|63=0|167=FXSPOT|10=097|
{code}
*{color:#0747A6}#2{color}*
{code:java}
> 
8=FIXT.1.1|9=111|35=Y|34=2|49=QUODFX_UAT|52=20210614-06:56:16.053|56=QUOD3|1128=9|58=no 
active client tier|262=1111222241|281=3|10=178|
{code}";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX;;;;;QAP-4094;;"Send a market data request 35=V with incorrect data (for example, incorrect 
instrument 55=USD/XXX)";#1;"Market data request received and rejected by QS
35=Y message sent back to FIX";;
;;;;;;;;;;;;;;;Check FIX gateway;#2;35=Y message correctly received by gateway;;
QAP-T2544;FX FETrading - OneClick : 1-Click Mode to be Always On;Open;;"_Acceptance Criteria_
* Under User Options -> ForEx Configs in the ""1-Click Orders Mode"" field, 
add 2 additional modes:
** SingleClickAlwaysOn - This will always enable single 1-click mode across 
all FX ESP tiles... it will not only make it possible to do 1-click, but it 
will actually turn 1-click on for all tiles, and cannot be turned off per 
tile.
** DoubleClickAlwaysOn - Same as above, but for double 1-click
* In either of these new modes, the ""1-click"" on/off button per ESP tile 
should not be displayed, and the header of the ESP tile should not change 
color.

 

*Precondition:*

Open FE=>Aggragated Rates=>Rates tile";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-1773;;QAP-4092;;Open Options=>ForEx configs and click on 1 click Orders Mode;;"5 items should appear:
Disabled
SingleClick
DoubleClick
SingleClickAlwaysOn
DoubleClickAlwaysOn";;
;;;;;;;;;;;;;;;"Select
Set 1-click to SingleClickAlwaysOn, check that 1-click on is enabled and 
nothing changed in TOB
Click on the price from the TOB";;Check that the order is sent to market;;
;;;;;;;;;;;;;;;"check that 1-click on is enabled
Click on BID from TOB";;Check that the order was not sent to market, order box is opened;;
;;;;;;;;;;;;;;;"Select
Set 1-click to DoubleClickAlwaysOn, check that 1-click on is enabled and 
nothing changed in TOB
DoubleClick on the price from the TOB";;Check that the order is sent to market;;
;;;;;;;;;;;;;;;"check that 1-click on is enabled
Click on BID from TOB";;Check that the order was not sent to market, order box is opened;;
QAP-T2545;FETrading: Dropdown For Color Palette;Open;;"*Precondition:*

Open FE=> Options=> User Interface";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-3152;;QAP-4091;;Select Color Palette;;Look that only 1 drop down appear;;
;;;;;;;;;;;;;;;"Select palette from sections and after change it to another palette from 
this sections";Dark;in User interface window should displayed the name of the selected palette;;
QAP-T2546;Swap order gets rejected against wrong side;Automated;;"*{color:#0747A6}#1{color}*

{code:java}
< 
8=FIXT.1.1|9=269|35=R|49=QUOD5|56=QUODFX_UAT|34=163|52=20210520-13:19:02|131=111333467|146=1|55=EUR/USD|167=FXSWAP|54=2|38=1000000|64=20210524|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|624=2|587=W1|588=20210531|685=1000000|600=EUR/USD|609=FXFWD|624=1|587=W2|588=20210607|685=1000000|10=093|

{code}
*{color:#0747A6}#2{color}*

{code:java}
> 
8=FIXT.1.1|9=548|35=S|34=206|49=QUODFX_UAT|52=20210520-13:19:05.395|56=QUOD5|1128=9|15=EUR|54=2|55=EUR/USD|62=20210520-13:21:00.970|64=20210524|117=01210520131905213002|131=111333467|132=-0.00001|134=1000000|167=FXSWAP|188=1.18221|190=1.18221|460=4|537=1|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=2|685=1000000|587=W1|588=20210531|681=1.182188|684=1.182248|1067=-0.000022|1068=0.000038|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=1|685=1000000|587=W2|588=20210607|681=1.182238|684=1.182198|1067=0.000028|1068=-0.000012|1065=-0.00001|1166=01210520131905213002|10=241|

{code}

*{color:#0747A6}#3{color}*

{code:java}
< 
8=FIXT.1.1|9=289|35=AB|49=QUOD5|56=QUODFX_UAT|34=165|52=20210520-13:19:28|1=CLIENT1|11=509227620|15=EUR|38=1000000|40=D|54=1|55=EUR/USD|59=4|60=20210520-13:19:28|117=01210520131905213002|167=FXSWAP|460=4|555=2|600=EUR/USD|609=FXFWD|654=1|587=W1|588=20210531|600=EUR/USD|609=FXFWD|654=1|587=W2|588=20210607|10=097|

{code}
*{color:#0747A6}#4{color}*
Pending
{code:java}
> 
8=FIXT.1.1|9=329|35=8|34=211|49=QUODFX_UAT|52=20210520-13:19:26.509|56=QUOD5|1128=9|6=0|11=509227620|14=0|15=EUR|17=MO1210520131926583001|21=1|22=8|31=0|32=0|37=MO1210520131926583001|38=1000000|39=A|40=D|48=EUR/USD|54=1|55=EUR/USD|59=4|60=20210520-13:19:28.000|120=USD|150=A|151=1000000|207=XQFX|453=1|448=gtwquod5|447=D|452=36|460=4|528=A|854=0|10=236|

{code}
Rejected
{code:java}
> 
8=FIXT.1.1|9=442|35=8|34=212|49=QUODFX_UAT|52=20210520-13:19:26.651|56=QUOD5|1128=9|6=0|11=509227620|14=0|15=EUR|17=1503500001174|21=1|22=8|31=0|32=0|37=MO1210520131926583001|38=1000000|39=8|40=D|48=EUR/USD|54=1|55=EUR/USD|58=order 
side (B) doesn't match 
quote|59=4|60=20210520-13:19:26.507|63=0|64=20210524|120=USD|150=8|151=0|207=XQFX|378=4|453=4|448=CLIENT1|447=D|452=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|854=0|10=218|

{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FX_fix, FXregression, refactored_FX, swapMM;;;PFX-3403;;QAP-4085;;Sends 35=R swap with sell side;#1;35=S was sent in reply with sell side (tag 54 = 2);;
;;;;;;;;;;;;;;;"sends 35=AB with buy side
and check Exec report";#2;"order gets rejected
""order side (B) doesn't match quote""";;
QAP-T2547;Client Pricing Engine: Publish Direct Pass-Through Core Spot Price: Instrument level;Automated;;"Set Core Spot Price Strategy to Direct for Instrument 
!screenshot-3.png|thumbnail!

{color:#0747A6}*#1*{color} Spot

{code:java}
< 
8=FIXT.1.1|9=602|35=W|49=TEST|56=MARKETDATA|34=63|52=20210515-18:42:47|262=26|55=GBP/USD|64=SP|268=6|269=0|290=1|270=1.19655|271=1000000|273=20210515-18:42:47|15=GBP|282=HSBC|64=20210518|269=1|290=1|270=1.19979|271=1000000|273=20210515-18:42:47|15=GBP|282=HSBC|64=20210518|269=0|290=2|270=1.18900|271=6000000|273=20210515-18:42:47|15=GBP|282=HSBC|64=20210518|269=1|290=2|270=1.19989|271=6000000|273=20210515-18:42:47|15=GBP|282=HSBC|64=20210518|269=0|290=3|270=1.18400|271=12000000|273=20210515-18:42:47|15=GBP|282=HSBC|64=20210518|269=1|290=3|270=1.19998|271=12000000|273=20210515-18:42:47|15=GBP|282=HSBC|64=20210518|10=155|

{code}
Add only two bands for current instrument
!screenshot-1.png|thumbnail!
Margins = 0 for Spot tenor
!screenshot-2.png|thumbnail!";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, needs_refactoring_FX;;;PFX-1326;;QAP-4016;;"Go to WebAdmin => Client tier and change ""Core Spot Price Strategy"" = 
Direct for selected instrument";For TH2 use Rest Api;;;
;;;;;;;;;;;;;;;From BUY side send MD;"#1
see attachments";"1. Price on the tile is exactly as it is presented from the market venues
2. Pub column is the same as from Market
3. Band column = as we configured for tile";;
;;;;;;;;;;;;;;;Go to Admin and change margins for second band to 0.2;"Prepare Sample data for TH2
Palladium2
Instrument_1";"1.check that 0.2 (base margins) were applied for
second row on the tile (where qty = 6M = from market)
2. for the third row margins =0";;
;;;;;;;;;;;;;;;Go to Admin and change spread =150 for spot;"Prepare Sample data for TH2
Palladium2
Instrument_2";"Check that effective margins were applied for the price to not exceed max 
spread";;
;;;;;;;;;;;;;;;"Go to Admin and add Tiered qty
1. 2000000
2. 4000000";"Prepare Sample data for TH2
Palladium2
Instrument_2";Tiered Tab is calculated according to MD comes from market;;
;;;;;;;;;;;;;;;Go to Admin and add two additional bands;"Prepare Sample data for TH2
Palladium2
Instrument_3";"If we receive fewer volume bands than we have quantities configured, then 
we should still show those configured rows, but without any published 
quantity";;
;;;;;;;;;;;;;;;Go to Admin and delete all except 1000000;Instrument_4;"if we receive more volume bands than we have quantities configured, then we 
should show those additional published rows, but without any base margin or 
configured quantity values... just Px, Qty, and also effective margin 
(which would be 0 unless other factors change it, like a min/max spread or 
auto-margin strategies).";;
QAP-T2548;MPAS checks the RoundLot when sending internal hedge order;Automated;;;/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX;;;PFX-3521;;QAP-3939;;"Open WebAdmin=> Listing => GBP/USD-SPO and select QUODFX venue. Click on it 
to modify";"Sample data for TH2 USD/ZAR.
AURUM";modification window is opened;;
;;;;;;;;;;;;;;;Go to Validation section and set Rount Lot = 1000 and save;"Sample data for TH2 USD/ZAR.
AURUM";no errors appears;;
;;;;;;;;;;;;;;;Go to AutoHedger and create 2 rules: internal AH and external AH for GBP;"Sample data for TH2 USD/ZAR.
AURUM";"External: Threshold =1000000
Internal: Threshold =5000000";;
;;;;;;;;;;;;;;;"From FE Trading (RFQ MM) send a SPOT order with
QTY = 1256324";;"External AH was triggered and send an order with
qty = 1257000";;
;;;;;;;;;;;;;;;Check logs;Not necessary for TH2;see comments;;
;;;;;;;;;;;;;;;"From RFQ MM tile send an order
QTY = 1256324
Tenor = W1";;"order executed and triggered internal AH, where Round Lot was check too, 
because Internal Account counts all as Spot";;
QAP-T2549;Manual Intervention: Non-configured Standard Tenors (rfq, ccy1, buy, over max qty);Specified;;"1)add few working RFQ venues to Forward Venues tab
!screenshot-1.png|thumbnail!
2)Table quodsetting.AutoRFQClientPricingFallback = *Manual Intervention* 
(restart QS)

*{color:#0747A6}#1{color}*
{code:java}
< 
8=FIXT.1.1|9=160|35=R|49=QUOD5|56=QUODFX_UAT|34=695|52=20210430-12:46:16|131=211333051|146=1|55=EUR/USD|167=FXFWD|537=1|54=1|38=55000000|64=20210525|63=W3|15=EUR|1=CLIENT1|40=D|10=168|
{code}
*{color:#0747A6}#2{color}*
{code:java}
> 
8=FIXT.1.1|9=248|35=S|34=718|49=QUODFX_UAT|52=20210430-12:47:03.136|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20210430-12:52:03.097|117=01210430124703261002|131=211333051|133=1.185841|134=55000000|135=55000000|167=FXFWD|188=0|189=0.000041|190=1.18551|191=0.000331|460=4|10=181|
{code}
*{color:#0747A6}#3{color}*

{code:java}
< 
8=FIXT.1.1|9=197|35=D|49=QUOD5|56=QUODFX_UAT|34=699|52=20210430-12:47:33|1=CLIENT1|11=650118377|21=1|15=EUR|38=55000000|40=D|54=1|55=EUR/USD|59=3|60=20210430-12:47:33|64=20210525|167=FXFWD|117=01210430124703261002|10=179|
{code}

{color:#0747A6}*#4*{color}

{code:java}
> 
8=FIXT.1.1|9=516|35=8|34=721|49=QUODFX_UAT|52=20210430-12:47:33.274|56=QUOD5|1128=9|1=CLIENT1_1|6=1.185841|11=650118377|14=55000000|15=EUR|17=EX1210430124733978001|21=1|22=8|31=1.185841|32=55000000|37=MO1210430124733911001|38=55000000|39=2|40=D|48=EUR/USD|54=1|55=EUR/USD|59=3|60=20210430-12:47:33.225|63=B|64=20210525|75=20210430|100=XQFX|120=USD|150=F|151=0|167=FXFWD|194=1.18551|195=0.000331|207=XQFX|381=65221255|453=4|448=CLIENT1|447=D|452=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|854=0|10=153|
{code}
!screenshot-2.png|thumbnail!";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, SWED;;;PFX-733;;QAP-3938;;"From miniFix send request 35=R with tenor which is not configured for 
current tier=>instrument (tenor=3W for example)
CCY1
Buy Side
qty=55000000";#1;"Only one request is appeared in Quote Request Book on Trading FE
AutomaticQuoting =NO
QuoteRequestBook.FreeNotes is empty";;
;;;;;;;;;;;;;;;Open DI => estimate and send quote;#2;"quote is appear in QuoteBook and MiniFix
QS does extrapolation using Explicitly to take FwdPoints";;
;;;;;;;;;;;;;;;Using quoteID 117 send an order;#3;"Order is sent and Filled.
Quote in QuoteBook has QuoteStatus = Filled
tenor 3W";;
;;;;;;;;;;;;;;;Check ExReport on MiniFix;#4;"ORS sends ExecReport with ExecType = F
with OfferPx (133 tag)";;
QAP-T2550;Manual Intervention:Request Swap Points for Forward/Forward Swaps (ccy1, over max qty);Specified;;"in DB
*{color:#0747A6}1){color}* ""quodsettings.AutoRFQClientPricingFallback"" = 
*Manual Intervention*

*{color:#0747A6}2){color}*
prepare client with rfq's venues in *FORWARD VENUE* section:
!screenshot-1.png|thumbnail!

{color:#0747A6}*#1*{color}
{code:java}
< 
8=FIXT.1.1|9=255|35=R|49=QUOD5|56=QUODFX_UAT|34=494|52=20210430-11:09:29|131=111333465|146=1|55=EUR/USD|167=FXSWAP|38=50000000|64=20210504|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|587=W1|588=20210511|685=50000000|600=EUR/USD|609=FXFWD|587=W2|588=20210518|685=50000000|10=012|
{code}
*{color:#0747A6}#2{color}*

{code:java}
> 
8=FIXT.1.1|9=478|35=S|34=515|49=QUODFX_UAT|52=20210430-11:10:49.768|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20210430-11:15:49.747|117=01210430111049261002|131=111333465|167=FXSWAP|188=1.18189|190=1.18189|460=4|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|685=50000000|587=W1|588=20210511|681=1.181744|684=1.181744|1067=-0.000146|1068=-0.000146|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|685=50000000|587=W2|588=20210518|681=1.181929|684=1.182449|1067=0.000039|1068=0.000559|1065=0.000185|1066=0.000705|10=167|
{code}

{color:#0747A6}*#3*{color}

{code:java}
< 
8=FIXT.1.1|9=290|35=AB|49=QUOD5|56=QUODFX_UAT|34=498|52=20210430-11:11:12|1=CLIENT1|11=650118374|15=EUR|38=50000000|40=D|54=1|55=EUR/USD|59=4|60=20210430-11:11:12|117=01210430111049261002|167=FXSWAP|460=4|555=2|600=EUR/USD|609=FXFWD|654=1|587=W1|588=20210511|600=EUR/USD|609=FXFWD|654=1|587=W2|588=20210518|10=117|
{code}

{color:#0747A6}*#4*{color}

{code:java}
> 
8=FIXT.1.1|9=743|35=8|34=517|49=QUODFX_UAT|52=20210430-11:11:10.935|56=QUOD5|1128=9|1=CLIENT1_1|6=0.000705|11=650118374|14=50000000|15=EUR|17=EX1210430111110978001|21=1|31=0.000705|32=50000000|37=MO1210430111110911001|38=50000000|39=2|40=D|54=1|55=EUR/USD|59=4|60=20210430-11:11:10.881|63=0|75=20210430|100=XQFX|120=USD|150=F|151=0|167=FXSWAP|194=1.18189|381=35250|453=4|448=CLIENT1|447=D|452=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|555=2|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=2|685=50000000|587=W1|588=20210511|637=1.181744|1073=-0.000146|1418=50000000|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=1|685=50000000|587=W2|588=20210518|637=1.182449|1073=0.000559|1418=50000000|854=0|1071=0.000705|10=220|
{code}

!screenshot-3.png|thumbnail!";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, swapMM, SWED;;;PFX-749;;QAP-3937;;"Send swap rfq to client where we Configure rfq venue
without side
15=EUR
qty =50M (over max sweep limit)";#1;request is sent. No quotes are sent in reply;;
;;;;;;;;;;;;;;;Check Quote Request Book on FE;qty over max limit and request goes to DI;1)Request is appeared in QuoteRequestBook and in Manual DI;;
;;;;;;;;;;;;;;;Estimate and send quote from DI;"#2
QS does explicitly rfq";"1)quote 35=S was sent to miniFix
2) there is no message that RFQ is failed
3) QS does extrapolation using Explicitly to take FwdPoints";;
;;;;;;;;;;;;;;;from MiniFix send an order 35=AB;#3;order is sent and filled;;
;;;;;;;;;;;;;;;Check MiniFix and Trading FE;;"1)MiniFix receives Execution report:
39=2 FILLED
150=F TRADE
2)Order is filled in Order Book";;
QAP-T2551;FE Trading - Custom currencies slippage for OneClick orders;Open;;"*Precondition:*  Open FE=> Aggregates Rates=> ESP Tile, Order Book, enable 
1click Orders Mode";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-3361;;QAP-3929;;Go to Options=>Order Ticket=> Custom Currency Slippage and set value;"EUR/USD
DMA Slippage = 500
Algo slippage =1000";Settings saved;;
;;;;;;;;;;;;;;;"In ESP tile select currency pair which you configure and click on price on 
TOB";;Algo order sent and custom slippage applied;;
;;;;;;;;;;;;;;;"In ESP tile select currency pair which you configure and click on price on 
on venue";;DMA order sent and custom slippage applied;;
QAP-T2552;RFQ: TerminateQuoteRequest for BDA;Specified;;"test for *PFX-3282*
add 3 venues to Forward Venue:
!screenshot-1.png|thumbnail!
Add SupportTermQuoteRequest: venue.supporttermquoterequest for CITIR and 
JPMR";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;BDA, FXregression;;;PFX-748;;QAP-3908;;send BDA request from fix client;;quote is sent to reply;;
;;;;;;;;;;;;;;;Check FE QuoteRequestBook;CITIR and JPMR must terminate request immediately;"4 request was created.
1: QUODFX => Status: New
2: CITIR =>Status: Terminated
3: JPMR=>Status: Terminated
4: MSR=>Status: New";;
;;;;;;;;;;;;;;;wait until quote was canceled;;"1: QUODFX => Status: Expired
2: CITIR =>Status: Terminated
3: JPMR=>Status: Terminated
4: MSR=>Status: Terminated";;
QAP-T2553;Check adding confirmation for Ack and Rej Held button on the FE to avoid wrong click;Open;;"Precondition: Open FE=>Client Pricing Tile and Order Book

To send the order to status held, there needs to be a dummy account group 
(an entry in VAccountGroup with Dummy=Y)";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-2518;;QAP-3904;;From Client Pricing tile send order with client which indicated id DB Dummy;;Order appear in Order book in Status Held;;
;;;;;;;;;;;;;;;RMC on order and click Ack Held;;Should appear confirmation pop-up;;
;;;;;;;;;;;;;;;RMC on order and click REj Held;;Should appear confirmation pop-up;;
QAP-T2554;AH doesn't take LeavesBuyQty/LeavesSellQty into account;Automated;;can be change only for FIX;/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX;;;PFX-3388;;QAP-3902;;from taker ESP tile Send AO order with QTY 5M to keep Open status;send Buy order with lower price;order was sent and placed in Order Book with Open status;;
;;;;;;;;;;;;;;;Check Position Blotter;;Working Position for internal client (QUOD_1) = 5M;;
;;;;;;;;;;;;;;;From Client interface send orders to trigged AH (buy);"Threshold =2M
residual =0";"AH send an order:
Buy side
Qty =2000000
check logs (see comments)
Position for external client goes to 0
Working Position = 5M";;
QAP-T2555;ESP: Support for Broken Date DMA Orders (fix);Specified;;"{color:#DE350B}*QUOD.FIXSELLQUOD1*{color} component on 308@mercury Sender: 
QUOD1 Target: QUODFX_UAT 10.0.22.77:14052
35=D
{color:#0747A6}*#1*{color}
{code:java}
< 
8=FIXT.1.1|9=208|35=D|49=QUOD1|56=QUODFX_UAT|34=163|52=20210427-11:03:42|1=ASPECT_CITI|11=511178121|21=1|15=EUR|38=1000000|40=1|54=1|55=EUR/USD|59=4|60=20210427-11:03:42|63=B|64=20210505|167=FXFWD|22=6|100=CITI-SW|77=O|114=N|10=131|
{code}
{color:#0747A6}*#2*{color}

{code:java}
> 
8=FIXT.1.1|9=329|35=8|34=169|49=QUODFX_UAT|52=20210427-11:03:41.782|56=QUOD1|1128=9|1=ASPECT_CITI|6=0|11=511178121|14=0|15=EUR|17=MO1210427110341800001|21=1|31=0|32=0|37=MO1210427110341800001|38=1000000|39=A|40=1|54=1|55=EUR/USD|59=4|60=20210427-11:03:42.000|77=O|120=USD|150=A|151=1000000|207=CITI-SW|453=1|448=gtwquod1|447=D|452=36|460=4|854=0|10=115|
{code}

{color:#0747A6}*#3*{color}

{code:java}
> 
8=FIXT.1.1|9=441|35=8|34=170|49=QUODFX_UAT|52=20210427-11:03:41.939|56=QUOD1|1128=9|1=ASPECT_CITI|6=0|11=511178121|14=0|15=EUR|17=1527900001262|21=1|30=CITI-SW|31=0|32=0|37=MO1210427110341800001|38=1000000|39=0|40=1|54=1|55=EUR/USD|58=implicit 
acknowledgement on first 
execution|59=4|60=20210427-11:03:41.933|63=B|64=20210505|120=USD|150=0|151=1000000|198=O20210427L1NY2000005129|207=CITI-SW|453=2|448=CITI|447=D|452=17|448=gtwquod1|447=D|452=36|460=4|854=0|10=056|
{code}

{color:#0747A6}*#4*{color}

{code:java}
> 
8=FIXT.1.1|9=532|35=8|34=171|49=QUODFX_UAT|52=20210427-11:03:41.959|56=QUOD1|1128=9|1=ASPECT_CITI1|6=1.181998|11=511178121|14=1000000|15=EUR|17=EX1210427110341852001|21=1|30=CITI|31=1.181998|32=1000000|37=MO1210427110341800001|38=1000000|39=2|40=1|54=1|55=EUR/USD|59=4|60=20210427-11:03:41.825|63=B|64=20210505|75=20210427|77=O|100=CITI-SW|120=USD|150=F|151=0|167=FXFWD|194=1.18201|195=-0.000012|198=O20210427L1NY2000005129|207=CITI-SW|381=1181998|453=2|448=CITI|447=D|452=17|448=gtwquod1|447=D|452=36|460=4|527=E20210427L1NY2000004969|854=0|5053=0|10=101|

{code}


60=20201124 64=20201202 (the day before 1W)
DB: *venue.supportbrokendatefeed = Y*";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FX_fix, FXregression;;;PFX-2709;;QAP-3901;;From MiniFix send DMA order 35=D on Broken Date;#1;order is sent;;
;;;;;;;;;;;;;;;Check Ex report 35=8;#2;150 = Exec Type = A = Pending_New;;
;;;;;;;;;;;;;;;Check Ex report 35=8;#3;150 = Exec Type = 0 =New;;
;;;;;;;;;;;;;;;Check Ex report 35=8;#4;"150 = Exec Type = F =Trade
39 = OrdStatus = 2 = Filled";;
QAP-T2556;New Order single Not to Enrich Counterparts From Preferred Security Exchange on Listing;Specified;;"We should not be adding counterparts from the preferred security exchange 
on a listing to any messages (orders/trades), which would go for algo, DMA, 
etc

 *Precondition:*
# *Open FE=> Aggregaes Rates=> ESP tile+Direct Venue Execution*
# *Delete all counterpart from venue and listings and clients*";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-3176, PFX-4103;;QAP-3885;;From Direct Venue Execution send NewOrderSingle;"EUR/USD
CITI";Order sent and filled;;
;;;;;;;;;;;;;;;Check logs of QSFFSESPO;quod308;Should contain Security exchange and not Preferred;;
QAP-T2557;Check that the Position window should be able to reconnect upon a PKS stop or crash;Specified;;" 
{code:java}
Received PositionKeepingStatus message :
{{PosKeepingStatus = U FreeNotes = PKS is Up } 
MessageType=Order_PositionKeepingStatus}
{code}
{code:java}
Received PositionKeepingStatus message :
{{PosKeepingStatus = D FreeNotes = PKS is Down } 
MessageType=Order_PositionKeepingStatus}
{code}
{code:java}
Received PositionKeepingStatus message :
{{PosKeepingStatus = S FreeNotes = PKS is StartingUp } 
MessageType=Order_PositionKeepingStatus}
{code}
 ";/PFX/FX_MM_Position;Low - Nice to Have;FX_MM_Positions;FXregression;;;PFX-1609;;QAP-3879;;Restart PKS;;PKS restarted without errors;;
;;;;;;;;;;;;;;;Check logs of FE;see description;FE logs should contain msg from descr;;
;;;;;;;;;;;;;;;Send new order from Client Pricing Tile;"GBP/USD
Gold_Night";Order sent and filled, positions updated;;
QAP-T2558;interpolation: Explicitly Request Swap Points for Forward/Forward Swaps (ccy2/buy/even/rfq);Specified;;"First, I think one important detail is that the mechanism described in the 
present Story (PFX-749) and the one for Broken Dates (PFX-748) replaces 
what's described in PFX-747. So, the QS would sometimes have to send RFQs 
of its own in order to get forward points instead of getting them from 
market data. In other words, forwards points in market data aren't actually 
required to test this Story.
Note that if its RFQs fail for one reason or another, the QS falls back on 
market data (which explains why it did that in your case, shown in your 
SECOND question).
*{color:#ffab00}WORKFLOW: quod308@mercury{color}*
the quote request goes to a venue (so ORS -> ES (ESFSSR) -> buy-side 
gateway (FIXFSSRFQP) -> venue) as in the Taker workflow
the venue sends back the quote containing the forward points
the way back is venue -> buy-side gateway (FIXFSSRFQP) -> ES (ESFSSR) -> 
ORS -> QS
to test this, you don't need market data for forward tenors

*AutoRFQClientPricingFallback=Interpolation*

1) Add working *RFQ* venue to forward tab
!screenshot-2.png|thumbnail!
{color:#0747a6}*#1*{color}
{code:java}
8=FIXT.1.1|9=262|35=R|34=238|49=QUOD9|52=20210811-13:10:09.382|56=QUODFX_UAT|131=086161252|146=1|55=GBP/USD|167=FXSWAP|54=1|38=1000000|15=USD|1=Iridium1|555=2|600=GBP/USD|609=FXFWD|624=2|685=1000000|587=W1|588=20210820|600=GBP/USD|609=FXFWD|624=1|685=1000000|587=W2|588=20210827|10=210|
{code}
{color:#0747a6}*#2*{color}
{code:java}
8=FIXT.1.1|9=523|35=S|34=241|49=QUODFX_UAT|52=20210811-13:10:09.409|56=QUOD9|1128=9|15=USD|54=1|55=GBP/USD|62=20210811-13:12:09.393|117=01210811131009713002|131=086161252|132=0.00001|134=1000000|167=FXSWAP|188=1.18146|190=1.18146|460=4|537=1|555=2|600=GBP/USD|602=GBP/USD|603=8|616=XQFX|624=2|685=1000000|587=W1|588=20210820|681=1.1815|684=1.18148|1067=0.00004|1068=0.00002|600=GBP/USD|602=GBP/USD|603=8|616=XQFX|624=1|685=1000000|587=W2|588=20210827|681=1.18149|684=1.18148|1067=0.00003|1068=0.00002|1065=0.00001|1166=01210811131009713002|10=230|
{code}
{color:#0747a6}*#3*{color}
{code:java}
8=FIXT.1.1|9=290|35=AB|34=239|49=QUOD9|52=20210811-13:10:09.687|56=QUODFX_UAT|1=Iridium1|11=086161251|38=1000000|40=D|44=1.19111|54=1|55=GBP/USD|59=4|60=20210811-13:10:08.000|117=01210811131009713002|167=FXSWAP|460=4|555=2|600=GBP/USD|609=FXFWD|587=W1|588=20210820|600=GBP/USD|609=FXFWD|587=W2|588=20210827|10=023|
{code}
{color:#0747a6}*#4*{color}
{code:java}
8=FIXT.1.1|9=710|35=8|34=243|49=QUODFX_UAT|52=20210811-13:10:09.730|56=QUOD9|1128=9|1=Iridium1_1|6=0.00001|11=086161251|14=1000000|15=USD|17=EX1210811131009323001|21=1|22=8|31=0.00001|32=1000000|37=MO1210811131009290001|38=1000000|39=2|40=D|44=1.19111|48=GBP/USD|54=1|55=GBP/USD|59=4|60=20210811-13:10:09.708|63=0|75=20210811|100=XQFX|120=GBP|150=F|151=0|167=FXSWAP|194=1.18146|207=XQFX|381=10|453=1|448=gtwquod9|447=D|452=36|460=4|528=A|555=2|600=GBP/USD|602=GBP/USD|603=8|609=FXFWD|616=XQFX|624=2|685=1000000|587=W1|588=20210820|637=1.18148|1073=0.00002|1418=1000000|600=GBP/USD|602=GBP/USD|603=8|609=FXFWD|616=XQFX|624=1|685=1000000|587=W2|588=20210827|637=1.18149|1073=0.00003|1418=1000000|854=0|1071=0.00001|5055=20210813|10=191|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FX_fix, FXregression, swapMM, SWED;;;PFX-749;;QAP-3851;;"From MiniFix send swap request
EUR/USD
Buy
15 = USD
nearLegQty=1000000
farLegQty=1000000
NearSettlType=WK1
NearSettlType=WK2";#1;request is send;;
;;;;;;;;;;;;;;;"Check miniFix and
FE";"#2
RFQ is success - no interpolation
check log in future with TH2";"1)MiniFix receives quote
Check each leg has tag 624 with different side
FarLegSide=buy side, because
tag 15 = USD
FE: Quote Request Book:
2 request were created:
1. QUODFX
2. CITIR";;
;;;;;;;;;;;;;;;"From miniFix send an order multiLeg 35=AB buy
15=ccy2 (USD)
without price (tag 44)";#3;Order is send;;
;;;;;;;;;;;;;;;Check miniFix;#4;"1)MiniFix receives Execution report:
39=2 FILLED
150=F TRADE
Order must be executed with price = 1065 (BidSwapPoints ), despite the side 
for order is buy we use 1065 as we have 15=USD (CCY2)";;
QAP-T2559;interpolation: Explicitly Request Swap Points for Forward/Forward Swaps (ccy2/sell/uneven/rfq_failed);Automated;;"First, I think one important detail is that the mechanism described in the 
present Story (PFX-749) and the one for Broken Dates (PFX-748) replaces 
what's described in PFX-747. So, the QS would sometimes have to send RFQs 
of its own in order to get forward points instead of getting them from 
market data. In other words, forwards points in market data aren't actually 
required to test this Story.
Note that if its RFQs fail for one reason or another, the QS falls back on 
market data (which explains why it did that in your case, shown in your 
SECOND question).
*{color:#FFAB00}WORKFLOW: quod308@mercury{color}*
the quote request goes to a venue (so ORS -> ES (ESFSSR) -> buy-side 
gateway (FIXFSSRFQP) -> venue) as in the Taker workflow
the venue sends back the quote containing the forward points
the way back is venue -> buy-side gateway (FIXFSSRFQP) -> ES (ESFSSR) -> 
ORS -> QS
to test this, you don't need market data for forward tenors

*AutoRFQClientPricingFallback=Interpolation*

1) Add working *RFQ* venue to forward tab
!screenshot-2.png|thumbnail!
{color:#0747A6}*#1*{color}

{code:java}
< 
8=FIXT.1.1|9=270|35=R|49=QUOD5|56=QUODFX_UAT|34=1108|52=20210429-16:56:23|131=111333450|146=1|55=EUR/USD|167=FXSWAP|54=2|38=2000000|64=20210503|15=USD|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|624=2|587=W1|588=20210510|685=1000000|600=EUR/USD|609=FXFWD|624=1|587=W2|588=20210517|685=2000000|10=136|
{code}

{color:#0747A6}*#2*{color}
{code:java}
> 
8=FIXT.1.1|9=521|35=S|34=1173|49=QUODFX_UAT|52=20210429-16:56:24.499|56=QUOD5|1128=9|15=USD|54=2|55=EUR/USD|62=20210429-16:58:23.371|64=20210503|117=01210429165623108002|131=111333450|133=0.00074|135=1000000|167=FXSWAP|188=1.18186|190=1.18196|460=4|537=1|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=2|685=1000000|587=W1|588=20210510|681=1.181777|684=1.181677|1067=-0.000183|1068=-0.000183|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=1|685=2000000|587=W2|588=20210517|681=1.181947|684=1.182517|1067=0.000087|1068=0.000557|1066=0.00074|10=074|
{code}

{color:#0747A6}*#3*{color}

{code:java}
< 
8=FIXT.1.1|9=290|35=AB|49=QUOD5|56=QUODFX_UAT|34=1110|52=20210429-16:56:42|1=CLIENT1|11=650118363|15=USD|38=2000000|40=D|54=2|55=EUR/USD|59=4|60=20210429-16:56:42|117=01210429165623108002|167=FXSWAP|460=4|555=2|600=EUR/USD|609=FXFWD|654=1|587=W1|588=20210510|600=EUR/USD|609=FXFWD|654=1|587=W2|588=20210517|10=158|
{code}

{color:#0747A6}*#4*{color}

{code:java}
> 
8=FIXT.1.1|9=745|35=8|34=1175|49=QUODFX_UAT|52=20210429-16:56:42.033|56=QUOD5|1128=9|1=CLIENT1_1|6=0.00074|11=650118363|14=2000000|15=USD|17=EX1210429165642960001|21=1|31=0.00074|32=2000000|37=MO1210429165641896001|38=2000000|39=2|40=D|54=2|55=EUR/USD|59=4|60=20210429-16:56:42.002|63=0|64=20210503|75=20210429|100=XQFX|120=EUR|150=F|151=0|167=FXSWAP|194=1.18196|381=1480|453=4|448=CLIENT1|447=D|452=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|555=2|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=1|685=1000000|587=W1|588=20210510|637=1.181777|1073=-0.000183|1418=1000000|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=2|685=2000000|587=W2|588=20210517|637=1.182517|1073=0.000557|1418=2000000|854=0|1071=0.00074|10=112|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FX_fix, FXregression, refactored_FX, swapMM, SWED;;;PFX-749;;QAP-3850;;"From MiniFix send swap request
EUR/USD with tag 15=USD SELL
NearLegQty=1000000
FarLegQty=2000000";#1;request is send;;
;;;;;;;;;;;;;;;Check miniFix;"#2
RFQ must failed and QS does interpolation on CITI venue
check log in future with TH2";"1)MiniFix receives quote
Check each leg has tag 624 with different side
FarLegSide=buy side, because
tag 15 = USD";;
;;;;;;;;;;;;;;;"From miniFix send an order multiLeg 35=AB SELL without tag 44
tag 15 = CCY2";#3;Order is send;;
;;;;;;;;;;;;;;;Check miniFix;#4;"1)MiniFix receives Execution report:
39=2 FILLED
150=F TRADE
Order must be executed with price = 1066 (OfferSwapPoints ), despite the 
side for order is sell we use 1066 as we have 15=USD (CCY2)";;
QAP-T2560;Explicitly Request Broken Date Swap Points (Interpolation for Dealer Intervention) with margins EQUAL 0;Automated;;"1) AutoRFQClientPricingFallback = *Interpolation* (Restart QS)
2) Add {color:#57D9A3}*CITI*{color} and {color:#57D9A3}*CITIR*{color} to 
Forward Venue (ESP and RFQ venues )
3) Auto RFQ Timeout (ms) =5000 for RFQ venue
4) Clear all margins for all bands and tenors
!screenshot-1.png|thumbnail!";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;BDA, FXregression;;;PFX-748;;QAP-3849;;from MiniFix send request BDA with big qty (50000000);;request is appeared in MDI;;
;;;;;;;;;;;;;;;From Trading FE => send quote pressed by button Send;;"quote is appeared in Quote RequestBook two requests: one for CITIR and in 
MiniFix";;
;;;;;;;;;;;;;;;take quoteID (tag117) and send an order with tif IOC;;order is partiallyFilled or filled;;
QAP-T2561;Subscribe to sweepable/tired bands;Automated;;"*Precondition: Configure currency pair to have sweepable and tired bands*

 

*Sweepable*

 
{code:java}
< 
8=FIXT.1.1|9=170|35=V|49=QUOD3|56=QUODFX_UAT|34=6|52=20210421-14:57:14|50=CLIENT2|262=1915066124|263=1|264=0|265=1|267=2|269=0|269=1|146=1|55=GBP/USD|460=4|64=20210423|167=FXSPOT|10050=0|10=006|{code}
 

 
{code:java}
8=FIXT.1.1|9=1209|35=W|34=9|49=QUODFX_UAT|52=20210421-14:57:14.695|56=QUOD3|1128=9|55=GBP/USD|262=1915066124|268=6|269=0|278=4_GBP/USD_20210421T145714690583587_Bid3|270=1.3043|
271=10000000|272=20210421|273=14:57:14|299=4_GBP/USD_20210421T145714690583587_Bid3|290=1|1024=1|63=0|64=20210423|1070=1|269=1|278=4_GBP/USD_20210421T145714690583587_Ask2|270=1.30451|271=5000000|272=20210421|273=14:57:14|299=4_GBP/USD_20210421T145714690583587_Ask2|290=1|1024=1|63=0|64=20210423|1070=1|269=0|278=4_GBP/USD_20210421T145714690583587_Bid2|270=1.3043|271=5000000|272=20210421|273=14:57:14|299=4_GBP/USD_20210421T145714690583587_Bid2|290=2|1024=1|63=0|64=20210423|1070=1|269=1|278=4_GBP/USD_20210421T145714690583587_Ask3|270=1.30451|271=10000000|272=20210421|273=14:57:14|299=4_GBP/USD_20210421T145714690583587_Ask3|290=2|1024=1|63=0|64=20210423|1070=1|269=0|278=4_GBP/USD_20210421T145714690583587_Bid1|270=1.30425|271=1000000|272=20210421|273=14:57:14|299=4_GBP/USD_20210421T145714690583587_Bid1|290=3|1024=1|63=0|64=20210423|1070=1|269=1|278=4_GBP/USD_20210421T145714690583587_Ask1|270=1.30471|271=1000000|272=20210421|273=14:57:14|299=4_GBP/USD_20210421T145714690583587_Ask1|290=3|1024=1|63=0|64=20210423|1070=1|779=20210421-14:57:14.690|10=034| {code}
 

*Tired*
{code:java}
< 
8=FIXT.1.1|9=170|35=V|49=QUOD3|56=QUODFX_UAT|34=2|52=20210603-15:00:29|50=CLIENT2|262=1915066158|263=1|264=0|265=1|267=2|269=0|269=1|146=1|55=EUR/USD|460=4|64=20210607|167=FXSPOT|10050=1|10=030|{code}
 
{code:java}
 > 
8=FIXT.1.1|9=1331|35=W|34=7|49=QUODFX_UAT|52=20210603-15:00:37.423|56=QUOD3|1128=9|55=EUR/USD|262=1915066158|268=6|269=0|278=4_EUR/USD_20210603T150037417374755_Bid2_T1|270=1.19581|
271=2000000|272=20210603|273=15:00:36|299=4_EUR/USD_20210603T150037417374755_Bid2_T1|290=1|1024=1|63=0|64=20210607|1070=1|269=1|278=4_EUR/USD_20210603T150037417374755_Ask2_T1|270=1.19841|
271=2000000|272=20210603|273=15:00:36|299=4_EUR/USD_20210603T150037417374755_Ask2_T1|290=1|1024=1|63=0|64=20210607|1070=1|269=0|278=4_EUR/USD_20210603T150037417374755_Bid2_T2|270=1.19282|
271=6000000|272=20210603|273=15:00:36|299=4_EUR/USD_20210603T150037417374755_Bid2_T2|290=2|1024=1|63=0|64=20210607|1070=1|269=1|278=4_EUR/USD_20210603T150037417374755_Ask2_T2|270=1.19383|
271=6000000|272=20210603|273=15:00:36|299=4_EUR/USD_20210603T150037417374755_Ask2_T2|290=2|1024=1|63=0|64=20210607|1070=1|269=0|278=4_EUR/USD_20210603T150037417374755_Bid3_T3|270=1.18619|
271=15000000|272=20210603|273=15:00:36|299=4_EUR/USD_20210603T150037417374755_Bid3_T3|290=3|1024=1|63=0|64=20210607|1070=1|269=1|278=4_EUR/USD_20210603T150037417374755_Ask3_T3|270=1.18672|
271=15000000|272=20210603|273=15:00:36|299=4_EUR/USD_20210603T150037417374755_Ask3_T3|290=3|1024=1|63=0|64=20210607|1070=1|779=20210603-15:00:37.417|11501=20210603-15:00:37.412|11503=20210603-15:00:37.412|11504=20210603-15:00:37.411|10=241|{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FX_fix, FXregression, needs_refactoring_FX;;;PFX-2850;;QAP-3848;;From miniFIX send MD subcribtion 35=V for sweepable;"tag 10050=0
Not necessary for TH2";35=W receive with sweepable bands;;
;;;;;;;;;;;;;;;From miniFIX send MD subcribtion 35=V for tired;tag 10050=1;35=W receive with tired bands;;
QAP-T2562;Reject of NewOrderSingle with wrong settledate;Automated;;"*35=V*
{code:java}
< 
8=FIXT.1.1|9=164|35=V|49=QUOD3|56=QUODFX_UAT|34=537|52=20210420-11:18:53|50=CLIENT2|262=1915066122|263=1|264=0|265=1|267=2|269=0|269=1|146=1|55=GBP/USD|460=4|64=20210422|167=FXSPOT|10=007|{code}
*35=W*
{code:java}
> 
8=FIXT.1.1|9=1213|35=W|34=863|49=QUODFX_UAT|52=20210420-11:18:52.744|56=QUOD3|1128=9|55=GBP/USD|262=1915066122|268=6|269=0|278=4_GBP/USD_20210420T111852742316839_Bid3|270=1.30431|271=10000000|272=20210420|273=11:18:53|299=4_GBP/USD_20210420T111852742316839_Bid3|290=1|1024=1|63=0|64=20210422|1070=1|269=1|278=4_GBP/USD_20210420T111852742316839_Ask2|270=1.30452|271=5000000|272=20210420|273=11:18:53|299=4_GBP/USD_20210420T111852742316839_Ask2|290=1|1024=1|63=0|64=20210422|1070=1|269=0|278=4_GBP/USD_20210420T111852742316839_Bid2|270=1.30431|271=5000000|272=20210420|273=11:18:53|299=4_GBP/USD_20210420T111852742316839_Bid2|290=2|1024=1|63=0|64=20210422|1070=1|269=1|278=4_GBP/USD_20210420T111852742316839_Ask3|270=1.30452|271=10000000|272=20210420|273=11:18:53|299=4_GBP/USD_20210420T111852742316839_Ask3|290=2|1024=1|63=0|64=20210422|1070=1|269=0|278=4_GBP/USD_20210420T111852742316839_Bid1|270=1.30426|271=1000000|272=20210420|273=11:18:53|299=4_GBP/USD_20210420T111852742316839_Bid1|290=3|1024=1|63=0|64=20210422|1070=1|269=1|278=4_GBP/USD_20210420T111852742316839_Ask1|270=1.30472|271=1000000|272=20210420|273=11:18:53|299=4_GBP/USD_20210420T111852742316839_Ask1|290=3|1024=1|63=0|64=20210422|1070=1|779=20210420-11:18:52.742|10=030|{code}
*35=D*
{code:java}
< 
8=FIXT.1.1|9=189|35=D|49=QUOD3|56=QUODFX_UAT|34=543|52=20210420-11:19:45|1=CLIENT2|11=734605414|21=1|15=GBP|38=17000000|40=2|44=1.30452|54=1|55=GBP/USD|59=4|60=20210420-11:19:45|63=0|64=20210421|167=FXSPOT|10=230|{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, needs_refactoring_FX;;;PFX-3336;;QAP-3841;;From miniFix send 35=V on spot;see description;Receive 35=W;;
;;;;;;;;;;;;;;;"Send 35=D with received price on 35=W and tenor Spot but wrong date(day 
before)";see description;Order should be rejected;;
QAP-T2563;Best Rates Panel Support for Broken Date Instruments;Specified;;"_Acceptance Criteria_
* Subscribe to Broken Date  FX market data through the FX Best Rates panel
** Select a broken date tenor for a given pair from the instrument 
drop-down
** When the selected instrument is not a broken date tenor, we should 
display the read-only ValueDate like we do now
** When the selected instrument is a broken date tenor, we should change 
the ValueDate to be a date picker, but let the user change to any date they 
want
*** The default value for the date picker can be null / blank, and no 
subscriptions need to be sent from the FE until a date is selected
*** The display of the date picker should be the same as the date pickers 
in the RFQ tile, hiding the border, only showing the drop-down arrow on 
mouse hover, etc.
* The ""ValueDate"" column should be renamed to ""Settle Date"" and should be 
of type Date in the grid column.

*Precondition: Open FE*";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-3124, PFX-3779;;QAP-3836;;Open Best Rates window;;Best Rates Opened;;
;;;;;;;;;;;;;;;Select a broken date tenor for a given pair from the instrument drop-down;EUR/USD-Broken;Instrument selected;;
;;;;;;;;;;;;;;;Select a broken date tenor for a given pair by typing keyboard;GBP/USD - Broken;Instrument selected;;
;;;;;;;;;;;;;;;In Settle Date Column select date;;Date selected, prices appear;;
;;;;;;;;;;;;;;;Look at columns Ask/Bid;;"When price is grown pointer should be green and when price go down pointer 
should be red";;
;;;;;;;;;;;;;;;Add column Statistics;;Statistics appear and change corresponds to the price;;
QAP-T2564;RFQ_MM:Request For Quote on behalf of client: Manual DI (rfq's venue);Specified;;"FE sends to => QSFE =>ORS
client_routing.xml QSFE
QuotingSessionID = 2
add only ESP venues to tab
!screenshot-1.png|thumbnail!
according with PFX-749 and PFX-748 workflow
quodsettings.AutoRFQClientPricingFallback = *Manual Intervention* (restart 
QSFE)";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-219;;QAP-3835;;Open Trading FE => RFQ MM tile and send an even swap order;"quod308:
CLIENT1
tenor1: W1
tenor2: W2
tier: Gold_Day
qty=1000000";request is appeared in Manual DI;;
;;;;;;;;;;;;;;;Estimate and send quote;;quote is appeared on RFQ tile;;
;;;;;;;;;;;;;;;Press on BUY TOB;;"order is executed
near Leg Tenor =1W
near Leg Tenor =2W
side=buy
qty=1000000
venue=QUODFX
OrdType=PreviouslyQuoted";;
QAP-T2565;RFQ_MM:Request For Quote on behalf of client: Reject  (rfq's venue);Automated;;"FE sends to => ORS =>QSFE
client_routing.xml QSFE
QuotingSessionID = 2
add only *{color:#00875A}ESP venues{color}* to tab

according with PFX-749 and PFX-748 workflow
quodsettings.AutoRFQClientPricingFallback = *Rejection* (restart QSFE)";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-219;;QAP-3834;;Open Trading FE => RFQ MM tile and send an even swap order;"quod308:
CLIENT1
tenor1: W1
tenor2: W2
tier: Gold_Day
qty=1000000";"request is rejected.
No quotes are sent in reply";;
QAP-T2566;RFQ_MM:Request For Quote on behalf of client: Swap (rfq's venue);Specified;;"FE sends to => ORS =>QSFE
client_routing.xml QSFE
QuotingSessionID = 2
add only rfq's venues to tab
!screenshot-1.png|thumbnail!
according with PFX-749 and PFX-748 workflow
quodsettings.AutoRFQClientPricingFallback = *Interpolation*";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, swapMM;;;PFX-219;;QAP-3832;;Open Trading FE => RFQ MM tile and send an even swap order;"quod308:
CLIENT1
tenor1: W1
tenor2: W2
tier: Gold_Day
qty=1M
instr=EUR/USD
CCY1 = EUR";"request is sent
quote is received in reply";;
;;;;;;;;;;;;;;;"Try to change Qty manually or with Qty multipliers (for both, far and near 
legs)";;Qty doesn't change;;
;;;;;;;;;;;;;;;Press on BUY on quote row (not TOB);;"order is executed
near Leg Tenor =1W
near Leg Tenor =2W
side=buy
qty=1000000
venue=QUODFX
OrdType=PreviouslyQuoted";;
;;;;;;;;;;;;;;;Open Trading FE => RFQ MM tile and send an even UNswap order;"quod308:
CLIENT1
tenor1: W1
tenor2: W2
tier: Gold_Day
qty1=1000000
qty1=2000000
instr=EUR/USD
CCY1 = USD";"request is sent
quote is received in reply";;
;;;;;;;;;;;;;;;Press on SELL TOB (green price);;"order is executed
near Leg Tenor =1W
near Leg Tenor =2W
side=sell
qty=2000000
venue=QUODFX
OrdType=PreviouslyQuoted";;
QAP-T2567;FE Trading: check that after closing Full Amount/VWAP filter is not reset;Specified;;"*Need to have cross currency pair*

**Precondition:

Open FE=>Aggregates Rates=> ESP tile";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-3332;;QAP-3825;;From ESP tile select currency pair;NOK/SEK;Currency pair selected, prices appears;;
;;;;;;;;;;;;;;;Add Full Amount and VWAP submenus';;Full amount and VWAP opened;;
;;;;;;;;;;;;;;;RMC on ESP tile and select Filter Synthetic Combinations;"USD
EUR";Filters selected;;
;;;;;;;;;;;;;;;Close Full amount;;Full amount closed, filters not reset;;
;;;;;;;;;;;;;;;Close VWAP;;VWAP closed, filters not reset;;
QAP-T2568;FE Trading - Close Full Amount submenu;Specified;;;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-3207;;QAP-3824;;Open FE=>Aggregated Rates=> Rates Tile;;ESP tile Opened;;
;;;;;;;;;;;;;;;RMC on ESP tile and select Full Amount submenu;;Full Amount opened;;
;;;;;;;;;;;;;;;Click on X button on Full Amount;;Full Amount closed;;
QAP-T2569;Functioning of hedging option in dealer intervention window (Not Hedge);Automated;;"This test validates PFX-1772
_Acceptance Criteria_
* From the FX RFQ DI panel, add a checkbox labeled ""Automatically Hedge 
Executions"" which is on by default (when the DI panel is initially opened 
from the Ribbon).
* The state of this checkbox must be saved as part of the user's workspace, 
including when the panel is loaded when the saved workspace is recovered, 
and also as part of saving the default layout of the DI panel with the 
bookmark in the header for the default layout of the panel when it is next 
opened from the ribbon.
* When the checkbox is true, the executed client order should be applied to 
the auto-hedger's position book that is active for that client.
* When the checkbox is false, the executed client order should be applied 
to the trader's position book associated with that client.
 
Add internal account (not position for AH) to AccountGroup of your user as 
a Holder
!screenshot-1.png|thumbnail!";/PFX/FX_MM_Autohedging;High - Must Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX;;;PFX-1772;;QAP-3819;;"From client interface / currenex gui, send a RFQ of 40M to go to delaer 
intervention window";;RFQ sent, appears in unassigned of dealer intervention window;;
;;;;;;;;;;;;;;;Accept this RFQ;;"RFQ displayed in DI window
IN tile the checkbox ""Automatically Hedge Executions"" is UNTICKED";;
;;;;;;;;;;;;;;;Execute order;;"Orders are sent.
CNX_GOLD and external client position were updated
Position Book for AH isn't been changed";;
QAP-T2570;FETrading - RFQ tile: second dot separator shouldn't apear in any column values;Open;;"The test appeared to prevent regression issues with the Aggregated Market 
Rates> RFQ Tile";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;kbrit;;PFX-3316;;QAP-3818;;Open Aggregated Market Rates> RFQ Tile and send swap RFQ;"Ex.
EUR/USD
1W/ 2W";Check that quote prices contain only one dot separator;;
QAP-T2571;FETrading -Options:  Alerts table header sholdn't open change sound window after double click;Manual;;"The test appeared to prevent regression issues with the Oprions> Alert 
window";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;kbrit;;PFX-3346;;QAP-3817;;Open FETrading> Options> Alert window;;"The window is opened.
Table with all availible alerts appeared";;
;;;;;;;;;;;;;;;Double click on Displayed column header.;;Check that only sorting is done(no windows opened);;
;;;;;;;;;;;;;;;Repeat step 2 for all column headers;;"All column header have samne correct behavior(as in exptected result of 
step2)";;
;;;;;;;;;;;;;;;"Double click on any row in table to open ""select new file window""";;The window is opened;;
QAP-T2572;RFQ: If the Spot Executable off, we receive swap quote  (only for even swap);Automated;;Table quodsetting.AutoRFQClientPricingFallback = *Interpolation*;/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, refactored_FX, swapMM;;;PFX-528;;QAP-3811;;"From Trading FE select Bronze, EUR/USD, SPOT and switch Executable to OFF 
(Pricing is ON) for tenor spot(tenor level)";;All bands are grey;;
;;;;;;;;;;;;;;;From Client interface send swap RFQ;"near leg 1W
far leg 2W
instrument EUR/USD";request is sent and quote is received in reply;;
QAP-T2573;Broken Date: Explicitly Request Swap Points for Broken/Broken UNeven Swaps CCY2;Automated;;"*AutoRFQClientPricingFallback* can be different
Add only rfq's venue
!screenshot-1.png|thumbnail!

*{color:#0747A6}#1{color}*
{code:java}
8=FIXT.1.1|9=249|35=R|49=QUOD5|56=QUODFX_UAT|34=44|52=20210430-07:19:09|131=111111155|146=1|55=EUR/USD|167=FXSWAP|38=1000000|64=20210504|15=USD|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|587=B|588=20210512|685=1000000|600=EUR/USD|609=FXFWD|587=B|588=20210519|685=2000000|10=170|
{code}

*{color:#0747A6}#2{color}*
{code:java}
8=FIXT.1.1|9=537|35=S|34=46|49=QUODFX_UAT|52=20210430-07:19:09.783|56=QUOD5|1128=9|15=USD|55=EUR/USD|62=20210430-07:21:08.580|64=20210504|117=01210430071908234002|131=111111155|132=0.000245|133=0.000725|134=1000000|135=1000000|167=FXSWAP|188=1.18216|190=1.18226|460=4|537=1|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|685=1000000|587=B|588=20210512|681=1.18209|684=1.18199|1067=-0.00017|1068=-0.00017|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|685=2000000|587=B|588=20210519|681=1.182235|684=1.182815|1067=0.000075|1068=0.000555|1065=0.000245|1066=0.000725|10=229|
{code}
*{color:#0747A6}#3{color}*
{code:java}
8=FIXT.1.1|9=286|35=AB|49=QUOD5|56=QUODFX_UAT|34=45|52=20210430-07:19:23|1=CLIENT1|11=650118365|15=USD|38=2000000|40=D|54=1|55=EUR/USD|59=4|60=20210430-07:19:23|117=01210430071908234002|167=FXSWAP|460=4|555=2|600=EUR/USD|609=FXFWD|654=1|587=B|588=20210512|600=EUR/USD|609=FXFWD|654=1|587=B|588=20210519|10=167|
{code}
*{color:#0747A6}#4{color}*
{code:java}
8=FIXT.1.1|9=741|35=8|34=48|49=QUODFX_UAT|52=20210430-07:19:22.814|56=QUOD5|1128=9|1=CLIENT1_1|6=0.000245|11=650118365|14=2000000|15=USD|17=EX1210430071922975001|21=1|31=0.000245|32=2000000|37=MO1210430071922911001|38=2000000|39=2|40=D|54=1|55=EUR/USD|59=4|60=20210430-07:19:22.751|63=0|64=20210504|75=20210430|100=XQFX|120=EUR|150=F|151=0|167=FXSWAP|194=1.18216|381=490|453=4|448=CLIENT1|447=D|452=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|555=2|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=2|685=1000000|587=B|588=20210512|637=1.18199|1073=-0.00017|1418=1000000|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=1|685=2000000|587=B|588=20210519|637=1.182235|1073=0.000075|1418=2000000|854=0|1071=0.000245|10=070|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;BDA, FXregression, refactored_FX, swapMM, SWED;;;PFX-749;;QAP-3807;;"from Client interface send UNeven swap RFQ BDA/BDA
without side
CCY2";"#1 tag 587=B
#2
nearLegQty =1000000
farLegQty=2000000
EUR/USD
CCY2=USD";"quote is sent in reply
tag 15 = USD
quote contains tags 1065 and 1066";;
;;;;;;;;;;;;;;;"from client interface send 35=AB (multileg order )
buy side 54 =1
without price
15 = USD
qty=2000000";"#3
#4";"order was executed with tenor Broken
Execution report was sent to client
Order qty = 2000000
tag 1071 (38=8) = tag 1065 (35=S)

buy side executed with bidSwapPoints 1065 because 15 = CCY2";;
;;;;;;;;;;;;;;;Check FE;Not for TH2;"QuoteRequestBook:
tree requests:
1. QUODFX
2. CITIR
3. MSR";;
QAP-T2574;Broken Date: Explicitly Request Swap Points for Broken/Broken Even Swaps CCY1;Automated;;"*AutoRFQClientPricingFallback* can be different
Add only rfq's venue
!screenshot-2.png|thumbnail!
*{color:#0747A6}#1{color}*

{code:java}
8=FIXT.1.1|9=249|35=R|49=QUOD5|56=QUODFX_UAT|34=57|52=20210430-07:24:59|131=111111156|146=1|55=EUR/USD|167=FXSWAP|38=1000000|64=20210504|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|587=B|588=20210512|685=1000000|600=EUR/USD|609=FXFWD|587=B|588=20210519|685=1000000|10=175|
{code}

*{color:#0747A6}#2{color}*
{code:java}
8=FIXT.1.1|9=537|35=S|34=60|49=QUODFX_UAT|52=20210430-07:25:00.357|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20210430-07:26:59.244|64=20210504|117=01210430072459234002|131=111111156|132=0.00027|133=0.00072|134=1000000|135=1000000|167=FXSWAP|188=1.18223|190=1.18223|460=4|537=1|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|685=1000000|587=B|588=20210512|681=1.182043|684=1.182043|1067=-0.000187|1068=-0.000187|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|685=1000000|587=B|588=20210519|681=1.182313|684=1.182763|1067=0.000083|1068=0.000533|1065=0.00027|1066=0.00072|10=199|
{code}
*{color:#0747A6}#3{color}*
{code:java}
8=FIXT.1.1|9=286|35=AB|49=QUOD5|56=QUODFX_UAT|34=58|52=20210430-07:25:08|1=CLIENT1|11=650118366|15=EUR|38=1000000|40=D|54=1|55=EUR/USD|59=4|60=20210430-07:25:08|117=01210430072459234002|167=FXSWAP|460=4|555=2|600=EUR/USD|609=FXFWD|654=1|587=B|588=20210512|600=EUR/USD|609=FXFWD|654=1|587=B|588=20210519|10=173|
{code}
*{color:#0747A6}#4{color}*
{code:java}
8=FIXT.1.1|9=740|35=8|34=62|49=QUODFX_UAT|52=20210430-07:25:07.762|56=QUOD5|1128=9|1=CLIENT1_1|6=0.00072|11=650118366|14=1000000|15=EUR|17=EX1210430072507975001|21=1|31=0.00072|32=1000000|37=MO1210430072507911001|38=1000000|39=2|40=D|54=1|55=EUR/USD|59=4|60=20210430-07:25:07.706|63=0|64=20210504|75=20210430|100=XQFX|120=USD|150=F|151=0|167=FXSWAP|194=1.18223|381=720|453=4|448=CLIENT1|447=D|452=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|555=2|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=2|685=1000000|587=B|588=20210512|637=1.182043|1073=-0.000187|1418=1000000|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=1|685=1000000|587=B|588=20210519|637=1.182763|1073=0.000533|1418=1000000|854=0|1071=0.00072|10=006|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;BDA, FX_fix, FXregression, refactored_FX, swapMM, SWED;;;PFX-749;;QAP-3806;;"from Client interface send even swap RFQ BDA/BDA
without side
with CCY1";"EUR/USD
tag 15 = EUR
#1 tag 587=B
#2";"quote is sent in reply
tag 15 = EUR
quote contains tags 1065 and 1066";;
;;;;;;;;;;;;;;;"from client interface send 35=AB (multileg order )
without price";"#3
#4
tag 15 = EUR
Buy Side";"order was executed with tenor Broken
Execution report was sent to client
tag 1071 (38=8) = tag 1066 (35=S)

buy side executed with OfferSwapPoints 1066";;
;;;;;;;;;;;;;;;check FE;Not for TH2;"QuoteRequestBook:
tree requests:
1. QUODFX
2. CITIR
3. MSR

order qty = 1000000
tenor = BDA";;
QAP-T2575;interpolation: Explicitly Request Swap Points for Forward/Forward Swaps (ccy1/sell/uneven/rfq);Automated;;"*{color:#DE350B}Can be only fix in future when we send own 35=S in 
reply{color}*
First, I think one important detail is that the mechanism described in the 
present Story (PFX-749) and the one for Broken Dates (PFX-748) replaces 
what's described in PFX-747. So, the QS would sometimes have to send RFQs 
of its own in order to get forward points instead of getting them from 
market data. In other words, forwards points in market data aren't actually 
required to test this Story.
Note that if its RFQs fail for one reason or another, the QS falls back on 
market data (which explains why it did that in your case, shown in your 
SECOND question).
*{color:#FFAB00}WORKFLOW: quod308@mercury{color}*
the quote request goes to a venue (so ORS -> ES (ESFSSR) -> buy-side 
gateway (FIXFSSRFQP) -> venue) as in the Taker workflow
the venue sends back the quote containing the forward points
the way back is venue -> buy-side gateway (FIXFSSRFQP) -> ES (ESFSSR) -> 
ORS -> QS
to test this, you don't need market data for forward tenors

*AutoRFQClientPricingFallback=Interpolation*

1) Add working only *ESP* venue to forward tab
!screenshot-2.png|thumbnail!
{color:#0747A6}*#1*{color}

{code:java}
< 
8=FIXT.1.1|9=270|35=R|49=QUOD5|56=QUODFX_UAT|34=1069|52=20210429-16:39:48|131=111333447|146=1|55=EUR/USD|167=FXSWAP|54=2|38=2000000|64=20210503|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|624=2|587=W1|588=20210510|685=1000000|600=EUR/USD|609=FXFWD|624=1|587=W2|588=20210517|685=2000000|10=156|
{code}

{color:#0747A6}*#2*{color}
{code:java}
8=FIXT.1.1|9=523|35=S|34=1134|49=QUODFX_UAT|52=20210429-16:39:49.026|56=QUOD5|1128=9|15=EUR|54=2|55=EUR/USD|62=20210429-16:41:47.904|64=20210503|117=01210429163947108002|131=111333447|132=0.000205|134=1000000|167=FXSWAP|188=1.18202|190=1.18212|460=4|537=1|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=2|685=1000000|587=W1|588=20210510|681=1.181978|684=1.181878|1067=-0.000142|1068=-0.000142|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=1|685=2000000|587=W2|588=20210517|681=1.182083|684=1.182663|1067=0.000063|1068=0.000543|1065=0.000205|10=122|
{code}

{color:#0747A6}*#3*{color}

{code:java}
8=FIXT.1.1|9=290|35=AB|49=QUOD5|56=QUODFX_UAT|34=1071|52=20210429-16:40:01|1=CLIENT1|11=650118361|15=EUR|38=2000000|40=D|54=2|55=EUR/USD|59=4|60=20210429-16:40:01|117=01210429163947108002|167=FXSWAP|460=4|555=2|600=EUR/USD|609=FXFWD|654=1|587=W1|588=20210510|600=EUR/USD|609=FXFWD|654=1|587=W2|588=20210517|10=145|
{code}

{color:#0747A6}*#4*{color}

{code:java}
8=FIXT.1.1|9=747|35=8|34=1136|49=QUODFX_UAT|52=20210429-16:40:00.617|56=QUOD5|1128=9|1=CLIENT1_1|6=0.000205|11=650118361|14=2000000|15=EUR|17=EX1210429164000960001|21=1|31=0.000205|32=2000000|37=MO1210429164000896001|38=2000000|39=2|40=D|54=2|55=EUR/USD|59=4|60=20210429-16:40:00.583|63=0|64=20210503|75=20210429|100=XQFX|120=USD|150=F|151=0|167=FXSWAP|194=1.18202|381=410|453=4|448=CLIENT1|447=D|452=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|555=2|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=1|685=1000000|587=W1|588=20210510|637=1.181878|1073=-0.000142|1418=1000000|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=2|685=2000000|587=W2|588=20210517|637=1.182083|1073=0.000063|1418=2000000|854=0|1071=0.000205|10=131|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FX_fix, FXregression, refactored_FX, swapMM, SWED;;;PFX-749;;QAP-3805;;"From MiniFix send swap request
EUR/USD
15=EUR
1W/2W
NearLegQty=1000000
FarLegQty=2000000
Sell side";#1;request is send;;
;;;;;;;;;;;;;;;"Check miniFix
and FE";"#2
RFQ is success - no interpolation
check log in future with TH2";"1)MiniFix receives quote
15=EUR
FE: Quote Request Book:
1 request was created";;
;;;;;;;;;;;;;;;"From miniFix send an order multiLeg 35=AB
sell side
without tag 44";#3;Order is send;;
;;;;;;;;;;;;;;;Check miniFix;#4;"1)MiniFix receives Execution report:
39=2 FILLED
150=F TRADE
Order must be executed with price = 1065 (BidSwapPoints )";;
QAP-T2576;Synthetic sell order with primaryBestBidOffer;Automated;;"Check stop loss synthetic sell order

!image-2021-04-13-14-03-22-468.png!

 

The order triggers when the the stop price is lower than offer

 ";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FX_ALGO, FXregression, refactored_FX;lzaharia;;PFX-1918;;QAP-3802;;Send a stop order sell with a stop price higher than offer;;Order sent, placed in order book;;
;;;;;;;;;;;;;;;Order triggers when the offer become lower than stop price;;"Order executed
Check that order triggers when offer price is equal to stop price";;
QAP-T2577;Synthetic buy order with primarybestbidoffer;Automated;;"The order entry to send a synthetic stop is the following :

!image-2021-04-13-13-55-49-839.png!

 

The order will trigger when the stop price is above the best bid

 

 ";/PFX/FX_Taker_ESP;Critical - Do ASAP;FX_Taker_ESP;FX_ALGO, FXregression, refactored, refactored_FX;lzaharia;;;;QAP-3801;;"Send a buy order with a synthetic stop, parameters primarybestbidoffer with 
stop price lower than best bid";;Order sent, open in the order book;;
;;;;;;;;;;;;;;;Order triggers when the best bid is higher or equal than best bid;Order triggers when the best big is higher or equal than (STOP PRICE ???);Order triggered when best bid become equal or greater than stop price;;
QAP-T2578;Check MDEntryID on 35=W is not unique;Automated;;"quod308@mercury
!screenshot-1.png|thumbnail!";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, refactored_FX;;;;;QAP-3798;;Go to WebAdmin=>FX Market Making=>Quoting Session;QSESP1 for quod308@mercury;Quoting Session window opened;;
;;;;;;;;;;;;;;;On QSESP component click on edit;;Modify Wizard window opened;;
;;;;;;;;;;;;;;;In table Values set Always Use New MDEntry ID click on checkbox;;Always Use New MDEntry ID check box is NOT ACTIVE;;
;;;;;;;;;;;;;;;From miniFIX send 35=V;see description;MarketDataSnapshotFullRefresh receive;;
;;;;;;;;;;;;;;;Check that tag 278 is NOT unique for each message 35=W;;tag 278 is the same for each msg;;
QAP-T2579;Explicitly Request Broken Date Swap Points (Interpolation for Dealer Intervention) with margins NOT EQUAL 0;Automated;;"1) AutoRFQClientPricingFallback = *Interpolation* (Restart QS)
2) Add {color:#57d9a3}*CITI*{color} and {color:#57d9a3}*CITIR*{color} to 
Forward Venue (ESP and RFQ venues )
3) Auto RFQ Timeout (ms) =5000 for RFQ venue
4) set some margins for tenors

*35 = R*
{code:java}
8=FIXT.1.1|9=253|35=R|34=553|49=QUOD9|52=20220601-12:40:05.943|56=QUODFX_UAT|131=016354942|146=1|55=EUR/USD|167=FXSWAP|54=1|15=EUR|1=Argentina1|555=2|600=EUR/USD|609=FXFWD|624=2|685=66811589|587=B|588=20220609|600=EUR/USD|609=FXFWD|624=1|685=66811589|587=B|588=20220613|10=002| 
{code}
*Mapping*
{code:java}
Mapped fix message fix QuoteRequest={ AuthenticationBlock={ 
UserID=""gtwquod9"" RoleID=FIXClient SessionKey=1654084371000070258 } 
QuoteRequestBlock={ QuoteReqList={ QuoteReqBlock=[ { InstrumentBlock={ 
InstrSymbol=""EUR/USD"" ProductType=CURRENCY InstrType=FXSwap } 
QuoteReqInstrumentLegList={ QuoteReqInstrumentLegBlock=#2:[ 1:{ 
InstrumentLegBlock={ LegInstrSymbol=""EUR/USD"" LegSymbol=""EUR/USD"" 
LegProductType=CURRENCY LegInstrType=FXForward LegSide=Sell 
LegTenor=BrokenDate } LegOrderQty=66811589.000000000 
LegSettlType=BrokenDate LegSettlDate=2022-Jun-09 } 2:{ InstrumentLegBlock={ 
LegInstrSymbol=""EUR/USD"" LegSymbol=""EUR/USD"" LegProductType=CURRENCY 
LegInstrType=FXForward LegSide=Buy LegTenor=BrokenDate } 
LegOrderQty=66811589.000000000 LegSettlType=BrokenDate 
LegSettlDate=2022-Jun-13 } ] } Side=Buy Currency=""EUR"" 
ClientAccountGroupID=""Argentina1"" } ] } ClientQuoteReqID=""016354942"" } 
}{code}
*35= S*
{code:java}
8=FIXT.1.1|9=476|35=S|34=593|49=QUODFX_UAT|52=20220601-12:43:25.973|56=QUOD9|1128=9|15=EUR|55=EUR/USD|62=20220601-12:45:24.728|117=01220601124324769002|131=846909502|167=FXSWAP|188=1.1815|190=1.1815|460=4|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=2|685=67237644|587=B|588=20220609|681=1.1815291|684=1.1815|1067=0.0000291|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=1|685=67237644|587=B|588=20220613|681=1.1815|684=1.1815061|1068=0.0000061|1065=0|1066=-0.000023|1166=01220601124324769002|10=066|{code}
*Mapping*
{code:java}
serializing internal Quote={ RoutingBlock={ DestComponent=""ORS"" } 
QuoteBlock={ LegQuoteList={ LegQuoteBlock=#2:[ 1:{ 
LegInstrID=""8mQAu1dLa6LIIJKU80yQbA"" LegSide=Sell 
LegOrderQty=67237644.000000000 LegSettlType=BrokenDate 
LegSettlDate=2022-Jun-09 LegBidPx=1.181529100 LegOfferPx=1.181500000 
LegBidForwardPoints=0.000029100 } 2:{ LegInstrID=""8mQAu1dLa6LIIJKU80yQbA"" 
LegSide=Buy LegOrderQty=67237644.000000000 LegSettlType=BrokenDate 
LegSettlDate=2022-Jun-13 LegBidPx=1.181500000 LegOfferPx=1.181506100 
LegOfferForwardPoints=0.000006100 } ] } QuoteID=427700000035 
QuoteRequestID=427400000063 InstrID=""dsB_d9-Pz7BIGnQpYZ8SeQ"" }, persisting 
Quote={ QuoteID=427700000035 UserID=""ostronov"" RoleID=HeadOfSaleDealer 
CreationTime=2022-Jun-01 12:43:24.728062239 Originator=""QS_RFQ_FIX_TH2"" 
QuoteStatus=Accepted ListingID=506403760 AccountGroupID=""Argentina1"" 
OrdQty=0.000000000 QuoteRequestID=427400000063 ValidUntilTime=2022-Jun-01 
12:45:24.728846403 BidSpotRate=1.181500000 OfferSpotRate=1.181500000 
BidSwapPoints=0.000000000 OfferSwapPoints=-0.000023000 Currency=""EUR"" 
InstrID=""dsB_d9-Pz7BIGnQpYZ8SeQ"" Origin=DotNET 
ClientQuoteID=""01220601124324769002"" QuoteCategory=Manual AffectPosit=No 
QuoteTTL=120 AutomaticHedging=Yes, revision 1 } QuoteLeg={ 
QuoteID=427700000035 InstrID=""dsB_d9-Pz7BIGnQpYZ8SeQ"" LegNumber=1 
LegInstrID=""8mQAu1dLa6LIIJKU80yQbA"" LegOrderQty=67237644.000000000 
LegSettlType=BrokenDate LegSettlDate=2022-Jun-09 LegSide=Sell 
LegBidPx=1.181529100 LegOfferPx=1.181500000 
LegBidForwardPoints=0.000029100, revision 1 } QuoteLeg={ 
QuoteID=427700000035 InstrID=""dsB_d9-Pz7BIGnQpYZ8SeQ"" LegNumber=2 
LegInstrID=""8mQAu1dLa6LIIJKU80yQbA"" LegOrderQty=67237644.000000000 
LegSettlType=BrokenDate LegSettlDate=2022-Jun-13 LegSide=Buy 
LegBidPx=1.181500000 LegOfferPx=1.181506100 
LegOfferForwardPoints=0.000006100, revision 1 } on channel QS_RFQ_FIX_TH2 
}{code}

*35=AB*
{code:java}
8=FIXT.1.1|9=480|35=S|34=2279|49=QUODFX_UAT|52=20220602-13:06:45.238|56=QUOD9|1128=9|15=EUR|55=EUR/USD|62=20220602-13:08:45.214|117=01220602130645949002|131=945520456|167=FXSWAP|188=1.18153|190=1.18153|460=4|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=2|685=57649455|587=B|588=20220610|681=1.181571|684=1.18153|1067=0.000041|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=1|685=57649455|587=B|588=20220614|681=1.18153|684=1.1815369|1068=0.0000069|1065=0|1066=-0.0000341|1166=01220602130645949002|10=024|{code}

*Mapping*
{code:java}
Mapped fix message fix NewOrderMultiLeg={ AuthenticationBlock={ 
UserID=""gtwquod9"" RoleID=FIXClient SessionKey=1654125088000073014 } 
Header={ CreationTime=2022-Jun-02 13:06:45.438672000 } 
NewOrderMultiLegBlock={ InstrumentBlock={ InstrSymbol=""EUR/USD"" 
InstrType=FXSwap Tenor=Spot } LegOrderElements={ LegOrderBlock=#2:[ 1:{ 
InstrumentLegBlock={ LegInstrSymbol=""EUR/USD"" LegSymbol=""EUR/USD"" 
LegProductType=CURRENCY LegInstrType=FXForward LegSide=Sell 
LegTenor=BrokenDate } LegOrderQty=57649455.000000000 
LegSettlType=BrokenDate LegSettlDate=2022-Jun-10 } 2:{ InstrumentLegBlock={ 
LegInstrSymbol=""EUR/USD"" LegSymbol=""EUR/USD"" LegProductType=CURRENCY 
LegInstrType=FXForward LegSide=Buy LegTenor=BrokenDate } 
LegOrderQty=57649455.000000000 LegSettlType=BrokenDate 
LegSettlDate=2022-Jun-14 } ] } ClOrdID=""044305215"" Side=Buy 
Price=-0.000034100 OrdType=PreviouslyQuoted Currency=""EUR"" 
TimeInForce=ImmediateOrCancel TransactTime=2022-Jun-02 13:06:44 
SettlType=Regular ClientAccountGroupID=""Argentina1"" 
OrdQty=57649455.000000000 ExecutionPolicy=DMA 
ClientQuoteID=""01220602130645949002"" } {code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;BDA, FXregression;;;PFX-748;;QAP-3772;;from MiniFix send request with big qty (50000000);35 = R;request is appeared in MDI;;
;;;;;;;;;;;;;;;From Trading FE => send quote pressed by button Send;35= S;quote is appeared in QuoteBook and in MiniFix;;
;;;;;;;;;;;;;;;take quoteID (tag117) and send an order with tif IOC;35 = D;order is partiallyFilled or filled;;
QAP-T2580;Explicitly Request Swap Points for Spot/BDA Swaps (rfq);Automated;;"1)Add *only rfq* venues to forward tab for instrument for client tier
2)*AutoRFQClientPricingFallback* can be different

{color:#0747a6}*#1*{color}
{code:java}
< 
8=FIXT.1.1|9=253|35=R|49=QUOD5|56=QUODFX_UAT|34=142|52=20210430-08:05:35|131=111333459|146=1|55=EUR/USD|167=FXSWAP|38=1000000|64=20210504|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXSPOT|587=SPO|588=20210504|685=1000000|600=EUR/USD|609=FXFWD|587=B|588=20210519|685=1000000|10=241|
{code}
{color:#0747a6}*#2*{color}
{code:java}
> 
8=FIXT.1.1|9=513|35=S|34=151|49=QUODFX_UAT|52=20210430-08:05:35.770|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20210430-08:07:34.447|64=20210504|117=01210430080534243002|131=111333459|132=0.00042|133=0.00054|134=1000000|135=1000000|167=FXSWAP|188=1.18185|190=1.18185|460=4|537=1|555=2|600=EUR/USD-SPO-QUODFX|602=EUR/USD|603=8|616=XQFX|685=1000000|587=0|588=20210504|681=1.18185|684=1.18185|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|685=1000000|587=B|588=20210519|681=1.18227|684=1.18239|1067=0.00042|1068=0.00054|1065=0.00042|1066=0.00054|10=103|

{code}
{color:#0747a6}*#3*{color}
{code:java}
< 
8=FIXT.1.1|9=290|35=AB|49=QUOD5|56=QUODFX_UAT|34=144|52=20210430-08:05:49|1=CLIENT1|11=650118367|15=EUR|38=1000000|40=D|54=1|55=EUR/USD|59=4|60=20210430-08:05:49|117=01210430080534243002|167=FXSWAP|460=4|555=2|600=EUR/USD|609=FXSPOT|654=1|587=SPO|588=20210504|600=EUR/USD|609=FXFWD|654=1|587=B|588=20210519|10=236|
{code}
{color:#0747a6}*#4*{color}
{code:java}
> 
8=FIXT.1.1|9=735|35=8|34=154|49=QUODFX_UAT|52=20210430-08:05:50.240|56=QUOD5|1128=9|1=CLIENT1_1|6=0.00054|11=650118367|14=1000000|15=EUR|17=EX1210430080549976001|21=1|31=0.00054|32=1000000|37=MO1210430080549911001|38=1000000|39=2|40=D|54=1|55=EUR/USD|59=4|60=20210430-08:05:49.958|63=0|64=20210504|75=20210430|100=XQFX|120=USD|150=F|151=0|167=FXSWAP|194=1.18185|381=540|453=4|448=CLIENT1|447=D|452=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|555=2|600=EUR/USD-SPO-QUODFX|602=EUR/USD|603=8|609=FXSPOT|616=XQFX|624=2|685=1000000|587=0|588=20210504|637=1.18185|1418=1000000|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=1|685=1000000|587=B|588=20210519|637=1.18239|1073=0.00054|1418=1000000|854=0|1071=0.00054|10=115|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, refactored_FX, swapMM, SWED;;;PFX-749;;QAP-3766;;"From MiniFix send swap request
without side
Spot/Broken Date
qty=1000000
tag 15= EUR";#1;"request is send
with both swap points (1065 and 1066)";;
;;;;;;;;;;;;;;;Check miniFix and Trading FE;#2;"1)MiniFix receives quote
2) in Quote Request Book were created QUODFX request and for each venue 
(CITIR...)
2)Quote is appeared on FE in QuoteBook";;
;;;;;;;;;;;;;;;"From miniFix send an order multiLeg 35=AB Buy
without price (tag 44)";#3;Order is send;;
;;;;;;;;;;;;;;;Check miniFix and Trading FE;#4;"1)MiniFix receives Execution report:
39=2 FILLED
150=F TRADE
2)Order is filled in Order Book:
AvgPrice = OfferSwapPoints
NearLegTenor=Spot
FarLegTenor=Broken";;
QAP-T2581;Rejection: Non-configured Standard Tenors (rfq fails);Automated;;"*_{color:#DE350B}Can be only FIX{color}_*
1)add few working ESP venues to Forward Venues tab
!screenshot-1.png|thumbnail!
2)Table quodsetting.AutoRFQClientPricingFallback = *Rejection* (restart QS)

*{color:#0747A6}#1{color}*
{code:java}
< 
8=FIXT.1.1|9=154|35=R|49=QUOD5|56=QUODFX_UAT|34=131|52=20210408-08:03:22|131=111333021|146=1|55=EUR/USD|167=FXFWD|537=1|38=1000000|64=20210503|63=W3|15=EUR|1=CLIENT1|40=D|10=131|
{code}
*{color:#0747A6}#2{color}*
{code:java}
> 
8=FIXT.1.1|9=196|35=AG|34=143|49=QUODFX_UAT|52=20210408-08:03:21.295|56=QUOD5|1128=9|58=failed 
to get forward points through 
RFQ|131=111333021|146=1|55=EUR/USD|167=FXFWD|537=1|63=W3|64=20210503|15=EUR|40=D|658=99|10=059|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, SWED, refactored_FX;;;PFX-733;;QAP-3764;;"From miniFix send request 35=R with tenor which is not configured for 
current tier=>instrument (tenor=3W for example)";"#1
#2";"Request is appeared in Quote Request Book on Trading FE (only one request 
for QUODFX).
Status=Rejected
""failed to get forward points through RFQ""";;
QAP-T2582;Manual Intervention: Non-configured Standard Tenors (rfq fails, ccy2, buy, under max qty);Specified;;"1)add few working ESP venues to Forward Venues tab (or if you have rfq's 
venue you can make them unhealthy and exclude)
!screenshot-1.png|thumbnail!
2)Table quodsetting.AutoRFQClientPricingFallback = *Manual Intervention* 
(restart QS)

*{color:#0747A6}#1{color}*
{code:java}
< 
8=FIXT.1.1|9=159|35=R|49=QUOD5|56=QUODFX_UAT|34=655|52=20210430-12:27:45|131=211333049|146=1|55=EUR/USD|167=FXFWD|537=1|54=1|38=1000000|64=20210525|63=W3|15=USD|1=CLIENT1|40=D|10=123|
{code}
*{color:#0747A6}#2{color}*
{code:java}
> 
8=FIXT.1.1|9=233|35=S|34=681|49=QUODFX_UAT|52=20210430-12:29:20.461|56=QUOD5|1128=9|15=USD|55=EUR/USD|62=20210430-12:34:20.444|117=01210430122745261002|131=211333049|132=1.182164|134=1000000|135=1000000|167=FXFWD|188=1.18214|189=0.000024|190=0|460=4|10=219|
{code}
*{color:#0747A6}#3{color}*

{code:java}
< 
8=FIXT.1.1|9=197|35=D|49=QUOD5|56=QUODFX_UAT|34=660|52=20210430-12:29:39|1=CLIENT1|11=650118376|21=1|15=USD|38=1000000|40=D|54=1|55=EUR/USD|59=3|60=20210430-12:29:39|64=20210525|167=FXFWD|117=01210430122745261002|10=226|
{code}

{color:#0747A6}*#4*{color}

{code:java}
> 
8=FIXT.1.1|9=512|35=8|34=683|49=QUODFX_UAT|52=20210430-12:29:39.308|56=QUOD5|1128=9|1=CLIENT1_1|6=1.182164|11=650118376|14=1000000|15=USD|17=EX1210430122939978001|21=1|22=8|31=1.182164|32=1000000|37=MO1210430122939911001|38=1000000|39=2|40=D|48=EUR/USD|54=1|55=EUR/USD|59=3|60=20210430-12:29:39.278|63=B|64=20210525|75=20210430|100=XQFX|120=EUR|150=F|151=0|167=FXFWD|194=1.18214|195=0.000024|207=XQFX|381=1182164|453=4|448=CLIENT1|447=D|452=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|854=0|10=202|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, SWED;;;PFX-733;;QAP-3763;;"From miniFix send request 35=R with tenor which is not configured for 
current tier=>instrument (tenor=3W for example)
CCY2
Buy Side";#1;"Only one request is appeared in Quote Request Book on Trading FE
AutomaticQuoting =NO
Free notes inform us that RFQ was failed";;
;;;;;;;;;;;;;;;Open DI estimate and send quote;#2;quote appears in QuoteBook and MiniFix;;
;;;;;;;;;;;;;;;Using quoteID 117 send an order;#3;"Order is sent and Filled.
Quote in QuoteBook has QuoteStatus = Filled
tenor 3W";;
;;;;;;;;;;;;;;;Check ExReport on MiniFix;#4;"ORS sends ExecReport with ExecType = F
with BidPx because of CCY2";;
QAP-T2583;Interpolation: Non-configured Standard Tenors (rfq failes);Automated;;"*_{color:#DE350B}Can be only FIX{color}_*
1)add few working ESP venues to Forward Venues tab
!screenshot-1.png|thumbnail!
2)Table quodsetting.AutoRFQClientPricingFallback = *Interpolation*
{color:#0747A6}*#1*{color}

{code:java}
< 
8=FIXT.1.1|9=154|35=R|49=QUOD5|56=QUODFX_UAT|34=107|52=20210408-07:52:03|131=111333021|146=1|55=EUR/USD|167=FXFWD|537=1|38=1000000|64=20210503|63=W3|15=EUR|1=CLIENT1|40=D|10=136|
{code}
*{color:#0747A6}#2{color}*

{code:java}
> 
8=FIXT.1.1|9=300|35=S|34=120|49=QUODFX_UAT|52=20210408-07:52:26.974|56=QUOD5|1128=9|1=CLIENT1|15=EUR|55=EUR/USD|62=20210408-07:54:02.582|63=W3|64=20210503|117=01210408075226168002|131=111333021|132=1.181808|133=1.181968|134=1000000|135=1000000|167=FXFWD|188=1.18178|189=0.000028|190=1.18198|191=-0.000012|460=4|537=1|10=007|
{code}
{color:#0747A6}*#3*{color}

{code:java}
< 
8=FIXT.1.1|9=213|35=D|49=QUOD5|56=QUODFX_UAT|34=110|52=20210408-07:52:45|1=CLIENT1|11=405445817|21=1|15=EUR|38=1000000|40=D|44=1.18874|54=1|55=EUR/USD|59=3|60=20210408-07:52:45|63=W3|64=20210503|167=FXFWD|117=01210408075226168002|10=194|
{code}

{color:#0747A6}*#4*{color}

{code:java}
> 
8=FIXT.1.1|9=525|35=8|34=122|49=QUODFX_UAT|52=20210408-07:52:45.503|56=QUOD5|1128=9|1=CLIENT1_1|6=1.181968|11=405445817|14=1000000|15=EUR|17=EX1210408075245930002|21=1|22=8|31=1.181968|32=1000000|37=MO1210408075245800002|38=1000000|39=2|40=D|44=1.181968|48=EUR/USD|54=1|55=EUR/USD|59=3|60=20210408-07:52:45.032|63=0|64=20210503|75=20210408|100=XQFX|120=USD|150=F|151=0|167=FXFWD|194=1.18198|195=-0.000012|207=XQFX|381=1181968|453=4|448=CLIENT1|447=D|452=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|854=0|10=058|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX, SWED;;;PFX-733;;QAP-3762;;"From miniFix send request 35=R with tenor which is not configured for 
current tier=>instrument (tenor=3W for example)";"#1
#2";"Request is appeared in Quote Request Book on Trading FE (only one request 
for QUODFX).
QuodStatus=Accepted
QS sends quotes to fix";;
;;;;;;;;;;;;;;;using QuoteID (tag 117) and price send a previously quoted order;#3;"Order is sent and filled.
Order is appeared in Order Book on Trading FE with status filled
and tenor 3W
Request :
QuoteStatus: Filled
tenor=3W";;
;;;;;;;;;;;;;;;Check MiniFix;#4;ORS sends ExecReport with ExecType = F;;
QAP-T2584;Interpolation : Non-configured Standard Tenors (rfq);Automated;;"{color:#DE350B}*_Can be only FIX_*{color}
1)To Forward venue (client tier => instrument) add any working rfq's venue 
: CITIR, MSR, JPMR
!screenshot-1.png|thumbnail!
{color:#0747A6}*#1*{color}

{code:java}
< 
8=FIXT.1.1|9=153|35=R|49=QUOD5|56=QUODFX_UAT|34=11|52=20210408-06:21:12|131=111333018|146=1|55=EUR/USD|167=FXFWD|537=1|38=1000000|64=20210503|63=W3|15=EUR|1=CLIENT1|40=D|10=082|
{code}

{color:#0747A6}*#2*{color}

{code:java}
> 
8=FIXT.1.1|9=298|35=S|34=12|49=QUODFX_UAT|52=20210408-06:21:13.595|56=QUOD5|1128=9|1=CLIENT1|15=EUR|55=EUR/USD|62=20210408-06:23:12.288|63=W3|64=20210503|117=01210408062112859002|131=111333018|132=1.182027|133=1.182547|134=1000000|135=1000000|167=FXFWD|188=1.18199|189=0.000037|190=1.18219|191=0.000357|460=4|537=1|10=175|
{code}

{color:#0747A6}*#3*{color}

{code:java}
< 
8=FIXT.1.1|9=212|35=D|49=QUOD5|56=QUODFX_UAT|34=13|52=20210408-06:21:58|1=CLIENT1|11=405445815|21=1|15=EUR|38=1000000|40=D|44=1.18874|54=1|55=EUR/USD|59=3|60=20210408-06:21:58|63=0|64=20210503|167=FXSPOT|117=01210408062112859002|10=140|
{code}

{color:#0747A6}*#4*{color}
{code:java}
> 
8=FIXT.1.1|9=523|35=8|34=15|49=QUODFX_UAT|52=20210408-06:21:58.004|56=QUOD5|1128=9|1=CLIENT1_1|6=1.182317|11=405445815|14=1000000|15=EUR|17=EX1210408062157893002|21=1|22=8|31=1.182317|32=1000000|37=MO1210408062157763002|38=1000000|39=2|40=D|44=1.182317|48=EUR/USD|54=1|55=EUR/USD|59=3|60=20210408-06:21:57.649|63=0|64=20210503|75=20210408|100=XQFX|120=USD|150=F|151=0|167=FXFWD|194=1.18196|195=0.000357|207=XQFX|381=1182317|453=4|448=CLIENT1|447=D|452=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|854=0|10=203|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FX_fix, FXregression, refactored_FX, SWED;;;PFX-733, PFX-4677;;QAP-3761;;"From miniFix send request 35=R with tenor which is not configured for 
current tier=>instrument (tenor=3W for example)";"#1
#2";"Request is appeared in Quote Request Book on Trading FE (two requests: for 
QUODFX and MSR).
QS sends quotes to fix";;
;;;;;;;;;;;;;;;using QuoteID (tag 117) and price send a previously quoted order;#3;"Order is sent and filled.
Order is appeared in Order Book on Trading FE with status filled
and tenor 3W
Request (QUODFX):
QuoteStatus:Accepted
Request(MSR):QuoteStatus: empty
tenor=3W";;
;;;;;;;;;;;;;;;Check MiniFix;#4;ORS sends ExecReport with ExecType = F;;
QAP-T2585;Check AllocQty in ORS logs;Specified;;"*Must be added to some existing test-case*
{code:java}
2021-04-07 14:42:40.729169116 QUOD.ORS [21701] INFO mip_common 
(Message.cpp:132) - serializing order OrdNotification={ 
OrdNotificationBlock={ ListingList={ ListingBlock=[ { ListingID=506404433 } 
] } PreTradeAllocationBlock={ PreTradeAllocationList={ 
PreTradeAllocAccountBlock=[ { AllocAccountID=""CLIENT2_2"" 
AllocQty=1000000.000000000 } ] } } CounterpartList={ CounterpartBlock=#2:[ 
1:{ PartyRole=ExecutingFirm CounterpartID=3 } 2:{ PartyRole=ExecutingTrader 
CounterpartID=3 } ] } OrdID=""MO1210407144240740002"" ClOrdID=""7168642752"" 
Side=Buy Price=1.304700000 Currency=""GBP"" QtyType=Units 
OrdType=PreviouslyQuoted TimeInForce=FillOrKill OrdQty=1000000.000000000 
SettlCurrency=""USD"" UserID=""gtwquod5"" RoleID=FIXClient OrdStatus=Submitted 
Originator=""ORS"" ExecutionPolicy=DMA TrdCurrBookedPrice=1.304700000 
AccountGroupID=""CLIENT2"" OrdCapacity=Agency Origin=FIX 
EffectiveDate=""20210407"" SettlType=Regular SettlDate=2021-Apr-09 
BookingType=RegularBooking ManualOrderIndicator=No CreationTime=2021-Apr-07 
14:42:40.635093000 AccountGroupName=""CLIENT2"" 
SingleAllocAccountID=""CLIENT2_2"" ClientGroupID=1 QuoteID=1393000000970 
AffectPosit=Yes ValidatePriceControl=No 
PriceDiscovery=RequestForStreamingPrice 
ClientQuoteID=""01210407144240622002"" VenueAccountName=""SWEDCUST2_QFX"" 
InstrID=""6PmipPm4c296Keb7niIG9g"" CumQty=0.000000000 
LeavesQty=1000000.000000000 InitialClOrdID=""7168642752"" 
OrderTransactTime=2021-Apr-07 17:42:40.452000000 } }{code}
 
{code:java}
2021-04-07 14:42:40.757404434 QUOD.ORS [21686] INFO mip_common 
(Message.cpp:132) - serializing fix ExecutionReport={ Header={ 
MsgTime=2021-Apr-07 14:42:40.756442053 CreationTime=2021-Apr-07 
14:42:40.756440132 } ExecutionReportBlock={ InstrumentBlock={ 
SecurityAltIDList={ SecurityAltIDBlock=[ { SecurityAltID=""GBP/USD"" 
SecurityAltIDSource=ExchSymb } ] } InstrDescList={ InstrDescBlock=[ { 
LangCD=""en-US"" InstrLookupSymbol=""GBP/USD-SPO.SPO"" } ] } 
InstrSymbol=""GBP/USD"" Symbol=""GBP/USD-SPO-QUODFX"" 
LookupSymbol=""GBP/USD-SPO.SPO"" SecurityID=""GBP/USD"" 
SecurityIDSource=ExchSymb InstrType=Spot SecurityExchange=""XQFX"" Tenor=Spot 
BaseCurrency=""GBP"" QuoteCurrency=""USD"" LargeNumberPxPrecision=2 
PxPrecision=4 InstrSettlDate=""20210409"" } PartiesList={ PartiesBlock=#3:[ 
1:{ PartyID=""QUOD"" PartyIDSource=Proprietary PartyRole=ExecutingFirm } 2:{ 
PartyID=""QA1"" PartyIDSource=Proprietary PartyRole=ExecutingTrader } 3:{ 
PartyID=""gtwquod5"" PartyIDSource=Proprietary PartyRole=EnteringTrader 
PartyRoleQualifier=FIXClient } ] } VenueList={ VenueBlock=[ { 
ClientVenueID=""XQFX"" } ] } PreTradeAllocationBlock={ 
PreTradeAllocationList={ PreTradeAllocAccountBlock=[ { 
AllocClientAccountID=""CLIENT2_2"" AllocClientAccountIDSource=Other 
AllocQty=1000000.000000000 } ] } } ClOrdID=""7168642752"" 
ExecID=""EX1210407144240865002"" OrdID=""MO1210407144240740002"" 
ExecutionPolicy=DMA TransactTime=2021-Apr-07 14:42:40.732098000 
OrdType=PreviouslyQuoted Price=1.304700000 Currency=""GBP"" ExecType=Trade 
TransExecStatus=Filled TradeDate=2021-Apr-07 TimeInForce=FillOrKill 
CalculatedCcyLastQty=1304700.000000000 LastSpotRate=1.304700000 
SettlType=Regular SettlDate=2021-Apr-09 SettlCurrency=""USD"" 
OrdCapacity=Agency TransStatus=Open OrdQty=1000000.000000000 Side=Buy 
ExecQty=1000000.000000000 ExecPrice=1.304700000 
ContraExecID=""EX1210407144240865003"" LeavesQty=0.000000000 
CumQty=1000000.000000000 AvgPrice=1.304700000 AccountGroupID=""CLIENT2"" 
QtyType=Units GrossTradeAmt=1304700.000000000 ClientQuoteReqID=""5815571775"" 
ClientQuoteID=""01210407144240622002"" } }{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-3255;;QAP-3760;;"Send new order from client interface (quickFix)
RFQ";;Order received by ORS;;
;;;;;;;;;;;;;;;QSession recognised quoteEntryID;;Transac created;;
;;;;;;;;;;;;;;;Order filled;;Execution sent to FE / Minifix;;
;;;;;;;;;;;;;;;Check logs in ORS;see descriprion;AllocQty in OrdNotification and Execution report should be the same;;
QAP-T2586;Outgoing External Check : RFQ maker (fix);Specified;;"The workflow 
[https://support.quodfinancial.com/confluence/display/INTD/Connecting+a+gateway+for+external+validation]
!screenshot-1.png|thumbnail!

see *QAP-3396* for configuration

create rule for Risk Limits => *External Check* =>
!screenshot-2.png|thumbnail!
Also check counterparts:
!screenshot-3.png|thumbnail!
!screenshot-4.png|thumbnail!
!screenshot-5.png|thumbnail!

*Change Clearing Account Type:*
*Clients -> ASPECT_DB -> Clearing Account Type = Retail*
*{color:#0747a6}#1{color}*
{code:java}
> 
8=FIXT.1.1|9=376|35=D|34=60|49=LMTSENDER|52=20211111-17:21:09.212|56=QUODFX_UAT|1=CLIENT_EXTERNAL|11=MO1211111172109242001|15=EUR|21=1|22=8|38=1000000|40=D|44=1.183|48=EUR/USD|54=1|55=EUR/USD|59=3|60=20211111-17:21:10.749|63=0|64=20211115|117=01211111172107080002|120=USD|167=FXSPOT|207=XQFX|453=3|448=CLIENT1_EXTERNAL_ACC|447=D|452=38|448=QA1|447=D|452=12|448=QUOD|447=D|452=1|1816=1|10051=1|10=084|
{code}
*{color:#0747a6}#2{color}*
{code:java}
< 
8=FIXT.1.1|9=215|35=8|49=QUODFX_UAT|56=LMTSENDER|34=52|52=20211111-17:21:22|11=MO1211111172109242001|14=0|17=EXECID000158202103010000002439|37=ORDID000158202103010000002440|39=0|54=1|55=EUR/USD|150=0|151=0|583=MO1211111172109242001|10=161|
{code}
*{color:#0747a6}#3{color}*
{code:java}
> 
8=FIXT.1.1|9=294|35=8|34=61|49=LMTSENDER|52=20211111-17:21:20.802|56=QUODFX_UAT|1=CLIENT_EXTERNAL|6=1.183|11=MO1211111172109242001|14=1000000|15=EUR|30=XQFX|31=1.183|32=1000000|38=1000000|39=2|40=D|44=1.183|54=1|59=3|64=20211115|75=20211111|120=USD|150=F|151=0|194=1.183|453=1|448=QUOD|447=D|452=1|1056=1183000|10=133|
{code}
start *QUOD.QFHICBC_External* instance";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-1257, PFX-3080;;QAP-3759;;Connect miniFix as a Listener (port 15101);"in gtw config put ip of your PC
(ipconfig)";Venues are priced;;
;;;;;;;;;;;;;;;Open Trading FE => Client RFQ tile=> and send an order to CLIENT1;check you created rule for External Check from Description;"Check that new order in Order Book has
Sts = PendingValidation";;
;;;;;;;;;;;;;;;Check miniFix;#1;"35=D is sent to MiniFix
tag 10051 = 1
tag 1816 = 1";;
;;;;;;;;;;;;;;;from MiniFix send execution report;#2;"Gateway_NewOrderReply is sent to ORS and order is executed.
Check in OrderBook that order is filled";;
;;;;;;;;;;;;;;;Check miniFix;#3;Check that ORS sends Gateway_ExecutionReport to gtw and to MiniFix;;
QAP-T2587;Outgoing External Check : ESP maker + AutoHedger;Specified;;"The workflow 
[https://support.quodfinancial.com/confluence/display/INTD/Connecting+a+gateway+for+external+validation]
!screenshot-1.png|thumbnail!
ors configuration


{code:java}

true

externalValidationGatewayRequests
externalValidationGatewayReplies

{code}
see *QAP-3396* for configuration

create rule for Risk Limits => *External Check* =>
!screenshot-5.png|thumbnail!
Also check counterparts:
!screenshot-2.png|thumbnail!
!screenshot-3.png|thumbnail!
!screenshot-4.png|thumbnail!

*Change Clearing Account Type:*
*Clients ->  CLIENT_EXTERNAL -> Clearing Account Type ->Firm*

*{color:#0747a6}#1{color}*

{color:#de350b}*+!!!+*{color}
{code:java}
> 
8=FIXT.1.1|9=357|35=D|34=56|49=LMTSENDER|52=20211111-17:19:55.712|56=QUODFX_UAT|1=CLIENT_EXTERNAL|11=MO1211111171955242001|15=EUR|21=1|22=8|38=1000000|40=2|44=1.183|48=EUR/USD|54=1|55=EUR/USD|59=4|60=20211111-17:19:57.247|63=0|64=20211115|120=USD|167=FXSPOT|207=XQFX|453=3|448=CLIENT1_EXTERNAL_ACC|447=D|452=38|448=QA1|447=D|452=12|448=QUOD|447=D|452=1|528=A|1816=2|10051=4|10=202|
{code}
*
*#2*

 
{code:java}
< 
8=FIXT.1.1|9=215|35=8|49=QUODFX_UAT|56=LMTSENDER|34=48|52=20211111-17:20:04|11=MO1211111171955242001|14=0|17=EXECID000158202103010000002439|37=ORDID000158202103010000002440|39=0|54=1|55=EUR/USD|150=0|151=0|583=MO1211111171955242001|10=181|
{code}
*{color:#0747a6}#3{color}*
{code:java}
> 
8=FIXT.1.1|9=294|35=8|34=57|49=LMTSENDER|52=20211111-17:20:03.048|56=QUODFX_UAT|1=CLIENT_EXTERNAL|6=1.183|11=MO1211111171955242001|14=1000000|15=EUR|30=XQFX|31=1.183|32=1000000|38=1000000|39=2|40=2|44=1.183|54=1|59=4|64=20211115|75=20211111|120=USD|150=F|151=0|194=1.183|453=1|448=QUOD|447=D|452=1|1056=1183000|10=131|
{code}
start *QUOD.QFHICBC_External* instance";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-1257;;QAP-3758;;Connect miniFix as a Listener (port 15101);"in gtw config put ip of your PC
(ipconfig)";Venues are priced;;
;;;;;;;;;;;;;;;Open Trading FE => Client Pricing Tile=> and send an order to CLIENT1;check you created rule for External Check from Description;"Check that new order in Order Book has
Sts = PendingValidation";;
;;;;;;;;;;;;;;;Check miniFix;#1;"35=D is sent to MiniFix
tag 10051 = 4
tag 1816 = 2";;
;;;;;;;;;;;;;;;from MiniFix send execution report with ClOrdID (tag 11);#2;"Gateway_NewOrderReply is sent to ORS and order is executed.
Check in OrderBook that order is filled";;
;;;;;;;;;;;;;;;Check miniFix;#3;Check that ORS sends Gateway_ExecutionReport to gtw and to MiniFix;;
QAP-T2588;Outgoing External Check : basic test (RFQ taker);Specified;;"The workflow 
[https://support.quodfinancial.com/confluence/display/INTD/Connecting+a+gateway+for+external+validation]
!screenshot-1.png|thumbnail!

see *QAP-3396* for configuration

create rule for Risk Limits => External Check =>
!screenshot-2.png|thumbnail!

*Change Clearing Account Type:*
*Clients -> ASPECT_DB -> Clearing Account Type = Institutional*

*{color:#0747a6}#1{color}*
{code:java}
> 
8=FIXT.1.1|9=269|35=D|34=46|49=LMTSENDER|52=20211111-17:17:30.464|56=QUODFX_UAT|1=ASPECT_DB|11=MO1211111171730242001|15=EUR|21=1|38=1000000|40=D|44=1.181887|48=EUR/USD|54=1|55=EUR/USD|59=3|60=20211111-17:17:31.992|63=0|64=20211115|117=24200000020|120=USD|167=FXSPOT|207=BNP-RFQ|1816=1|10051=2|10=149|
{code}
*{color:#0747a6}#2{color}*
{code:java}
< 
8=FIXT.1.1|9=215|35=8|49=QUODFX_UAT|56=LMTSENDER|34=41|52=20211111-17:17:39|11=MO1211111171730242001|14=0|17=EXECID000158202103010000002439|37=ORDID000158202103010000002440|39=0|54=1|55=EUR/USD|150=0|151=0|583=MO1211111171730242001|10=170|
{code}
*{color:#0747a6}#3{color}*
{code:java}
> 
8=FIXT.1.1|9=187|35=8|34=47|49=LMTSENDER|52=20211111-17:17:37.733|56=QUODFX_UAT|1=ASPECT_DB|11=MO1211111171730242001|14=0|30=BNP-RFQ|38=1000000|40=D|44=1.181887|60=20211111-17:17:37.731|150=A|151=1000000|10=010|
{code}
{code:java}
> 
8=FIXT.1.1|9=234|35=8|34=48|49=LMTSENDER|52=20211111-17:17:38.040|56=QUODFX_UAT|1=ASPECT_DB|11=MO1211111171730242001|14=0|30=BNP-RFQ|38=1000000|40=D|44=1.181887|58=implicit 
acknowledgement on first 
execution|60=20211111-17:17:38.032|150=0|151=1000000|10=125|
{code}
{code:java}
> 
8=FIXT.1.1|9=307|35=8|34=49|49=LMTSENDER|52=20211111-17:17:38.050|56=QUODFX_UAT|1=ASPECT_DB|6=1.181887|11=MO1211111171730242001|14=1000000|15=EUR|30=BNP-RFQ|31=1.181887|32=1000000|37=41|38=1000000|39=2|40=D|44=1.181887|54=1|59=3|60=20211111-17:17:38.000|64=20211115|75=20201021|120=USD|150=F|151=0|194=1.181887|1056=1181887|10=144|
{code}
{code:java}
> 
8=FIXT.1.1|9=203|35=8|34=50|49=LMTSENDER|52=20211111-17:17:38.071|56=QUODFX_UAT|1=ASPECT_DB|6=1.181887|11=MO1211111171730242001|14=1000000|30=BNP-RFQ|38=1000000|39=2|40=D|44=1.181887|60=20211111-17:17:38.048|150=3|151=0|10=217|
{code}
start *QUOD.QFHICBC_External* instance";/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;FXregression;;;PFX-1257, PFX-3080;;QAP-3757;;Connect miniFix as a Listener (port 15101);"in gtw config put ip of your PC
(ipconfig)";Venues are priced;;
;;;;;;;;;;;;;;;"Open Trading FE => RFQ taker => select ASPRECT_CITI as a client and press 
Send";;Quotes are received;;
;;;;;;;;;;;;;;;Send an order to CITIR venue;check you created rule for External Check from Description;"Check that new order in Order Book has
Sts = PendingValidation";;
;;;;;;;;;;;;;;;Check miniFix;#1;"35=D is sent to MiniFix
tag 10051 = 2
tag 1816 = 1";;
;;;;;;;;;;;;;;;from MiniFix send execution report;#2;"Gateway_NewOrderReply is sent to ORS and order is executed.
Check in OrderBook order is filled";;
;;;;;;;;;;;;;;;Check miniFix;#3;Check that ORS sends Gateway_ExecutionReport to gtw and to MiniFix;;
QAP-T2589;Interpolation: Explicitly Request Swap Points for Forward/Forward Swaps (unhealthy venue = true);Specified;;"1) ""AutoRFQClientPricingFallback"" = *Interpolation*
2) add {color:#57D9A3}*CITIR*{color} and {color:#57D9A3}*CITI*{color} and 
tick *{color:#57D9A3}Exclude When Unhealthy{color}* to true
!screenshot-2.png|thumbnail!
3) Reference Data => Venue => make CITI and CITIR as 
{color:#57D9A3}*unhealthy*{color} on purpose
!screenshot-3.png|thumbnail!
*{color:#0747A6}#1{color}*

{code:java}
< 
8=FIXT.1.1|9=268|35=R|49=QUOD5|56=QUODFX_UAT|34=83|52=20210407-07:17:47|131=111333409|146=1|55=EUR/USD|167=FXSWAP|54=2|38=1000000|64=20210409|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|624=2|587=W1|588=20210416|685=1000000|600=EUR/USD|609=FXFWD|624=1|587=W2|588=20210423|685=1000000|10=055|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, swapMM, SWED;;;PFX-749;;QAP-3747;;From MiniFix send swap RFQ;#1;QS receives request;;
;;;;;;;;;;;;;;;Check Dealer Intervention section on FE;;"The order has come to the DI with :
""no bid forward points for client tier `4' on EUR/USD WK2 on QUODFX"" on 
FreeNotes";;
QAP-T2590;Check update of settlement date with timezone;Specified;;"Check update of settlement date with following config in client_itktzus.xml 
:

17:00

With following config :

client_fztzus.xml :



${CFG_DIR}/${CFG_PREFIX}backend.xml
${CFG_DIR}/${CFG_PREFIX}fqs.xml
${CFG_DIR}/${CFG_PREFIX}itktzus.xml
${CFG_DEFAULT}/fs.xml


And start :

jstart 'Integration Toolkit Servers' ""${INSTANCE_ID:-ITKTZUS}"" 
${CFG_PREFIX}fstzus Start common.server

 

 

 

 

 

 ";/PFX/FX_Display;High - Must Have;FX_Display;FXregression;lzaharia;;;;QAP-3744;;On D1, configure ITKTZUS to follow the timezone and restart;;ITKTZUS restarted with new configuration;;
;;;;;;;;;;;;;;;On D2, look at ITK;;check that the ITKTZUS has triggered at the specified time;;
;;;;;;;;;;;;;;;Look at settlement dates;;On FE / DB, check that the settlement dates have updated correctly;;
QAP-T2591;FE Trading: check ESP Tile Support for Broken Date Orders (SOR);Automated;;"_Acceptance Criteria_
* Subscribe to Broken Date ESP FX market data through the FX ESP tile
** Select a broken date tenor for a given pair from the instrument 
drop-down
** When the selected instrument is not a broken date tenor, we should 
display the read-only settlement date like we do now
** When the selected instrument is a broken date tenor, we should change 
the settlement date to be a date picker, but let the user change to any 
date they want
*** The default value for the date picker can be null / blank, and no 
subscriptions need to be sent from the FE until a date is selected
*** The display of the date picker should be the same as the date pickers 
in the RFQ tile, hiding the border, only showing the drop-down arrow on 
mouse hover, etc.
* Change the tooltip on the settlement date control from ""Value Date"" to 
""Settle Date""
* Execute Broken Date FX SOR, DMA, VWAP, and TWAP orders through the 
trading FE order ticket.
* See broken date parent and child orders in the order blotter.
* See broken date trades in the trade blotter.
* See appropriate settlement date positions updated from broken date orders 
and trades.

*To see MarketData in ESP tile you should have Venue.SupportBrokenDateFeed 
= Y*

 

 

Preconditions:

Open FE=>Aggregates Rates=> Rates tile, Direct Venue Executions, 
AggregatesRates";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FX_ALGO, FXregression, needs_refactoring_FX;;;PFX-2393;;QAP-3742;;From ESP tile select instrument with tenor Broken;EUR/USD Broken;Instrument selected, settlement date change to a date picker;;
;;;;;;;;;;;;;;;Select some date from date from calendar;;Prices appear in TOB, Direct Venue Executions and Aggregates rates;;
;;;;;;;;;;;;;;;Send Sell Algo order;"Qty=3000000
Price<TOB
QuodMultilisting";Order sent and filled;;
;;;;;;;;;;;;;;;Check order book;;"Order Tenor is Broken,
child orders Tenor is Broken";;
;;;;;;;;;;;;;;;Check trades blotter;;Tenor is Broken;;
QAP-T2592;Explicitly Request Broken Date Swap Points (Manual Intervention);Automated;;"1) AutoRFQClientPricingFallback = *Manual Intervention* (Restart QS)
2) Add {color:#57D9A3}*CITI*{color} as only one Forward Venue (any ESP 
venue)
3) Auto RFQ Timeout (ms) =5000

*{color:#0747A6}#1{color}*
{code:java}
< 
8=FIXT.1.1|9=156|35=R|49=QUOD5|56=QUODFX_UAT|34=3|52=20210407-06:38:07|131=111333438|146=1|55=EUR/USD|167=FXFWD|537=1|54=1|38=1000000|64=20210415|63=B|15=EUR|1=CLIENT1|40=D|10=201|
{code}

*{color:#0747A6}#2{color}*

{code:java}
> 
8=FIXT.1.1|9=244|35=S|34=8|49=QUODFX_UAT|52=20210407-06:39:41.144|56=QUOD5|1128=9|1=CLIENT1|15=EUR|55=EUR/USD|62=20210407-06:44:41.126|117=01210407063931159002|131=111333439|133=1.1819498|134=1000000|135=1000000|167=FXFWD|188=0|190=1.18197|191=-0.0000202|460=4|10=148|
{code}
{color:#0747A6}*#3*{color}

{code:java}
< 
8=FIXT.1.1|9=212|35=D|49=QUOD5|56=QUODFX_UAT|34=8|52=20210407-06:39:59|1=CLIENT1|11=939104324|21=1|15=EUR|38=1000000|40=D|44=1.1921614|54=1|55=EUR/USD|59=3|60=20210407-06:39:59|63=B|64=20210415|167=FXFWD|117=01210407063931159002|10=126|
{code}
{color:#0747A6}*#4*{color}

{code:java}
> 
8=FIXT.1.1|9=530|35=8|34=10|49=QUODFX_UAT|52=20210407-06:40:00.215|56=QUOD5|1128=9|1=CLIENT1_1|6=1.1819498|11=939104324|14=1000000|15=EUR|17=EX1210407063959808002|21=1|22=8|31=1.1819498|32=1000000|37=MO1210407063959676002|38=1000000|39=2|40=D|44=1.1819498|48=EUR/USD|54=1|55=EUR/USD|59=3|60=20210407-06:39:59.981|63=B|64=20210415|75=20210407|100=XQFX|120=USD|150=F|151=0|167=FXFWD|194=1.18197|195=-0.0000202|207=XQFX|381=1181949.8|453=4|448=CLIENT1|447=D|452=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|854=0|10=114|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;BDA, FXregression;;;PFX-748;;QAP-3741;;From MiniFix send request (tenor=BDA);#1;request is sent and appeared in manual Dealer Intervention on Trading FE;;
;;;;;;;;;;;;;;;From DI send quote;#2;quote is appeared in QuoteBook and in MiniFix;;
;;;;;;;;;;;;;;;take quoteID (tag 117) and send an order;#3;order is send and filled with tenor BDA;;
;;;;;;;;;;;;;;;check MiniFix;#4;"Execution report with
150 ExecType F TRADE";;
QAP-T2593;Explicitly Request Broken Date Swap Points (Rejection);Automated;;"1) AutoRFQClientPricingFallback = *Rejection* (Restart QS)
2) Select only one Forward Venue (any venue *{color:#57D9A3}which doesn't 
work{color}*) or any ESP venues
3) Auto RFQ Timeout (ms) =5000 for RFQ venue
!screenshot-1.png|thumbnail!
*{color:#0747A6}#1{color}*
{code:java}
< 
8=FIXT.1.1|9=158|35=R|49=QUOD5|56=QUODFX_UAT|34=526|52=20210406-12:10:15|131=111333436|146=1|55=EUR/USD|167=FXFWD|537=1|54=1|38=1000000|64=20210414|63=B|15=EUR|1=CLIENT1|40=D|10=035|
{code}

*{color:#0747A6}#2{color}*

{code:java}
> 
8=FIXT.1.1|9=200|35=AG|34=689|49=QUODFX_UAT|52=20210406-12:10:14.718|56=QUOD5|1128=9|58=failed 
to get forward points through 
RFQ|131=111333436|146=1|55=EUR/USD|167=FXFWD|537=1|54=1|63=B|64=20210414|15=EUR|40=D|658=99|10=208|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;BDA, FX_fix, FXregression, refactored_FX, SWED;;;PFX-748;;QAP-3740;;From miniFix send request for Broken Date;#1;QS receives request and send to rfq's venue;;
;;;;;;;;;;;;;;;As QS doesn't manage to get swap point check in MiniFix 35=AG;#2;"Quote_Request_Reject (35=AG) is came with the reason:
failed to get forward points through RFQ";;
;;;;;;;;;;;;;;;Open Trading FE: Quote Request Book;NOT NECESSARY FOR TH2;"Status=Rejected
FreeNotes = failed to get forward points through RFQ
Tenor=Broken
VenueCategory=SingleBankPlatform";;
QAP-T2594;Explicitly Request Broken Date Swap Points (Interpolation);Automated;;"1) AutoRFQClientPricingFallback = *Interpolation*
2) Add {color:#57D9A3}*CITI*{color} as only one Forward Venue
*{color:#0747A6}#1{color}*
{code:java}
< 
8=FIXT.1.1|9=158|35=R|49=QUOD5|56=QUODFX_UAT|34=489|52=20210406-11:46:58|131=111333434|146=1|55=EUR/USD|167=FXFWD|537=1|54=1|38=1000000|64=20210414|63=B|15=EUR|1=CLIENT1|40=D|10=056|
{code}

*{color:#0747A6}#2{color}*

{code:java}
> 
8=FIXT.1.1|9=254|35=S|34=619|49=QUODFX_UAT|52=20210406-11:47:00.699|56=QUOD5|1128=9|1=CLIENT1|15=EUR|54=1|55=EUR/USD|62=20210406-11:48:57.523|63=B|64=20210414|117=01210406114657912002|131=111333434|133=1.182314|135=1000000|167=FXFWD|190=1.18233|191=-0.000016|460=4|537=1|10=085|
{code}

{color:#0747A6}*#3*{color}
{code:java}
< 
8=FIXT.1.1|9=212|35=D|49=QUOD5|56=QUODFX_UAT|34=450|52=20210406-11:28:44|1=CLIENT1|11=939104320|21=1|15=EUR|38=1000000|40=D|44=1.19874|54=1|55=EUR/USD|59=3|60=20210406-11:28:44|63=B|64=20210414|167=FXFWD|117=01210406112824912002|10=093|

{code}

*{color:#0747A6}#4{color}*

{code:java}
> 
8=FIXT.1.1|9=525|35=8|34=622|49=QUODFX_UAT|52=20210406-11:47:17.232|56=QUOD5|1128=9|1=CLIENT1_1|6=1.182264|11=939104321|14=1000000|15=EUR|17=EX1210406114717780002|21=1|22=8|31=1.182264|32=1000000|37=MO1210406114717644002|38=1000000|39=2|40=D|44=1.182264|48=EUR/USD|54=1|55=EUR/USD|59=3|60=20210406-11:47:17.192|63=B|64=20210414|75=20210406|100=XQFX|120=USD|150=F|151=0|167=FXFWD|194=1.18228|195=-0.000016|207=XQFX|381=1182264|453=4|448=CLIENT1|447=D|452=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|854=0|10=031|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;BDA, FXregression, refactored_FX, SWED;;;PFX-748;;QAP-3739;;From miniFix send request for Brocken Date;#1;QS receives request and send to rfq's venue;;
;;;;;;;;;;;;;;;Receiving quote send BDA order;"#2
#3";orders is sent and filled;;
;;;;;;;;;;;;;;;miniFix receives 35=8;#4;"check
ExecType=F
OrdStatus=2";;
;;;;;;;;;;;;;;;On Trading FE => Quote Request Book;NOT NECESSARY FOR TH2;"only one request for SingleBankPlatform (QUODFX) is appeared in Quote 
Request Book.
Tenor = Broken
QuoteStatus = Filled";;
;;;;;;;;;;;;;;;On Trading FE => Order Book;NOT NECESSARY FOR TH2;"OrderBook:
ExecSts=Filled
InstrType=FXForwad
Tenor = Broken";;
QAP-T2595;Reject: Explicitly Request Swap Points for Forward/Forward Swaps (over max qty);Automated;;"*{color:#0747A6}1){color}* ""AutoRFQClientPricingFallback"" = *Rejection*
*{color:#0747A6}2){color}* prepare client adding ESP venue in FORWARD VENUE 
section:
!screenshot-2.png|thumbnail!
*{color:#0747A6}#1{color}*

{code:java}
< 
8=FIXT.1.1|9=267|35=R|49=QUOD5|56=QUODFX_UAT|34=455|52=20210602-15:32:12|131=111333482|146=1|55=EUR/USD|167=FXSWAP|38=40100000|64=20210604|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|624=1|587=W1|588=20210611|685=40100000|600=EUR/USD|609=FXFWD|624=2|587=W2|588=20210618|685=40100000|10=030|
{code}
*{color:#0747A6}#2{color}*

{code:java}
> 
8=FIXT.1.1|9=516|35=S|34=1791|49=QUODFX_UAT|52=20210602-15:32:49.220|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20210602-15:37:49.206|117=01210602153249621002|131=111333482|167=FXSWAP|188=1.18193|190=1.18193|460=4|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=1|685=40100000|587=W1|588=20210611|681=1.181853|684=1.181673|1067=-0.000077|1068=-0.000257|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=2|685=40100000|587=W2|588=20210618|681=1.181713|684=1.182763|1067=-0.000217|1068=0.000833|1065=0.00004|1066=0.00091|1166=01210602153249621002|10=152|
{code}

{quote}Ben Ernest-Jones, 22 Apr, 18:58
Yes
I would still expect that to initially go to DI, and then send RFQ to 
venues.

Vivien Le Poupon, 22 Apr, 19:00
for a DI, the QS doesn't look at the fallback (if it's Reject, it will not 
reject the estimation request), it always interpolates (or tries to)
{quote}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX, swapMM;;;PFX-749;;QAP-3735;;"From MiniFix send swap RFQ
without side
CCY1
qty = 40100000
W1/W2";#1;"QS receives request.
Request goes to DI";;
;;;;;;;;;;;;;;;Open DI window , estimate quote and send to the client;#2;client interface receives 35=S;;
QAP-T2596;Explicitly Request Broken Date Swap Points basic test;Automated;;"1) AutoRFQClientPricingFallback = *Interpolation* (restart QS)
2) Add {color:#57D9A3}*CITIR*{color} as Forward Venue
*{color:#0747A6}#1{color}*
{code:java}
< 
8=FIXT.1.1|9=158|35=R|49=QUOD5|56=QUODFX_UAT|34=419|52=20210406-11:17:07|131=111333429|146=1|55=EUR/USD|167=FXFWD|537=1|54=1|38=1000000|64=20210414|63=B|15=EUR|1=CLIENT1|40=D|10=045|
{code}

*{color:#0747A6}#2{color}*

{code:java}
> 
8=FIXT.1.1|9=253|35=S|34=496|49=QUODFX_UAT|52=20210406-11:18:12.958|56=QUOD5|1128=9|1=CLIENT1|15=EUR|54=1|55=EUR/USD|62=20210406-11:20:11.844|63=B|64=20210414|117=01210406111811912002|131=111333430|133=1.182539|135=1000000|167=FXFWD|190=1.18219|191=0.000349|460=4|537=1|10=034|
{code}

{color:#0747A6}*#3*{color}

{code:java}
< 
8=FIXT.1.1|9=76|35=Z|49=QUOD5|56=QUODFX_UAT|34=424|52=20210406-11:18:28|131=111333430|298=4|10=041|
{code}
*{color:#0747A6}#4{color}*

{code:java}
< 
8=FIXT.1.1|9=212|35=D|49=QUOD5|56=QUODFX_UAT|34=450|52=20210406-11:28:44|1=CLIENT1|11=939104320|21=1|15=EUR|38=1000000|40=D|44=1.19874|54=1|55=EUR/USD|59=3|60=20210406-11:28:44|63=B|64=20210414|167=FXFWD|117=01210406112824912002|10=093|

{code}

*{color:#0747A6}#5{color}*

{code:java}
> 
8=FIXT.1.1|9=524|35=8|34=581|49=QUODFX_UAT|52=20210406-11:28:43.415|56=QUOD5|1128=9|1=CLIENT1_1|6=1.182455|11=939104320|14=1000000|15=EUR|17=EX1210406112843780002|21=1|22=8|31=1.182455|32=1000000|37=MO1210406112843644002|38=1000000|39=2|40=D|44=1.182455|48=EUR/USD|54=1|55=EUR/USD|59=3|60=20210406-11:28:43.348|63=B|64=20210414|75=20210406|100=XQFX|120=USD|150=F|151=0|167=FXFWD|194=1.18209|195=0.000365|207=XQFX|381=1182455|453=4|448=CLIENT1|447=D|452=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|854=0|10=000|

{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;BDA, FXregression, needs_refactoring_FX;;;PFX-748;;QAP-3734;;From miniFix send request for Broken Date;#1;QS receives request and send to rfq's venue;;
;;;;;;;;;;;;;;;MiniFix receives quotes;#2;35=S;;
;;;;;;;;;;;;;;;On Trading FE => Quote Request Book;;"TWO request must appear in QuoteReqBook (see attached)
QuoteStatus (QUODFX) = Accepted
Tenor=Broken

Status for CITIR will be Terminated if supporttermquoterequest = Y";;
;;;;;;;;;;;;;;;From MiniFix send Quote Cancel 35=Z;#3;QS stop sending quotes;;
;;;;;;;;;;;;;;;On Trading FE => Quote Request Book;;"request(QUODFX):
Tenor = Broken
Status = Terminated
QuoteStatus = Canceled
request(CITIR):
Tenor = Broken
QuoteStatus = empty";;
;;;;;;;;;;;;;;;From miniFix send request for Broken Date;;QS receives request and send to rfq's venue;;
;;;;;;;;;;;;;;;Received quote send a Previously Quoted Order;#4;"Order is sent and filled
QS stop sending quotes";;
;;;;;;;;;;;;;;;miniFix receives 35=8;#5;"check
ExecType=F
OrdStatus=2";;
;;;;;;;;;;;;;;;On Trading FE => Quote Request Book and Order Book;;"Quote Request Book (QUODFX):
QuoteStatus=Filled
Status=Terminated
Tenor=Broken
request (CITIR):
QuoteStatus = empty
OrderBook:
ExecSts=Filled
InstrType=FXForwad
Tenor = Broken";;
QAP-T2597;Manual Intervention: Explicitly Request Swap Points for Forward/Forward Swaps (ccy1, under max qty);Automated;;"in DB
*{color:#0747A6}1){color}* ""quodsettings.AutoRFQClientPricingFallback"" = 
*Manual Intervention*

*{color:#0747A6}2){color}*
prepare client without rfq's venues, but add only ESP venue in *FORWARD 
VENUE* section:
!screenshot-1.png|thumbnail!

{color:#0747A6}*#1*{color}
{code:java}
< 
8=FIXT.1.1|9=252|35=R|49=QUOD5|56=QUODFX_UAT|34=471|52=20210430-10:58:50|131=111333464|146=1|55=EUR/USD|167=FXSWAP|38=1000000|64=20210504|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|587=W1|588=20210511|685=1000000|600=EUR/USD|609=FXFWD|587=W2|588=20210518|685=1000000|10=100|
{code}
*{color:#0747A6}#2{color}*

{code:java}
> 
8=FIXT.1.1|9=471|35=S|34=489|49=QUODFX_UAT|52=20210430-10:58:56.065|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20210430-11:03:56.051|117=01210430105849261002|131=111333464|167=FXSWAP|188=1.18217|190=1.18217|460=4|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|685=1000000|587=W1|588=20210511|681=1.182172|684=1.182172|1067=0.000002|1068=0.000002|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|685=1000000|587=W2|588=20210518|681=1.1822|684=1.18215|1067=0.00003|1068=-0.00002|1065=0.000028|1066=-0.000022|10=222|
{code}

{color:#0747A6}*#3*{color}

{code:java}
> 
8=FIXT.1.1|9=218|35=AG|34=1772|49=QUODFX_UAT|52=20210602-15:25:01.137|56=QUOD5|1128=9|58=failed 
to get forward points through RFQ - manual intervention 
required|131=111333481|146=1|55=EUR/USD|167=FXSWAP|537=1|64=20210604|15=EUR|658=99|10=102|

{code}

{color:#0747A6}*#4*{color}

{code:java}
> 
8=FIXT.1.1|9=122|35=Z|34=1773|49=QUODFX_UAT|52=20210602-15:25:01.140|56=QUOD5|1128=9|117=0|131=111333481|295=1|55=EUR/USD|167=FXSWAP|298=5|10=007|

{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, swapMM, SWED;;;PFX-749;;QAP-3721;;"Send swap rfq to client where we don't configure rfq's venue
without side
15 = CCY1";"#1
TH2:
Client: Argentina1
Instrument: EUR/GBP
Swap: WK1/WK2
Venue: CITI";request is sent. No quotes are sent in reply;;
;;;;;;;;;;;;;;;Check Quote Request Book on FE;RFQ was failed and request went to DI;Request is appeared in QuoteRequestBook and in Manual DI;;
;;;;;;;;;;;;;;;Estimate and send quote from DI;#2;quote 35=S was sent to miniFix;;
;;;;;;;;;;;;;;;From DI Reject quote and check Check MiniFix;"#3
#4";Quote is rejected and 35=AG was sent to client and 35=Z;;
QAP-T2598;Reject: Explicitly Request Swap Points for Forward/Forward Swaps (under max qty);Automated;;"*{color:#0747A6}1){color}* ""AutoRFQClientPricingFallback"" = *Rejection*
!screenshot-1.png|thumbnail!
*{color:#0747A6}2){color}*
prepare client without rfq's venues, but add only *ESP* venue in *FORWARD 
VENUE* section:
!screenshot-2.png|thumbnail!
{color:#0747A6}*3)*{color}

{code:java}
< 
8=FIXT.1.1|9=268|35=R|49=QUOD5|56=QUODFX_UAT|34=76|52=20210402-10:46:26|131=939104314|146=1|55=EUR/USD|167=FXSWAP|54=2|38=1000000|64=20210405|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|624=2|587=W1|588=20210413|685=1000000|600=EUR/USD|609=FXFWD|624=1|587=W2|588=20210420|685=1000000|10=044|

{code}

{color:#0747A6}*4)*{color}
{code:java}
> 
8=FIXT.1.1|9=191|35=AG|34=328|49=QUODFX_UAT|52=20210402-10:51:47.923|56=QUOD5|1128=9|58=failed 
to get forward points through 
RFQ|131=939104318|146=1|55=EUR/USD|167=FXSWAP|537=1|54=2|64=20210406|15=EUR|658=99|10=108|

{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, refactored_FX, SWED;;;PFX-749;;QAP-3720;;Send swap rfq to client where we don't configure rfq's venue;"msg 3)
qty=1000000 (under max limit)";"request is appeared in QuoteRequestBook with status rejected
""failed to get forward points through RFQ""";;
;;;;;;;;;;;;;;;check client interface;msg 4);miniFix receives rejection 35=AG;;
QAP-T2599;Validation of currecy pair input in taker rfq tile;Automated;;Checkin attached bug;/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;FXregression, refactored_FX;kbrit;;PFX-3193;;QAP-3711;;Open Taker RFQ tile and enter incorrect currency pair and pres Enter;tst/tst;"because of incorrect input in currency pair input field would be previous 
currency pair(AUD/BRL by default)";;
;;;;;;;;;;;;;;;Try enter new currency pair;EUR/USD;"After first mistake default currency would be selected and new input delite 
previos text by first char";;
QAP-T2600;RFQ_MM:Client Pricing Tile: Request For Quote on behalf of client (basic test);Automated;;"FE send to ORS => QSFE
client_routing.xml QSFE
QuotingSessionID = 2
add ESP venues
!screenshot-2.png|thumbnail!

also to check PFX-3282 task";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, refactored_FX;;;PFX-219, PFX-3534;;QAP-3704;;Open Trading FE => RFQ MM tile and send a request;"quod308:
CLIENT1
tenor Spot
tier: Gold_Day
qty=1000000";"request is sent
quote is received in reply";;
;;;;;;;;;;;;;;;Check that at the newest versions highlighting of the best pts is disabled;;Best pts is not highlighted;;
;;;;;;;;;;;;;;;Press on BUY TOB;;"order is executed
tenor=Spot
side=buy
qty=1000000
venue=QUODFX
OrdType=PreviouslyQuoted

TIMER is stop and cleared
SPREAD is cleared";;
;;;;;;;;;;;;;;;Open Trading FE => RFQ MM tile and send a request;"quod308:
CLIENT1
tenor W1
tier: Gold_Day
qty=2000000";"request is sent
quote is received in reply";;
;;;;;;;;;;;;;;;Press on SELL on venue row (not TOB);;"order is executed
tenor=1W
side=sell
qty=2000000
venue=QUODFX
OrdType=PreviouslyQuoted

TIMER is stop and cleared
SPREAD is cleared";;
;;;;;;;;;;;;;;;Open Trading FE => RFQ MM tile and send an order with big qty;"quod308:
CLIENT1
tenor Spot
tier: Gold_Day
qty=33000000";"request is sent
into DI";;
;;;;;;;;;;;;;;;Estimate and send quote;;quote is displayed on RFQ tile;;
;;;;;;;;;;;;;;;Execute order pressed by TOP BUY;;"order is executed
tenor=Spot
side=buy
qty=33000000
venue=QUODFX
OrdType=PreviouslyQuoted

TIMER is stop and cleared
SPREAD is cleared";;
QAP-T2601;Check ClientScenarioID  in execution report (fix);Automated;;"Open FE=> Aggregated Rates => ESP tile

Connect from miniFIX to *10.0.22.77:14064* (ESP component on 
quod308@mercury) 

Check in DB in table *Scenario* that algorithm have *clientscenarioid*
*!screenshot-1.png|thumbnail!*

*35=8*
{code:java}
> 
8=FIXT.1.1|9=654|35=8|34=1644|49=QUODFX_UAT|52=20210607-10:10:22.377|56=QUOD5|1128=9|1=ASPECT_CITI1|6=1.18201|11=AO1210607101021103002|14=5000000|15=EUR|17=EV1210607101022171002|21=2|22=8|30=MS|31=1.18201|32=5000000|37=AO1210607101021103002|38=5000000|39=2|40=2|44=1.1821|48=EUR/USD|54=1|55=EUR/USD|59=4|60=20210607-10:10:22.197|63=B|64=20210609|75=20210607|100=BARC-SW;BNP-SW;CITI-SW;D3;DB-SW;EBS-CITI;FM-CITI;GS-SW;HSBC;JPM-SW;MS-SW;RTSL-CITI;STA-SW|120=USD|150=F|151=0|167=FXSPOT|194=1.18201|198=O20210607L1NY2000016018|207=EBS-CITI|381=5910050|453=2|448=CITIPB|447=D|452=79|448=ostronov|447=D|452=36|460=4|527=E20210607L1NY2000029212|847=1008|854=1|5053=0|10014=1555|10=063|{code}
10014=1555";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;PFX-2708;;QAP-3694;;From ESP tile or from fix send new algo order;FROM FIX FOR TH2;Order sent and filled;;
;;;;;;;;;;;;;;;Check BE logs;;"Execution report should contain
ClientScenarioID";;
;;;;;;;;;;;;;;;Check execution report in miniFIX;;execution report should contain tag 10014;;
QAP-T2602;Check that user receive drop-copy of FX MM Trades;Specified;;"Connect from miniFIX to *10.0.22.77:14064* (ESP component on 
quod308@mercury) ";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-2322;;QAP-3693;;Edit configuration of ors.xml;true;config saved;;
;;;;;;;;;;;;;;;Open FE=>Client Pricing Tile=>send new order single;;Order sent and filled;;
;;;;;;;;;;;;;;;Check Trades blotter;;Trades blotter has two executions, for external and internal;;
;;;;;;;;;;;;;;;Check execution report received on miniFIX;;"received 2 execution reports with two ExecId, one for Internal, second for 
Eexternal";;
QAP-T2603;interpolation: Explicitly Request Swap Points for Forward/Forward Swaps (ccy1/buy/even/rfq_failed);Automated;;"First, I think one important detail is that the mechanism described in the 
present Story (PFX-749) and the one for Broken Dates (PFX-748) replaces 
what's described in PFX-747. So, the QS would sometimes have to send RFQs 
of its own in order to get forward points instead of getting them from 
market data. In other words, forwards points in market data aren't actually 
required to test this Story.
Note that if its RFQs fail for one reason or another, the QS falls back on 
market data (which explains why it did that in your case, shown in your 
SECOND question).
*{color:#FFAB00}WORKFLOW: quod308@mercury{color}*
the quote request goes to a venue (so ORS -> ES (ESFSSR) -> buy-side 
gateway (FIXFSSRFQP) -> venue) as in the Taker workflow
the venue sends back the quote containing the forward points
the way back is venue -> buy-side gateway (FIXFSSRFQP) -> ES (ESFSSR) -> 
ORS -> QS
to test this, you don't need market data for forward tenors

*AutoRFQClientPricingFallback=Interpolation*

1) Add working ESP venue to forward tab
!screenshot-1.png|thumbnail!
{color:#0747A6}*#1*{color}

{code:java}
< 
8=FIXT.1.1|9=269|35=R|49=QUOD5|56=QUODFX_UAT|34=758|52=20210429-14:15:57|131=111333435|146=1|55=EUR/USD|167=FXSWAP|54=1|38=1000000|64=20210503|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|624=2|587=W1|588=20210510|685=1000000|600=EUR/USD|609=FXFWD|624=1|587=W2|588=20210517|685=1000000|10=106|
{code}

{color:#0747A6}*#2*{color}
{code:java}
> 
8=FIXT.1.1|9=521|35=S|34=806|49=QUODFX_UAT|52=20210429-14:15:57.164|56=QUOD5|1128=9|15=EUR|54=1|55=EUR/USD|62=20210429-14:17:57.097|64=20210503|117=01210429141557108002|131=111333435|133=-0.00002|135=1000000|167=FXSWAP|188=1.18223|190=1.18223|460=4|537=1|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=2|685=1000000|587=W1|588=20210510|681=1.182238|684=1.182238|1067=0.000008|1068=0.000008|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=1|685=1000000|587=W2|588=20210517|681=1.182258|684=1.182218|1067=0.000028|1068=-0.000012|1066=-0.00002|10=242|
{code}

{color:#0747A6}*#3*{color}

{code:java}
< 
8=FIXT.1.1|9=289|35=AB|49=QUOD5|56=QUODFX_UAT|34=759|52=20210429-14:16:13|1=CLIENT1|11=650118350|15=EUR|38=1000000|40=D|54=1|55=EUR/USD|59=4|60=20210429-14:16:13|117=01210429141557108002|167=FXSWAP|460=4|555=2|600=EUR/USD|609=FXFWD|654=1|587=W1|588=20210510|600=EUR/USD|609=FXFWD|654=1|587=W2|588=20210517|10=114|
{code}

{color:#0747A6}*#4*{color}

{code:java}
> 
8=FIXT.1.1|9=746|35=8|34=809|49=QUODFX_UAT|52=20210429-14:16:12.825|56=QUOD5|1128=9|1=CLIENT1_1|6=-0.00002|11=650118350|14=1000000|15=EUR|17=EX1210429141612960001|21=1|31=-0.00002|32=1000000|37=MO1210429141612896001|38=1000000|39=2|40=D|54=1|55=EUR/USD|59=4|60=20210429-14:16:12.768|63=0|64=20210503|75=20210429|100=XQFX|120=USD|150=F|151=0|167=FXSWAP|194=1.18223|381=-20|453=4|448=CLIENT1|447=D|452=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|555=2|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=2|685=1000000|587=W1|588=20210510|637=1.182238|1073=0.000008|1418=1000000|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=1|685=1000000|587=W2|588=20210517|637=1.182218|1073=-0.000012|1418=1000000|854=0|1071=-0.00002|10=061|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, refactored_FX, SWED;;;PFX-2286, PFX-749;;QAP-3689;;"From MiniFix send swap request
EUR/USD with tag 15=EUR
side=BUY
NearLegQty=1000000
FarLegQty=1000000
NearSettlType=WK1
NearSettlType=WK2";#1;request is send;;
;;;;;;;;;;;;;;;Check miniFix;"#2
RFQ must failed and QS does interpolation on CITI venue
check log in future with TH2";"1)MiniFix receives quote
Check each leg has tag 624 with different side
FarLegSide=request side
tag 15 = EUR";;
;;;;;;;;;;;;;;;From miniFix send an order multiLeg 35=AB BUY without tag 44;#3;Order is send;;
;;;;;;;;;;;;;;;Check miniFix;#4;"1)MiniFix receives Execution report:
39=2 FILLED
150=F TRADE
Order must be executed with price = 1066 (OfferSwapPoints ) for BUY";;
QAP-T2604;Check new names for columns in Order/Trade blotter;Manual;;;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-3160;;QAP-3674;;Send and fill new order;;Order filled;;
;;;;;;;;;;;;;;;In Order book check that field has new name;"""ClientGroupName"" => ""Client Group Name""
""Client"" => ""Client ID""
""ClientName"" => ""Client Name""
""ClientDesc"" => ""Client Desc""";Names changed;;
;;;;;;;;;;;;;;;In Trade book check that field has new name;"Client -> Client ID

ClientName -> Client Name";Names changed;;
QAP-T2605;Client Pricing Engine: Publish Direct Pass-Through Core Spot Price: Tier level;Automated;;"Set Core Spot Price Strategy to Direct for whole tier
!screenshot-3.png|thumbnail!
Prepare client tier with only one venue HSBC and the following bands:
!screenshot-1.png|thumbnail!
!screenshot-2.png|thumbnail!
MD From MiniFix to HSBC venue:
*{color:#0747A6}#1{color}*
{code:java}
< 
8=FIXT.1.1|9=671|35=W|49=TEST|56=MARKETDATA|34=2|52=20210322-15:07:03|262=EUR/USD:SPO:REG:HSBC_2|55=EUR/USD|64=SP|268=6|269=0|290=1|270=1.19500|271=1000000|273=20210322-15:07:03|15=EUR|282=HSBC|64=20210324|269=1|290=1|270=1.19500|271=1000000|273=20210322-15:07:03|15=EUR|282=HSBC|64=20210324|269=0|290=2|270=1.19450|271=6000000|273=20210322-15:07:03|15=EUR|282=HSBC|64=20210324|269=1|290=2|270=1.19600|271=6000000|273=20210322-15:07:03|15=EUR|282=HSBC|64=20210324|269=0|290=3|270=1.19400|271=12000000|273=20210322-15:07:03|15=EUR|282=HSBC|64=20210324|269=1|290=3|278=pF0S70Ub00002FDZQK4fAwpGL79DgAwpGL7q6hAwpGL71|270=1.19700|271=12000000|273=20210322-15:07:03|15=EUR|282=HSBC|64=20210324|10=053|

{code}


*{color:#0747A6}#2{color}*

{code:java}
< 
8=FIXT.1.1|9=777|35=W|49=TEST|56=MARKETDATA|34=2|52=20210322-17:02:44|262=1545|55=EUR/USD|64=SP|268=6|269=0|290=1|270=1.19500|271=1000000|273=20210322-17:02:44|15=EUR|282=HSBC|64=20210324|269=1|290=1|270=1.19500|271=1000000|273=20210322-17:02:44|15=EUR|282=HSBC|64=20210324|269=0|290=2|270=1.19450|271=6000000|273=20210322-17:02:44|15=EUR|282=HSBC|64=20210324|269=1|290=2|270=1.19600|271=6000000|273=20210322-17:02:44|15=EUR|282=HSBC|64=20210324|269=0|290=3|270=1.19400|271=12000000|273=20210322-17:02:44|15=EUR|282=HSBC|64=20210324|269=1|290=3|270=1.19700|271=12000000|273=20210322-17:02:44|15=EUR|282=HSBC|64=20210324|269=0|290=4|270=1.19350|271=13000000|273=20210322-17:02:44|15=EUR|282=HSBC|64=20210324|269=1|290=4|270=1.19800|271=13000000|273=20210322-17:02:44|15=EUR|282=HSBC|64=20210324|10=250|

{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, needs_refactoring_FX;;;PFX-1326;;QAP-3661;;"From TH2 sends REST API request to change Core Spot Price Strategy to 
DIRECT";;;;
;;;;;;;;;;;;;;;From MiniFix send MD;#1;MD is displayed on ESP tile;;
;;;;;;;;;;;;;;;On FE Trading Client Pricing Tile;;"When constructing a ""Direct"" spot core price, use a price ordered 
aggregation of the specified Spot Venues and use each volume level's 
quantity and price 1-1 exactly as it is presented from the market venues";;
;;;;;;;;;;;;;;;"From MiniFix send MD
(more volume bands exist from the market than we have Sweepable Quantities 
configured)";#2;"MD is displayed on ESP tile.
Margins are applied to the levels that we have configured as Sweepable 
Quantities, otherwise publish with no additional margins";;
;;;;;;;;;;;;;;;Open Tier tab;;"Despite the fact that we have only 1M qty for swappable,
we should only calculate the volume bands that are possible to derive from 
the sweepable book with sufficient quantity in both the bids and asks";;
;;;;;;;;;;;;;;;"From TH2 sends REST API request to change Core Spot Price Strategy to 
INITIAL VALUE";;;;
QAP-T2606;Manual handling of quote when bands are  not published;Automated;;"Having 1M and 2M available on the tile => From WebAdmin go to ClientTier, 
select Client and modify the instrument: make all bands Publish = False 
except 1M.


*{color:#0747A6}#1{color}* *35=R*
{code:java}
< 
8=FIXT.1.1|9=143|35=R|49=QUOD5|56=QUODFX_UAT|34=414|52=20210415-10:03:28|131=1113331133|146=1|55=EUR/USD|167=FXSPOT|537=1|38=2000000|63=0|15=EUR|1=CLIENT1|40=D|10=141|
{code}
*{color:#0747A6}#2{color}* *35=S*
{code:java}
> 
8=FIXT.1.1|9=237|35=S|34=441|49=QUODFX_UAT|52=20210415-10:04:40.571|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20210415-10:09:40.548|117=01210415100440454002|131=1113331133|132=1.18134|133=1.1826|134=2000000|135=1000000|167=FXSPOT|188=1.18134|190=1.1826|460=4|10=216|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-2952;;QAP-3646;;"From miniFIX send RFQ
qty=2000000
Spot";#1;Quote req appears in DI;;
;;;;;;;;;;;;;;;go to DI , Estimate and Send quote to the client;see description 35=S;Prices appears in client interface;;
QAP-T2607;ESP: Default options for order ticket for 1-Click (Aggressive Algo);Automated;;"
";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;;;QAP-3644;;"Open Options => Order Ticket and fill all values as on the screen .
Save changes";;;;
;;;;;;;;;;;;;;;Activate 1-Click and send Algo order from TOB;;"Check that all value from Options are applied for order :
OrdType ; Limit
TIF: FillOrKill
Strategy:Hedging_Test";;
QAP-T2608;Piloted RFQ tile displays Broken date in tile when order is selected;Specified;;;/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;FXregression;;;PFX-2958;;QAP-3641;;Submit FX Care order (EUR/USD, FXForward, SettlDate=BrokenDate).;;Order is placed in order book;;
;;;;;;;;;;;;;;;Open an RFQ tile.;;RFQ tile is opened;;
;;;;;;;;;;;;;;;Ensure RFQ tile is piloted by order blotter;;;;
;;;;;;;;;;;;;;;EUR/USD order (BDA) in order blotter;see .gif;"Check that date on RFQ tile (top right corner in RFQ tile) has been changed 
to Brocken date";;
QAP-T2609;Synthetic stop creating algo multilisted orders;Automated;;"The aim of this algo is to create a synthetic with a stop price, which will 
trigger an algo mutilisted order when the stop price is reached :

Buy order : ask price > stop price

Sell order : bid price < stop price

The settings in the FE order entry are the following :

!image-2021-03-18-13-49-05-017.png!
* stop price must be lower than trigger price for a buy
* stratey is synthetic ordertype
* child strategy is multilisting

  !screenshot-2.png|thumbnail!";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FX_ALGO, FXregression, refactored_FX;lzaharia;;PFX-1918;;QAP-3636;;"Create a buy synthetic order with details above :
price must be much higher than best ask
stop price must be lower than best ask";;"Check that order is created and executed :
a child algo order is created and executed";;
;;;;;;;;;;;;;;;"Create a buy synthetic order with details above :
price must be much higher than best ask
stop price must be a little bit higher than best ask";;"Check that order is created and placed on the market :
A child algo order will be created only if the best ask becomes greater 
than the stop price";;
;;;;;;;;;;;;;;;"Create a sell synthetic order with details above :
price must be much lower than best bid
stop price must be higher than best bid";;"Check that order is created and executed :
a child algo order is created and executed";;
;;;;;;;;;;;;;;;"Create a sell synthetic order with details above :
price must be much lower than best bid
stop price must be a little bit lower than best bid";;"Check that order is created and placed on the market :
A child algo order will be created only if the best bid becomes lower than 
the stop price";;
QAP-T2610;Check new Action in FX Order Blotter;Manual;;"*Precondition:*

Open FE=> Order Blotter, ESP Tile";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-3025;;QAP-3615;;From ESP Tile send new algo-order;;New order appeared in Order Book;;
;;;;;;;;;;;;;;;RMC on single order in Order Book and check new actions;;New action appeared;;
;;;;;;;;;;;;;;;Select several orders and RMC on them, check ne actions;;New actions appeared;;
QAP-T2611;Submit and trade uneven swap auto-quoted RFQ from FX Client interface(s) (spot-fwd);Automated;;"This test validated PFX-229

It is done with ccy1 with a small quantity to have an automatic quote
Add ESP venues to Forwad Tab to ClientTier => Instrument
according with PFX-749
{code:java}
< 
8=FIXT.1.1|9=271|35=R|49=QUOD5|56=QUODFX_UAT|34=623|52=20210709-13:04:21|131=111333451|146=1|55=EUR/USD|167=FXSWAP|54=1|38=1000000|64=20210713|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXSPOT|624=2|587=SPO|588=20210713|685=1000000|600=EUR/USD|609=FXFWD|624=1|587=W1|588=20210720|685=2000000|10=032|
{code}
{code:java}
8=FIXT.1.1|9=529|35=S|34=693|49=QUODFX_UAT|52=20210709-13:04:45.468|56=QUOD5|1128=9|15=EUR|54=1|55=EUR/USD|62=20210709-13:06:20.308|64=20210713|117=01210709130445760002|131=111333451|133=-0.000015|135=1000000|167=FXSWAP|188=1.18192|190=1.18202|460=4|537=1|555=2|600=EUR/USD-SPO-QUODFX|602=EUR/USD|603=8|616=XQFX|624=2|685=1000000|587=0|588=20210713|681=1.18202|684=1.18192|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=1|685=2000000|587=W1|588=20210720|681=1.181945|684=1.182005|1067=0.000025|1068=-0.000015|1066=-0.000015|1166=01210709130445760002|10=142|
{code}
{code:java}
< 
8=FIXT.1.1|9=288|35=AB|49=QUOD5|56=QUODFX_UAT|34=625|52=20210709-13:05:04|1=CLIENT1|11=555287392|15=EUR|38=1000000|40=D|54=1|55=EUR/USD|59=4|60=20210709-13:05:04|117=01210709130445760002|167=FXSWAP|460=4|555=2|600=EUR/USD|609=FXSPOT|654=1|587=0|588=20210713|600=EUR/USD|609=FXFWD|654=1|587=6|588=20210720|10=048|
{code}
{code:java}
> 
8=FIXT.1.1|9=784|35=8|34=698|49=QUODFX_UAT|52=20210709-13:05:03.292|56=QUOD5|1128=9|1=CLIENT1_1|6=-0.000015|11=555287392|14=1000000|15=EUR|17=EX1210709130503212001|21=1|22=8|31=-0.000015|32=1000000|37=MO1210709130503198001|38=1000000|39=2|40=D|48=EUR/USD|54=1|55=EUR/USD|59=4|60=20210709-13:05:03.230|63=0|64=20210713|75=20210709|100=XQFX|120=USD|150=F|151=0|167=FXSWAP|194=1.18202|207=XQFX|381=-15|453=4|448=CLIENT1|447=D|452=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|555=2|600=EUR/USD-SPO-QUODFX|602=EUR/USD|603=8|609=FXSPOT|616=XQFX|624=2|685=1000000|587=0|588=20210713|637=1.18202|1418=1000000|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=1|685=2000000|587=W1|588=20210720|637=1.182005|1073=-0.000015|1418=2000000|854=0|1071=-0.000015|5055=20210713|10=121|

{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, refactored_FX, swapMM, SWED;;;;;QAP-3610;;"From miniFix interface, send a RFQ for a swap Spot/Fwd with 2 different 
quantities : 1M and 2M";;RFQ replied;;
;;;;;;;;;;;;;;;Check quote;"LegQuoteBlock[0].LegBidForwardPoints * NearForwardPointDivisor -> ""Near Bid 
Fwd Points""
LegQuoteBlock[0].LegOfferForwardPoints * NearForwardPointDivisor-> ""Near 
Offer Fwd Points""
LegQuoteBlock[1].LegBidForwardPoints * FarForwardPointDivisor -> ""Far Bid 
Fwd Points""
LegQuoteBlock[1].LegOfferForwardPoints * FarForwardPointDivisor -> ""Far 
Offer Fwd Points""";Spot, forward points for each leg displayed;;
;;;;;;;;;;;;;;;Execute order (lift the offer or click on the right part of the tile);;"Order executed on FE
Execution accepted by Currenex (no error or timeout)";;
QAP-T2612;Check columns in the Book's (RFQ);Automated;;;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, needs_refactoring_FX;;;;;QAP-3589;;"Send an order:
From RFQ tile (AggRates)";;Order is sent and placed in OrderBook;;
;;;;;;;;;;;;;;;"Open order book, call context menu Choose ""Owner"" column in Column chooser";;Column should appear with info for all existing orders;;
;;;;;;;;;;;;;;;"Open order book, call context menu and press Column Chooser. Find DisplayPX 
column and add it to the order book";;Column should appear with prices for all existing orders;;
;;;;;;;;;;;;;;;Check InstrType column;;"InstrType has a long value (e. g. ""FXSpot"", ""FXSwap"", ""FXForward"", etc.)";;
QAP-T2613;FE Trading - Market Ticks piloting;Specified;;{color:#4c9aff}*TS is available only for EBS, FM, REUTERS*{color};/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-1975;;QAP-3577;;Open Order book and Market ticks blotters;;Both windows are opened;;
;;;;;;;;;;;;;;;"From Market ticks blotter click ""In piloting"" button and select order book";;Order book selected like out-piloting;;
;;;;;;;;;;;;;;;In Order book select some row and loot at Market ticks;;"In the window of market ticks, lines appear that correspond to selected in 
Order book";;
QAP-T2614;RFQ without tag 64;Automated;;"35=R

{code:java}
< 
8=FIXT.1.1|9=142|35=R|49=QUOD5|56=QUODFX_UAT|34=172|52=20210305-16:05:10|131=111333018|146=1|55=EUR/USD|167=FXFWD|537=1|38=1000000|63=W1|15=EUR|1=CLIENT1|40=D|10=078|

{code}
35=S

{code:java}
8=FIXT.1.1|9=284|35=S|34=669|49=QUODFX_UAT|52=20210305-16:05:13.366|56=QUOD5|1128=9|1=CLIENT1|15=EUR|55=EUR/USD|62=20210305-16:07:10.317|63=W1|117=01210305160510653002|131=111333018|132=1.18649|133=1.18667|134=1000000|135=1000000|167=FXFWD|188=1.18647|189=0.00002|190=1.18668|191=-0.00001|460=4|537=1|10=001|
{code}

{code:java}
8=FIXT.1.1|9=283|35=S|34=670|49=QUODFX_UAT|52=20210305-16:05:17.079|56=QUOD5|1128=9|1=CLIENT1|15=EUR|55=EUR/USD|62=20210305-16:07:10.317|63=W1|117=01210305160517653002|131=111333018|132=1.18643|133=1.1866|134=1000000|135=1000000|167=FXFWD|188=1.18641|189=0.00002|190=1.18661|191=-0.00001|460=4|537=1|10=186|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-2955;;QAP-3565;;"from Client interface send RFQ for 1W without tag 64 but with tenor in tag 
63";see Description;35=S is sent to reply;;
;;;;;;;;;;;;;;;check that quote is being sent correctly for request without tag 64;;see description;;
QAP-T2615;Correct displaying PIP for ExecPrice;Automated;;"EUR/CAD-SPOT on quod308@mercury has ticksizeprofileid=4 (table *listing*)
where in table *ticksizepoint* => +ticksizeprofileid+ corresponds to 
+ticksize+=0.01
!screenshot-1.png|thumbnail!
!screenshot-2.png|thumbnail!";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, needs_refactoring_FX;;;;;QAP-3563;;Having ticksize=0.01 send an order from Client Pricing Tile;"EUR/CAD-SPOT
ClientTier = Diamond";"Check that ExecPrice has PIP as in DB
(2 value after dot)";;
;;;;;;;;;;;;;;;send an order;;order filled with price from order ticket;;
QAP-T2616;Check convert time from UTC to Local;Specified;;;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-2922;;QAP-3562;;Open FE=>Aggregated Rates=>ESP Tile;;ESP Tile opened;;
;;;;;;;;;;;;;;;Right click on ESP Tile and select Direct Venue Executions;;Direct Venue Executions opened;;
;;;;;;;;;;;;;;;Move mouse to some venue and look at displayed time;;Displayed time should be the same as your local time;;
QAP-T2617;FIX API: Primary Broker Party in Execution report 150=4,5,F;Specified;;"150=4,5,F (cancelled, amend, filled)
1. create *{color:#4c9aff}CounterPart{color}* for venue (Proprietary - 
CITIPB - PrimeBrokerGeneralTradeServices - CITIPB) with Party Role = 
PrimeBrokerGeneralTradeServices
!screenshot-1.png|thumbnail!
2. Add this CounterPart to client which you will send AO to
!screenshot-5.png|thumbnail!
3. set dropCopy for user gtwquod5 (rfq on quod308@mercury)

*+35=D+*
{code:java}
< 
8=FIXT.1.1|9=196|35=D|49=QUOD1|56=QUODFX_UAT|34=695|52=20211117-11:27:09|1=ASPECT_CITI|11=2146540760|21=1|15=EUR|38=20000000|40=2|44=1.18|54=1|55=EUR/USD|59=1|60=20211117-11:27:09|63=0|64=20211119|167=FXSPOT|22=6|10=221|{code}
*+35=G+*
{code:java}
< 
8=FIXT.1.1|9=281|35=G|49=QUOD1|56=QUODFX_UAT|34=147|52=20210305-08:23:24|1=ASPECT_CITI|11=1020956931|15=EUR|21=1|22=8|37=AO1210305075857068001|38=15000000|40=2|41=OM1210305081711068001|44=1.17777|48=EUR/USD|54=1|55=EUR/USD|59=0|60=20210305-08:23:24|100=MS-SW|120=USD|167=FOR|207=MS-SW|660=99|854=0|10=198|

{code}
*+35=F+*
{code:java}
< 
8=FIXT.1.1|9=128|35=F|49=QUOD1|56=QUODFX_UAT|34=237|52=20210305-08:37:58|11=1020956933|38=20000000|41=1020956932|55=EUR/USD|60=20210305-08:37:58|10=215|

{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-2215, PFX-2880;;QAP-3561;;From Client Interface (MiniFix) send an order to keep status OPEN;Buy order with lower price and big qty;order is appeared in order book with status OPEN;;
;;;;;;;;;;;;;;;"From Client Interface (MiniFix) send ""Order Replace"" 35=G
(decrease qty)
take from execution report tag 11 and set in 41";see Descr + attach;"Order is modified.
35=8 execution Report has sent to Client Interface (miniFix)";;
;;;;;;;;;;;;;;;Check that 35=8 with 150=5 contains Party like Primary Broker (tag 448);#1;see comment #1;;
;;;;;;;;;;;;;;;"From Client Interface (MiniFix) send ""Order Canceled"" 35=F";see Descr + attach;"Order is cancelled.
35=8 execution Report has sent to Client Interface (miniFix)";;
;;;;;;;;;;;;;;;Check that 35=8 with 150=4 contains Party like Primary Broker (tag 448);#2;see comment #2;;
QAP-T2618;DropCopy: Primary Broker Party in Execution report 150=4,5,F;Specified;;"150=4,5,F (cancelled, amend, filled)
1. create *{color:#4C9AFF}CounterPart{color}* for venue (Proprietary - 
CITIPB - PrimeBrokerGeneralTradeServices - CITIPB) with Party Role = 
PrimeBrokerGeneralTradeServices
!screenshot-1.png|thumbnail!
2. Add this CounterPart to *client* which you will send *AO* to
!screenshot-3.png|thumbnail!
3. set dropCopy for user gtwquod5 (rfq on quod308@mercury)

default/ors.xml:
in section FIXNotif
{code:java}

true
true
true
true
true
true
true


{code}
How drop copy works

{code:java}

2021-06-15 15:24:13.703019984 QUOD.ORS [23270] INFO ultramessaging 
(Writer.cpp:312) - sent UM message {MessageType=""Fix_NewOrderSingle"" 
Body=<316-byte sequence> qseq=713} on subject `QUOD.FIX_REPLY.gtwquod5', 
using UM lbtrm session fixCM

{code}

4. *true*
= `*true*'";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-2827;;QAP-3557;;"Open FE Trading => ESP tile => and send Algo order to keep open status on 
your venue with CounterPart PB";Buy order with lower price and big qty;order is appeared in order book with status OPEN;;
;;;;;;;;;;;;;;;Amend the order on FE;change qty;qty is changed;;
;;;;;;;;;;;;;;;Check backOffice (miniFix);;see comment #1;;
;;;;;;;;;;;;;;;Canceled the order on FE;;the order is cancelled;;
;;;;;;;;;;;;;;;Check backOffice (miniFix);;see comment #2;;
;;;;;;;;;;;;;;;"Send an order from FE on that venue to execute it and check backOffice 
(miniFix)";;see comment #3;;
QAP-T2619;Check unique MDEntryID on 35=W;Automated;;"*< 
8=FIXT.1.1|9=163|35=V|49=QUOD3|56=QUODFX_UAT|34=26|52=20210304-15:12:17|50=CLIENT2|262=1111222001|263=2|264=0|265=0|267=2|269=0|269=1|146=1|55=GBP/USD|460=4|64=20210308|167=FXSPOT|10=189|*

 
{code:java}
> 
8=FIXT.1.1|9=1212|35=W|34=18|49=QUODFX_UAT|52=20210304-15:06:49.106|56=QUOD3|1128=9|55=GBP/USD|262=1111222001|268=6|269=0|
278=4_GBP/USD_20210304T150649102589944_Bid3|270=1.30438|271=10000000|272=20210304|273=15:06:47|299=4_GBP/USD_20210304T150649102589944_Bid3|290=1|1024=1|63=0|64=20210308|1070=1|269=1|
278=4_GBP/USD_20210304T150649102589944_Ask1|270=1.30444|271=1000000|272=20210304|273=15:06:47|299=4_GBP/USD_20210304T150649102589944_Ask1|290=1|1024=1|63=0|64=20210308|1070=1|269=0|
278=4_GBP/USD_20210304T150649102589944_Bid2|270=1.30438|271=5000000|272=20210304|273=15:06:47|299=4_GBP/USD_20210304T150649102589944_Bid2|290=2|1024=1|63=0|64=20210308|1070=1|269=1|
278=4_GBP/USD_20210304T150649102589944_Ask2|270=1.30444|271=5000000|272=20210304|273=15:06:47|299=4_GBP/USD_20210304T150649102589944_Ask2|290=2|1024=1|63=0|64=20210308|1070=1|269=0|
278=4_GBP/USD_20210304T150649102589944_Bid1|270=1.30438|271=1000000|272=20210304|273=15:06:47|299=4_GBP/USD_20210304T150649102589944_Bid1|290=3|1024=1|63=0|64=20210308|1070=1|269=1|
278=4_GBP/USD_20210304T150649102589944_Ask3|270=1.30445|271=10000000|272=20210304|273=15:06:47|299=4_GBP/USD_20210304T150649102589944_Ask3|290=3|1024=1|63=0|64=20210308|1070=1|779=20210304-15:06:49.102|10=100|{code}
 
{code:java}
> 
8=FIXT.1.1|9=1212|35=W|34=23|49=QUODFX_UAT|52=20210304-15:07:19.104|56=QUOD3|1128=9|55=GBP/USD|262=1111222001|268=6|269=0|
278=4_GBP/USD_20210304T150719101786615_Bid1|270=1.30437|271=1000000|272=20210304|273=15:07:19|299=4_GBP/USD_20210304T150719101786615_Bid1|290=1|1024=1|63=0|64=20210308|1070=1|269=1|
278=4_GBP/USD_20210304T150719101786615_Ask1|270=1.30443|271=1000000|272=20210304|273=15:07:19|299=4_GBP/USD_20210304T150719101786615_Ask1|290=1|1024=1|63=0|64=20210308|1070=1|269=0|
278=4_GBP/USD_20210304T150719101786615_Bid3|270=1.30436|271=10000000|272=20210304|273=15:07:19|299=4_GBP/USD_20210304T150719101786615_Bid3|290=2|1024=1|63=0|64=20210308|1070=1|269=1|
278=4_GBP/USD_20210304T150719101786615_Ask2|270=1.30443|271=5000000|272=20210304|273=15:07:19|299=4_GBP/USD_20210304T150719101786615_Ask2|290=2|1024=1|63=0|64=20210308|1070=1|269=0|
278=4_GBP/USD_20210304T150719101786615_Bid2|270=1.30436|271=5000000|272=20210304|273=15:07:19|299=4_GBP/USD_20210304T150719101786615_Bid2|290=3|1024=1|63=0|64=20210308|1070=1|269=1|
278=4_GBP/USD_20210304T150719101786615_Ask3|270=1.30443|271=10000000|272=20210304|273=15:07:19|299=4_GBP/USD_20210304T150719101786615_Ask3|290=3|1024=1|63=0|64=20210308|1070=1|779=20210304-15:07:19.101|10=228|{code}
 

 
{code:java}
> 
8=FIXT.1.1|9=1212|35=W|34=31|49=QUODFX_UAT|52=20210304-15:09:19.121|56=QUOD3|1128=9|55=GBP/USD|262=1111222001|268=6|269=0|
278=4_GBP/USD_20210304T150919119617953_Bid2|270=1.30437|271=5000000|272=20210304|273=15:09:18|299=4_GBP/USD_20210304T150919119617953_Bid2|290=1|1024=1|63=0|64=20210308|1070=1|269=1|
278=4_GBP/USD_20210304T150919119617953_Ask1|270=1.30442|271=1000000|272=20210304|273=15:09:18|299=4_GBP/USD_20210304T150919119617953_Ask1|290=1|1024=1|63=0|64=20210308|1070=1|269=0|
278=4_GBP/USD_20210304T150919119617953_Bid1|270=1.30437|271=1000000|272=20210304|273=15:09:18|299=4_GBP/USD_20210304T150919119617953_Bid1|290=2|1024=1|63=0|64=20210308|1070=1|269=1|
278=4_GBP/USD_20210304T150919119617953_Ask2|270=1.30443|271=5000000|272=20210304|273=15:09:18|299=4_GBP/USD_20210304T150919119617953_Ask2|290=2|1024=1|63=0|64=20210308|1070=1|269=0|
278=4_GBP/USD_20210304T150919119617953_Bid3|270=1.30436|271=10000000|272=20210304|273=15:09:18|299=4_GBP/USD_20210304T150919119617953_Bid3|290=3|1024=1|63=0|64=20210308|1070=1|269=1|
278=4_GBP/USD_20210304T150919119617953_Ask3|270=1.30443|271=10000000|272=20210304|273=15:09:18|299=4_GBP/USD_20210304T150919119617953_Ask3|290=3|1024=1|63=0|64=20210308|1070=1|779=20210304-15:09:19.119|10=097|
 
{code}
 

 ";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, refactored_FX;;;PFX-2862;;QAP-3555;;Go to WebAdmin=>FX Market Making=>Quoting Session;QSESP1 for quod308@mercury;Quoting Session window opened;;
;;;;;;;;;;;;;;;On QSESP component click on edit;;Modify Wizard window opened;;
;;;;;;;;;;;;;;;In table Values set Always Use New MDEntry ID click on checkbox;;Always Use New MDEntry ID check box activated;;
;;;;;;;;;;;;;;;From miniFIX send 35=V;see description;MarketDataSnapshotFullRefresh receive;;
;;;;;;;;;;;;;;;Check that tag 278 is unique for each message 35=W;;tag 278 is different for each msg;;
QAP-T2620;Forward Tenor for ClientPricingTile;Manual;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-747;;QAP-3554;;Go to AdminFE => ClientTier => GBP/USD => modify;;Modify wizard is opened;;
;;;;;;;;;;;;;;;Add CITI,MS venue to Forward Venue tab and submit;any venue which is priced by FSS;nor errors appear;;
;;;;;;;;;;;;;;;Add new forward tenor (3W);restart FE;;;
;;;;;;;;;;;;;;;Open Trading FE => ClientPricing tile =>GBP/USD => 3W;;"all bands are appeared.
Executable ON
Pricing ON";;
;;;;;;;;;;;;;;;;delete this tenor after test;;;
QAP-T2621;Map AlloClientAccountID from header / body;Specified;;"[https://support.quodfinancial.com/confluence/display/DVPT/Mapping+configuration+for+ClientAccount+and+AllocAccount]

{color:#0747a6}*1.*{color} Set configuration for your gtw (enable mapping 
of AllocAccount and choose tag to map from):
({*}{*}
 {*}1{*})
{code:java}

1

{code}
*{color:#0747a6}2.{color}* Set cfg (change tag to map from) : ({*}49{*})
{code:java}

49
{code}
*{color:#0747a6}3.{color}* Set cfg (disable mapping of AllocAccount) : ({*}
{*})
{code:java}

49
{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PCON-1833;;QAP-3544;;Set cfg as in step 1 in Description => save => restart gtw;;;;
;;;;;;;;;;;;;;;From miniFix send 35=V (MD request) and then 35=D (newOrderSingle);;Order is sent and filled;;
;;;;;;;;;;;;;;;Check gtw logs;;"see comment #1
AllocClientAccountID is mapped from tag 1 (from body)";;
;;;;;;;;;;;;;;;Set cfg as in step 2 in Description => save => restart gtw;;;;
;;;;;;;;;;;;;;;From miniFix send 35=V (MD request) and then 35=D (newOrderSingle);;Order is sent and filled;;
;;;;;;;;;;;;;;;Check gtw logs;;"see comment #1
ClientAccountGroupID is mapped from tag 49 (from header)";;
;;;;;;;;;;;;;;;Disable maping of AllocAccount and restart gtw;#3;Config disabled, gtw starded without errors;;
QAP-T2622;FX Pricing tiles : check the same currency pair with 2 different tiers with different venues is pricing correctly;Automated;;"Open 2 pricing tiles with :

EUR/USD SPOT Tier1 

EUR/USD SPOT Tier2

Tier1 and Tier2 must have different venues

They must be both pricing correctly


*FOR TH2 send MD before test*";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX;lzaharia;;;;QAP-3537;;On a FE, open 2 different pricing tiles as described in the description;;Both pricing tiles must be pricing correctly;;
QAP-T2623;Map ClientAccountGroupID from header / body;Specified;;"[https://support.quodfinancial.com/confluence/display/DVPT/Mapping+configuration+for+ClientAccount+and+AllocAccount]

{color:#0747a6}*1.*{color} Set configuration for your gtw: ({*}1{*})
{code:java}

DefaultAcc

1


{code}
*{color:#0747a6}2.{color}* Set cfg : ({*}49{*})
{code:java}

DefaultAcc

49


{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PCON-1833;;QAP-3533;;Set cfg as in step 1 in Description => save => restart gtw;#1;;;
;;;;;;;;;;;;;;;From miniFix send 35=V (MD request) and then 35=D (newOrderSingle);;Order is sent and filled;;
;;;;;;;;;;;;;;;Check gtw logs;;"see comment #1
ClientAccountGroupID is mapped from tag 1 (from body)";;
;;;;;;;;;;;;;;;Set cfg as in step 2 in Description => save => restart gtw;#2;;;
;;;;;;;;;;;;;;;From miniFix send 35=V (MD request) and then 35=D (newOrderSingle);;Order is sent (may have any status);;
;;;;;;;;;;;;;;;Check gtw logs;;"see comment #1
ClientAccountGroupID is mapped from tag 49 (from header)";;
;;;;;;;;;;;;;;;Set config to initial state and restart GTW;#1;GTW restarted without errors;;
QAP-T2624;Check mapping 278 tag in message type 35=W;Specified;;"*Pre conditions:*
Connect to the buy side
client_qfStandard_ESP_MM.xml
*Host:Port* - 10.0.22.77:12012

*FIX* 
{code:java}
< 
8=FIXT.1.1|9=902|35=W|49=TEST|56=MARKETDATA|34=102|52=20210226-13:47:00|262=EUR/USD:SPO:REG:HSBC_2|55=EUR/USD|64=SP|268=6|269=0|290=1|278=pF0S70Ub00002FDZQK4fAwpGL79DgAwpGL7q6hAwpGL71|270=1.19568|271=1000000|273=20210226-13:47:00|15=EUR|282=HSBC|64=20210302|269=1|290=1|278=pF0S70Ub00002FDZQK4fAwpGL79DgAwpGL7q6hAwpGL71|270=1.19679|271=1000000|273=20210226-13:47:00|15=EUR|282=HSBC|64=20210302|269=0|290=2|278=pF0S70Ub00002FDZQK4fAwpGL79DgAwpGL7q6hAwpGL71|270=1.18507|271=6000000|273=20210226-13:47:00|15=EUR|282=HSBC|64=20210210|269=1|290=2|278=pF0S70Ub00002FDZQK4fAwpGL79DgAwpGL7q6hAwpGL71|270=1.19628|271=6000000|273=20210226-13:47:00|15=EUR|282=HSBC|64=20210210|269=0|290=3|278=pF0S70Ub00002FDZQK4fAwpGL79DgAwpGL7q6hAwpGL71|270=1.18400|271=12000000|273=20210226-13:47:00|15=EUR|282=HSBC|64=20210210|269=1|290=3|278=pF0S70Ub00002FDZQK4fAwpGL79DgAwpGL7q6hAwpGL71|270=1.19632|271=12000000|273=20210226-13:47:00|15=EUR|10=177|
{code}
*Logs*
{code:java}
2021-02-26 13:47:00.894018801 QUOD.QFHTEST_SP5 [20431] DEBUG 
qfixfh_qfAutobahn_fx_esp_buy (EventHandler.cpp:248) - {onFullRefresh} 
Processing full refresh: MarketDataUpdate={ Symbol=<n/a> SeqNo=<n/a> 
VenueMDSeqNum=102 MDTime=<n/a> MDArrivalTime=2021-Feb-26 13:47:00.893899000 
MDBookType=<n/a> NoMDEntries=#6:[ 1:{ Entry_t={ 
MDEntryID=pF0S70Ub00002FDZQK4fAwpGL79DgAwpGL7q6hAwpGL71 
MDEntryPx=1.195680000 MDEntrySize=1000000.000000000 MDEntrySide=Bid 
MDPosition=1 MDEntryOrdType=Limit MDEntryDateTime=not-a-date-time 
MDEntryOriginator=HSBC Currency=EUR } } 2:{ Entry_t={ 
MDEntryID=pF0S70Ub00002FDZQK4fAwpGL79DgAwpGL7q6hAwpGL71 
MDEntryPx=1.196790000 MDEntrySize=1000000.000000000 MDEntrySide=Ask 
MDPosition=1 MDEntryOrdType=Limit MDEntryDateTime=not-a-date-time 
MDEntryOriginator=HSBC Currency=EUR } } 3:{ Entry_t={ 
MDEntryID=pF0S70Ub00002FDZQK4fAwpGL79DgAwpGL7q6hAwpGL71 
MDEntryPx=1.185070000 MDEntrySize=6000000.000000000 MDEntrySide=Bid 
MDPosition=2 MDEntryOrdType=Limit MDEntryDateTime=not-a-date-time 
MDEntryOriginator=HSBC Currency=EUR } } 4:{ Entry_t={ 
MDEntryID=pF0S70Ub00002FDZQK4fAwpGL79DgAwpGL7q6hAwpGL71 
MDEntryPx=1.196280000 MDEntrySize=6000000.000000000 MDEntrySide=Ask 
MDPosition=2 MDEntryOrdType=Limit MDEntryDateTime=not-a-date-time 
MDEntryOriginator=HSBC Currency=EUR } } 5:{ Entry_t={ 
MDEntryID=pF0S70Ub00002FDZQK4fAwpGL79DgAwpGL7q6hAwpGL71 
MDEntryPx=1.184000000 MDEntrySize=12000000.000000000 MDEntrySide=Bid 
MDPosition=3 MDEntryOrdType=Limit MDEntryDateTime=not-a-date-time 
MDEntryOriginator=HSBC Currency=EUR } } 6:{ Entry_t={ 
MDEntryID=pF0S70Ub00002FDZQK4fAwpGL79DgAwpGL7q6hAwpGL71 
MDEntryPx=1.196320000 MDEntrySize=12000000.000000000 MDEntrySide=Ask 
MDPosition=3 MDEntryOrdType=Limit MDEntryDateTime=not-a-date-time 
Currency=EUR } } ] }


{code}


*for log reader for TH2*";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PCON-1365;;QAP-3531;;Open FE=>Aggregated Rates=>Direct Venue Executions;;FE, Aggregated Rates, Direct venue Executions opened;;
;;;;;;;;;;;;;;;Filter venues and select only HSBC;;Only HSBC displayed;;
;;;;;;;;;;;;;;;From miniFIX send 35=W;see description;Market data appears on tile;;
;;;;;;;;;;;;;;;Check BE logs;;"tag 278 is mapped to MDEntryID ,
see description";;
;;;;;;;;;;;;;;;Check logs of MDA;;Mda sent Market_MarketDataSnapshotFullRefresh to FE;;
;;;;;;;;;;;;;;;Check logs of FE;;FE receive Market_MarketDataSnapshotFullRefresh;;
QAP-T2625;Standard FIX Sell-Side Gateway to Support Taker RFQ;Specified;;"quod308@mercury : *start_RFQ_TAKER_SELL* : (cfg)qf_internal 
(bin)quickfixgtw_qfstandard50SP2

quod314@luna :*start_RFQ_to_ORS*


Sender: ASPECT_TR_UAT
Target: QUODFX_UAT
35=R:
{code:java}
< 
8=FIXT.1.1|9=163|35=R|49=ASPECT_TR_UAT|56=QUODFX_UAT|34=41|52=20211214-15:31:02|131=111333417|146=1|55=EUR/USD|1=CLIENT1|167=FXFWD|207=CITI-RFQ|537=1|38=1000000|64=20211217|15=EUR|10=247|

{code}
35=S
{code:java}
> 
8=FIXT.1.1|9=295|35=S|34=41|49=QUODFX_UAT|52=20211214-15:31:02.432|56=ASPECT_TR_UAT|1128=9|1=CLIENT1|15=EUR|55=EUR/USD|62=20211214-15:33:02.419|63=C|64=20211217|131=111333417|132=1.197846413|133=1.192336374|134=1000000|135=1000000|167=FXFWD|188=1.192057481|189=0.005788932|190=1.198269422|191=-0.005933047|460=4|10=123|


{code}";/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;FX_fix, FXregression;;;PFX-2731;;QAP-3505;;"From MiniFix send 35=R
without side";see descr;"35=S is sent to reply with BidPx and
OfferPx";;
QAP-T2626;MDA: InstrSettlDate in MarketDataSnapshotFullRefresh;Specified;;"{color:#de350b}*QUOD.FIXMARKETDATA*{color} component on 308@mercury Sender: 
MD1 Target: QUODFX_UAT 10.0.22.77:14055

35=V
{code:java}
< 
8=FIXT.1.1|9=193|35=V|49=MD1|56=QUODFX_UAT|34=40|52=20210222-14:59:54|262=EUR/USD:SPO:REG:CITI_23|263=1|264=10|265=0|267=2|269=0|269=1|146=1|55=EUR/USD|461=CITI-SW|167=FXSPOT|63=0|22=8|1301=CITI-SW|10=206|

{code}
35=W
{code:java}
> 
8=FIXT.1.1|9=247|35=W|34=40|49=QUODFX_UAT|52=20210222-15:00:00.003059|56=MD1|1128=9|55=EUR/USD|262=EUR/USD:SPO:REG:CITI_23|268=2|269=0|270=1.18218|271=1000000|64=20210224|269=1|270=1.18243|271=5000000|64=20210224|461=CITI-SW|779=20210222-15:00:00.000|1301=CITI-SW|10=131|

{code}
If you subscribe through a FIX session, you should see the mip fix messages 
with an InstrumentBlock. It's available if true, which is the default.";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-2473, PFX-3271;;QAP-3502;;From MiniFix send MarketData request 35=V;EUR/USD Spot CITI;35=w is sent to reply;;
;;;;;;;;;;;;;;;In 35=W check;;that tag 64 is present;;
QAP-T2627;FE Trading: check Display Fields Relevant To Internal Market Making Trades;Specified;;"*Precondition:*
Open FE=>Client pricing Tile=>Rates tile, Dealing Trade Book";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;;;PFX-3038;;QAP-3501;;From Client Pricing tile send GBP/USD Spot order;"qty=1000000
side=buy
slippage=0.5";Order sent and filled;;
;;;;;;;;;;;;;;;In Dealing Trade Book check QuoteId, OrderID and ContraExecid;;"Quote ID, Order ID and ContraExecID appears for internal trade
ContraExecId should be the same as ExecID for External";;
;;;;;;;;;;;;;;;Check logs in ORS;not necessary;See comments;;
;;;;;;;;;;;;;;;Send RFQ from client interface (miniFix);;Quote received (35=S);;
;;;;;;;;;;;;;;;For a received quote send an order (35=D);;Order execute and filled;;
;;;;;;;;;;;;;;;In Dealing Trade Book check QuoteId column;;the quoteID in Trader Blotter must match quoteID in Quote Book;;
QAP-T2628;PrimeBroker is set at Venue level and at Listing Level;Specified;;"The following configuration needs to be enabled:

{quote}2021-10-19 14:40:28.058558927 QUOD.ORS [ 6188] INFO configuration 
(configuration.cpp:373) - backend.xml: = `false'{quote}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-1780;;QAP-3499;;"(AdminFE)
Go to Reference data => Venue and add CounterPart to venue CITI and submit";;no errors;;
;;;;;;;;;;;;;;;"(AdminFE)
Go to Reference data => Listing and add CounterPart to listing 
EUR/USD-MS-SPO and submit";;no errors;;
;;;;;;;;;;;;;;;Open Trading FE => Aggregated Market Rates and send DMA order to CITI venue;;Order is sent and filled;;
;;;;;;;;;;;;;;;Check logs of QUOD.QFSSESPO;;see comments #1;;
;;;;;;;;;;;;;;;Send an order to MS EUR/USD SPO venue;;Order is sent and filled;;
;;;;;;;;;;;;;;;Check logs of QUOD.QFSSESPO;;see comments #2;;
;;;;;;;;;;;;;;;Send an order to MS EUR/USD WK1 venue;;"Order is sent and filled
there is not tag 1 in FIX msg
comment #3";;
QAP-T2629;Check 131 tag in message type 35=AJ;Automated;;"35=R
{code:java}
< 
8=FIXT.1.1|9=159|35=R|49=QUOD5|56=QUODFX_UAT|34=234|52=20210222-11:18:37|131=111333418|146=1|55=EUR/USD|167=FXSPOT|537=1|54=1|38=1000000|64=20210224|63=0|15=EUR|1=CLIENT2|40=D|10=122|
{code}
35=AJ
take quoteID from 35=S (tag 117)
{code:java}
< 
8=FIXT.1.1|9=128|35=AJ|49=QUOD5|56=QUODFX_UAT|34=236|52=20210222-11:18:51|693=1720720033|117=01210222111834998002|694=8|131=111333418|55=EUR/USD|10=226|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PCON-1749;;QAP-3494;;From miniFIX send 35=R;;Check that quote appears;;
;;;;;;;;;;;;;;;From miniFIX send 35=AJ where tag 117=received quote id;;Check that quote canceled;;
;;;;;;;;;;;;;;;check logs;;"see comments below
tag 131 must be mapped correctly";;
QAP-T2630;FX Position Keeping By Settlement Date;Specified;;"{quote}FX Position Keeping By Settlement Date
Then you expand that and you see settlement date rows
Then, when you execute a Spot order you only have a Spot price.
But when you execute a Forward order, you have 3 prices... Spot, Swap 
Points, Outright
Outright = Spot + Pts
So the comment is saying which price to use where.
Spot Summary is the net of all orders (spot and forwards) but only using 
the Spot rate, whether it's a Spot or Forward order.
Then, for the settlement date rows, you only update the settlement date for 
that order...
And if it's a Spot order you update that row with the Spot price.
But if it's a Forward order you update that row with the Outright price.
You have ""Position"" in both Spot Summary and settlement date rows.
""Spot Summary"" refers to the whole row. The parent rows.
So example... I have:
- Spot order for 1M @ 1.1234 spot price (settlement date 5 Feb)
- Forward order for 2M @ 1.2345 outright price / 1.2340 spot price 
(settlement date 20 Feb)
When those fill, I will do the following...
- Update the Spot Summary row such that Position = 3M, and Quote Position = 
(1M * 1.1234 + 2M * 1.2340)
- Update the 5 Feb settlement date row such that Position = 1M, and Quote 
Position = (1M * 1.1234)
- Update the 20 Feb settlement date row such that Position = 2M, and Quote 
Position = (2M * 1.2345)
{quote}

To check this test you need to clear positions";/PFX/FX_MM_Position;Low - Nice to Have;FX_MM_Positions;FXregression;;;PFX-1496;;QAP-3484;;Open ClientPricingTile EUR/USD Spot and send an order;;the order is sent and filled;;
;;;;;;;;;;;;;;;Open PositionBlotter;;"Check that Settle Date have date of Spot and Quote Position = Qty * 
ExecPrice";;
;;;;;;;;;;;;;;;Send EUR/USD on Forward 1W;;the order is sent and filled;;
;;;;;;;;;;;;;;;Open PositionBlotter;;"1.Check that Settle Date have date of 1W and Quote Position = Qty * 
ExecPrice;
2. Spot Summary (2M) = and Quote Position = (Qty_Spot * ExecPrice_Spot + 
Qty_Fwd * ExecPrice_Fwd)";;
;;;;;;;;;;;;;;;PositionBlotter check that;;"All FX position values for each separate settlement date are tracked per 
currency pair (per account group) as a single row with no settlement date, 
netting together any summed position values, and tracking properly any 
formula based columns at the level of each currency pair.";;
QAP-T2631;"""Venue Client Name"" Is Overridden By Listing";Specified;;"Create the Counterparts

!screenshot-1.png|thumbnail!

The following configuration needs to be enabled:

{quote}2021-10-19 14:40:28.058558927 QUOD.ORS [ 6188] INFO configuration 
(configuration.cpp:373) - backend.xml: = `false'{quote}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-1780;;QAP-3475;;"(AdminFE)
Go to Reference data => Listing (EUR/USD:CITI) and add CounterPart to this 
listing";;no errors;;
;;;;;;;;;;;;;;;Open Trading FE => Aggregated Market Rates and send DMA order to CITI venue;"EUR/USD
CITI";Order is sent and filled;;
;;;;;;;;;;;;;;;Check logs of QUOD.QFSSESPO;;see comment #1;;
;;;;;;;;;;;;;;;Send an order to MS venue;"EUR/USD
MS";Order is sent and filled;;
;;;;;;;;;;;;;;;Check logs of QUOD.QFSSESPO;;see comments #2;;
QAP-T2632;"""Venue Client Name"" Is Overridden By Venue";Specified;;"Create the Counterparts

!screenshot-1.png|thumbnail!


The following configuration needs to be enabled:

{quote}2021-10-19 14:40:28.058558927 QUOD.ORS [ 6188] INFO configuration 
(configuration.cpp:373) - backend.xml: = `false'{quote}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-1780;;QAP-3471;;"(AdminFE)
Go to Reference data => Venue and add CounterPart to venue CITIT and submit";;no errors;;
;;;;;;;;;;;;;;;Open Trading FE => Aggregated Market Rates and send DMA order to CITI venue;;Order is sent and filled;;
;;;;;;;;;;;;;;;Check logs of QUOD.QFSSESPO;;see comments #1;;
;;;;;;;;;;;;;;;Send an order to MS venue;;Order is sent and filled;;
;;;;;;;;;;;;;;;Check logs of QUOD.QFSSESPO;;see comments #2;;
QAP-T2633;FE Trading - Out-Piloting With Existing Filter;Open;;"*Preconditions:*

Open FE=> Open two Order Book(child orders)

 ";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-2936;;QAP-3467;;"In one of the order book select column ExecProgress and edit filter, set 
100%";;Filter applied, orders appears only with 100% execute;;
;;;;;;;;;;;;;;;Click on Edit Filter button;;Filter Editor window appears with only 1 filter;;
;;;;;;;;;;;;;;;"From another Order Book(Out piloted) click on Out-pilot button and select 
first order book";;Out-piloting enabled;;
;;;;;;;;;;;;;;;In Order Book(Out piloted) select several orders;;"In Order Book(in piloted) appears selected orders only with 100% 
ExecProgress";;
;;;;;;;;;;;;;;;Click on Edit Filter button;;Filter Editor window appears with parameters AND and OR;;
QAP-T2634;FETrading: Watch list New Piloting;Open;;"*Pre-conditions:*

Open FE, two order book windows and Watch-List";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-1974;;QAP-3460;;"From Watch List click on ""in pilote"" and drag mouse to order book";;Order book selected as in piloted window;;
;;;;;;;;;;;;;;;"From Watch List click on ""out pilote"" and drag mouse to another order book";;Order book selected as out piloted window;;
;;;;;;;;;;;;;;;"From in piloted order book select several orders with different currencies 
pair";;Currencies pairs appear in watch list;;
;;;;;;;;;;;;;;;In Watch List window select some currencies pair;;In out piloted order book appear orders only for this currencies pair;;
QAP-T2635;Price Cleansing: Crossed Venue Rates (Taker ESP);Specified;;"*{color:#0747A6}#1{color}*
{code:java}
2022-04-14 19:07:58.340789913 QUOD.FXFH [27906] INFO qfQuod_any_broker_buy 
(QuickfixQuodLog.h:67) - QUICKFIX: FIXT.1.1:MARKETDATA->TEST: incoming: 
8=FIXT.1.1|9=250|35=W|34=1131|49=TEST|52=20220414-19:07:58.336|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:HSBC_2|268=2|269=0|270=1.18599|271=2000000|273=20220414|290=1|64=20220418|1070=1|269=1|270=1.1881|271=2000000|273=20220414|290=1|64=20220418|1070=1|10=076|

{code}
*{color:#0747A6}#2{color}*
!screenshot-2.png|thumbnail!
*{color:#0747A6}#3{color}*

{code:java}
2022-04-14 19:12:52.339212335 QUOD.FXFH [27906] INFO qfQuod_any_broker_buy 
(QuickfixQuodLog.h:67) - QUICKFIX: FIXT.1.1:MARKETDATA->TEST: incoming: 
8=FIXT.1.1|9=250|35=W|34=1141|49=TEST|52=20220414-19:12:52.336|56=MARKETDATA|55=EUR/USD|167=FXSPOT|262=EUR/USD:SPO:REG:HSBC_2|268=2|269=0|270=1.19599|271=2000000|273=20220414|290=1|64=20220418|1070=1|269=1|270=1.1881|271=2000000|273=20220414|290=1|64=20220418|1070=1|10=068|

{code}

*{color:#0747A6}#4{color}*
Rule is active

{code:java}
2022-04-14 19:07:07.493001285 QUOD.MDA [ 7872] DEBUG marketdata 
(control.cpp:137) - adding PrcClnCrossedRates={ PrcClnCrossedRatesID=200002 
PriceCleansingRuleName=""Test678"" RemoveDetectedUpdate=Yes VenueID=""HSBC"" 
InstrType=FXSpot InstrSymbol=""EUR/USD"" Alive=Alive, revision 1 }
{code}
receives crossed MD

{code:java}
2022-04-14 19:07:33.484234509 QUOD.MDA [ 7875] DEBUG marketdata 
(mapper.cpp:807) - mapping market MarketDataSnapshotFullRefresh={ 
InstrumentBlock={ InstrSymbol=""EUR/USD:SPO:REG:HSBC"" } MarketDataFullList={ 
MarketDataFullBlock=#4:[ 1:{ MDEntryType=Bid MDEntryPx=1.19599 
OrdType=Limit MDEntrySize=2e+06 MDEntryPosition=1 MDQuoteType=Tradeable } 
2:{ MDEntryType=Offer MDEntryPx=1.1881 OrdType=Limit MDEntrySize=2e+06 
MDEntryPosition=1 MDQuoteType=Tradeable } 3:{ MDEntryType=Bid 
MDEntryPx=1.19599 OrdType=Limit MDEntrySize=2e+06 MDEntryPosition=1 
MDQuoteType=Tradeable } 4:{ MDEntryType=Offer MDEntryPx=1.1881 
OrdType=Limit MDEntrySize=2e+06 MDEntryPosition=1 MDQuoteType=Tradeable } ] 
} MDTime=2022-Apr-14 19:07:33.481297000 SEQ_NO=0 VenueMDSeqNum=1130 
RefreshIndicator=false MDBookType=PriceDepth MDArrivalTime=2022-Apr-14 
19:07:33.480755000 }
{code}
detection

{code:java}
2022-04-14 19:07:33.484644344 QUOD.MDA [ 7875] WARN marketdata 
(control.cpp:672) - excluding crossed prices in top of book : image 
(time:19:07:33.481297000, arrival:19:07:33.480755000) { $^1130 PriceDepth 
bid image [1]{ 1=2000000@1.19599L|TRD| } PriceDepth ask image [1]{ 
1=2000000@1.1881L|TRD| } [book] } on Depth feed EUR/USD:SPO:REG:HSBC from 
TEST source for listing 100000413 on venue HSBC with subject 
`EUR/USD:SPO:REG:HSBC.D.TEST' as per rule `Test678' [200002]

{code}
cleansing

{code:java}
2022-04-14 19:07:33.546668608 QUOD.MDA [ 7862] DEBUG marketdata 
(Recorder.cpp:1273) - cache has image (time:19:07:33.481297000, 
arrival:19:07:33.480755000) { $^1130 PriceCleansingReason=CrossedVenueRates 
PriceDepth bid image [1]{ 1=2000000@1.19599L|TRD| } PriceDepth ask image 
[1]{ 1=2000000@1.1881L|TRD| } [book] }
2022-04-14 19:07:33.546994643 QUOD.MDA [ 7862] INFO marketdata 
(Recorder.cpp:1281) - excluded image
2022-04-14 19:07:33.547019179 QUOD.MDA [ 7862] INFO marketdata 
(Data.cpp:886) - data excluded by price cleansing
2022-04-14 19:07:33.547046812 QUOD.MDA [ 7862] INFO mip_common 
(Message.cpp:132) - serializing market MarketDataSnapshotFullRefresh={ 
MDTime=2022-Apr-14 19:07:33.481297000 REC_STATUS=DATA_SUSPECT 
VenueMDSeqNum=1130 MDReportID=""7800-912"" MDArrivalTime=2022-Apr-14 
19:07:33.480755000 }
2022-04-14 19:07:33.547560136 QUOD.MDA [ 7862] INFO ultramessaging 
(Writer.cpp:260) - sent 212-byte UM message 
{MessageType=""Market_MarketDataSnapshotFullRefresh"" 
MDArrivalTime=2022-Apr-14 19:07:33.480755 MDReportID=""7800-912"" 
MDTime=2022-Apr-14 19:07:33.481297 REC_STATUS=""DATA_SUSPECT"" 
VenueMDSeqNum=1130 sn=41 qseq=24483 sent=2022-Apr-14 19:07:33.547326} #45 
on subject `MDA.EUR/USD:SPO:REG:HSBC.D.TEST', using UM lbtrm session 
mktDataCA

{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-1208;;QAP-3456;;From MiniFix send MD;#1;"MD is sent.
MD is appeared on FE";;
;;;;;;;;;;;;;;;via RestApi create a rule;#2;Rule is created;;
;;;;;;;;;;;;;;;From buy side send crossed Market Data (where Bid price > Ask price );#3;Check that Tile is empty;;
;;;;;;;;;;;;;;;subscribe to another listing with the same venue (GBP/USD-SPO-HSCB);;client receive MD with prices. Rule has no impact at this listing;;
;;;;;;;;;;;;;;;For manual case check MDA logs;#4;see Description;;
;;;;;;;;;;;;;;;Subscribe to that listing via fix (HSBC EUR/USD Spot);;Check that MD is Empty;;
;;;;;;;;;;;;;;;"via Rest Api delete rule or change ""Remove Detected Price Updates"" to OFF 
and send new MD which is correct (Bid < Ask)";;Price is on the tile;;
;;;;;;;;;;;;;;;Check fix client (or resibscribe);;check that new MD is sent to client;;
;;;;;;;;;;;;;;;Send correct MD to not fail others auto test cases;;;;
QAP-T2636;FETrading: All Visible Piloting Mode;Open;;"As a trader, I want the option of automatically out-piloting based on all 
visible rows in a table so that I don't always have to select newly added 
rows to pilot.";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-2489;;QAP-3454;;Open FE=>Open three Order Book Windows;;FE opened, three order book windows opened;;
;;;;;;;;;;;;;;;From one order book use out-pilot to another two;;Auto-piloting enabled;;
;;;;;;;;;;;;;;;"Right Click on ""out-piloting"" button and select Pilot links";;the piloted order books are presented;;
;;;;;;;;;;;;;;;"Check that near each order books present 3 button-""Clear"", ""Select Rows"" 
and ""All Visible Rows""";;Buttons exist;;
;;;;;;;;;;;;;;;"In one of the piloted order books, right click autopilot button and select 
Pilot links submenu, and click on All visible rows button";;in selected order book shows all orders;;
;;;;;;;;;;;;;;;"In another piloted order book, right click autopilot button and select 
Pilot links submenu, and click on Clear button";;Piloting should be remove;;
QAP-T2637;Price Cleansing: Stale Rates;Specified;;"PFX-1215
{quote}As long as we do not receive an new update from the Market the 
previous MD is considered as not stale.

The price cleansing rule is not evaluating whether the venue itself is 
still sending data... and it is not evaluating the time between updates. It 
is evaluating each specific update and whether there is an unreasonable 
delay between the business functional timestamp of that market data when it 
was at the venue and when we receive it in our FH, but with a focus on the 
single message itself. The message should only be considered stale on its 
own, it should not matter what any other message looks like or when we 
receive any other message.
{quote}
*{color:#0747a6}#1{color}*
Previously create Stale Rates rule
!screenshot-2.png|thumbnail!

*{color:#0747a6}#2{color}*
{code:java}
2022-04-14 10:58:26.739356715 QUOD.MDA [ 7875] DEBUG marketdata 
(control.cpp:696) - data age is 2022-Apr-14 10:58:26.738530240 - 
2022-Apr-14 10:58:26.737508000 = 1.02224ms (max 1ms), data is stale
{code}
{code:java}
...excluding stale data on topic...
{code}
{code:java}
2022-04-14 10:58:27.028165295 QUOD.MDA [ 7862] INFO marketdata 
(Recorder.cpp:1281) - excluded image
2022-04-14 10:58:27.028188822 QUOD.MDA [ 7862] INFO marketdata 
(Data.cpp:886) - data excluded by price cleansing
2022-04-14 10:58:27.028210459 QUOD.MDA [ 7862] INFO mip_common 
(Message.cpp:132) - serializing market MarketDataSnapshotFullRefresh={ 
MDTime=2022-Apr-14 10:58:26.737508000 REC_STATUS=DATA_SUSPECT 
VenueMDSeqNum=57 MDReportID=""7800-353"" MDArrivalTime=2022-Apr-14 
10:58:26.737032000 }
2022-04-14 10:58:27.028605663 QUOD.MDA [ 7862] INFO ultramessaging 
(Writer.cpp:260) - sent 212-byte UM message 
{MessageType=""Market_MarketDataSnapshotFullRefresh"" 
MDArrivalTime=2022-Apr-14 10:58:26.737032 MDReportID=""7800-353"" 
MDTime=2022-Apr-14 10:58:26.737508 REC_STATUS=""DATA_SUSPECT"" 
VenueMDSeqNum=57 sn=20 qseq=6472 sent=2022-Apr-14 10:58:27.028387} #22 on 
subject `MDA.EUR/USD:SPO:REG:HSBC.D.TEST', using UM lbtrm session 
mktDataCA{code}
 

If latency is not enough to trigger the rule try to set to false at 
marketdata.xml to get bigger latency and trigger the rule.";/PFX/FX_Price Cleansing;High - Must Have;PriceCleansing;FXregression, NeedAddToRegression;;;PFX-1215;;QAP-3452;;Subscribe to MD on the venue (HSBC EUR/USD SPO);;receive 35=W;;
;;;;;;;;;;;;;;;From Rest API create new Stale rule;#1;rule is created;;
;;;;;;;;;;;;;;;From buy side send new 35=W with old MDEntryTime;;Marker Data is send;;
;;;;;;;;;;;;;;;"in MDA log find messages that Update is stale
and MDA sends empty refresh";"for manual testing
#2";Prices were cleared from ESP tile;;
;;;;;;;;;;;;;;;"On the fix client side check that 35=W is empty (check second update or 
resubscribe)";;;;
;;;;;;;;;;;;;;;"Set rule INactive via RestAPI
and subscribe one more time (or check the same subscription)";;35=W have prices and bands;;
QAP-T2638;FETrading - Trade blotter: deselection of selected rows;Manual;;;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-2838;;QAP-3447;;Open Dealing Trade Book;;Dealing Trade Book opened;;
;;;;;;;;;;;;;;;Select several rows using Ctrl + mouse or Shift + Mouse;;Rows seceted;;
;;;;;;;;;;;;;;;Using Ctrl + mouse try to deselect the first several rows;;Rows deselected;;
;;;;;;;;;;;;;;;Select a single row and try to deselect it by Ctrl + Mouse;;Row deselected;;
QAP-T2639;FETrading - Client Trade Ticket: basic positive test;Open;;"This test is basic and positive. It checked the creation of client manual 
execution order and new fields added to the ""CLIENT Manual Execution"" order 
ticket window.

_Acceptance Criteria_ 
* The impact of the trade must be visible in the relevant position blotters

 ";/PFX/FX_Display;High - Must Have;FX_Display;FXregression;kbrit;;PFX-1858, PFX-2653;;QAP-3419;;"Open Client Execution Order Ticket in FE Trading(Dealing Trade Book> Client 
Trade Ticket)";;"Client Execution ticket window opened.
""CLIENT Trade Ticket"" is Hight contrast collored.";;
;;;;;;;;;;;;;;;Enter mandatory fields(check attached gif) and click on Add button;;check that field saved and contain correct data;;
;;;;;;;;;;;;;;;Check impact on Position Blotter;;Position changed for selected currency and client;;
QAP-T2640;Median Price Interval Mode in MDA: EVEN number of data points : some prices being equal on several venues;Automated;;"Prepare MDA cfg: (client_mda.xml)
{code:java}


true
median

{code}
{code:java}
-
false
false
300
-

true
{code}
{code:java}
-
00:00:10
00:00:00
/home/quod308/mda/interval_data.csv
-
SPO
EUR/USD


{code}
[^client_mda.xml]

*Start MDA with new cfg and stop MF and FSS*

quod308@mercury : start_QFHTEST_5 (qfStandard_ESP_MM)
SenderCompId: TEST
TargetCompId: MARKETDATA
10.0.22.77:12012
{code:java}
< 
8=FIXT.1.1|9=590|35=W|49=TEST|56=MARKETDATA|34=45|52=20210209-11:02:18|262=260|55=EUR/USD|64=SP|268=6|
269=0|290=1|270=1.1955|271=1000000|273=20210209-11:02:18|15=EUR|282=GS|64=20210217|
269=1|290=1|270=1.19700|271=1000000|273=20210209-11:02:18|15=EUR|282=GS|64=20210217|
269=0|290=2|270=1.19500|271=6000000|273=20210209-11:02:18|15=EUR|282=GS|64=20210217|
269=1|290=2|270=1.19800|271=6000000|273=20210209-11:02:18|15=EUR|282=GS|64=20210217|
269=0|290=3|270=1.19450|271=12000000|273=20210209-11:02:18|15=EUR|282=GS|64=20210217|
269=1|290=3|270=1.19900|271=12000000|273=20210209-11:02:18|15=EUR|282=GS|64=20210217|10=087|
{code}
{code:java}
< 
8=FIXT.1.1|9=603|35=W|49=TEST|56=MARKETDATA|34=44|52=20210209-11:02:17|262=267|55=EUR/USD|64=SP|268=6|
269=0|290=1|270=1.19500|271=1000000|273=20210209-11:02:17|15=EUR|282=HSBC|64=20210217|
269=1|290=1|270=1.19600|271=1000000|273=20210209-11:02:17|15=EUR|282=HSBC|64=20210217|
269=0|290=2|270=1.19450|271=6000000|273=20210209-11:02:17|15=EUR|282=HSBC|64=20210217|
269=1|290=2|270=1.19700|271=6000000|273=20210209-11:02:17|15=EUR|282=HSBC|64=20210217|
269=0|290=3|270=1.19400|271=12000000|273=20210209-11:02:17|15=EUR|282=HSBC|64=20210217
|269=1|290=3|270=1.19800|271=12000000|273=20210209-11:02:17|15=EUR|282=HSBC|64=20210217|10=156|
{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;PFX-2643;;QAP-3418;;From MiniFix send MD for HSBC and GS venues;"start QUOD.MDA_INTERVAL component
quod308@mercury";MD appeared on ESP tile;;
;;;;;;;;;;;;;;;Check in MDA log that it takes median;;see Comments;;
;;;;;;;;;;;;;;;"Open /home/quod308/mda/interval_data.csv and check that MDA publishes the 
same median prices";;"2021-Feb-09 11:03:00 SPO EUR/USD 20210210 203:2 EXC 1.195 6000000 1.197 
1000000";;
QAP-T2641;FETrading - Piloting : Empty list in the Out-piloting grid should clear the filter in the In-Piloted blotter;Specified;;;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-2817;;QAP-3416;;Open FE Trading;;FE Trading opened;;
;;;;;;;;;;;;;;;Open Order Book (x2);;Order books are opened;;
;;;;;;;;;;;;;;;"From first order book click
""Out pilot"" and select second order book";;Auto-piloting enabled;;
;;;;;;;;;;;;;;;Select an order and switch to another;;"In the second book of orders, the filter must be applied according to 
selected in first order book";;
;;;;;;;;;;;;;;;Press ESC button;;Filters should be reset;;
QAP-T2642;Median Price Interval Mode in MDA: EVEN number of data points;Automated;;"Prepare MDA cfg: (client_mda.xml)
{code:java}


true
median

{code}
{code:java}
-
false
false
300
-

true
{code}
{code:java}
-
00:00:10
00:00:00
/home/quod308/mda/interval_data.csv
-
SPO
EUR/USD


{code}
[^client_mda.xml]

*Start MDA with new cfg and stop MF and FSS*

quod308@mercury : start_QFHTEST_5 (qfStandard_ESP_MM)
SenderCompId: TEST
TargetCompId: MARKETDATA
10.0.22.77:12012
{code:java}
2021-02-05 13:19:59.653078569 QUOD.QFHTEST_SP5 [18899] INFO 
qfstandard_buy50SP2 (QuickfixQuodLog.h:58) - QUICKFIX: 
FIXT.1.1:MARKETDATA->TEST: incoming: 
8=FIXT.1.1|9=608|35=W|49=TEST|56=MARKETDATA|34=44|52=20210205-13:19:59|262=EUR/USD:SPO:REG:GS_3|55=EUR/USD|64=SP|268=6|
269=0|290=1|270=1.19550|271=1000000|273=20210205-13:19:59|15=EUR|282=GS|64=20210209|
269=1|290=1|270=1.19674|271=1000000|273=20210205-13:19:59|15=EUR|282=GS|64=20210209|
269=0|290=2|270=1.18517|271=6000000|273=20210205-13:19:59|15=EUR|282=GS|64=20210209|
269=1|290=2|270=1.19625|271=6000000|273=20210205-13:19:59|15=EUR|282=GS|64=20210209|
269=0|290=3|270=1.18417|271=12000000|273=20210205-13:19:59|15=EUR|282=GS|64=20210209|
269=1|290=3|270=1.19632|271=12000000|273=20210205-13:19:59|15=EUR|282=GS|64=20210209|
10=012|
{code}
{code:java}
2021-02-05 13:20:01.037776666 QUOD.QFHTEST_SP5 [18899] INFO 
qfstandard_buy50SP2 (QuickfixQuodLog.h:58) - QUICKFIX: 
FIXT.1.1:MARKETDATA->TEST: incoming: 
8=FIXT.1.1|9=622|35=W|49=TEST|56=MARKETDATA|34=45|52=20210205-13:20:01|262=EUR/USD:SPO:REG:HSBC_1|55=EUR/USD|64=SP|268=6|
269=0|290=1|270=1.19568|271=1000000|273=20210205-13:20:01|15=EUR|282=HSBC|64=20210209|
269=1|290=1|270=1.19679|271=1000000|273=20210205-13:20:01|15=EUR|282=HSBC|64=20210209|
269=0|290=2|270=1.18500|271=6000000|273=20210205-13:20:01|15=EUR|282=HSBC|64=20210209|
269=1|290=2|270=1.19628|271=6000000|273=20210205-13:20:01|15=EUR|282=HSBC|64=20210209|
269=0|290=3|270=1.18400|271=12000000|273=20210205-13:20:01|15=EUR|282=HSBC|64=20210209|
269=1|290=3|270=1.19629|271=12000000|273=20210205-13:20:01|15=EUR|282=HSBC|64=20210209|
10=037|
{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;PFX-2643, PFX-2564;;QAP-3415;;From MiniFix send MD for HSBC and GS venues;"start QUOD.MDA_INTERVAL component
quod308@mercury";MD appeared on ESP tile;;
;;;;;;;;;;;;;;;Check in MDA log that it takes median;;see Comments;;
;;;;;;;;;;;;;;;"Open /home/quod308/mda/interval_data.csv and check that MDA publishes the 
same median prices";;"2021-Oct-05 
11:50:50;;SPO;EUR/USD;20211007;EUR/USD;EXC;;1.185;6000000;1.19629;12000000";;
QAP-T2643;Median Price Interval Mode in MDA: UNEVEN number of data points;Automated;;"Prepare MDA cfg: (client_mda.xml)
!image-2022-06-07-12-10-40-262.png|width=494,height=282!
{code:java}


true
median


{code}
{code:java}
-
false
false
300
-

true
{code}
{code:java}
-
00:00:10
00:00:00
/home/quod308/mda/interval_data.csv
-
SPO
EUR/USD


{code}
[^client_mda.xml]

*Start MDA with new cfg and stop MF and FSS*

quod308@mercury : QUOD.QF_BUY_ESP_SP5 (qfStandard_ESP_MM)
SenderCompId: TEST
TargetCompId: MARKETDATA
10.0.22.77:12012
{code:java}
< 
8=FIXT.1.1|9=439|35=W|49=TEST|56=MARKETDATA|34=114|52=20210208-13:16:22|262=EUR/USD:SPO:REG:GS_2|55=EUR/USD|64=SP|268=4|269=0|290=1|270=1.19550|271=1000000|273=20210208-13:16:22|15=EUR|282=GS|64=20210210|269=1|290=1|270=1.19674|271=1000000|273=20210208-13:16:22|15=EUR|282=GS|64=20210210|269=0|290=2|270=1.18517|271=6000000|273=20210208-13:16:22|15=EUR|282=GS|64=20210210|269=1|290=2|270=1.19625|271=6000000|273=20210208-13:16:22|15=EUR|282=GS|64=20210210|10=134|

{code}
{code:java}
< 
8=FIXT.1.1|9=623|35=W|49=TEST|56=MARKETDATA|34=115|52=20210208-13:16:24|262=EUR/USD:SPO:REG:HSBC_1|55=EUR/USD|64=SP|268=6|269=0|290=1|270=1.19568|271=1000000|273=20210208-13:16:24|15=EUR|282=HSBC|64=20210210|269=1|290=1|270=1.19679|271=1000000|273=20210208-13:16:24|15=EUR|282=HSBC|64=20210210|269=0|290=2|270=1.18507|271=6000000|273=20210208-13:16:24|15=EUR|282=HSBC|64=20210210|269=1|290=2|270=1.19628|271=6000000|273=20210208-13:16:24|15=EUR|282=HSBC|64=20210210|269=0|290=3|270=1.18400|271=12000000|273=20210208-13:16:24|15=EUR|282=HSBC|64=20210210|269=1|290=3|270=1.19632|271=12000000|273=20210208-13:16:24|15=EUR|282=HSBC|64=20210210|10=128|

{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;PFX-2643;;QAP-3414;;From MiniFix send MD for HSBC and GS venues;"start QUOD.MDA_INTERVAL component
quod308@mercury";MD appeared on ESP tile;;
;;;;;;;;;;;;;;;Check in MDA log that it takes median;;see Comments;;
;;;;;;;;;;;;;;;"Open /home/quod308/mda/interval_data.csv and check that MDA publishes the 
same median prices";;"2021-Feb-08 
13:24:40;;SPO;EUR/USD;20210210;203:2;EXC;;1.18517;6000000;1.19632;12000000";;
QAP-T2644;FETrading: Check enhanced Intro Log Data;Manual;;;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-2650;;QAP-3412;;Open FE logs;;Fe logs opened;;
;;;;;;;;;;;;;;;Open FE Trading;;FE Trading opened;;
;;;;;;;;;;;;;;;Check FE logs;;Check information about user environment;;
QAP-T2645;FETrading - Order Ticket : Sort ExecInstrs drop-down alphabitically and enable auto-complete feature;Specified;;;/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-2687;;QAP-3410;;Open FE Trading;;FE Trading opened;;
;;;;;;;;;;;;;;;Open Aggregated Rates tile;;Tile opened;;
;;;;;;;;;;;;;;;Click Ask/Bid;;Order window opened;;
;;;;;;;;;;;;;;;At the bottom of the (BID/ASK) window find the AdvOrd tab;;Tab exist;;
;;;;;;;;;;;;;;;"In the AdvOrd tab find the dropdown menu ""exec instr""";;Menu exist;;
;;;;;;;;;;;;;;;Check that value in the dropdown is alphabetically;;Value is alphabetically;;
;;;;;;;;;;;;;;;"Check that you can search value by entering symbols from the keyboard and 
select them by pressing ""Space""";;Value is finding and selecting;;
QAP-T2646;"FETrading - Dealer Intervention : check ""Near Qty""";Automated;;"Change PRICING to OFF for near and far leg


{code:java}
< 
8=FIXT.1.1|9=272|35=R|49=QUOD5|56=QUODFX_UAT|34=378|52=20210415-09:48:13|131=511333435|146=1|55=EUR/USD|167=FXSWAP|54=2|38=21000000|64=20210419|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|624=2|587=W1|588=20210426|685=21000000|600=EUR/USD|609=FXFWD|624=1|587=W2|588=20210503|685=23000000|10=003|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-2968;;QAP-3409;;Send SWAP uneven RFQ Spot/FWD(3W);"near leg qty=21M
far leg qty=23M";Quote appear in Unnassigned RFQs;;
;;;;;;;;;;;;;;;"Select quote and click ""Assign to me""";;Quote appear in Assigned RFQs;;
;;;;;;;;;;;;;;;"Select quote and click ""Estimate""";;Price and qty appears;;
;;;;;;;;;;;;;;;"Look at ""Near Qty"" which was recalculated to USD";;Value displayed correctly;;
QAP-T2647;FETrading - RFQ Tile: qty fields should handle arrow button and mouse scroll in same way;Manual;;;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-2822;;QAP-3401;;Open RFQ Tile;;RFQ Tile opened;;
;;;;;;;;;;;;;;;Select Near and Far tenors and enter qty;999,999,999,999.99;Both tenor selected and qty entered;;
;;;;;;;;;;;;;;;Try to change qty with mouse scroll or arrow buttons on the keyboard;;The quantity does not change;;
QAP-T2648;Check the behaviour of buy / sell algo with trigger price;Manual;;"Check the functionality for PFX-1905

 
* Before this ticket, if the trigger price (separate from the parent limit 
price) is specified, it should use the aggregated top of book Bid/Ask 
for all white listed venues on the algo order, where the trigger price 
triggers when the aggregated bid price becomes higher than a Trigger Price 
for a sell order, or the aggregated ask price becomes lower than a Trigger 
Price for a buy order.

 ";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FX_ALGO, FXregression;lzaharia;;PFX-1905;;QAP-3397;;"Having a best bid / best ask of 1.1821 / 1.1831
Send a buy order @ 1.1931 with a trigger price of 1.1822";;Order sent and placed on the market;;
;;;;;;;;;;;;;;;Wait until the ask reaches 1.1822;;Order triggered : DMA created on the whitelisted venues;;
;;;;;;;;;;;;;;;"Having a best bid / best ask of 1.1821 / 1.1831
Send a sell order @ 1.1731 with a trigger price of 1.1830";;Order sent and placed on the market;;
;;;;;;;;;;;;;;;Wait until the bid reaches 1.1830;;Order sent and placed on the market;;
QAP-T2649;Outgoing External Check : ESP taker + Child Order;Specified;;"The workflow 
[https://support.quodfinancial.com/confluence/display/INTD/Connecting+a+gateway+for+external+validation]
!screenshot-3.png|thumbnail!

[https://support.quodfinancial.com/confluence/display/IFD/Configure+External+Risk+Checks]

{color:#de350b}*1.*{color} For this test you need to create gateway which 
connects to ComStar service
quod308 (start_QFHICBC_External): [^client_qfStandard_ESP_MM_ICBC2.xml] 
quickfixbuy_qfstandard_buy50SP2
{code:java}



${PREFIX}ES.VALID.REPLY



${PREFIX}VALID.REQUEST








VALID
TEST
false



gatewayCM
gateway
frontend




${PREFIX}ES.VALID.REPLY


${PREFIX}VALID.REQUEST








DEFAULT
initiator

15101
10.11.10.27

store
00:00:00
00:00:00
${CFG_DEFAULT}/spec/FIX50SP2_qfstandard_buy.xml
${CFG_DEFAULT}/spec/FIXT11.xml
Y
Y
30
Y


SESSION
FIXT.1.1
FIX.5.0SP2
LMTSENDER
QUODFX_UAT




{code}
*{color:#de350b}2.{color}* change configs:

In {*}{color:#00875a}default/ors.xml{color}{*}, if you set:
{code:java}

true

externalValidationGatewayRequests
externalValidationGatewayReplies

{code}
*{color:#00875a}client_ors.xml{color}*
{code:java}

true

externalValidationGatewayRequests
externalValidationGatewayReplies



{code}
then it means, in {*}{color:#00875a}default/gateways.xml{color}{*}, you 
need to define those subjects:
{code:java}

${PREFIX}ES.VALID.REPLY
${PREFIX}VALID.REQUEST


${PREFIX}ES.VALID.REPLY
${PREFIX}VALID.REQUEST


{code}
*{color:#00875a}client_gateways.xml{color}*
{code:java}



${PREFIX}ES.VALID.REPLY
${PREFIX}VALID.REQUEST




${PREFIX}ES.VALID.REPLY
${PREFIX}VALID.REQUEST



{code}
*{color:#de350b}3.{color}* add the setting to the config in order to 
recieve tags 1816 and 10051:
{code:java}
   
        true
...
    {code}
 

create rule for Risk Limits => External Check =>
!screenshot-2.png|thumbnail!
Also check counterparts
!screenshot-4.png|thumbnail!
!screenshot-5.png|thumbnail!

*Set Clearing Account Type empty:*
*Clients -> ASPECT_DB -> Clearing Account Type*
*{color:#0747a6}#1{color}* 

{color:#de350b}*+!!!+*{color}
{code:java}
> 
8=FIXT.1.1|9=256|35=D|34=26|49=LMTSENDER|52=20211111-17:11:36.689|56=QUODFX_UAT|1=ASPECT_DB|11=MO1211111171136242001|15=EUR|21=1|22=8|38=1000000|40=2|44=1.18165|48=EUR/USD|54=1|55=EUR/USD|59=4|60=20211111-17:11:38.091|63=0|64=20211115|120=USD|167=FXSPOT|207=BNP-SW||453=1|448=test|447=D|452=32|528=P|10051=3|10=236|
{code}
*
*#2*

 
{code:java}
< 
8=FIXT.1.1|9=215|35=8|49=QUODFX_UAT|56=LMTSENDER|34=27|52=20211111-17:12:00|11=MO1211111171136242001|14=0|17=EXECID000158202103010000002439|37=ORDID000158202103010000002440|39=0|54=1|55=EUR/USD|150=0|151=0|583=MO1211111171136242001|10=157|
{code}
*{color:#0747a6}#3{color}*
{code:java}
> 
8=FIXT.1.1|9=185|35=8|34=27|49=LMTSENDER|52=20211111-17:11:58.672|56=QUODFX_UAT|1=ASPECT_DB|11=MO1211111171136242001|14=0|30=BNP-SW|38=1000000|40=2|44=1.18165|60=20211111-17:11:58.668|150=A|151=1000000|10=126|
{code}
{code:java}
> 
8=FIXT.1.1|9=198|35=8|34=28|49=LMTSENDER|52=20211111-17:11:58.962|56=QUODFX_UAT|1=ASPECT_DB|11=MO1211111171136242001|14=0|30=BNP-SW|38=1000000|40=2|44=1.18165|58=Hello 
sim|60=20211111-17:11:58.000|150=A|151=1000000|10=121|
{code}
{code:java}
> 
8=FIXT.1.1|9=232|35=8|34=29|49=LMTSENDER|52=20211111-17:11:58.966|56=QUODFX_UAT|1=ASPECT_DB|11=MO1211111171136242001|14=0|30=BNP-SW|38=1000000|40=2|44=1.18165|58=implicit 
acknowledgement on first 
execution|60=20211111-17:11:58.961|150=0|151=1000000|10=001|
{code}
{code:java}
> 
8=FIXT.1.1|9=326|35=8|34=30|49=LMTSENDER|52=20211111-17:11:58.975|56=QUODFX_UAT|1=ASPECT_DB|6=1.18165|11=MO1211111171136242001|14=1000000|15=EUR|30=BNP-SW|31=1.18165|32=1000000|37=1636650718934|38=1000000|39=2|40=2|44=1.18165|54=1|58=Hello 
sim|59=4|60=20211111-17:11:58.000|64=20211115|75=20211111|120=USD|150=F|151=0|194=1.18165|1056=1181650|10=146|
{code}
{code:java}
> 
8=FIXT.1.1|9=200|35=8|34=31|49=LMTSENDER|52=20211111-17:11:58.988|56=QUODFX_UAT|1=ASPECT_DB|6=1.18165|11=MO1211111171136242001|14=1000000|30=BNP-SW|38=1000000|39=2|40=2|44=1.18165|60=20211111-17:11:58.972|150=3|151=0|10=027|
{code}
start *QUOD.QFHICBC_External* instance";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-1257, PEQ-6663;;QAP-3396;;Set Clearing Account empty for ASPECT_DB;;Changes are saved;;
;;;;;;;;;;;;;;;Connect miniFix as a Listener (port 15101);"in gtw config put ip of your PC
(ipconfig)";Venues are priced;;
;;;;;;;;;;;;;;;Open Trading FE => ESP => Direct Venue Execution;;Venues are priced;;
;;;;;;;;;;;;;;;"Send a care order with client ASPECT_DB and make a child order to BNP venue 
with client ASPECT_DB FXSpot in it";check you created rule for External Check from Description;"Check that new order in Order Book has
Sts = PendingValidation";;
;;;;;;;;;;;;;;;Check miniFix;#1;"35=D is sent to MiniFix
tag 10051 = 3
tag 1816 is not present";;
;;;;;;;;;;;;;;;"from MiniFix send execution report
(from 35=D take tag 11 and put it to 35=8 to tag 11)";#2;"Gateway_NewOrderReply is sent to ORS and order is executed.
Check in OrderBook order is filled";;
;;;;;;;;;;;;;;;Check miniFix;#3;"Check that ORS sends Gateway_ExecutionReport and Gateway_OrdReport to gtw 
=> to MiniFix";;
QAP-T2650;Forward Venue is unhealthy;Automated;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, needs_refactoring_FX;;;PFX-747, PFX-3905;;QAP-3394;;Go to AdminFE => ClientTier => GBP/USD => modify;;Modify wizard is opened;;
;;;;;;;;;;;;;;;Add CITI venue to Forward Venue tab and submit;any venue which is priced by FSS or TH2;nor errors appear;;
;;;;;;;;;;;;;;;Open Trading FE => ClientPricing tile;;"MD from CITI is shown on ClientPricing tile (Pts -+ margins)
see picture";;
;;;;;;;;;;;;;;;Go to Admin =>Venue => modify CITI venue and make it unhealthy and submit;;nor errors appear;;
;;;;;;;;;;;;;;;"Go to Admin =>Client Tier => modify GBP/USD and check ""Exclude When 
Unhealthy"" for CITI in Forward tab and submit";;nor errors appear;;
;;;;;;;;;;;;;;;Open Trading FE => ClientPricing tile;;"If a venue is marked as unhealthy that venue should not be aggregated with 
the other forward venues until it becomes healthy again.";;
QAP-T2651;swap point on pricing tile  (from buy side);Manual;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-747;;QAP-3393;;Go to AdminFE => ClientTier => GBP/USD => modify;;Modify wizard is opened;;
;;;;;;;;;;;;;;;Add HSBC venue to Forward Venue tab and submit;any venue which is priced by FSS;nor errors appear;;
;;;;;;;;;;;;;;;Open Trading FE => ClientPricing tile;;"MD from CITI is shown on ClientPricing tile (Pts -+ margins)
see picture";;
QAP-T2652;ForwardPoints for 35=W standard FIX plugin;Automated;;"{code:java}
< 
8=FIXT.1.1|9=313|35=W|49=TEST|56=MARKETDATA|34=120|52=20210204-11:18:19|262=46|55=GBP/USD|64=20210215|268=2|269=0|290=1|270=1.19568|271=1000000|273=20210204-11:18:19|15=GBP|282=HSBC|64=20210215|1026=1.12345|1027=0.0002|269=1|290=1|270=1.19679|271=1000000|273=20210204-11:18:19|15=GBP|282=HSBC|64=20210215|1026=1.12345|1027=0.0002|10=067|

{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, needs_refactoring_FX;;;PFX-747;;QAP-3390;;Go to AdminFE => ClientTier (Palladium2) => EUR/USD => modify;must be ready sample data for TH2;Modify wizard is opened;;
;;;;;;;;;;;;;;;Add HSBC venue to Forward Venue tab and submit;must be ready sample data for TH2;nor errors appear;;
;;;;;;;;;;;;;;;From MiniFix send 35=W;see Description;MD is sent;;
;;;;;;;;;;;;;;;Open Trading FE => ESP + ClientPricing tile;"EUR/USD (possible it needs to restart MDA + QSFE)

NOT FOT TH2";"MD from MiniFix is shown on ESP and Forward Point goes to ClientPricing 
tile (Pts -+ margins)
see picture";;
;;;;;;;;;;;;;;;"From client send MD request wk1
and check Forward Points";;"forward point = points from
market +- margins

for current test:
fwd_pts_offer=0.00021
fwd_pts_bid=0.00019";;
QAP-T2653;FE Trading - Dealer Intervention: check correct rounding of quantity;Automated;;"change PRICING to OFF
!screenshot-1.png|thumbnail!";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, refactored_FX;;;PFX-2985;;QAP-3379;;Send Even SWAP RFQ via FIX interface(minifix);"near leg qty=999999
far leg qty=999999
near leg tenor=1W
far leg tenor=2W";Quote is appear in Unassigned RFQs greed;;
;;;;;;;;;;;;;;;"Select quote and click
'Assign to me'";;Quote is appear in Assigned RFQs greed;;
;;;;;;;;;;;;;;;Select quote and click Estimate;;Price and qty is appears;;
;;;;;;;;;;;;;;;Look at qty;;Qty is displayed 999.99K;;
;;;;;;;;;;;;;;;Redo step 1-4;"near leg qty=999999999
far leg qty=999999999
near leg tenor=Spot
far leg tenor=1W";Qty is displayed 999.99M;;
QAP-T2654;The FE displays  pts not zero on ESP aggregated rates;Automated;;;/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;PFX-2976;;QAP-3364;;Open FE, with a Aggregates Rates;;Aggregated Market Rates is open;;
;;;;;;;;;;;;;;;"Click on Rates Tile and select
forward EUR/USD-3W";;All columns and TOB are shown;;
;;;;;;;;;;;;;;;Look at column Pts;;The value must not be zero;;
QAP-T2655;Out-Piloting Filter Must Not Be Saved As New Manual Filter On Workspace Recovery;Specified;;;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression, PILOTING;;;PFX-2942, PFX-3159;;QAP-3356;;Open FE trading with user without workspace and open two order blotters;;order blotters with orders are opened;;
;;;;;;;;;;;;;;;In one order book add some filter and press Save as default button;;Layout save;;
;;;;;;;;;;;;;;;Do piloting and select some order to apply filet to piloted window;;see picture;;
;;;;;;;;;;;;;;;Export work Space and reopen the same FE with the same user;;FE is opened;;
;;;;;;;;;;;;;;;Import that work space;;two order blotters are opened without the previous piloting filter;;
QAP-T2656;FETrading - FX Order Ticket : Order Ticket marking Synthetic fields on open;Specified;;"!screenshot-1.png|thumbnail!
supporting can be added for venue in WebAdmin";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-2750;;QAP-3355;;Open FE Trading => ESP tile;EUR/USD Spot;Price are being published;;
;;;;;;;;;;;;;;;Press on the TOB bid or ask;;order ticket's opened;;
;;;;;;;;;;;;;;;hover mouse on the Stop Price;;"""Not supported by market. The order will be sent as synthetic""
must appear";;
QAP-T2657;Auto-Hedging: Client Orders For 3-Leg Synthetic Currency Pairs (EURtoUSD);Automated;;"*{color:#DE350B}Precondition{color}*
1. Go to AdminFE => Reference Data=> Listing => NOK/SEK (spot) and press 
Edit
2. Go to Feature part and check *Cross Through EUR to USD* , next and 
submit
3. Start ITK
4, Go to Admin FE => FX Market Making =>Auto Hedger and create rule for 
EUR/USD, NOK/SEK, USD/SEK and EUR/NOK
!screenshot-1.png|thumbnail!
5. your Client Pricing tile must contains the following instruments: 
EUR/USD, NOK/SEK, USD/SEK and EUR/NOK";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX;;;PFX-1808;;QAP-3354;;Go to Admin FE => FX Market Making =>Auto Hedger NOK/SEK;GBP/AUD;Synthetic Combination to Auto-Hedge must be HedgeThroughEURToUSD;;
;;;;;;;;;;;;;;;Send several orders NOK/SEK to exceed the limit;"AURUM1
""NOK/SEK""

QUOD4_1
""EUR/NOK""
""USD/SEK""
""EUR/USD""";AutoHedger sends order for the first pair which exceed the threshold;;
;;;;;;;;;;;;;;;Keep sending orders till all legs not exceed their threshold;;AutoHedger must be sent for EUR/USD, USD/SEK and EUR/NOK;;
QAP-T2658;Test pricing on ESP tiles / pricing tiles / watchlist without workspace;Open;;"Following PFX-2896 issue, test display of prices when there is no workspace 
created";/PFX/FX_Display;High - Must Have;FX_Display;FXregression;lzaharia;;PFX-2896;;QAP-3335;;On a new version, open an FE with a user without workspace;;"FE open
Check that all windows have prices as for users with workspaces :
- ESP tile
- Pricing tile
- watchlist
- marketdepth";;
QAP-T2659;FETrading: Enable/Disable Uneven Swaps in RFQ Tile;Specified;;"Add FE config to enable/disable the 2nd leg quantity field in the FX RFQ 
tile for traders that never use uneven swaps and find it dangerous to 
accidentally change the second leg quantity.

To be clear... this setting should not _hide_ the field... we should still 
display, but simply disable it.

When the setting is not specified at all, the second leg quantity should be 
as it is now, enabled by default.

*Precondition:*
__";/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;FXregression;kbrit;;;;QAP-3311;;"Open FETrading
>Aggregated Market Rates
>RFQ tile
and select currency pair and two tenors";"EUR/USD
Spot
1W";"Tile opened.
Near and Far leg quantities visible and available for editing";;
;;;;;;;;;;;;;;;"Set
And redo step 1";;"Tile opened but Far leg QTY is same as Near leg and disabled (unable to 
edit)";;
;;;;;;;;;;;;;;;Change Near leg qty;;Near and Far leg qty are changed;;
;;;;;;;;;;;;;;;Change Far leg qty;;impossible to change;;
;;;;;;;;;;;;;;;"Remove tag secondLegUnevenSwapsRFQ from functional.config
And redo step 1";;result is same as in first step;;
QAP-T2660;FETRading - ESP tile: Resize of panels and add sub-windows are doesn't cover each other;Manual;;"Test added to prevent regression FE bug.
The issue checked here is that FullAmounts widow covers the Aggregated 
Rates window when we try to resize ESP panel with both of them on it.";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;kbrit;;PFX-3371;;QAP-3302;;Opend ESP tile(FETrading> Aggregated Market Rates> Rates Tile);;ESP tile opened;;
;;;;;;;;;;;;;;;Add Aggregated Rates(RMB> Aggregated Rates);;Aggregated Rates added;;
;;;;;;;;;;;;;;;Add Full Amounts(RMB> Full Amounts);;Full Amounts added;;
;;;;;;;;;;;;;;;Resize tile;;"Check that nothing cover other sub-window after resizing( Issue example in 
PFX-2523 that you could find in links)";;
QAP-T2661;FETrading - Options list: sub-menus check;Manual;;A simple test of Options>sub-menus created because of the bug PEQ-2289;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;kbrit;;;;QAP-3301;;"Open Options on FETrading: - click on Large Q button in the upper left 
corner";;Options window opened;;
;;;;;;;;;;;;;;;"Click on every list item and check that after click on left column list 
item right column changed to the correct one/";;All list items open correct sub-windows;;
QAP-T2662;FETrading: Child Order Blotter Piloting Child Order Blotter;Specified;;In order blotter must be order with 3th child level;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression, PILOTING;;;PFX-1978;;QAP-3291;;"Open TradingFE.
Open 2 child order blotters";;Blotters are opened with orders inside;;
;;;;;;;;;;;;;;;Pilot child order blotter by child order blotter;;;;
;;;;;;;;;;;;;;;In the Child Order Blotter select order which is the first level;;"Child Order Blotter Piloting Child Order Blotter with any level Child 
Order(s), display same Child Order(s) and one level down of their Child 
Order(s)";;
;;;;;;;;;;;;;;;In the Child Order Blotter select order which is the last level;;"Child Order Blotter Piloting Child Order Blotter with any level Child 
Order(s), display same Child Order(s) and one level down of their Child 
Order(s)";;
QAP-T2663;FETrading: Child Order Blotter Piloting Standard Order Blotter;Specified;;In order blotter must be order with 3th child level;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression, PILOTING;;;PFX-1978;;QAP-3290;;"Open TradingFE.
Open 1 order blotter and 1 child order blotter";;Blotters are opened with orders inside;;
;;;;;;;;;;;;;;;Pilot order blotter by child order blotter;(see .gif);;;
;;;;;;;;;;;;;;;In the Child Order Blotter select order which is the first level;(see .gif);"Child Order Blotter Piloting Standard Order Blotter with first level Child 
Order(s), display their Parent Order(s)";;
;;;;;;;;;;;;;;;In the Child Order Blotter select order which is the second level;;"Child Order Blotter Piloting Standard Order Blotter with second to N level 
Child Order(s), display nothing";;
QAP-T2664;FETrading: Standard Order Blotter Piloting Standard Order Blotter;To Review;;In order blotter must be order with 3th child level;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression, PILOTING;;;PFX-1978;;QAP-3289;;"Open TradingFE.
Open 4 Order blotter";;Blotters are opened with orders inside;;
;;;;;;;;;;;;;;;Pilot each window;(see .gif);;;
;;;;;;;;;;;;;;;In the Order Blotter select CO order;(see .gif);"Standard Order Blotter Piloting Standard Order Blotter with Parent 
Order(s), display same Parent Order(s)";;
;;;;;;;;;;;;;;;;;;;
QAP-T2665;FETrading: Standard Order Blotter Piloting Child Order Blotter;Specified;;In order blotter must be order with 3th child level;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression, PILOTING;;;PFX-1978;;QAP-3288;;"Open TradingFE.
Open 1 Order blotter and 3 ""Order book (child orders)""";;Blotters are opened with orders inside;;
;;;;;;;;;;;;;;;Pilot each window (see .gif);;;;
;;;;;;;;;;;;;;;In the Order Blotter select CO order;;"1. The first child order blotter displays first level Child Order(s) of 
Parent Order(s)
2. The second child order blotter displays same Child Order(s) and one 
level down of their Child Order(s)";;
;;;;;;;;;;;;;;;;;;;
QAP-T2666;Allow Selected Row To Be Cleared By ESC In All Grids;Manual;;"Simple positive test.
It checked that user able to select several rows in any grid and the clear 
selection by pressing ESC button";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;kbrit;;PFX-2543;;QAP-3271;;Open FE Trading>Order Book;;Order book opened;;
;;;;;;;;;;;;;;;"Select several rows( if available different level select them too) and 
press the ESC button";;Rows selected and after pres of the ESC button rows deselected.;;
;;;;;;;;;;;;;;;Open Quote request book and redo step 2;;behavior is the same;;
;;;;;;;;;;;;;;;Open Trade window and redo step 2;;behavior is the same;;
QAP-T2667;Disable scrolling through un-dropped lists in the Options menu;Manual;;"Simple positive test.
Tested scrolling in the Options menu that should be disabled.";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;kbrit;;PFX-2152;;QAP-3270;;Open FE Trading> Options> Order Ticket.;;Order Ticket option window opened;;
;;;;;;;;;;;;;;;move the mouse cursor on order ticket fields and scroll down and up;;"- sub-window scrolled(Order ticket ;
- when the cursor is under the edited field it should not scroll values 
inside of the values list;";;
QAP-T2668;If neither Base or Quote currency is USD or EUR;Specified;;"If neither Base or Quote currency is USD or EUR, compute 
EURUSDIntermediateInstrID, , whatever FXCrossInstrument and CrossThroughXXX 
in Instrument or InstrSymbolInfo. EUR/USDMajorPairInstrID1/2 were already 
calculated, per previous points.

Take GBP/MYR and update DB to have null:
UPDATE INSTRUMENT SET EURMAJORPAIRINSTRID1 = NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'GBP/MYR'
UPDATE INSTRUMENT SET EURMAJORPAIRINSTRID2 = NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'GBP/MYR'
UPDATE INSTRUMENT SET EURDIRECTQUOTATION1 = NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'GBP/MYR'
UPDATE INSTRUMENT SET EURDIRECTQUOTATION2 = NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'GBP/MYR'

UPDATE INSTRUMENT SET USDMAJORPAIRINSTRID1 = NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'GBP/MYR'
UPDATE INSTRUMENT SET USDMAJORPAIRINSTRID2 = NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'GBP/MYR'
UPDATE INSTRUMENT SET USDDIRECTQUOTATION1 = NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'GBP/MYR'
UPDATE INSTRUMENT SET USDDIRECTQUOTATION2 = NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'GBP/MYR'

UPDATE INSTRUMENT SET FXCROSSINSTRUMENT= NULL WHERE INSTRTYPE = 'SPO' AND 
INSTRSYMBOL = 'GBP/MYR'
UPDATE INSTRUMENT SET CROSSTHROUGHEUR= NULL WHERE INSTRTYPE = 'SPO' AND 
INSTRSYMBOL = 'GBP/MYR'
UPDATE INSTRUMENT SET CROSSTHROUGHUSD= NULL WHERE INSTRTYPE = 'SPO' AND 
INSTRSYMBOL = 'GBP/MYR'
UPDATE INSTRUMENT SET eurusdintermediateinstrid= NULL WHERE INSTRTYPE = 
'SPO' AND INSTRSYMBOL = 'GBP/MYR'
UPDATE INSTRUMENT SET crossthrougheurtousd= NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'GBP/MYR'
UPDATE INSTRUMENT SET crossthroughusdtoeur= NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'GBP/MYR'";/PFX/FX_Synthetic;Low - Nice to Have;FX_Synthetic_cross;FXregression;;;PFX-2666;;QAP-3262;;"Open AdminFE => Listing => set GBP/MYR and change Spot listing for this 
instrument";;Modify wizard is opened;;
;;;;;;;;;;;;;;;"Go to Feature tab and tick ""Cross Through EUR to USD"" and Cross Through USD 
to EUR"" save and submit";;no errors appear;;
;;;;;;;;;;;;;;;Start ITK (have linked to settlDate);ln -sf itk_settldate.xml client_itk.xml;no errors appear;;
;;;;;;;;;;;;;;;Open DB => Instrument tab;"select * from INSTRUMENT WHERE INSTRTYPE = 'SPO' AND INSTRSYMBOL = 
'GBP/MYR'";"If neither Base or Quote currency is USD or EUR, compute 
EURUSDIntermediateInstrID, , whatever FXCrossInstrument and CrossThroughXXX 
in Instrument or InstrSymbolInfo. EUR/USDMajorPairInstrID1/2 were already 
calculated, per previous points.";;
QAP-T2669;If Base and Quote currencies are not EUR;Specified;;"If Base and Quote currencies are not EUR, compute (EURMajorPairInstrID1, 
EURDirectQuotation1) and (EURMajorPairInstrID2, EURDirectQuotation2), 
whatever FXCrossInstrument and CrossThroughXXX in Instrument or 
InstrSymbolInfo.
Take USD/JPY and update DB to have null:
UPDATE INSTRUMENT SET EURMAJORPAIRINSTRID1 = NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'USD/JPY'
UPDATE INSTRUMENT SET EURMAJORPAIRINSTRID2 = NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'USD/JPY'
UPDATE INSTRUMENT SET EURDIRECTQUOTATION1 = NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'USD/JPY'
UPDATE INSTRUMENT SET EURDIRECTQUOTATION2 = NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'USD/JPY'";/PFX/FX_Synthetic;Low - Nice to Have;FX_Synthetic_cross;FXregression;;;PFX-2666;;QAP-3261;;"Open AdminFE => Listing => set USD/JPY and change Spot listing for this 
instrument";;Modify wizard is opened;;
;;;;;;;;;;;;;;;"Go to Feature tab and tick ""Cross Through EUR"" save and submit";;no errors appear;;
;;;;;;;;;;;;;;;Start ITK (have linked to settlDate);ln -sf itk_settldate.xml client_itk.xml;no errors appear;;
;;;;;;;;;;;;;;;Open DB => Instrument tab;"select * from INSTRUMENT WHERE INSTRTYPE = 'SPO' AND INSTRSYMBOL = 
'USD/JPY'";"If Base and Quote currencies are not EUR, compute (EURMajorPairInstrID1, 
EURDirectQuotation1) and (EURMajorPairInstrID2, EURDirectQuotation2), 
whatever FXCrossInstrument and CrossThroughXXX in Instrument or 
InstrSymbolInfo.";;
QAP-T2670;CrossPair: If Base and Quote currencies are not USD;Specified;;"If Base and Quote currencies are not USD, compute (USDMajorPairInstrID1, 
USDDirectQuotation1) and (USDMajorPairInstrID2, USDDirectQuotation2), 
whatever FXCrossInstrument and CrossThroughXXX in Instrument or 
InstrSymbolInfo.
Take EUR/JPY and update DB to have null:
UPDATE INSTRUMENT SET USDMAJORPAIRINSTRID1 = NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'EUR/JPY'
UPDATE INSTRUMENT SET USDMAJORPAIRINSTRID2 = NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'EUR/JPY'
UPDATE INSTRUMENT SET USDDIRECTQUOTATION1 = NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'EUR/JPY'
UPDATE INSTRUMENT SET USDDIRECTQUOTATION2 = NULL WHERE INSTRTYPE = 'SPO' 
AND INSTRSYMBOL = 'EUR/JPY'";/PFX/FX_Synthetic;Low - Nice to Have;FX_Synthetic_cross;FXregression;;;PFX-2666;;QAP-3260;;"Open AdminFE => Listing => set EUR/JPY and change Spot listing for this 
instrument";;Modify wizard is opened;;
;;;;;;;;;;;;;;;"Go to Feature tab and tick ""Cross Through USD"" save and submit";;no errors appear;;
;;;;;;;;;;;;;;;Start ITK (have linked to settlDate);ln -sf itk_settldate.xml client_itk.xml;no errors appear;;
;;;;;;;;;;;;;;;Open DB => Instrument tab;"select * from INSTRUMENT WHERE INSTRTYPE = 'SPO' AND INSTRSYMBOL = 
'EUR/JPY'";"If Base and Quote currencies are not USD, compute (USDMajorPairInstrID1, 
USDDirectQuotation1) and (USDMajorPairInstrID2, USDDirectQuotation2), 
whatever FXCrossInstrument and CrossThroughXXX in Instrument or 
InstrSymbolInfo.";;
QAP-T2671;Custom Color for RFQ book rows in case of QuoteStatus is empty;Manual;;"Quote Request blotter items should be colored based on quote status.
There is a special color pallet for quote status in FE Trading Options";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;kbrit;;PFX-2143, PFX-2626;;QAP-3258;;Open options of FE Trading and check that default colors selected fro Quote;;Different colors selected;;
;;;;;;;;;;;;;;;"From fix send RFQ that wouldn't be auto quoted( qty < sum of bends for the 
instrument)";"EUR/USD
SPOT";RFQs appeared in the Quote Request blotter;;
;;;;;;;;;;;;;;;"check Quote Status is empty;
check color of QRF item";;RFQ item colored like New (color selected in step one fro quote status New);;
;;;;;;;;;;;;;;;Reject it via DMI or quote book(if availible);;RFQ change status to and color to Rejected;;
QAP-T2672;FETrading - Order Blotter : New Out-piloting extension (ESP+RFQ_FX+EQ);Manual;;In order blotter must be different orders with different type and tenor;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression, PILOTING;;;PFX-2510;;QAP-3257;;"Open Trading FE => Aggregated Market Rates and open 2 ESP tiles with 
EUR/USD Spot
and 1 RFQ tile";;Tiles are opened;;
;;;;;;;;;;;;;;;Open Order blotter;;Order blotter is opened with list of orders inside;;
;;;;;;;;;;;;;;;Make Order Blotter piloted by Aggregated Rates;"Order blotter is out-piloting
Agg. Rates is in-piloting";Blotter was piloted;;
;;;;;;;;;;;;;;;"Through Ctrl select 3 orders in Order blotter with different instruments 
(FX type )";see .gif;"Three ESP tiles and RFQ change Instrument and tenor into selected ones in 
Order Blotter";;
;;;;;;;;;;;;;;;Unselect all orders and select orders with InstrType = Equity;NOT NECEESARY;Tiles keep previous changes;;
QAP-T2673;FETrading - Order Blotter : New Out-piloting extension (Unique Instruments From List of Orders);Specified;;;/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-2510;;QAP-3256;;"Open Trading FE => Aggregated Market Rates and open 5 tiles with EUR/USD 
Spot";;Tiles are opened and being priced;;
;;;;;;;;;;;;;;;Open Order blotter;;Order blotter is opened with list of orders inside;;
;;;;;;;;;;;;;;;Make Order Blotter piloted by Aggregated Rates;"Order blotter is out-piloting
Agg. Rates is in-piloting";Blotter was piloted;;
;;;;;;;;;;;;;;;Through Ctrl select 3 orders in Order blotter with different instruments;see .gif;Three ESP tiles change Instrument into selected ones in Order Blotter;;
;;;;;;;;;;;;;;;"Through Ctrl select 2 more orders in Order blotter with the same 
instruments (don't unselect previous 3 orders )";see .gif;Nothing changed, the other two ESP tile keep EUR/USD instrument;;
QAP-T2674;Check rolling of several positions dates -> 1 position date;Specified;;"+home/quodxxx/quod/db/scripts/+

To drop the key in DB => DBInstall.sh 9 (*9 - Disable all constraints*)

true

Check the rolling of positions, having several positions to be rolled : one 
for day -2 and one for day -1

The positions are expected to roll to next day

 

To run this test intrady, it will be necessary to change the date of 
existing positions in DB and restart the PKS, then run the ITK

You can use for example the following queries :

update fxcurrpairposit set possettldate = 20201123, 
quotefxcurrpositpossettldate = 20201123, basefxcurrpositpossettldate = 
20201123 where possettldate = 20201125;

update fxcurrposit set possettldate = 20201123 where possettldate = 
20201125;

 ";/PFX/FX_MM_Position;High - Must Have;FX_MM_Positions;FXregression;lzaharia;;PFX-1486;;QAP-3254;;"Having PKS started, execute 2 orders with the same currency pair and 
different settlement dates (for example USD/CAD spot, USD/CAD FXN";;Positions created for the 2 settlement dates one line epoch created;;
;;;;;;;;;;;;;;;Stop PKS, stop FE, in DB change settlement dates to D-2 and D -1;;"Dates changed
Restart PKS and FE and check the settlement dates in Position window";;
;;;;;;;;;;;;;;;Run ITK settlement date;;"After running the positions are updated : one new position USD/CAD with 
settlement date D+1, the quantity is equal to the sum of initial positions 
quantities";;
QAP-T2675;ESP: Support for Broken Date SOR Orders;Specified;;"{color:#DE350B}*QUOD.FIXSELLQUOD1*{color} component on 308@mercury Sender: 
QUOD1 Target: QUODFX_UAT 10.0.22.77:14052
35=D

{code:java}
< 
8=FIXT.1.1|9=189|35=D|49=QUOD1|56=QUODFX_UAT|34=23|52=20210125-13:29:38|1=ASPECT_DB|11=1868086226|21=2|15=EUR|38=1000000|40=2|44=1.23980|54=1|55=EUR/USD|59=1|60=20210125-13:29:38|63=B|64=20210202|167=FXFWD|10=075|


{code}
60=20201124 64=20201202 (the day before 1W)";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;PFX-2392;;QAP-3253;;From MiniFix send SOR order 35=D on Broken Date;message find in description;order is sent;;
;;;;;;;;;;;;;;;Check Order Book on FE trading;;Order must be filled;;
;;;;;;;;;;;;;;;Check Tenor for AO and for child orders;;Tenor is Broken;;
;;;;;;;;;;;;;;;Open Trades blotter;;there are executions with Broken tenor;;
;;;;;;;;;;;;;;;Open Position Blotter;;"See appropriate settlement date positions updated from broken date orders 
and trades.";;
QAP-T2676;ESP: Broken Date ESP Subscriptions;Specified;;"35=V
{code:java}
< 
8=FIXT.1.1|9=191|35=V|49=MD1|56=QUODFX_UAT|34=61|52=20210722-12:26:38|262=EUR/USD:FXF:BDA:MS_8|263=1|264=10|265=0|267=2|269=0|269=1|146=1|55=EUR/USD|460=4|63=B|461=MS-SW|64=20210730|22=8|167=FXFWD|1301=MS-SW|10=156|


{code}
35=W
{code:java}
> 
8=FIXT.1.1|9=1012|35=W|34=94|49=QUODFX_UAT|52=20210722-12:26:39.739044|56=MD1|1128=9|55=EUR/USD|262=EUR/USD:FXF:BDA:MS_8|268=10|269=0|270=1.181988|40=2|271=3000000|64=20210730|1026=1.18196|1027=0.000028|269=0|270=1.181983|40=2|271=7000000|64=20210730|1026=1.18196|1027=0.000023|269=0|270=1.181978|40=2|271=13000000|64=20210730|1026=1.18196|1027=0.000018|269=0|270=1.181973|40=2|271=5000000|64=20210730|1026=1.18196|1027=0.000013|269=0|270=1.181968|40=2|271=3000000|64=20210730|1026=1.18196|1027=0.000008|269=1|270=1.181998|40=2|271=3000000|64=20210730|1026=1.18201|1027=-0.000012|269=1|270=1.182003|40=2|271=7000000|64=20210730|1026=1.18201|1027=-0.000007|269=1|270=1.182008|40=2|271=13000000|64=20210730|1026=1.18201|1027=-0.000002|269=1|270=1.182013|40=2|271=5000000|64=20210730|1026=1.18201|1027=0.000003|269=1|270=1.182018|40=2|271=3000000|64=20210730|1026=1.18201|1027=0.000008|461=MS-SW|779=20210722-12:26:39.713667|1301=MS-SW|1500=EUR/USD:FXF:20210730:MS.D.FSS|11501=20210722-12:26:39.713667|11502=20210722-12:26:39.713234|10=136|


{code}
*{color:#de350b}QUOD.FIXMARKETDATA{color}* component on 308@mercury 

cfg : client_qf_marketdata.xml

QUODFX_UAT
MD1

14055";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;;;PFX-2517, PFX-3107, PFX-1697, PFX-3492;;QAP-3252;;From MiniFix send MarketData request for Broken Date;choose FSS venue;request is sent;;
;;;;;;;;;;;;;;;check a response;;Response is Market Data (35=W) for selected date;;
;;;;;;;;;;;;;;;Check that we receive MDArivalTime (tag - 11502);;Tag received;;
QAP-T2677;Workflow of positions with manualy-quoted RFQ;Automated;;"* A panel or combinations of panels in the trading FE can be used to view 
positions attributed to the AutoHedger, reflecting both what has been 
executed in the market and what has been executed with clients.
* Client orders executed in response to streaming quotes and auto-quoted 
RFQs are reflected in positions attributed to the AutoHedger.
* Client orders executed in response to manually quoted RFQs are reflected 
in positions attributed to the trader that responded manually to the RFQ.

*Precondition:*

 Autohedging strategy should be Last To Back.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, refactored_FX, UAQA;kbrit;;PFX-182;;QAP-3250;;"Send RFQ request on EUR/USD 1W via FIX qty > 
ClientTierInstrSymbol.AutoRFQThreshold
(From Fix Client)";;Quote request is displayed on dealer intervention / unassigned;;
;;;;;;;;;;;;;;;Open FE=>manual DI=> Accept this quote (or assign to yourself);;Quote request assigned to me;;
;;;;;;;;;;;;;;;Publish after a first estimate;;Quote published to FIX;;
;;;;;;;;;;;;;;;"Send NewOrderSingle PreviouslyQuoted order with Buy side with QuoteId
(From Fix Client)";;"Order filled in Order Book
Order execution report received by FIX with status Filled
Autohedging algo order created and executed";;
;;;;;;;;;;;;;;;Open Dealing Positions book;;"Trader should be able to view this Manually executed RFQ positions in 
Dealing Positions book";;
QAP-T2678;Spot price used for even swaps (Interpolation );Automated;;"MODIFICATION In addition, the Spot price used for even swaps (Spot Forward 
or Forward Forward swaps) should not be the mid price of the margined Spot 
bid/ask, but instead be the unmargined top of book (not quantity based) mid 
price from an aggregation of the Spot venues configured for the given 
client tier and currency pair.

Create Currency Pair (GBP/USD) with only one venue HSBC and qty = 1M. Then 
send Market Data on this venue
{code:java}
< 
8=FIX.4.4|9=540|35=W|49=TEST|56=MARKETDATA|34=171|52=20201110-12:08:16|262=GBP/USD:SPO:REG:HSBC_2|55=GBP/USD|64=SP|268=6|269=0|270=1.19585|271=1000000|15=GBP|282=HSBC|64=20201112|269=1|270=1.19612|271=1000000|273=13:15:55.430|15=GBP|282=HSBC|64=20201112|269=0|270=1.19584|271=6000000|273=13:15:55.430|15=GBP|282=HSBC|64=20201112|269=1|270=1.19615|271=6000000|273=13:15:55.430|15=GBP|282=HSBC|64=20201112|269=0|270=1.19581|271=12000000|273=13:15:55.430|15=GBP|282=HSBC|64=20201112|269=1|270=1.19620|271=12000000|273=13:15:55.430|15=GBP|282=HSBC|64=20201112|10=085|

{code}
!screenshot-1.png|thumbnail!

For GBP/USD make different margins to get MID price on the 
ClientPticingTile difference from MID price on the ESP tile (see picture 
abowe)



35=R

{code:java}
< 
8=FIXT.1.1|9=251|35=R|49=QUOD5|56=QUODFX_UAT|34=152|52=20201110-12:15:22|131=21111131|146=1|55=GBP/USD|167=FXSWAP|38=1000000|64=20201112|15=GBP|1=CLIENT1|555=2|600=GBP/USD|609=FXFWD|685=1000000|587=W1|588=20201119|600=GBP/USD|609=FXFWD|685=1000000|587=W2|588=20201126|10=195|

{code}

35=S

{code:java}
> 
8=FIXT.1.1|9=538|35=S|34=155|49=QUODFX_UAT|52=20201110-12:15:40.699|56=QUOD5|1=CLIENT1|15=GBP|55=GBP/USD|62=20201110-12:17:22.529|64=20201112|117=01201110121540050002|131=21111131|132=0|133=0|134=1000000|135=1000000|167=FXSWAP|188=1.19599|190=1.19599|460=4|537=1|555=2|600=GBP/USD-WK1-QUODFX|602=GBP/USD|603=8|616=XQFX|685=1000000|587=W1|588=20201119|681=1.195991|684=1.195991|1067=0.000001|1068=0.000001|600=GBP/USD-WK2-QUODFX|602=GBP/USD|603=8|616=XQFX|685=1000000|587=W2|588=20201126|681=1.195991|684=1.195991|1067=0.000001|1068=0.000001|1065=0|1066=0|10=014|

{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-2264;;QAP-3234;;Send QuoteRequest (35=R) for swap GBP/USD (1W 1M | 2W 1M);ue;BE replies by quote 35=S;;
;;;;;;;;;;;;;;;"Check tags
188 BidSpotRate 1.19599
190 OfferSpotRate 1.19599";see attached .png;"Check that BE takes price from market to calculate middle price for 
SpotRate
( the Spot price used for even swaps (Spot Forward or Forward Forward 
swaps) should not be the mid price of the margined Spot bid/ask, but 
instead be the unmargined top of book (not quantity based) mid price from 
an aggregation of the Spot venues configured for the given client tier and 
currency pair.)";;
QAP-T2679;AH: cross currency : Taker;Automated;;"If the trader sends a Taking Order on the (NOK/SEK) and there is an 
AutoHedger rule defined for this instrument (with ""HedgeThroughUSD"" Option 
and same Position book , then we will hold a position for (NOK/SEK) on the 
Position BOOK and once the limit is breached , the (Algo) should not split 
the Order (the HedgeThroughUSD option should be ignored).

if an external client sends an order for NOK/SEK... and it fills, and the 
AH has CrossThroughUSD, then we split that into USD/NOK and USD/SEK 
positions in the AH book.
But... if an internal trader sends an order for NOK/SEK, which they could 
do if the pair trades directly, and the trader selected the AH position 
book as the book to fill the order against (because a trader can choose 
which book they want to use), and it fills, then it will create a NOK/SEK 
entry in the AH book.
We don't split NOK/SEK orders when a trader trades it.
Only when a client trades it.
In that case... the NOK/SEK entry created from the internal trader would 
ignore the CrossThroughUSD setting. It would, however, use the position 
limits configured on the AH for NOK/SEK.

*Create AH rule for cross currency (NOK/SEK for exmpl) through USD with 
upper limit = 1M*";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX;;;PFX-1819;;QAP-3233;;Open Trading FE => ESP tile => NOK/SEK;;Prices are being priced;;
;;;;;;;;;;;;;;;"From miniFix or TradingFE send several orders on NOK/SEK to Position Book 
which is configured for you Auto Hedger";"QUOD4_1
EUR/CHF";"AutoHedger sends an Algo order with currency NOK/SEK (Do not split the 
synthetic position into the positions of the underlying legs)";;
QAP-T2680;FX Care order: reject orders directly after TimeOut;Automated;;"Go to client_cs.xml and change to 10 sec
{code:java}
10
180
1800
{code}";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;PFX-1023;;QAP-3157;;Open Trading FE and send unassigned care order;;order is sent. Status is SENT;;
;;;;;;;;;;;;;;;Wait 10 sec;20 sec for TH2;"Order gets rejected with the reason ""Time Out""";;
QAP-T2681;Back-Office Drop-Copy Reporting For Auto-Hedger Position (Internal);Automated;;"1. prepare ors.xml file for current user to get drop-copy
2. prepare auto hedger for internal client";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX, UAQA;;;PFX-2321;;QAP-3147;;"From miniFix or FE send order to exceed the limit in order to trigger AH 
order";;AH order (MO) is sent and filled;;
;;;;;;;;;;;;;;;Check back office;;"35=8 messages are sent:
1) execution report, indicating that a trade happened";;
QAP-T2682;Back-Office Drop-Copy Reporting For Auto-Hedger Position (External);Automated;;prepare ors.xml file for current user to get drop-copy;/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX, UAQA;;;PFX-2321;;QAP-3146;;From miniFix or FE send order to exceed the limit due to trigger AH order;;AH order (AO) is sent and filled;;
;;;;;;;;;;;;;;;Check back office;;"35=8 messages are sent:
1) about AO is sent ;
2) about all executions of AO order";;
QAP-T2683;Auto-Hedge Limits Based on Spot Summary Position;Manual;;"*In Position blotter must be position for particular instrument with 
settDate = Tomorrow*";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression;;;PFX-2498;;QAP-3142;;"Having position (tenor=TOM) send orders on the same client and instrument 
to exceed upper limit in order to trigger AH";;AH sends order with qty = 5M (upper limit);;
;;;;;;;;;;;;;;;Check Position blotter;;Sum of all position (converted to system currency) should be equal to 0.;;
QAP-T2684;Multiple Drop-Copy Feeds (FIX);Automated;;"{color:#DE350B}*ors.xml*{color} => {color:#DE350B}**{color} (see parent 
story)
{code:java}



gtwquod5
root
true
true
true
true








true
true










true
true
true
true
true




{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, needs_refactoring_FX;;;PFX-2363;;QAP-3141;;Send DMA order from MiniFix to ClientTier;;order is sent and filled;;
;;;;;;;;;;;;;;;on FIX session;;check that ors sends message to back office;;
QAP-T2685;Multiple Drop-Copy Feeds (FE);Automated;;"{color:#DE350B}*ors.xml*{color} => {color:#DE350B}**{color} (see parent 
story)
{code:java}



gtwquod5
root
true
true
true
true








true
true










true
true
true
true
true




{code}
{color:#0747A6}*#1*{color}

{code:java}
> 
8=FIXT.1.1|9=258|35=D|34=206|49=QUODFX_UAT|52=20210412-09:54:26.614|56=QUOD5|1128=9|1=CLIENT1|11=AO1210412095425101001|15=EUR|21=2|22=8|38=50000000|40=2|44=1.17228|48=EUR/USD|54=1|55=EUR/USD|59=1|60=20210412-09:54:24.740|63=0|64=20210414|120=USD|167=FXSPOT|207=CITI-SW|528=A|10=154|
{code}

{color:#0747A6}*#2*{color}

{code:java}
> 
8=FIXT.1.1|9=364|35=8|34=207|49=QUODFX_UAT|52=20210412-09:54:26.834|56=QUOD5|1128=9|6=0|11=AO1210412095425101001|14=0|15=EUR|17=1452200001174|21=2|22=8|31=0|32=0|37=AO1210412095425101001|38=50000000|39=0|40=2|44=1.17228|48=EUR/USD|54=1|55=EUR/USD|59=1|60=20210412-09:54:26.812|63=0|64=20210414|120=USD|150=0|151=50000000|378=4|453=1|448=QA1|447=D|452=36|460=4|528=A|847=1008|854=0|10=249|
{code}

{color:#0747A6}*#3*{color}

{code:java}
> 
8=FIXT.1.1|9=205|35=G|34=209|49=QUODFX_UAT|52=20210412-09:55:16.686|56=QUOD5|1128=9|11=OM1210412095516101001|37=AO1210412095425101001|38=50000000|40=2|41=AO1210412095425101001|44=1.1722|59=1|60=20210412-09:55:15.685|528=A|10=035|
{code}


{color:#0747A6}*#4*{color}

{code:java}
> 
8=FIXT.1.1|9=142|35=F|34=210|49=QUODFX_UAT|52=20210412-09:55:33.101|56=QUOD5|1128=9|11=OC1210412095533101001|41=OM1210412095516101001|60=20210412-09:55:32.429|10=071|
{code}";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, needs_refactoring_FX;;;PFX-2363;;QAP-3140;;"Send buy Algo order from FE with low price and big qty
tif=GTC";;order is sent and status = open;;
;;;;;;;;;;;;;;;on FIX session;"#1
#2";check that ors sends message to back office;;
;;;;;;;;;;;;;;;Modify Algo order : market price;;Order is modified and starts filling;;
;;;;;;;;;;;;;;;on FIX session;#3;check that ors sends message to back office;;
;;;;;;;;;;;;;;;Cancel algo order;;order is canceled;;
;;;;;;;;;;;;;;;on FIX session;#4;check that ors sends message to back office;;
QAP-T2686;FETrading - Client Pricing Tile: Submit trades on behalf of client;Open;;;/PFX/FX_Display;High - Must Have;FX_Display;FXregression;kbrit;;PFX-1858, PFX-3954;;QAP-3132;;"Open Client Execution Order Ticket in FE Trading(Dealing Trade Book> Client 
Trade Ticket)";;"Client Execution ticket window opened.
Trade Values Listing, Side, Client available and may be entered.";;
;;;;;;;;;;;;;;;Enter mandatory fields;"Listing EUR/USD
Side Buy
Client: SWEDCUST13(for ex)
Qty: 1000000
Price: 1.2012
LastMkt: QUODFX";check that field saved and contain correct data;;
;;;;;;;;;;;;;;;Click on Add button;;Execution with entered data created;;
;;;;;;;;;;;;;;;Click on Create button;;Order created;;
QAP-T2687;Functioning of hedging option in dealer intervention window;Specified;;"This test validates PFX-1772
_Acceptance Criteria_
* From the FX RFQ DI panel, add a checkbox labeled ""Automatically Hedge 
Executions"" which is on by default (when the DI panel is initially opened 
from the Ribbon).
* The state of this checkbox must be saved as part of the user's workspace, 
including when the panel is loaded when the saved workspace is recovered, 
and also as part of saving the default layout of the DI panel with the 
bookmark in the header for the default layout of the panel when it is next 
opened from the ribbon.
* When the checkbox is true, the executed client order should be applied to 
the auto-hedger's position book that is active for that client.
* When the checkbox is false, the executed client order should be applied 
to the trader's position book associated with that client.
 ";/PFX/FX_MM_Autohedging;High - Must Have;FX_MM_Autohedging;FXregression;lzaharia;;PFX-1772;;QAP-3128;;"From client interface / currenex gui, send a RFQ of 40M to go to delaer 
intervention window";;RFQ sent, appears in unassigned of dealer intervention window;;
;;;;;;;;;;;;;;;Accept this RFQ;;"RFQ displayed in DI window
IN tile the checkbox ""Automatically Hedge Executions"" is ticked";;
;;;;;;;;;;;;;;;Execute order;;"Orders are sent to hedge the position
External and Internal positions are updated";;
;;;;;;;;;;;;;;;"Untick the option ""Automatically Hedge Executuions""";;Option unticked;;
;;;;;;;;;;;;;;;Send a new RFQ to have it on a dealer intervention tile;;Tile opened with option unticked;;
;;;;;;;;;;;;;;;Save workspace with option unticked;;Workspace saved;;
;;;;;;;;;;;;;;;Restart FE with DI window;;DI window restored with correct settings;;
QAP-T2688;Manual DI: a maximum allowable quantity for far lag is less than in request (swap Fwd | Fwd);Automated;;"Swap RFQ for uneven spot forward and uneven forward forward swaps pricing 
(pricing, executable, margins, auto-quote vs manual DI) should be 
determined by both spot and forward tenor configuration. Manual DI should 
be determined by comparing the quantity of the forward leg(s) against the 
maximum allowable quantity configured on the corresponding tenor(s) for the 
currency pair for that tier, going to DI if the RFQ quantity for either leg 
is higher than the allowable quantity for the corresponding forward tenor. 
In addition, it should go to DI if the residual spot quantity is higher 
than the allowable quantity configured on the Spot tenor. For instance, for 
a swap RFQ of near leg Spot for 1 million and far leg 1 month for 3 
million, then the residual quantity is 2 million, and the RFQ would go to 
manual DI if the Spot tenor is configured with a maximum allowable quantity 
less than 2 million or if the 1 month forward tenor is configured with a 
maximum allowable quantity of less than 3 million. For a swap RFQ of near 
leg 1 month for 1 million and far leg 5 month for 3 million, then the 
residual quantity is 2 million, and the RFQ would go to manual DI if the 
Spot tenor is configured with a maximum allowable quantity less than 2 
million or if the 1 month forward tenor is configured with a maximum 
allowable quantity of less than 1 million or if the 5 month forward tenor 
is configured with a maximum allowable quantity of less than 3 million.

*Test with Instrument which configured with qty = 1M,2M,3M for Spot and qty 
= 1M for 1W tenor*";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-2264;;QAP-3113;;Open TradingFE => ClientPricingTile => select ClientTier | EUR/USD | Spot;;Prices are being published.;;
;;;;;;;;;;;;;;;"From miniFix send uneven swap Quote Request for this clientTier (1W 2M/2W 
3M)";;"The RFQ would go to manual DI because the 1 week forward tenor is 
configured with a maximum allowable quantity of less than 2 million";;
QAP-T2689;Manual DI: a maximum allowable quantity for far lag is less than in request (swap Spot | Fwd);Automated;;"Swap RFQ for uneven spot forward and uneven forward forward swaps pricing 
(pricing, executable, margins, auto-quote vs manual DI) should be 
determined by both spot and forward tenor configuration. Manual DI should 
be determined by comparing the quantity of the forward leg(s) against the 
maximum allowable quantity configured on the corresponding tenor(s) for the 
currency pair for that tier, going to DI if the RFQ quantity for either leg 
is higher than the allowable quantity for the corresponding forward tenor. 
In addition, it should go to DI if the residual spot quantity is higher 
than the allowable quantity configured on the Spot tenor. For instance, for 
a swap RFQ of near leg Spot for 1 million and far leg 1 month for 3 
million, then the residual quantity is 2 million, and the RFQ would go to 
manual DI if the Spot tenor is configured with a maximum allowable quantity 
less than 2 million or if the 1 month forward tenor is configured with a 
maximum allowable quantity of less than 3 million. For a swap RFQ of near 
leg 1 month for 1 million and far leg 5 month for 3 million, then the 
residual quantity is 2 million, and the RFQ would go to manual DI if the 
Spot tenor is configured with a maximum allowable quantity less than 2 
million or if the 1 month forward tenor is configured with a maximum 
allowable quantity of less than 1 million or if the 5 month forward tenor 
is configured with a maximum allowable quantity of less than 3 million.

*Test with Instrument which configured with qty = 1M,2M,3M for Spot and qty 
= 1M for 1W tenor (for this make pricing= off for all bands except 1M for 
1W tenor)*";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-2264;;QAP-3111;;Open TradingFE => ClientPricingTile => select ClientTier | EUR/USD | Spot;;Prices are being published.;;
;;;;;;;;;;;;;;;"From miniFix send uneven swap Quote Request for this clientTier (Spot 1M/1W 
3M)";;"The RFQ would go to manual DI because the 1 week forward tenor is 
configured with a maximum allowable quantity of less than 3 million";;
QAP-T2690;Manual DI: Residual quantity is higher than configured on Spot (swap Spot | Fwd);Automated;;"Swap RFQ for uneven spot forward and uneven forward forward swaps pricing 
(pricing, executable, margins, auto-quote vs manual DI) should be 
determined by both spot and forward tenor configuration. Manual DI should 
be determined by comparing the quantity of the forward leg(s) against the 
maximum allowable quantity configured on the corresponding tenor(s) for the 
currency pair for that tier, going to DI if the RFQ quantity for either leg 
is higher than the allowable quantity for the corresponding forward tenor. 
In addition, it should go to DI if the residual spot quantity is higher 
than the allowable quantity configured on the Spot tenor. For instance, for 
a swap RFQ of near leg Spot for 1 million and far leg 1 month for 3 
million, then the residual quantity is 2 million, and the RFQ would go to 
manual DI if the Spot tenor is configured with a maximum allowable quantity 
less than 2 million or if the 1 month forward tenor is configured with a 
maximum allowable quantity of less than 3 million. For a swap RFQ of near 
leg 1 month for 1 million and far leg 5 month for 3 million, then the 
residual quantity is 2 million, and the RFQ would go to manual DI if the 
Spot tenor is configured with a maximum allowable quantity less than 2 
million or if the 1 month forward tenor is configured with a maximum 
allowable quantity of less than 1 million or if the 5 month forward tenor 
is configured with a maximum allowable quantity of less than 3 million.

*Test with Instrument which configured with qty = 1M for Spot and qty = 3M 
for 1W (for this make PRICING = OFF for all bands for SPOT tenor except 
1M)*";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, refactored_FX;;;PFX-2264;;QAP-3110;;Open TradingFE => ClientPricingTile => select ClientTier | EUR/USD | Spot;;"Prices are being published. Only one band (qty=1M) is being priced (pricing 
= on).
Others are Pricing = off";;
;;;;;;;;;;;;;;;"From miniFix send uneven swap Quote Request for this clientTier (Spot 1M/1W 
3M)";;"The residual quantity is 2 million, and the RFQ would go to manual DI 
because the Spot tenor is configured with a maximum allowable quantity less 
than 2 million";;
QAP-T2691;Even spot forward swaps pricing (Forward OFF);Automated;;"Swap RFQ for even spot forward swaps and even forward forward swaps pricing 
(pricing, executable, margins, auto-quote vs manual DI) should only be 
determined by forward tenor configuration, not the Spot tenor (even if Spot 
is one of the legs of the swap). This means that even if pricing for a 
quantity is disabled for the Spot tenor, but it is enabled for the forward 
tenor, we can still auto-quote for that Spot-Forward Tenor swap. If 
however, pricing for a quantity is disabled for a given forward tenor, but 
it is enabled for another forward tenor, we cannot auto-quote for that 
Forward-Forward swap combination.";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, refactored_FX;;;PFX-2264;;QAP-3109;;Open TradingFE => ClientPricingTile => select ClientTier | EUR/USD | 1W;;Prices are being published;;
;;;;;;;;;;;;;;;Press Pricing Button to make it OFF;;Current tenor turns red.;;
;;;;;;;;;;;;;;;"From miniFix send swap Quote Request for this clientTier (Spot/1W) with qty 
= 1M";;BE sends NO quote (35=S) in reply;;
QAP-T2692;Even spot forward swaps pricing (Spot OFF);Automated;;"Swap RFQ for even spot forward swaps and even forward forward swaps pricing 
(pricing, executable, margins, auto-quote vs manual DI) should only be 
determined by forward tenor configuration, not the Spot tenor (even if Spot 
is one of the legs of the swap). This means that even if pricing for a 
quantity is disabled for the Spot tenor, but it is enabled for the forward 
tenor, we can still auto-quote for that Spot-Forward Tenor swap. If 
however, pricing for a quantity is disabled for a given forward tenor, but 
it is enabled for another forward tenor, we cannot auto-quote for that 
Forward-Forward swap combination.


{code:java}
< 
8=FIXT.1.1|9=271|35=R|49=QUOD5|56=QUODFX_UAT|34=322|52=20210415-09:24:53|131=111333429|146=1|55=EUR/USD|167=FXSWAP|54=2|38=1000000|64=20210419|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXSPOT|624=2|587=SPO|588=20210419|685=1000000|600=EUR/USD|609=FXFWD|624=1|587=W1|588=20210426|685=1000000|10=048|
{code}

{code:java}
> 
8=FIXT.1.1|9=503|35=S|34=357|49=QUODFX_UAT|52=20210415-09:24:59.425|56=QUOD5|1128=9|15=EUR|54=2|55=EUR/USD|62=20210415-09:26:53.402|64=20210419|117=01210415092453454002|131=111333429|132=-0.000122|134=1000000|167=FXSWAP|188=1.18222|190=1.18222|460=4|537=1|555=2|600=EUR/USD-SPO-QUODFX|602=EUR/USD|603=8|616=XQFX|624=2|685=1000000|587=0|588=20210419|681=1.18222|684=1.18222|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=1|685=1000000|587=W1|588=20210426|681=1.182098|684=1.182508|1067=-0.000122|1068=0.000288|1065=-0.000122|10=151|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, refactored_FX;;;PFX-2264;;QAP-3108;;Open TradingFE => ClientPricingTile => select ClientTier | EUR/USD | Spot;;Prices are being published;;
;;;;;;;;;;;;;;;Press Pricing Button to make it OFF;;Current tenor turns to red.;;
;;;;;;;;;;;;;;;"From miniFix send swap Quote Request for this clientTier (Spot/2W) with qty 
= 1M";;BE sends quote (35=S) in reply auto-quote;;
QAP-T2693;Even forward forward swaps pricing (Forward OFF);Automated;;"Swap RFQ for even spot forward swaps and even forward forward swaps pricing 
(pricing, executable, margins, auto-quote vs manual DI) should only be 
determined by forward tenor configuration, not the Spot tenor (even if Spot 
is one of the legs of the swap). This means that even if pricing for a 
quantity is disabled for the Spot tenor, but it is enabled for the forward 
tenor, we can still auto-quote for that Spot-Forward Tenor swap. If 
however, pricing for a quantity is disabled for a given forward tenor, but 
it is enabled for another forward tenor, we cannot auto-quote for that 
Forward-Forward swap combination.";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-2264;;QAP-3107;;Open TradingFE => ClientPricingTile => select ClientTier | EUR/USD | 1W;;Prices are being published;;
;;;;;;;;;;;;;;;Select row with qty = 1M and press Pricing Button to make it OFF;;Current row turns red.;;
;;;;;;;;;;;;;;;"From miniFix send swap Quote Request for this clientTier (1W/2W) with qty = 
1M";;BE sends quote (35=S) in reply;;
;;;;;;;;;;;;;;;;;;;
QAP-T2694;Even forward forward swaps pricing (Spot OFF);Automated;;"Swap RFQ for even spot forward swaps and even forward forward swaps pricing 
(pricing, executable, margins, auto-quote vs manual DI) should only be 
determined by forward tenor configuration, not the Spot tenor (even if Spot 
is one of the legs of the swap). This means that even if pricing for a 
quantity is disabled for the Spot tenor, but it is enabled for the forward 
tenor, we can still auto-quote for that Spot-Forward Tenor swap. If 
however, pricing for a quantity is disabled for a given forward tenor, but 
it is enabled for another forward tenor, we cannot auto-quote for that 
Forward-Forward swap combination.";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, refactored_FX;;;PFX-2264;;QAP-3106;;Open TradingFE => ClientPricingTile => select ClientTier | EUR/USD | Spot;;Prices are being published;;
;;;;;;;;;;;;;;;Press Pricing Button to make it OFF;;Current tenor turns red.;;
;;;;;;;;;;;;;;;"From miniFix send swap Quote Request for this clientTier (1W/2W) with qty = 
1M";you need to add rfq venue to Forward venue tab on AdminFE;"Quote request is appeared in Quote Request Book.
BE sends quote (35=S) in reply , despite of the pricing off for Spot tenor";;
QAP-T2695;FE Trading: the Back-End assigns the latest quote ID for the top of book venue at that moment to the outgoing RFQ response;Specified;;;/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;FXregression;;;PFX-2404;;QAP-3101;;Open Trading FE => Aggregated Market Rates => RFQ tile;"EUR/USD
Spot";Tile is opened;;
;;;;;;;;;;;;;;;Press on SEND button;;Quotes are appeared on Quote Book and on the RFQ tile;;
;;;;;;;;;;;;;;;Press on BUY/SELL TOB;;Open Order Book and check that order is filled. OrdType = PreviouslyQuoted;;
;;;;;;;;;;;;;;;In ORS log file;;"If the user clicks the top of the book , the ORS receives a list of all 
listings and finds the best quote for them (see comment)";;
QAP-T2696;FE Trading: The Back-End assigns the latest quote ID for selected venue to the outgoing RFQ response;Specified;;;/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;FXregression;;;PFX-2404;;QAP-3099;;Open Trading FE => Aggregated Market Rates => RFQ tile;"EUR/USD
Spot";Tile is opened;;
;;;;;;;;;;;;;;;Press on SEND button;;Quotes are appeared on Quote Book and on the RFQ tile;;
;;;;;;;;;;;;;;;Press on some venue in RFQ tile (CITI for example);;Open Order Book and check that order is filled. OrdType = PreviouslyQuoted;;
;;;;;;;;;;;;;;;In ORS log file;;Only one checking for quote must be in log file (see comment);;
QAP-T2697;See Auto-Hedger trades opposite to FX Client regular executed trades in trade blotter;Automated;;;/PFX/FX_MM_Autohedging;High - Must Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX;;;;;QAP-3082;;From Client Tile send BUY order EUR/USD;;Order is sent;;
;;;;;;;;;;;;;;;Open TradingFE => Order and Trading Blotter;;"In order blotter you see client's order with execution. This execution 
should be in trades blotter with opposite sell trade.";;
;;;;;;;;;;;;;;;From Client Tile send one more order to trigger AH and open Trades blotter;;"There should be AH execution with the same side (buy) without any opposite 
executins";;
QAP-T2698;Display of dealer intervention CCY2 Resquest side;Specified;;"Check request side for DI on CCY 2 following PFX-1866

Bid if quoterequest side is buy

Ask if quote request side is sell

Both if quote request side is null

Fill side :

sell -> ask

buy -> bid";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression;lzaharia;;PFX-1866;;QAP-3081;;"Send a quote request on CCY2 to be manually handled by the DI window, on 
both sides";;Quote displayed on DI window, with quote request side : both;;
;;;;;;;;;;;;;;;Execute quote request to sell USD;;"Display fill side ask in DI window
Order side is sell";;
;;;;;;;;;;;;;;;"Send a quote request on CCY2 Side BUY to be manually handled by the DI 
window";;Quote displayed on DI window, with quote request side : Bid;;
;;;;;;;;;;;;;;;Execute quote request;;"Buy USD : Display fill side is bid on DI window
Oder side is buy";;
;;;;;;;;;;;;;;;"Send a quote request on CCY2 Side SELL to be manually handled by the DI 
window";;Quote request displayed on DI window, with quote request side : Ask;;
;;;;;;;;;;;;;;;Execute quote request;;"Sell USD : Display fill side is ask on DI window
Order side is sell";;
QAP-T2699;Check the rolling of settlement dates with several dates and several positions;Specified;;"To drop the key in DB => DBInstall.sh 9 (*9 - Disable all constraints*)

true

Check the rolling of settlement dates, having several instruments, several 
positions, with some working positions. Focus on USD/CAD instrument which 
has a settlement date T+1";/PFX/FX_MM_Position;High - Must Have;FX_MM_Positions;FXregression;lzaharia;;PFX-1486;;QAP-3080;;"On Day D :
send several orders on spot USD/CAD
send several orders on M1 USD/CAD
send several orders on M2 USD/CAD
These orders must be sent from currenex / minifix or on behalf of the 
client to have corresponding internal positions
Some of these orders must be open, GTD";;"At the end of the day :
Take a snapshot of Position window
Export fxcurrpairposit
Export fxcurrposit";;
;;;;;;;;;;;;;;;"On day D+1, check positions :
The positions with date D+1 have rolled";;"On Posiition screenshot, check that positions are the same between the 
screenshot and the position window, only the date has changed
Working positions have been kept
On fxcurrpairposit, check that a new line has been created with new date, 
taking all information of previous date
Positions from previous date are alive = N";;
QAP-T2700;FETrading: Get Trading FE Revision From Update Server URL;Specified;;"In the page of url 
""https://support.quodfinancial.com/confluence/pages/viewpageattachments.action?pageId=127467970"", 
there is no zip file which contains the string 
""Quod_Financial_Trader_Front-end"", this is what the FE looks for to get the 
revision numbers, that's why you still see your revision.

Did you try with : 
""https://download-lon4.quodfinancial.com/frontend/SB/UAT/""? it should work 
for this URL as the page contains zip files with the required string 
format.

FYI, you will see the expected revision number (defined in the DB or 
fallback to the SErvers url) only in case where your FE is old.
So if your FE is the right one (recent), of course you will see the revsion 
and there is nothing shown as to warn the user (from DB or Server for a 
recent revision).

Only *{color:#DE350B}UPDATE_SERVER_URL{color}* must be filled for this test 
and *UPDATE_URL_USERNAME* and *UPDATE_URL_PASSWORD* +null+";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-1266;;QAP-3073;;"Open DB ""QuodSettings"" and add the link to ""UPDATE_SERVER_URL' field";https://download-lon1.quodfinancial.com/frontend/DEMO/UAT/;Save DB and restart FE;;
;;;;;;;;;;;;;;;Open FE Trading with old revistion;or check that there is a new revision by the link above;"the ""update available"" icon in the main trading interface and the About 
window
(see attached)";;
;;;;;;;;;;;;;;;;Delete the link from DataBase;;;
QAP-T2701;FETrading: Aggressive: default values for Scenario and Policies in FX OrderTicket;Automated;;PFX-1849;/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;PFX-1802;;QAP-3069;;"Open TradingFE=> Order Ticket => Default FX Value => and set parameters as 
on screenshot and press Save";Strategy type = Quod TWAP;;;
;;;;;;;;;;;;;;;Open ESP and press on TOB;;Order ticket is opened. Check that Strategy is the same as as default;;
;;;;;;;;;;;;;;;save workspace and reopen FE and press on TOB;;Order ticket is opened. Check that Strategy is the same as as default;;
QAP-T2702;FETrading: Passive: default values for Scenario and Policies in FX OrderTicket;Automated;;PFX-1849;/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;PFX-1802;;QAP-3068;;"Open TradingFE=> Order Ticket => Default FX Value => and set parameters as 
on screenshot and press Save";Strategy type = Quod TWAP;;;
;;;;;;;;;;;;;;;Open ESP and press on BID/ASK button;;Order ticket is opened. Check that Strategy is the same as as default;;
QAP-T2703;3legAutohedging : check basic behaviour (USDtoEUR);Automated;;"This test validates PFX-1808 : basic behaviour with configuration for 
autohedging

For currency pair NOK/SEK with 3 leg cross USD/NOK, EUR/USD, EUR/SEK, you 
need to configure the following autohedging :

USD/NOK : threshold 1,000,000

EUR/USD : threshold 1,000,000

EUR/SEK : threshold 1,000,000

For NOK/SEK, the threshold needs to be empty but the hedging needs to be 
configured as USDthroughEUR
!screenshot-1.png|thumbnail!";/PFX/FX_MM_Autohedging;High - Must Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX;lzaharia;;;;QAP-3067;;From NOK/SEK pricing tile, send a ESP order of quantity 1 million buy;"GBP/AUD
GBP/USD
EUR/USD

[AURUM1/QUOD4_1]
[CHF/THB]
[USD/CHF]
[EUR/THB]
[EUR/USD]";"Order filled
Positions displayed :
CLIENT Position NOK/SEK 1 million
USD/NOK approx 173000
EUR/SEK approx -145000
EUR/USD approx 145000";;
QAP-T2704;FETrading - Slippage : Multi-Pair User Options Slippage;Automated;;;/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;PFX-1771, PFX-3221;;QAP-3066;;Open FE => Options => Order ticket => Custom Currency Slippage;;Custom Currency Slippage is opened;;
;;;;;;;;;;;;;;;"Add EUR/USD and set 0.5 for DMA and 1.1 for Algo
and Save";;;;
;;;;;;;;;;;;;;;Open ESP tile (EUR/USD) and press on TOB;;Check Slippage in order Ticket is equal to 1.1;;
;;;;;;;;;;;;;;;"Open ""Direct Venue Execution"" on the ESP and press on some sell/buy";;Check Slippage in order Ticket is equal to 0.5;;
;;;;;;;;;;;;;;;Change Tenor to 1W and press on some sell/buy (Direct Venue Exc);;Check Slippage in order Ticket is equal to 0.5;;
;;;;;;;;;;;;;;;Open GBP/USD and press on TOB;;Check Slippage in order Ticket is equal to 0;;
;;;;;;;;;;;;;;;Save workspace and reopen FE;;Check that default Slippage for EUR/USD is saved;;
QAP-T2705;Impact of publish / executable / pricing on the crossed currency pair;Specified;;"This test case validates PFX-1796

Select a pricing tile with a crossed currency pair (for example NOK/SEK 
through USD/NOK, EUR/USD, EUR/NOK : do the setting to have the cross only 
(remove the venues on NOK/SEK for example)

Then change pricing / executable / publish on one leg and check if the 
change is applied immediately

{color:#0747A6}*Cross Through EUR to USD*{color}";/PFX/FX_Synthetic;High - Must Have;FX_Synthetic_cross;FXregression;lzaharia;;PFX-1796;;QAP-3064;;Open a FE with 4 pricing tiles : NOK/SEK, USD/SEK, EUR/USD, EUR/NOK;RE-CHECK TEST;4 pricing tiles opened and pricing;;
;;;;;;;;;;;;;;;On USD/SEK, set pricing off;;Prices disappear on NOK/SEK;;
;;;;;;;;;;;;;;;On USD/SEK, set pricing on;;Prices disappear on NOK/SEK;;
;;;;;;;;;;;;;;;On EUR/NOK, set executable off;;Prices disappear on NOK/SEK;;
;;;;;;;;;;;;;;;On EUR/NOK, set executable on;;Prices disappear on NOK/SEK;;
;;;;;;;;;;;;;;;Open Webadmin : set publish off on EUR/USD;;Prices disappears on NOK/SEK;;
;;;;;;;;;;;;;;;Set publish on on EUR/USD;;Prices appears for NOK/SEK;;
QAP-T2706;FE Trading : Automated Margin Strategies to display on FE;Specified;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-1665;;QAP-3050;;"Open AdminFE => ClientTier => change some tier and instrument and go to the 
Tenors tab";;Tenors tab is opened;;
;;;;;;;;;;;;;;;"Change Spot and set ""Automated Margin Strategies Enabled"" to ON and 
""Position Based Margins"" to ON
Save and submit";;no errors;;
;;;;;;;;;;;;;;;"Go to FETrading => Client Pricing Tile and open that tier and instrument 
you changed";;"On the tile ""Auto On"" is appeared and activated";;
;;;;;;;;;;;;;;;"Go to the Admin and set ""
Automated Margin Strategies Enabled"" to OFF.
Save and submit";;no errors;;
;;;;;;;;;;;;;;;"Go to FETrading => Client Pricing Tile and open that tier and instrument 
you changed";;"On the tile ""Auto Off"" is not activated";;
;;;;;;;;;;;;;;;"Go to the Admin and set ""Position Based Margins"" to OFF
Save and submit and check FE";;Tile is disappeared;;
QAP-T2707;FETrading: Column tooltips in the Rates sub-section under Sweepable;Manual;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, refactored_FX;;;PFX-1599;;QAP-3049;;Open Trading FE => Pricing Tile;;"In the Rates sub-section under Sweepable, set following column tooltips:
""-"" / ""+"" => ""Bid Effective Margin (pips)"" / ""Ask Effective Margin (pips)""
""Base"" => ""Bid Base Margin"" / ""Ask Base Margin"" indicating the current 
margin format (same as described above for ""Margin Adjustment Increment"")
""Band"" => ""Bid Configured Volume Band"" / ""Ask Configured Volume Band""
""Pub"" => ""Bid Published Quantity"" / ""Ask Published Quantity""
""Spot"" => ""Bid Spot Price"" / ""Ask Spot Price"" (same tooltips as normal ESP 
tile)
""Pts"" => ""Bid Forward Points"" / ""Ask Forward Points"" (same tooltips as 
normal ESP tile)
""Px"" => ""Bid Price"" / ""Ask Price"" (same tooltips as normal ESP tile)";;
QAP-T2708;FX FETrading - Tenors : Make Blotter Tenor Columns Consistent;Automated;;;/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;FXregression, refactored_FX;;;PFX-2166;;QAP-3048;;From miniFix or Trading FE send RFQ;Spot;quote request is sent;;
;;;;;;;;;;;;;;;"Execute order and check :
* FE Trading> My Trades;
* FE Trading> My Orders;
* FE Trading> Order Book;
* FE Trading> Quote Request book;";;Tenor column has value = Spot;;
;;;;;;;;;;;;;;;"From miniFix or Trading FE send RFQ (1W). Execute order and check orderBook 
blotter:
* FE Trading> My Trades;
* FE Trading> Order Book;
* FE Trading> My Orders;
* FE Trading> Quote Request book;";;Tenor column has value = 1W;;
;;;;;;;;;;;;;;;"From miniFix or Trading FE send RFQ swap (Spot 1W). Execute order and check 
orderBook blotter:
* FE Trading> My Trades;
* FE Trading> My Orders;
* FE Trading> Order Book;
* FE Trading> Quote Request book;";;"Tenor column = Spot
Near Leg Tenor = Spot
Far Leg Tenor = 1W";;
;;;;;;;;;;;;;;;"From miniFix or Trading FE send RFQ swap (TOM 2W). Execute order and check 
orderBook blotter:
* FE Trading> My Trades;
* FE Trading> My Orders;
* FE Trading> Order Book;
* FE Trading> Quote Request book;";;"Tenor column = TOM
Near Leg Tenor = TOM
Far Leg Tenor = 2W";;
QAP-T2709;The state of Child Grid to  restore with User Workspace;Specified;;;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression;;;PFX-2470;;QAP-3046;;Open FE = > Client Price Summary => child row;;Client Price Summary with child row is opened;;
;;;;;;;;;;;;;;;Save workSpacce;;WorkSpace is saved;;
;;;;;;;;;;;;;;;Delete several columns from CHILD row;;columns are deleted;;
;;;;;;;;;;;;;;;Go to LayOut => Reset;;previous Workspace with child row and all columns are restored;;
QAP-T2710;FX FETrading - Offer Margin and bid margin to consider 0 as default value;Automated;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, refactored_FX;;;PFX-2407;;QAP-3045;;"Open Admin FE => FX Market Making => Client Tier and change instrument 
(EUR/GBP for exmpl)";for manual;modify wizard is opened;;
;;;;;;;;;;;;;;;Add new sweepable qty and go to Tenor tab;for manual;tenor tab is opened;;
;;;;;;;;;;;;;;;Edit Spot => manage Volume Bands;for manual;check that on the row with new qty are empty places (without margins);;
;;;;;;;;;;;;;;;Save and submit;for manual;Submit without errors;;
;;;;;;;;;;;;;;;Go to FE trading and open Client Pricing tile (EUR/GBP spot);FOR TH2;band with empty margins now has 0;;
QAP-T2711;FE: OrderTicket : Enable SOR Iceberg Orders Through FX Ticket;Automated;;;/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;;;PFX-1917;;QAP-3042;;Open Aggregated Rates => ESP tile;EUR/USD , Spot;Tile is opened;;
;;;;;;;;;;;;;;;Press on the TOB bid of ask;;Orders Ticket is opened;;
;;;;;;;;;;;;;;;"Set 145 to ""Display Qty"" filed and send SOR order";;;;
;;;;;;;;;;;;;;;Check Order book;;"AO is send and filled. Display Qty column contains the value from Order 
ticket (145)";;
QAP-T2712;FE: Auto-Hedger to Hedge Against Client Tiers and Another Auto-Hedger to exceed the limit;Specified;;There should be at least two Auto Hedger in FX_MM_AH section in Admin;/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression;;;PFX-1420, PFX-4341;;QAP-3039;;"Go to WebAdmin => FX Market Making => Client Tier => Instrument and change 
existed one (EUR/USD for example)";Sample data for TH2;Modify wizard is opened;;
;;;;;;;;;;;;;;;Go to Internal client tab, add client and submit;"only FIRM client can be added
Sample data for TH2";client is added without errors;;
;;;;;;;;;;;;;;;"Go to AutoHedger section. There must be two AH. Change the first one (for 
exmpl AH1) and go to Instrument tab";Sample data for TH2;Instrument tab is opened;;
;;;;;;;;;;;;;;;"Change Instrument (GBP/USD for example) and set ""Send Hedger order"" to 
Internal market, save it and submit";Sample data for TH2;it is saved without errors;;
;;;;;;;;;;;;;;;Change another AH (for exmpl AH2) and go to Internal client.;Sample data for TH2;Internal client tab is opened;;
;;;;;;;;;;;;;;;"Add client (""Position Book"" from AH1 is a client for current Auto Hedger 
AH2) , save and submit";Sample data for TH2;it is saved without errors;;
;;;;;;;;;;;;;;;Send an order via miniFix or TradingFE to exceed upper limit for AH1;;"Order is sent and executed.
AH1 sends the hedge order on the SBP listing (DMA order , 
TIF=ImmediateOrCancel, OrdType=Market, Owner = AH_TECHNICAL_USER), instead 
of sending an SOR order.
Client Name is equal to PositionBook of AH1";;
;;;;;;;;;;;;;;;Check Dealing Position Book;;In Position blotter is appear new row with account = positionBook of AH2;;
;;;;;;;;;;;;;;;"Send as mush order as you need to exceed the upper limit of AH2 (which has 
Internal Client)";;"AutoHedger order (AO) is sent and executed.
ClientName is equal to PositionBook for AH2
Qty of AO = qty for External client in Position blotter";;
QAP-T2713;Auto-Hedging: (Hedge Triggers) - Schedule Going Active between 2 hedgers;Automated;;"Create 2 AutoHedger rules :
AutoHedger 1: EUR/USD : Long Threshold 10M.
AutoHedger 2: EUR/USD : Long Threshold 5M.

*{color:#DE350B}AutoHedgers must have the same Position Book{color}*";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX, UAQA;;;PFX-1947;;QAP-3017;;"In Admin go to FX Market Making => Auto Hedger and make AutoHedger2 become 
active in 2 minute after AutoHedger1 become inactive";"Schedule:
AutoHedger1: Monday 08:00 - 14:00
AutoHedger2: Monday 14:02-18:00";;;
;;;;;;;;;;;;;;;From MiniFix or ClientPricingTile on FE send EUR/USD order with qty = 7M;;Order is filled. Hedger is not triggered;;
;;;;;;;;;;;;;;;"Wait until AutoHedger 1 become inactive and AutoHedger 2 become active
(check Dealing Order Book)";;AutoHedger order is sent and filled.;;
QAP-T2714;See FX Client RFQ executed trades in trade blotter;Automated;;"This test check that FE Trading user could see executed trades in client 
Trade Blotter";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;kbrit;;;;QAP-3005;;Open position blotter and check open position for selected currency;;Window opened, currency exist(if there were trades before);;
;;;;;;;;;;;;;;;Send RFQ and after autoquoting send order to these quote;;"quote comes as response to RFQ;
order filled;";;
;;;;;;;;;;;;;;;check trade blotter;;Trade blotter trade appeared;;
QAP-T2715;See FX Client RFQ executed trades in Client position blotter (fx_mm);Automated;;"This test check that FE Trading user could see executed trades in client 
Position Blotter";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX, UAQA;kbrit;;;;QAP-3004;;Open position blotter and check open position for selected currency;;Window opened, currency exist(if there were trades before);;
;;;;;;;;;;;;;;;"Send RFQ frim client interface and after autoquoting send order to these 
quote";;"quote comes as response to RFQ;
order filled;";;
;;;;;;;;;;;;;;;check position blotter;;Positions for the currency changed for trade qty;;
QAP-T2716;Confirm FX Client RFQ executed trades reported to back office;Automated;;"The test check work of drop copy function works with RFQ trades.
*Important:*
For this test, we need two fix users. First will send RFQ and order and the 
second will receive drop copy message.

You can use gtwquod3 and gtwquod5 at quod309@kratos to check it

*Precondition:*
BE should be configured to enable drop copy function( configuration could 
be founded in Error+Fixing  QA file).";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;DropCopy, FXregression, needs_refactoring_FX, UAQA;kbrit;;;;QAP-3003;;connect fix user that would wait drop-copy message;;Check that logon successful;;
;;;;;;;;;;;;;;;Send RFQ to BE via fix message;;check that RFQ received on BE and auto-quoted;;
;;;;;;;;;;;;;;;Send RFQ order via minFix to Quote created before;;check that fix message with execution of that order is sent to back office;;
QAP-T2717;Confirm trader RFQ executed trades reported to back office.;Automated;;"The test check work of drop copy function works with RFQ trades 

*Precondition:*
h2. Configure drop copy:
# Set user FIXNotif user: to ors.xml or client_ors.xml set fix user(ex. 
gtwquod5 it’s RFQ user)

 
{code:java}
        ***   
   
          gtwquod5
       ***
{code}
 
# Reboot ORS or all BE to apply the configuration.";/PFX/FX_UAQA;High - Must Have;FX_UAQA;FXregression, needs_refactoring_FX, UAQA;kbrit;;PFX-4817;;QAP-3002;;connect fix user to QSRFQ;;Check that logon successful;;
;;;;;;;;;;;;;;;Execute RFQ order(from RFQ tile);;check that copy sent to connected fix client as a beck office listener;;
QAP-T2718;Test of 3leg calculation USDToEUR;Specified;;"This test validates the calculation of prices and quantity for 3leg Cross 
USDToEUR

To perform this test, it is necessary to simulate marketdata as follows :

< 
8=FIX.4.4|9=699|35=W|49=TEST|56=MARKETDATA|34=17|52=20200915-11:31:55|262=282|55=EUR/USD|64=SP|268=6|269=0|270=1.19597|271=2000000|272=20200915-11:31:55|273=20200915-11:31:55|15=EUR|282=HSBC|64=20200629|269=0|270=1.19594|271=6000000|272=20200915-11:31:55|273=20200915-11:31:55|15=EUR|282=HSBC|64=20200629|269=0|270=1.19591|271=12000000|272=20200915-11:31:55|273=20200915-11:31:55|15=EUR|282=HSBC|64=20200629|269=1|270=1.19609|271=2000000|272=20200915-11:31:55|273=20200915-11:31:55|15=EUR|282=HSBC|64=20200629|269=1|270=1.19612|271=6000000|272=20200915-11:31:55|273=20200915-11:31:55|15=EUR|282=HSBC|64=20200629|269=1|270=1.19615|271=12000000|272=20200915-11:31:55|273=20200915-11:31:55|15=EUR|282=HSBC|64=20200629|10=016|

< 
8=FIX.4.4|9=495|35=W|49=TEST|56=MARKETDATA|34=20|52=20200915-11:32:04|262=287|55=USD/NOK|64=SP|268=4|269=0|270=5.75178|271=2000000|272=20200915-11:32:04|273=20200915-11:32:04|15=USD|282=HSBC|64=20200907|269=0|270=5.751775|271=6000000|272=20200915-11:32:04|273=20200915-11:32:04|15=USD|282=HSBC|64=20200907|269=1|270=5.75179|271=2000000|272=20200915-11:32:04|273=20200915-11:32:04|15=USD|282=HSBC|64=20200907|269=1|270=5.751795|271=6000000|272=20200915-11:32:04|273=20200915-11:32:04|15=USD|282=HSBC|64=20200907|10=130|

< 
8=FIX.4.4|9=699|35=W|49=TEST|56=MARKETDATA|34=18|52=20200915-11:31:58|262=284|55=EUR/SEK|64=SP|268=6|269=0|270=8.890282|271=2000000|272=20200915-11:31:58|273=20200915-11:31:58|15=EUR|282=HSBC|64=SP|269=0|270=8.890277|271=6000000|272=20200915-11:31:58|273=20200915-11:31:58|15=EUR|282=HSBC|64=20200904|269=0|270=8.890272|271=12000000|272=20200915-11:31:58|273=20200915-11:31:58|15=EUR|282=HSBC|64=20200904|269=1|270=8.890292|271=2000000|272=20200915-11:31:58|273=20200915-11:31:58|15=EUR|282=HSBC|64=20200904|269=1|270=8.890297|271=6000000|272=20200915-11:31:58|273=20200915-11:31:58|15=EUR|282=HSBC|64=20200904|269=1|270=8.890302|271=12000000|272=20200915-11:31:58|273=20200915-11:31:58|15=EUR|282=HSBC|64=20200904|10=144|

 

The expected marketdata is the following (having selected USDToEUR only)

!image-2020-09-15-13-43-32-672.png!

 

Detail of calculation is available in the attached spreadsheet";/PFX/FX_Synthetic;Low - Nice to Have;FX_Synthetic_cross;FXregression;lzaharia;;;;QAP-2990;;Open a ESP Tile with NOK/SEK spot, with combination USDToEUR;;ESP Tile opened;;
;;;;;;;;;;;;;;;"From FIX, send markedata messages as described above (the tags 262 of each 
message must correspond to the marketdatarequest received)";;ESP Tile displays prices from USD/NOK, EUR/USD, EUR/SEK;;
;;;;;;;;;;;;;;;Check the prices and quantities displayed;;Prices and quantity must correspond to the screenshot above;;
QAP-T2719;Check of pricing calculation for 3legCross EURToUSD;Automated;;"Check of calculation using simulated marketdata 

The simulated marketdata is the following :

< 
8=FIX.4.4|9=718|35=W|49=TEST|56=MARKETDATA|34=123|52=20200910-10:04:43|262=EUR/NOK:SPO:REG:HSBC_3|55=EUR/NOK|64=SP|268=6|269=0|270=9.39868|271=3000000|272=20200910-10:04:43|273=20200910-10:04:43|15=EUR|282=HSBC|64=20200907|269=0|270=9.39865|271=8000000|272=20200910-10:04:43|273=20200910-10:04:43|15=EUR|282=HSBC|64=20200907|269=0|270=9.39862|271=12000000|272=20200910-10:04:43|273=20200910-10:04:43|15=EUR|282=HSBC|64=20200907|269=1|270=9.3988|271=3000000|272=20200910-10:04:43|273=20200910-10:04:43|15=EUR|282=HSBC|64=20200907|269=1|270=9.39883|271=8000000|272=20200910-10:04:43|273=20200910-10:04:43|15=EUR|282=HSBC|64=20200907|269=1|270=9.39886|271=12000000|272=20200910-10:04:43|273=20200910-10:04:43|15=EUR|282=HSBC|64=20200907|10=120|

< 
8=FIX.4.4|9=719|35=W|49=TEST|56=MARKETDATA|34=124|52=20200910-10:04:48|262=EUR/USD:SPO:REG:HSBC_1|55=EUR/USD|64=SP|268=6|269=0|270=1.19597|271=2000000|272=20200910-10:04:48|273=20200910-10:04:48|15=EUR|282=HSBC|64=20200629|269=0|270=1.19594|271=6000000|272=20200910-10:04:48|273=20200910-10:04:48|15=EUR|282=HSBC|64=20200629|269=0|270=1.19591|271=12000000|272=20200910-10:04:48|273=20200910-10:04:48|15=EUR|282=HSBC|64=20200629|269=1|270=1.19609|271=2000000|272=20200910-10:04:48|273=20200910-10:04:48|15=EUR|282=HSBC|64=20200629|269=1|270=1.19612|271=6000000|272=20200910-10:04:48|273=20200910-10:04:48|15=EUR|282=HSBC|64=20200629|269=1|270=1.19615|271=12000000|272=20200910-10:04:48|273=20200910-10:04:48|15=EUR|282=HSBC|64=20200629|10=157|

< 
8=FIX.4.4|9=301|35=W|49=TEST|56=MARKETDATA|34=126|52=20200910-10:04:52|262=NOK/SEK:SPO:REG:HSBC_2|55=NOK/SEK|64=SP|268=2|269=0|270=0.5|271=1000000|272=20200910-10:04:52|273=20200910-10:04:52|15=NOK|282=HSBC|64=20200907|269=1|270=1.5|271=1000000|272=20200910-10:04:52|273=20200910-10:04:52|15=NOK|282=HSBC|64=20200907|10=115|

< 
8=FIX.4.4|9=725|35=W|49=TEST|56=MARKETDATA|34=127|52=20200910-10:04:55|262=USD/SEK:SPO:REG:HSBC_4|55=USD/SEK|64=SP|268=6|269=0|270=6.771406|271=1000000|272=20200910-10:04:55|273=20200910-10:04:55|15=USD|282=HSBC|64=20200907|269=0|270=6.771401|271=6000000|272=20200910-10:04:55|273=20200910-10:04:55|15=USD|282=HSBC|64=20200907|269=0|270=6.771396|271=12000000|272=20200910-10:04:55|273=20200910-10:04:55|15=USD|282=HSBC|64=20200907|269=1|270=6.771416|271=1000000|272=20200910-10:04:55|273=20200910-10:04:55|15=USD|282=HSBC|64=20200907|269=1|270=6.771421|271=6000000|272=20200910-10:04:55|273=20200910-10:04:55|15=USD|282=HSBC|64=20200907|269=1|270=6.771426|271=12000000|272=20200910-10:04:55|273=20200910-10:04:55|15=USD|282=HSBC|64=20200907|10=173|

 

The expected marketdata is the following :

!image-2020-09-10-12-21-56-392.png!

 

Attached the spreadsheet with the detail of calculations

Please note in the spreadsheet, the offer is 0.86176 because of a rounding 
issue in excel

The detail of margins are also described in excel";/PFX/FX_Synthetic;High - Must Have;FX_Synthetic_cross;FXregression, needs_refactoring_FX;lzaharia;;PFX-1796, PFX-208;;QAP-2966;;From simulation tool send marketdata as decribed above;;Marketdata sent;;
;;;;;;;;;;;;;;;Check result on FE pricing tile;;Results corresponding to snapshot in description;;
QAP-T2720;Check of calculation of NOK/SEK 3leg cross EURtoUSD;Specified;;"Check of calculation using simulated marketdata on NOK/SEK, EUR/NOK, 
USD/SEK, EUR/USD

Simulated marketdata :

< 
8=FIX.4.4|9=717|35=W|49=TEST|56=MARKETDATA|34=13|52=20200910-09:11:23|262=EUR/NOK:SPO:REG:HSBC_3|55=EUR/NOK|64=SP|268=6|269=0|270=9.39868|271=3000000|272=20200910-09:11:23|273=20200910-09:11:23|15=EUR|282=HSBC|64=20200907|269=0|270=9.39865|271=8000000|272=20200910-09:11:23|273=20200910-09:11:23|15=EUR|282=HSBC|64=20200907|269=0|270=9.39862|271=12000000|272=20200910-09:11:23|273=20200910-09:11:23|15=EUR|282=HSBC|64=20200907|269=1|270=9.3988|271=3000000|272=20200910-09:11:23|273=20200910-09:11:23|15=EUR|282=HSBC|64=20200907|269=1|270=9.39883|271=8000000|272=20200910-09:11:23|273=20200910-09:11:23|15=EUR|282=HSBC|64=20200907|269=1|270=9.39886|271=12000000|272=20200910-09:11:23|273=20200910-09:11:23|15=EUR|282=HSBC|64=20200907|10=121|

< 
8=FIX.4.4|9=718|35=W|49=TEST|56=MARKETDATA|34=14|52=20200910-09:11:40|262=EUR/USD:SPO:REG:HSBC_1|55=EUR/USD|64=SP|268=6|269=0|270=1.19597|271=2000000|272=20200910-09:11:40|273=20200910-09:11:40|15=EUR|282=HSBC|64=20200629|269=0|270=1.19594|271=6000000|272=20200910-09:11:40|273=20200910-09:11:40|15=EUR|282=HSBC|64=20200629|269=0|270=1.19591|271=12000000|272=20200910-09:11:40|273=20200910-09:11:40|15=EUR|282=HSBC|64=20200629|269=1|270=1.19609|271=2000000|272=20200910-09:11:40|273=20200910-09:11:40|15=EUR|282=HSBC|64=20200629|269=1|270=1.19612|271=6000000|272=20200910-09:11:40|273=20200910-09:11:40|15=EUR|282=HSBC|64=20200629|269=1|270=1.19615|271=12000000|272=20200910-09:11:40|273=20200910-09:11:40|15=EUR|282=HSBC|64=20200629|10=080|

< 
8=FIX.4.4|9=300|35=W|49=TEST|56=MARKETDATA|34=16|52=20200910-09:12:00|262=NOK/SEK:SPO:REG:HSBC_2|55=NOK/SEK|64=SP|268=2|269=0|270=0.5|271=1000000|272=20200910-09:12:00|273=20200910-09:12:00|15=NOK|282=HSBC|64=20200907|269=1|270=1.5|271=1000000|272=20200910-09:12:00|273=20200910-09:12:00|15=NOK|282=HSBC|64=20200907|10=064|

< 
8=FIX.4.4|9=724|35=W|49=TEST|56=MARKETDATA|34=18|52=20200910-09:12:32|262=USD/SEK:SPO:REG:HSBC_4|55=USD/SEK|64=SP|268=6|269=0|270=6.771406|271=1000000|272=20200910-09:12:32|273=20200910-09:12:32|15=USD|282=HSBC|64=20200907|269=0|270=6.771401|271=6000000|272=20200910-09:12:32|273=20200910-09:12:32|15=USD|282=HSBC|64=20200907|269=0|270=6.771396|271=12000000|272=20200910-09:12:32|273=20200910-09:12:32|15=USD|282=HSBC|64=20200907|269=1|270=6.771416|271=1000000|272=20200910-09:12:32|273=20200910-09:12:32|15=USD|282=HSBC|64=20200907|269=1|270=6.771421|271=6000000|272=20200910-09:12:32|273=20200910-09:12:32|15=USD|282=HSBC|64=20200907|269=1|270=6.771426|271=12000000|272=20200910-09:12:32|273=20200910-09:12:32|15=USD|282=HSBC|64=20200907|10=149|

 

With this marketdata, the expected output on FE is the following :

!image-2020-09-10-12-06-37-390.png!

 

Attached excel sheet with the detail of calculations

 ";/PFX/FX_Synthetic;High - Must Have;FX_Synthetic_cross;FXregression, Mixed;lzaharia;;PFX-311;;QAP-2965;;From simulating tool, send messages as specified in the description;;Marketdata messages sent;;
QAP-T2721;FX FETrading - MM Dealer Intervention decimal places;Automated;;;/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-1267;;QAP-2958;;From Client Interface send unassigned request for quote;Forward 1W;request is got to Dealer Intervention;;
;;;;;;;;;;;;;;;Assign request to user;;it's got to Assigned RFQs window;;
;;;;;;;;;;;;;;;Check the decimal places as on the picture;;;;
QAP-T2722;Market data subscribe to forward with fix sell plugin and tag 63;Automated;;"General positive fix text. 
The main goal is to check that message 35=V now supports message tags 63
{code:java}
< 
8=FIXT.1.1|9=162|35=V|49=QUOD3|56=QUODFX_UAT|34=20|52=20210413-07:23:29|50=CLIENT1|262=1111222024|263=1|264=0|265=0|267=2|269=0|269=1|146=1|55=EUR/USD|460=4|64=20210422|167=FXFWD|10=105|

{code}";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX;kbrit;;PCON-353, PFX-726, PFX-3492;;QAP-2957;;Connect to the FIX ESP Feed-handler;;Logon is success and hart bit is sending correct.;;
;;;;;;;;;;;;;;;"Send MarkeDartaRequest(subscribe) message 35=V(tag 263=1) with bid and 
offer sides and tag 63";63 = 1W //forward;"Subscription success,
received message 35=W with prices for our instrument.";;
;;;;;;;;;;;;;;;check message tags;;"Number of band is same as displayed for this Currency and Tenor on ESP 
tile.
Prices send for bid and for offer.
Tenor is the same as we expected.";;
;;;;;;;;;;;;;;;Send MarketDataRequest (unsubscribe) message (see EX in description);;Message 35=W stop coming;;
QAP-T2723;FX Order with Stop Loss Option unsupported Single Venue negative test;Automated;;;/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;kbrit;;PFX-1518;;QAP-2949;;On FE Trading open Aggreagated Market Rates>> ESP tile and click Bid button;"EUR/USD
SPOT";"FX Order ticket Buy side opened.
Field Stop Price is empty but available";;
;;;;;;;;;;;;;;;set all required values and push Buy button;"Qty = 5M
Limit
Day
Stop Price lower than current (1.1)
*Venue = CITI*
 ";"Order appeared in order book
with free notes like that:
market data unavailable";;
;;;;;;;;;;;;;;;"Add column Stop Price
Check in order bock created order";;"Order Rejected
OrdType = StopLimit
ExecPcy = Synth(Quod MultiListing)
StpPx = 1.1";;
QAP-T2724;FX Order with Stop Loss Option negative test wrong stop loss value;Automated;;;/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;kbrit;;PFX-1518;;QAP-2948;;On FE Trading open Aggreagated Market Rates>> ESP tile and click Bid button;"EUR/USD
SPOT";"FX Order ticket Buy side opened.
Field Stop Price is empty but available";;
;;;;;;;;;;;;;;;set all required values and push Buy button;"Qty = 5M
Limit
Day
Stop Price higher than current (2.0)";"Order appeared in order book
with free notes like that:
11605 'StopPrice' (2) greater than 'Price' (1.196)";;
;;;;;;;;;;;;;;;"Add column Stop Price
Check in order bock created order";;"Order Rejected:
OrdType = StopLimit
ExecPcy = Synth(Quod MultiListing)
StpPx = 2.0";;
QAP-T2725;FX Order with Stop Loss Option positive test;Automated;;Simple positive test for Fx Order ticket stop loss option ;/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;kbrit;;PFX-1518, PFX-3520;;QAP-2947;;On FE Trading open Aggreagated Market Rates>> ESP tile and click Bid button;"EUR/USD
SPOT";"FX Order ticket Buy side opened.
Field Stop Price is empty but available";;
;;;;;;;;;;;;;;;set all required values and press Buy button;"Qty = 5M
Limit
Day
Stop Price lower than current (1.1)";Order open;;
;;;;;;;;;;;;;;;"Add column Stop Price
Check in order book created order";;"Order opened:
OrdType = StopLimit
ExecPcy = Synth(Quod MultiListing)
Stop Price = 1.1";;
QAP-T2726;3leg cross admin;Specified;;"This test validates PFX-311

View and edit a 3 leg synthetic cross combination through the admin web FE, 
by indicating a currency pair to cross through as the central leg, rather 
than just a currency as indicated in a 2 leg cross.
* In this ticket we can limit the central third leg to EUR/USD, but we must 
be able to indicate whether we are crossing CCY1 (EUR) => CCY2 (USD) or 
CCY2 (USD) => CCY1 (EUR) so we know what pairs to use for legs 1 and 3. 
Both options must be allowed to be configured simultaneously. 
* 3-leg crosses are not mutually exclusive with 2-leg crosses... it should 
be possible to configure both types of crosses at the same time for the 
same pair
* So in the web admin FE under Listings -> Feature:
** Leave ""Cross Through USD"" and ""Cross Through EUR""
** Add ""Cross Through USD to EUR"" and ""Cross Through EUR to USD""
** Remove the fields which can be derived in the BE but do not need to be 
explicitly configured in the admin FE: ""USD Direct Quotation 1"", ""USD 
Direct Quotation 2"", ""EUR Direct Quotation 1"", ""EUR Direct Quotation 2"", 
""FX Cross Instrument""

The setting of the cross is done from webadmin / Listings, after choosing a 
spot, in the following tab 

!image-2020-09-01-15-48-43-740.png!";/PFX/FX_Synthetic;Low - Nice to Have;FX_Synthetic_cross;FXregression;lzaharia;;;;QAP-2885;;"From Webadmin, choose a cross spot (for example GBP/SEK) and select FX 
Cross Instrument, Cross through USD to EUR and Cross through EUR to USD";;Values ok after validating;;
;;;;;;;;;;;;;;;"Run ITK settlement date to fill euromajorpairinstrid, 
eurintermediateinstrids, usdintermediateinstrids";;After running ITK those values are correct in DB;;
;;;;;;;;;;;;;;;Open FE and choose ESP tile with GBP/SEK;;"ESP tile opened
Select Filter Synthetic combinations and check that you have EUR/USD, 
USD/EUR and Direct";;
QAP-T2727;FX FETrading - RFQ : Piloting : The UI should remember the last client selection the user made;Specified;;!dJlqHkZ8AC.gif!;/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;FXregression;;;PFX-841;;QAP-2884;;Open RFQ tile;;Tile is opened;;
;;;;;;;;;;;;;;;Press on Piloted indicator and move it to Order Book;;Tile is piloted;;
;;;;;;;;;;;;;;;Press on some care order;;Client filed is diapered on the RFQ tile;;
;;;;;;;;;;;;;;;RMC on the RFQ tile and unpilote it;see .gif;Client field is appeared;;
QAP-T2728;Check rolling of position settlement dates;Manual;;"To drop the key in DB => DBInstall.sh 9 (*9 - Disable all constraints*)

true

This test validates PFX-1486 :

When our daily processes runs for rolling over value dates (e.g. 5pm NY for 
most pairs or 7a.m. Sydney time for NZD), we must also have a way to:
* Increment any positions for each currency pair per account group with the 
next valid spot value date (often tomorrow, but not always) to the next 
immediate valid settlement date.
* Combine any positions together for the same currency pair and account 
group with a settlement date that is <= the new rolled settlement date. The 
""<="" component of this requirement is important for:
** backwards compatibility for any settlement date positions that exist 
before this ticket has been implemented or if a position roll was missed
** to include in the roll any TOD forward trades that were done intraday

To perform this test, you need to have positions with a settlement date =< 
today in tables :

fxcurrpairposit

fxcurrposit

!screenshot-1.png|thumbnail!";/PFX/FX_MM_Position;Low - Nice to Have;FX_MM_Positions;FXregression;lzaharia;;PFX-1486;;QAP-2883;;"In FX position window in FE, display second level and position settlement 
date to see the settlement date";;FX Position displayed with settlement date on second level;;
;;;;;;;;;;;;;;;Run ITK settldate;;ITK settldate run;;
;;;;;;;;;;;;;;;Check display in FX Position window;;FX Position updated with new settlement date;;
;;;;;;;;;;;;;;;Check date in fxcurrpairposit and fxcurrposit;;"Old positions with previous dates are in alive = N
New positions with new dates are in alive = Y";;
QAP-T2729;ESP : If the tenor's currency pair Spot Pricing setting is off, then Pricing is off for that tenor.;Automated;;"If there is not enough ""On"" ESP quantities, your RFQ can't be satisfied. 
There's no quote attached to it.
and it becomes a Manual RFQ. The trader must enter a manual price.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, Mixed, needs_refactoring_FX;;;PFX-528;;QAP-2880;;"From Trading FE select Bronze, EUR/NOK, SPOT and switch Pricing to OFF 
(Executable is ON) for tenor level";"Palladium2
EUR/NOK
quod314";All bands are red;;
;;;;;;;;;;;;;;;From Client interface send 35=V for 1W;;MD request is sent;;
;;;;;;;;;;;;;;;Check QS outgoing 35=W (or 35=X);;there is tag 276=B(B = Closed/Inactive);;
;;;;;;;;;;;;;;;Send order using price from 35=W(35=X);"qty =2M
tenor 1W";Order is rejected;;
;;;;;;;;;;;;;;;Send order using price from 35=W(35=X);"qty =1M
tenor 1W";Order is rejected;;
QAP-T2730;ESP: If the tenor's currency pair Spot Executable setting is off, then  Executable is off for that tenor.;Automated;;"If there is not enough ""On"" ESP quantities, your RFQ can't be satisfied. 
There's no quote attached to it.
and it becomes a Manual RFQ. The trader must enter a manual price.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX;;;PFX-528;;QAP-2879;;"From Trading FE select Bronze, EUR/SEK, SPOT and switch Executable to OFF 
(Pricing is ON) for tenor level";"Palladium2
EUR/SEK
quod314";All bands are grey except the first row;;
;;;;;;;;;;;;;;;From Client interface send 35=V for 1W;;MD request is sent;;
;;;;;;;;;;;;;;;Check QS outgoing 35=W (or 35=X);;there is tag 1070=0 (Indicative);;
;;;;;;;;;;;;;;;Send order using price from 35=W(35=X);"qty =2M
tenor 1W";Order is rejected;;
;;;;;;;;;;;;;;;Send order using price from 35=W(35=X);"qty =1M
tenor 1W";Order is rejected;;
QAP-T2731;RFQ: If the tenor's currency pair Spot Executable setting is off, then  Executable is off for that tenor.;Automated;;"If there is not enough ""On"" ESP quantities, your RFQ can't be satisfied. 
There's no quote attached to it.
and it becomes a Manual RFQ. The trader must enter a manual price.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-528;;QAP-2878;;"From Trading FE select Bronze, EUR/USD, SPOT and switch Executable to OFF 
(Pricing is ON) for tenor level";;All bands are grey;;
;;;;;;;;;;;;;;;From Client interface send forward RFQ;"tenor 1W
instrument EUR/USD
QTY 5M (more than 1M)";request is sent;;
;;;;;;;;;;;;;;;Open Quote Request Book on trading FE;;"Last sent RFQ is appear here
Check:
- Status = New
- AutomaticQuoting = NO
- There's no quote attached to it";;
;;;;;;;;;;;;;;;Open Quote Request Dealer Intervention window;;Last sent RFQ is appeared here;;
QAP-T2732;RFQ : If the tenor's currency pair Spot Pricing setting is off, then Pricing is off for that tenor.;Automated;;"If there is not enough ""On"" ESP quantities, your RFQ can't be satisfied. 
There's no quote attached to it.
and it becomes a Manual RFQ. The trader must enter a manual price.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-528;;QAP-2877;;"From Trading FE select Bronze, EUR/USD, SPOT and switch Pricing to OFF 
(Executable is ON) for tenor level";;All bands are red;;
;;;;;;;;;;;;;;;From Client interface send forward RFQ;"tenor 1W
instrument EUR/USD";request is sent;;
;;;;;;;;;;;;;;;Open Quote Request Book on trading FE;;"Last sent RFQ is appear here
Check:
- Status = New
- AutomaticQuoting = NO
- There's no quote attached to it";;
;;;;;;;;;;;;;;;Open Quote Request Dealer Intervention window;;Last sent RFQ is appeared here;;
QAP-T2733;ESP: If the tenor->Quantity Pricing setting is off, then Pricing is off for that tenor->Quantity.;Automated;;"If there is not enough ""On"" ESP quantities, your RFQ can't be satisfied. 
There's no quote attached to it.
and it becomes a Manual RFQ. The trader must enter a manual price.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX;;;PFX-528;;QAP-2876;;"From Trading FE select Bronze, USD/NOK, 2W and switch Pricing to OFF 
(Executable is ON) for all rows (qty level)";;All bands are grey;;
;;;;;;;;;;;;;;;From Client interface send 35=V for 1W;"tenor 2W
instrument USD/NOK";request is sent;;
;;;;;;;;;;;;;;;Check QS outgoing 35=W (or 35=X);;there is tag 276=B(B = Closed/Inactive);;
;;;;;;;;;;;;;;;Send order using price from 35=W(35=X);tenor 2W;Order is rejected;;
QAP-T2734;ESP : If the tenor's currency pair Spot -> Quantity Pricing setting is off, then Pricing is off for that tenor.;Automated;;"If there is not enough ""On"" ESP quantities, your RFQ can't be satisfied. 
There's no quote attached to it.
and it becomes a Manual RFQ. The trader must enter a manual price.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX;;;PFX-528;;QAP-2874;;"From Trading FE select Palladium2, USD/SEK, SPOT and switch Pricing to OFF 
(Executable is ON) for all rows (qty level) except the first band (1M)";;All bands are red except the first row;;
;;;;;;;;;;;;;;;From Client interface send 35=V for 1W;;MD request is sent;;
;;;;;;;;;;;;;;;Check QS outgoing 35=W (or 35=X);;there is tag 276=B(B = Closed/Inactive);;
;;;;;;;;;;;;;;;Send order using price from 35=W(35=X);"qty =1M
tenor 1W";Order is filled;;
;;;;;;;;;;;;;;;Send order using price from 35=W(35=X);"qty =2M
tenor 1W";Order is rejected;;
QAP-T2735;ESP: If the tenor's currency pair Spot -> Quantity Executable setting is off, then  Executable is off for that tenor.;Automated;;"If there is not enough ""On"" ESP quantities, your RFQ can't be satisfied. 
There's no quote attached to it.
and it becomes a Manual RFQ. The trader must enter a manual price.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX;;;PFX-528;;QAP-2873;;"From Trading FE select Bronze, GBP/SEK, SPOT and switch Executable to OFF 
(Pricing is ON) for all rows (qty level) except the first band (1M)";"Palladium2
GBP/SEK
quod314@luna";All bands are grey except the first row;;
;;;;;;;;;;;;;;;From Client interface send 35=V for 1W;;MD request is sent;;
;;;;;;;;;;;;;;;Check QS outgoing 35=W (or 35=X);;there is tag 1070=0 (Indicative);;
;;;;;;;;;;;;;;;Send order using price from 35=W(35=X);"qty =1M
tenor 1W";Order is filled;;
;;;;;;;;;;;;;;;Send order using price from 35=W(35=X);"qty =2M
tenor 1W";Order is rejected;;
QAP-T2736;ESP: If the tenor->Quantity Executable setting is off, then Executable is off for that tenor->Quantity.;Automated;;"If there is not enough ""On"" ESP quantities, your RFQ can't be satisfied. 
There's no quote attached to it.
and it becomes a Manual RFQ. The trader must enter a manual price.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX;;;PFX-528;;QAP-2872;;"From Trading FE select Bronze, GBP/NOK, 1W and switch Executable to OFF 
(Pricing is ON) for all rows (qty level)";"Palladium2
GBP/NOK
quod314@luna";All bands are grey;;
;;;;;;;;;;;;;;;From Client interface send 35=V for 1W;"tenor 1W
instrument GBP/NOK";request is sent;;
;;;;;;;;;;;;;;;Check QSFE outgoing 35=W (or 35=X);;there is tag 1070=0 (Indicative);;
;;;;;;;;;;;;;;;Send order using price from 35=W(35=X);tenor 1W;Order is rejected;;
QAP-T2737;FX Synthetic cross display 3 legs;Specified;;"This test validates acceptance criteria from FOB-34037 :

_Acceptance Critiera_
* Select a synthetic currency pair from the list of available instruments 
in the FX Aggregated Rates Tile.
* View the same details in the top of book header as can be seen for a 
normal non synthetic currency pair (value date, aggregated top of book 
cumulative quantity, big fig, and pips for bid and ask, and top of book 
spread)
* View the synthetic book in the aggregated rates sub-section, such that 
venues for the currency pair traded directly on a given venue are displayed 
as usual, but for cross leg combinations, the venues are displayed using 
very short venue codes (e.g. for crossing through Currenex and Reuters it 
might be C/R, though if Currenex and Credit Suisse are both configured, the 
short code for Credit Suisse and Reuters might be CS/R).
* Since synthetic crossed rates cannot currently be executed against the 
market, the following components should be modified in the tile:
** 1-Click Toggle Button Hidden
** Top of Book pips clicking disabled (no order ticket)
** Bid/Ask buttons hidden
** VWAP sub-section still available, but the the bid/ask price buttons 
disabled
** Direct Venue Execution sub-section still available, but no values 
displayed (we have to leave this since the user can switch between 
different instruments on the tile, so it's no good removing it completely 
from the context menu since it may have already been opened for another 
directly traded currency pair)
** Full Amounts sub-section still available, but no values displayed
** Algorithms sub-section still available, but no values displayed, and ""+"" 
button hidden so no new entries can be added
** No venues or any other options listed under the context menu's sub-menus 
for ""Top of Book Venue(s)"" or ""Filter Venues""

Need to create cross Pair in webAdmin
To have the synthetic cross enabled, the listings must 
have fxcrossinstrument = 'Y', crossthroughusd = 'Y' and/or  crossthrougheur 
= 'Y'

The oneclick button can be enabled from functional.config with ";/PFX/FX_Synthetic;High - Must Have;FX_Synthetic_cross;FETrading, FXregression;lzaharia;;PFX-311;;QAP-2870;;"From a ESP tile, choose a cross currency pair having fxcrossinstrument = 
'Y', crossthroughusd = 'Y' and/or crossthrougheur = 'Y'
Ex : EUR/CHF";;Currency pair selected;;
;;;;;;;;;;;;;;;From contextual menu, Click on 'Cross through USD';;Cross through USD ticked;;
;;;;;;;;;;;;;;;Check bid / ask buttons;;Bid / ask buttons are hidden;;
;;;;;;;;;;;;;;;Click on Price to send an order;;No order entry opens (order entry disabled);;
;;;;;;;;;;;;;;;Open VWAP section;;VWAP prices displayed, but no possibility to click on price to send orders;;
;;;;;;;;;;;;;;;Open Direct Venue Execution part;;Direct Venue execution available but empty;;
;;;;;;;;;;;;;;;Open Full amount section;;Full amount section available but empty;;
;;;;;;;;;;;;;;;Open algorithm sub section;;Algorithm sub section available, but no values displayed;;
;;;;;;;;;;;;;;;Open contextual menu;;No contextual menu for TOB venue;;
;;;;;;;;;;;;;;;From contextual menu, unclick filter synthetic combinations;;"Synthetic cross no longer displayed (straight prices displayed if 
available)";;
;;;;;;;;;;;;;;;Check bid / ask buttons;;Bid / ask buttons displayed;;
;;;;;;;;;;;;;;;Click on price to send an order;;Order entry box displayed;;
;;;;;;;;;;;;;;;Open VWAP section;;"VWAP section displayed with prices in color, possibility tro send an order 
by clicking on price";;
;;;;;;;;;;;;;;;Open Direct Venue Execution part;;"Prices displayed on Direct venue execution part, possibility to send orders 
from prices on this section";;
;;;;;;;;;;;;;;;Open full amount;;Price displayed, possibility to send orders;;
;;;;;;;;;;;;;;;Open algorithm subsection;;Agorithm subsection displayed, possibility to send an order;;
QAP-T2738;ESP Tile : play with venues with 3-leg-crossing of currency pairs;Specified;;" 
* Select the venues that should be included in the displayed synthetic 
aggregated book.
* As venues are selected/deselected, make sure only selected venues appear 
in the displayed synthetic aggregated book.

Open an ESP tile to have combinations 

For example :

!image-2020-08-28-16-07-10-503.png!

 ";/PFX/FX_Synthetic;Low - Nice to Have;FX_Synthetic_cross;FXregression;lzaharia;;PFX-311;;QAP-2869;;From a synthetic currency pair (for example NOK/SEK) click on cross EUR/USD;;Cross through EUR/USD selected;;
;;;;;;;;;;;;;;;Select aggregated book;;Aggregated book selected;;
;;;;;;;;;;;;;;;select one venue MS;;venue MS selected;;
;;;;;;;;;;;;;;;Select 1 other venue;;Venue must be added immedialtely and prices updated immediately;;
;;;;;;;;;;;;;;;Select zero venue (unselect all);;No prices displayed;;
;;;;;;;;;;;;;;;select again 4 venues;;Prices displayed for these 4 venues;;
;;;;;;;;;;;;;;;Change the the combinations : from EURtoUSD to USDtoEUR, etc...);;Change done without blank and delay;;
QAP-T2739;FETrading - Dealer Intervention : shorting for long SWAP RFQ  qty;Automated;;"We shorten the value to the largest precision along with an indicator of 
the precision, e.g. 10,000,000,000 = 10B, 10,000,000 = 10M, 10,000 = 10K, 
10 = 10";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;kbrit;;PFX-1758;;QAP-2868;;Send UnEven swap RFQ via fix mesage;"Near leg qty: 123,12M
Far leg qty: 321,98M
Near Tenor: Spot
Far Tenor: W1";RFQ appeared in DI unassigned greed;;
;;;;;;;;;;;;;;;Assignee request to yourself;;rfq appeared in assigned grid;;
;;;;;;;;;;;;;;;Estimate request;;Qty shorted correct;;
;;;;;;;;;;;;;;;Send EVEN swap RFQ;"Near leg qty: 123,12B
Far leg qty: 321,98B
Near Tenor: Spot
Far Tenor: W1";RFQ appeared in DI unassigned greed;;
;;;;;;;;;;;;;;;Assignee request to yourself;;rfq appeared in assigned grid;;
;;;;;;;;;;;;;;;Estimate request;;Qty shorted correct;;
;;;;;;;;;;;;;;;Send EVEN swap RFQ;"Near leg qty: 123.456
Far leg qty: 321,098
Near Tenor: Spot
Far Tenor: W1";RFQ appeared in DI unassigned greed;;
;;;;;;;;;;;;;;;Assignee request to yourself;;rfq appeared in assigned grid;;
;;;;;;;;;;;;;;;Estimate request;;Qty shorted correct;;
QAP-T2740;FETrading - Dealer Intervention : displaying of Uneven SWAP RFQ;Automated;;;/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;kbrit;;PFX-1758;;QAP-2867;;Send Unevenswap RFQ;"Near leg qty: 123,12M
Far leg qty: 321,32M
Near Tenor: Spot
Far Tenor: W1";RFQ appeared in DI unassigned greed;;
;;;;;;;;;;;;;;;Assignee request to yourself;;rfq appeared in assigned grid;;
;;;;;;;;;;;;;;;Estimate request;;Qty, prices, and tenors appeared;;
;;;;;;;;;;;;;;;Check that qty displayed twice in the middle;;Qty displayed twice because it isn't same for both legs;;
QAP-T2741;FETrading - Dealer Intervention : displaying of even SWAP RFQ;Automated;;;/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;kbrit;;PFX-1758;;QAP-2866;;Send EVEN swap RFQ;"Near leg qty: 123,12M
Far leg qty: 123,12M
Near Tenor: Spot
Far Tenor: W1";RFQ appeared in DI unassigned greed;;
;;;;;;;;;;;;;;;Assignee request to yourself;;rfq appeared in assigned grid;;
;;;;;;;;;;;;;;;Estimate request;;Qty, prices, and tenors appeared;;
;;;;;;;;;;;;;;;Check that qty displayed once in the middle;;Qty displayed once because it same for both legs;;
QAP-T2742;Decimal rounding for quantities on Pricing Tile;Automated;;"As a trader, I want to see quantities according to their respective 
precision in FX Aggregated Rates tiles and Client Rates tiles so I can 
configure quantities that are not in even millions.

Acceptance Criteria
* Quantities in the FX Aggregated Rates tile and FX Client Rates tile 
should display the value:
** with size qualifiers, such as ""B"", ""M"", ""K"", e.g. 10,000,000 displayed 
as ""10M"" and 10,000 as ""10K""
** to a _single_ decimal place for uneven sized values... where 10,000,000 
is displayed as ""10M"" but 10,100,000 is ""10.1M"". For any further decimal 
places we would still round to the closest single decimal. For instance, 
10,000,001 would still be displayed as ""10M""

See attached screenshot for result of tests :

!image-2020-08-24-17-28-48-202.png!

 ";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX;lzaharia;;PFX-1817;;QAP-2855;;"From webadmin, configure 3 bands on EUR/USD with :
quantity 200000
quantity 6200100
quantity 1200000000";"quod308
Palladium
GBP/USD";"Display is the following :
200K (sum 200K)
6.2M (sum 6.2M)
1.2B(sum 1.21B)";;
QAP-T2743;Decimal rounding for quantities on ESP tile;Automated;;"As a trader, I want to see quantities according to their respective 
precision in FX Aggregated Rates tiles and Client Rates tiles so I can 
configure quantities that are not in even millions.

Acceptance Criteria
* Quantities in the FX Aggregated Rates tile and FX Client Rates tile 
should display the value:
** with size qualifiers, such as ""B"", ""M"", ""K"", e.g. 10,000,000 displayed 
as ""10M"" and 10,000 as ""10K""
** to a _single_ decimal place for uneven sized values... where 10,000,000 
is displayed as ""10M"" but 10,100,000 is ""10.1M"". For any further decimal 
places we would still round to the closest single decimal. For instance, 
10,000,001 would still be displayed as ""10M""

See attached screenshot for result of tests :

!image-2020-08-24-16-56-40-695.png!

 ";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;lzaharia;;PFX-1817;;QAP-2854;;"From minifix, send marketdata on EUR.USD to have 3 bands with :
quantity 200000
quantity 6000100
quantity 1200000000";;"Display is the following :
200K (sum 200K)
6M (sum 6.2M)
1.2B(sum 1.21B)";;
QAP-T2744;FE Trading - Aggregated Rates, RFQ Tile: Quote cancellation after stop quoting.;Automated;;"Test created for check problem that could cause by changing value Venue. 
SupportQutoteCancel=(Yes/No/null).

*Precondition*:
Check venues that exist in quote list(RFQ tile)

!image-2020-08-20-12-10-56-873.png|width=398,height=346!

Find one venue(in my case it's CIT[CITIR]) in DB and set value to N
!image-2020-08-20-12-15-03-101.png!

Find second venue(my case CSR) in DB and check that it contains the 
opposite value 

!image-2020-08-20-12-16-51-956.png!

 ";/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;FXregression, needs_refactoring_FX, UAQA;kbrit;;PFX-2263, PFX-395;;QAP-2847;;On FE Trading> Aggregated Rates>RFQ tile send rfq;"EUR/USD
Spot
10.000.000";"RFQs sended;
Quotes created and appeareed in quote book";;
;;;;;;;;;;;;;;;Click on button Stop after couple of seconds;;"Check that ORS terminate quote with venue that configured like
Venue. SupportQutoteCancel=No
(in our case CITIR)
Check second venue :
- it could be terminated by venue;
- it could be accepted if Venue actually doesn't support quote cancellation 
but in db it set like yes";;
QAP-T2745;FE Trading: SPOT Venue Status:  ExcludeWhenUnhealthy for Client Pricing Tile;Automated;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, needs_refactoring_FX;;;PFX-1381;;QAP-2844;;Open FE Trading => Client Pricing Tile => (ClientTier/Instrument);There are should be one venue attached for this ClientTier;Prices are being published;;
;;;;;;;;;;;;;;;"Go to Admin => Market Making => Client Tier and change venue for your tier 
: Exclude When Unhealthy";;;;
;;;;;;;;;;;;;;;"Go to Admin => Reference Data => Venue and make your venue Unhealthy on 
purpose";;;;
;;;;;;;;;;;;;;;Check Client Pricing Tile;;Prices should disappear;;
;;;;;;;;;;;;;;;Make venue healthy;;Prices appears on the Tile;;
QAP-T2746;See trader RFQ executed trades in position blotter.;Automated;;"If you send a taking order from the RFQ tile , This order impacts a single 
position on the firm account.";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, needs_refactoring_FX, UAQA;kbrit;;;;QAP-2836;;Send a buy order on firm account via RFQ tile(aggregated market rates);;Order is sent;;
;;;;;;;;;;;;;;;Open TradingFE > Order Book;;"New order is filled, side buy,
Platform = DotNET";;
;;;;;;;;;;;;;;;Open TradingFE > Position Blotter (Book);;Check that row with firm account was changed with order Qty;;
QAP-T2747;FX RFQ: See trader RFQ executed trades in trade blotter;Automated;;;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, refactored_FX, UAQA;kbrit;;;;QAP-2835;;Send a buy order via RFQ tile(aggregated market rates);;Order is sent;;
;;;;;;;;;;;;;;;Open TradingFE > Order Book;;New order is filled, side buy;;
;;;;;;;;;;;;;;;Open Trading FE > Trades window;;"In Trades windows appears row:
Platform = DotNET";;
QAP-T2748;FE Trading> RFQ tile: Check process for uneven swaps;Automated;;This test validates PFX-239;/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;FXMM, FXregression, refactored_FX, UAQA;kbrit;;PFX-239;;QAP-2826;;From FETrading>RFQ Tile send an uneven swap RFQ with a small quantity;;uneven swap RFQ sent;;
;;;;;;;;;;;;;;;Reply received on client interface;;Check prices received;;
;;;;;;;;;;;;;;;For manual test : check logs of quote;;"Quote sent with 2 different quantities for each legs (the same as quantity 
sent)";;
;;;;;;;;;;;;;;;Send order : lift the offer (click on the right side on the RFQ Tile);;"Order sent and executed.
It's visible in orderBook";;
QAP-T2749;Client Pricing: Verify margins update for client interface;Automated;;"This test validates following criteria from FOB-34082 :

One or more rows can be selected such that the margin adjustment buttons 
mentioned above can be used to modify the margins for only the selected 
price ladder rows.

 ";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX, UAQA;;;;;QAP-2825;;From Pricing tile, select currency pair, spot tenor to have bands pricing;;Check that these prices are being published on the Client Interface;;
;;;;;;;;;;;;;;;Select the first band;;1 quantity bands selected;;
;;;;;;;;;;;;;;;From spreader, move margin to have 2 pips up on offer;;"the first band selected have price moving 2 pips up on offer, other bands 
remain unchanged";;
;;;;;;;;;;;;;;;On Client Interface =>;"(or via miniFix send MDrequest before and after and check the difference 
between the prices)";Check that prices are changed according to new margins;;
;;;;;;;;;;;;;;;"return prices back clicking on ""Use default"" button";;;;
QAP-T2750;FX FETrading > RFQ tile : Exclude unhealthy Venues configuration saving;Specified;;"This test case checked that:
#  This ""Exclude Unhealthy Venues"" setting must be saved along with the 
user's workspace per RFQ tile.";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression;kbrit;;PFX-1380;;QAP-2824;;Open FE Trading > Aggregated Market Rates > RFQ tile and select EUR/USD;;"Window opened,
Currency pair selected,
Near date Spot with correct date";;
;;;;;;;;;;;;;;;"Press RMB on RFQ tile and check that List item ""Exclude Unhealthy Venues"" 
is available and sett to ""off""";;"List item is available and
there is no check mark 𐄂";;
;;;;;;;;;;;;;;;"Select ""Exclude Unhealthy Venues""";;Check that check mark is visible in context menue;;
;;;;;;;;;;;;;;;"Save user Configuration and
Restart FE Trading with same user";;"After loading User configuration check mark is checked like it was before 
restart, so configuration saved";;
QAP-T2751;ESP: If the tenor Pricing setting is off, then Pricing is off for that tenor.;Automated;;"If there is not enough ""On"" ESP quantities, your RFQ can't be satisfied. 
There's no quote attached to it.
and it becomes a Manual RFQ. The trader must enter a manual price.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX;;;PFX-528;;QAP-2823;;"From Trading FE select Palladium2, USD/NOK, 1W and switch Pricing to OFF 
for tenor level (Executable is ON)";;All bands are red;;
;;;;;;;;;;;;;;;From Client interface send 35=V for 1W;"tenor 1W
instrument USD/NOK";request is sent;;
;;;;;;;;;;;;;;;Check QS's outgoing 35=W (or 35=X);;there is tag 276=B(B = Closed/Inactive);;
;;;;;;;;;;;;;;;Send order using price from 35=W(35=X);tenor 1W;Order is rejected;;
QAP-T2752;FX FETrading > RFQ tile : Exclude unhealthy Venues from RFQ files;Deprecated;;"This test case checked that:
#  Value  ""Exclude Unhealthy venues"" added to the context menu of RFQ tile.
#  ""Exclude Unhealthy venues""(ExUV) could be switched off and on(check that 
off by default).
#  When the setting is ""on"" any venues marked as being unhealthy should be 
treated exactly as they would as if the user had deselected them under the 
""Filter Venues"" menu _with the exception_ that the corresponding row for 
that venue under the Quotes sub-section should _not_ be removed, only 
prevent it from having the request sent to it at that moment.";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression;kbrit;;PFX-1380;;QAP-2816;;Open FE Trading > Aggregated Market Rates > RFQ tile and select EUR/USD;;"Window opened,
Currency pair selected,
Near date Spot with correct date";;
;;;;;;;;;;;;;;;"Press RMB on RFQ tile and check that List item ""Exclude Unhealthy Venues"" 
is available and sett to ""off""";;"List item is available and
there is no check mark 𐄂";;
;;;;;;;;;;;;;;;"Select ""Exclude Unhealthy Venues""";;"Check that unhealthy Venues are should not be removed, only prevent them 
from having the requests sent to them at that moment.";;
QAP-T2753;Client DropDown In the client order ticket;Specified;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-2188;;QAP-2815;;"OpenFE=> ClientPricingTile and select ClientTier => Instrument with only 
one attached client to it";;The prices are publishing;;
;;;;;;;;;;;;;;;Clint on the ask or bid TOB price;;"Order ticket on behalf is opened. Check that client drop down list is 
appeared and can be opened";;
;;;;;;;;;;;;;;;Select another instrument with more that one client attached;;The prices are publishing;;
;;;;;;;;;;;;;;;Clint on the ask or bid TOB price;;"Order ticket on behalf is opened. Check that client drop down list is 
appeared and can be opened";;
QAP-T2754;Verify that ribbon Home tab visible for non-FX, ForEx tab visible for FX;Open;;"*Acceptance Criteria*
* Ribbon Home tab visible for non-FX, ForEx tab visible for FX.

*Precondition:* Login on FETrading with user (SaleDealer).";/PFX/FX_UAQA;High - Must Have;FX_UAQA;EQ, FX, FXregression, UAQA;;;;;QAP-2814;;Verify Home tab.;;Home tab is displayed. ForEx elements is not displayed in Home tab.;;
;;;;;;;;;;;;;;;Click on ForEx tab of top ribbon.;;ForEx tab is displayed. Home tab elements is not displayed in ForEx tab.;;
QAP-T2755;FX FETrading - ESP tile : Add Options To FX ESP Tile's Algorithms Sub-Section;Specified;;"_Acceptance Criteria_
* Rename the ""Algorithms"" sub-section in the FX ESP tile's context menu and 
Algorithms sub-section title bar to ""Strategies""
* In the pop-up for an entry in the Algorithms sub-section of the FX ESP 
tile (and also the use of this control for Quick Access buttons):
## Change name of the label ""Custom name:"" to ""Custom Name"" (capital N and 
no colon)
## Below Custom Name, add ""Order Type"" and ""Time In Force"" fields.
## Have drop-downs for ""Strategy Type"", ""Strategy"", and ""Child Strategy"" as 
indicated for the FX order ticket in PFX-1802.";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;kbrit;;PFX-1711;;QAP-2813;;Open FE Trading > Aggregated Rares Tile > Rates tile(Esp);;Window is opened with prices in TOP boxes;;
;;;;;;;;;;;;;;;Add Strategies(RMB > Strategies) and push on + button;;Opened small window for creation;;
;;;;;;;;;;;;;;;"Check text label ""Custom Name""";"old label "" Custom name""
new label "" Custom Name""";New label text applied;;
;;;;;;;;;;;;;;;"Check that bellow ""Custom Name added new fields";"New fields:
Order Type
Time In Force";New labels and text editors added.;;
;;;;;;;;;;;;;;;"Check that ""Strategy Type"" text edit contain Drop Down list when editing";;List of values displaying when field focused;;
;;;;;;;;;;;;;;;"Check that ""Strategy"" text edit contain Drop Down list when editing";;List of values displaying when field focused;;
;;;;;;;;;;;;;;;"Check that ""Child Strategy"" text edit contain Drop Down list when editing";;List of values displaying when field focused;;
;;;;;;;;;;;;;;;"Click on Save button and recheck that values saved by clicking three 
vertical dots button";;all entered values are saved and restore when we checked it;;
QAP-T2756;FX FETrading - ESP tile : Adding Full Amount quantities to ESP tile doesn't remove TOB price boxes;Automated;;Test checking appearance of regression bug;/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, needs_refactoring_FX, ToBeAutomated;kbrit;;PFX-577;;QAP-2812;;Open FE Trading> Aggregated market rates window> ESP tile(AggRetes Tile);;Esp tile opened with prices;;
;;;;;;;;;;;;;;;"Add Full Ammoung (RMB click ->Full Ammount) and add qty( RMB > Full Amount 
Qty)";;Qty Added;;
;;;;;;;;;;;;;;;Check that Prices still streaming in TOB price boxes;;TOB boxes contain prices;;
QAP-T2757;Only Highlight Piloted Panels When Hovering Pilot Menu;Manual;;;/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression, UAQA;;;PFX-1924;;QAP-2807;;"Open FE Trading => Aggregated Market Rates => Rates Tile (ESP tile) + Child 
orders window + Order Book window";;All windows are opened;;
;;;;;;;;;;;;;;;"Press on ""Piloted"" button on the Aggregated Market Rates and drag it to 
""Child Orders"" window";;"""My orders"" window is piloted";;
;;;;;;;;;;;;;;;"Press on ""Piloted"" button on the Aggregated Market Rates and drag it to 
""Order book"" window";;"""Order book"" is piloted";;
;;;;;;;;;;;;;;;"RMC on the Aggregated Market Rates window and hover on ""Clear Pilot Links""";;"""Child Orders"" and ""Order book"" windows are highlighted";;
;;;;;;;;;;;;;;;"Hover on ""Clear Pilot Links"" => My orders";;"Arrow becomes bold on the ""Child Orders"" Window";;
;;;;;;;;;;;;;;;Clear all links and do the same for ESP Tile;;;;
QAP-T2758;Workflow of FOK order through quoting session  for quantity above maximum limit;Automated;;"Workflow of *FOK* order in FX MM (excepted part with positions)
If we have *IOC* order will be executed for qty with is available on market";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX, UAQA;;;PFX-166;;QAP-2797;;"Send new order FOK from client interface (Currenex, quickFix) for quantity 
above maximum limit";;Order received by ORS;;
;;;;;;;;;;;;;;;QSession recognised quoteEntryID;;Transac created;;
;;;;;;;;;;;;;;;Order rejected;;Execution sent to FE / Minifix;;
QAP-T2759;ClientPricing: Verify client tier and value date values (synthetic);Automated;;"For your ClientTier (Gold for exmpl) you need to have working synthetic 
instrument

 ";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX, UAQA;;;;;QAP-2796;;On Client pricing window, open client pricing tile and select ClientTier;ClientTier = Gold;Client pricing tile is opened. ClientTier is displayed correctly;;
;;;;;;;;;;;;;;;Select currency pair NOK/SEK (synthetic ) spot.;;"Check that value date is correct for selected currency pair.
Check that tenor is Spot and displayed in field.
Client tier GOLD displayed in the client pricing window";;
QAP-T2760;Client Price Summary display ( synthetic prices);To Review;;"copy of QAP-1557
Only for Spot
NOK/SEK must be a synthetic
!screenshot-1.png|thumbnail!";/PFX/FX_Display;High - Must Have;FX_Display;FXregression, UAQA;;;;;QAP-2795;;"From a sales FE, open a client price grid (by clicking on ""Client Price 
Summary"") for ccy pair NOK/SEK";;Client price grid open showing tenors for NOK/SEK;;
;;;;;;;;;;;;;;;Check display;;"Space character before the large pxprecision decimal place, bid and ask 
with different colors";;
;;;;;;;;;;;;;;;Check coherence of prices with database;;Points respect rates entered in table ClientTierSymbTenor;;
;;;;;;;;;;;;;;;Check coherence of prices inside grid;;For 5 different tenors on bid and ask, check that Fwd price = spot + points;;
QAP-T2761;Basic test to check positions;Automated;;"This test case validates PFX-1496

 

With the new position window, the positions are stored in two sections for 
client positions :

the main section contain the sum for the quantity by currency pair and by 
account, the sub section contains positions per currency pair, account and 
settlement date

 Example of display

!image-2020-08-04-10-12-15-981.png!";/PFX/FX_MM_Position;High - Must Have;FX_MM_Positions;FXregression, needs_refactoring_FX;lzaharia;;;;QAP-2779;;"Create an execution on a spot currency pair, quantity 5M
(for example, buy 5M EUR/USD spot)";;"Position displayed on position window :
1st line 5M in column position,
Subsection :
1st line 5M in column position";;
;;;;;;;;;;;;;;;"Create an execution on a forward currency pair, quantity 2M
(for example, buy 2M EUR/USD 2WK)";;"Position displayed on position window :
1st line 7M in column position
Subsection :
1st line 5M in column position
2nd line 2M in column position";;
;;;;;;;;;;;;;;;"Create another execution on the same forward currency pair, quantity 4M
(for example, sell 4M EUR/USD 2WK)";;"Position displayed on position window :
1st line 3M in column position
Subsection :
1st line 5M in column position
2nd line -2M in column position";;
;;;;;;;;;;;;;;;"Create an execution on a other forward currency pair, quantity 2M
(for example, buy 2M EUR/USD 1MO)";;"Position displayed on position window :
1st line 5M in column position
Subsection :
1st line 5M in column position
2nd line -2M in column position
3rd line 2M in column position";;
QAP-T2762;FE Trading: RFQ panel Beneficiary and Client Displaying;Automated;;"This test created for chek of display Beneficiary and Client input fields 
on RFQ tile of Aggregated Rates panel.

_Acceptance Criteria_
* In the case where Client is the only field displayed (not Beneficiary), 
it should be placed in the FX RFQ tile immediately below the header in the 
center of the tile.
* In the case where Beneficiary is the only field displayed (not 
Client), it should be placed in the FX RFQ tile immediately below the 
header in the center of the tile.
* In the case where both Client and Beneficiary are displayed, Client and 
Beneficiary should be placed next to each other horizontally immediately 
below the header in the center of the tile.";/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;FXregression, refactored_FX, ToBeAutomated;kbrit;;PFX-1706;;QAP-2774;;"Open fuctional.config and set there next value:
beneficiaryDropDown visible=""true"" 
forceDefaultBeneficiaryWhenHiddenForRoles=""SAL,SDL,HDL""/>";;Changes saved in file;;
;;;;;;;;;;;;;;;"Open FE Trading with modified configs> Aggregated Market Rates> RFQ tile 
and check it";;Beneficiare and Client displayed in single line if both of them are visible;;
QAP-T2763;See prices in ESP tile TOB/VWAP/Direct/aggregated;Specified;;"Check display and pricing of ESP tile window

!image-2020-07-29-18-31-38-720.png!";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, UAQA;lzaharia;;;;QAP-2766;;From FE, open Aggregated Rates window;;Aggregated rates window opened;;
;;;;;;;;;;;;;;;Choose currency pair EUR/USD or GBP/USD spot;;Currency chosen pricing;;
;;;;;;;;;;;;;;;Check display on TOB;;"Price display respects the pattern : 3 first digits on top, 3, 4, and 5th 
decimals in big and colored, 6th decimal in lower case

Date is T+2 (more if the next day is on weekend or holiday)

Very short name of TOB venue shown in the corner of the price";;
;;;;;;;;;;;;;;;Price display in VWAP;;"Enter a quantity to show VWAP. VWAP price shows only last 3 digits (if 
there is no difference between big figures of Bid / Ask of TOB). Price is 
colored, value of price is coherent with TOB if the quantity is equal to 
TOB";;
;;;;;;;;;;;;;;;Price display in Direct Venue;;"Prices colored with the same color as TOB, quantity in million in the 
middle, with a / if the quantity is different for bif and ask, only 3 last 
digits display if the big figures are equal to TOB";;
;;;;;;;;;;;;;;;Price display in aggregated rates;;"Prices colored with the same color as TOB, quantity in million, only 3 last 
digits display if the big figures are equal to TOB.";;
QAP-T2764;Best Rates View : functioning of the window with synthetic rates;Specified;;"Check the best rates window

 

!image-2020-07-29-16-39-20-395.png!

 

 ";/PFX/FX_UAQA;High - Must Have;FX_UAQA;FXregression, UAQA;lzaharia;;;;QAP-2765;;"Open a best rates window with following currency pair :
NOK/SEK";;"Check the presence of :
value date
qty
price statistics";;
;;;;;;;;;;;;;;;"Open a best rates window with following currency pair :
NOK/SEK";;Check the display of the price;;
;;;;;;;;;;;;;;;"Open a best rates window with following currency pairs :
NOK/SEK";;"Check the arrow : should be green up if the price is > than previous price, 
red low if price is < than previous price";;
;;;;;;;;;;;;;;;"Open a best rates window with following currency pairs :
NOK/SEK";;Check the availability of statistics graph;;
;;;;;;;;;;;;;;;"Open a best rates window with following currency pairs :
NOK/SEK";;Check the format of prices : 3 last digits in red/blue;;
;;;;;;;;;;;;;;;"Open a best rates window with following currency pairs :
NOK/SEK
Select one of rows";;"Selected entry should be ""expanded"" in all columns";;
QAP-T2765;EBS Keypad configuration;Specified;;"Check that the EBS keypad configuration window can be dispayed and changed 
from from options and from   !image-2020-07-29-16-16-01-154.png!

Please note : to have this option it is necessary to check in 
technical.config file  (change it to true if necessary)

 

The display of EBS options is the following :

!image-2020-07-29-16-16-21-958.png!";/PFX/FX_UAQA;High - Must Have;FX_UAQA;FXregression, UAQA;lzaharia;;;;QAP-2764;;From options, check the Keypad options display;;Option keypad displays as shown on the screenshot;;
;;;;;;;;;;;;;;;Change the the keypad port to COM2;;Port changed to COM2;;
;;;;;;;;;;;;;;;Change the buy/sell target to Full Amount;;Target changed to full amount;;
;;;;;;;;;;;;;;;Change regular amount to 10M;;Regular amount changed to 10M;;
;;;;;;;;;;;;;;;Save and check that the new settings have been applied;;New settings displayed when reopening the option window;;
QAP-T2766;Use Worst Price in FX Order Ticket Instead of TOB;Specified;;"Ben Ernest-Jones, Yesterday 20:58
Worst bid is the lowest bid. Worst ask is the highest ask.
You sell against bids and buy against asks.
Classic investing: you want to buy low and sell high.


Before test We need to filtered ESP tile by Venue and leave only one, and 
sent prices with different qty";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FETrading, FXregression, needs_refactoring_FX;;;PFX-1548;;QAP-2761;;"Open Trading FE => ESP Tile (EUR/USD;SPOT).";;The prices are changing;;
;;;;;;;;;;;;;;;Click on the top of book pips buttons ASK(not the BID/SELL buttons);;"When opening the order ticket from the top of book pips buttons (not the 
BID/SELL buttons), the price field should be pre-populated with the worst 
price necessary to sweep the book to execute the specified default quantity 
in the tile header.";;
;;;;;;;;;;;;;;;Click on the top of book pips buttons BID(not the BID/SELL buttons);;"When opening the order ticket from the top of book pips buttons (not the 
BID/SELL buttons), the price field should be pre-populated with the worst 
price necessary to sweep the book to execute the specified default quantity 
in the tile header.";;
;;;;;;;;;;;;;;;Create some Algorithms and press on BUY or SELL;;"When opening the order ticket from the Algorithms sub-section, the price 
field should be pre-populated with the worst price necessary to sweep the 
book to execute the specified default quantity in the algorithms row used 
to open the order ticket.";;
QAP-T2767;FX: ExpireDate for order with TIF = GoodTillDate;Specified;;;/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;AutomatedCodedUI, FETrading, FXregression;;;PFX-1839;;QAP-2759;;"Open TradingFE=> ESP tile (EUR/USD;SPOT)";;The prices are being changed;;
;;;;;;;;;;;;;;;Click on BID or ASK;;Order ticket window is opened;;
;;;;;;;;;;;;;;;"Select ""GoodTillDate"" as Time in Force
(Order Type = Limit)";;list with date under TIF is active now;;
;;;;;;;;;;;;;;;Select date = now + 3 days and send the order;;"Open order book and check that Expired time is the same as you set in order 
ticket";;
;;;;;;;;;;;;;;;Amend order and change the date;;Check that Expired time has been changed;;
;;;;;;;;;;;;;;;Amend order and change the date 3 day ago;;"""ExpireDate is in the past"" msg must be appeared";;
QAP-T2768;Check calculation of outright price with margin in pips (tenor 1M);Automated;;"This test validates the calculation done for a forward with a margin in 
pips, not trespassing the min / max spread

Marketdata injected for this test :

< 
8=FIX.4.4|9=717|35=W|49=TEST|56=MARKETDATA|34=2|52=20200720-13:54:34|262=EUR/USD:SPO:REG:HSBC_2|55=EUR/USD|64=SP|268=6|269=0|270=1.19597|271=2000000|272=20200720-13:54:34|273=20200720-13:54:34|15=EUR|282=HSBC|64=20200629|269=0|270=1.19594|271=6000000|272=20200720-13:54:34|273=20200720-13:54:34|15=EUR|282=HSBC|64=20200629|269=0|270=1.19591|271=12000000|272=20200720-13:54:34|273=20200720-13:54:34|15=EUR|282=HSBC|64=20200629|269=1|270=1.19609|271=2000000|272=20200720-13:54:34|273=20200720-13:54:34|15=EUR|282=HSBC|64=20200629|269=1|270=1.19612|271=6000000|272=20200720-13:54:34|273=20200720-13:54:34|15=EUR|282=HSBC|64=20200629|269=1|270=1.19615|271=12000000|272=20200720-13:54:34|273=20200720-13:54:34|15=EUR|282=HSBC|64=20200629|10=081|

 

Price displayed :

  !image-2020-07-20-15-56-12-340.png!

 

All details of calculation attached in word document

*VWAPPriceOptimized*";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FX_fix, FXregression, needs_refactoring_FX;lzaharia;;PFX-78;;QAP-2750;;"Check that all parameters of margin and forward points are set as described 
in the word document, modify them if needed";;All parameters for EUR/USD adjusted to be equal to the word document;;
;;;;;;;;;;;;;;;Inject marketdata with the message in the description;;Marketdata sent;;
;;;;;;;;;;;;;;;Check the results in the FE with a pricing tile;not necessary;"Results must correspond to the price displayed
All calculations are explained on the attached word document";;
;;;;;;;;;;;;;;;from client send 35=V;;check that MD correspond to the prices we see the Description;;
QAP-T2769;FE Trading: Market Rates: Short cat test for uneven swap qty (k,m,b);Automated;;"It's addition to test QAP-833.
It's check second field wit qty.";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, refactored_FX, TobeAutomatized;kbrit;;PFX-239;;QAP-2729;;"Add new RFQ tile and select tenor for far leg
(FE Trading > Agregated Rates>RFQ Tile)";;RFQ tile opened and selected 2 tenors;;
;;;;;;;;;;;;;;;"Change the quantity2 of RFQ
tile typing 1M";;Quantity updated to 1 000 000;;
;;;;;;;;;;;;;;;select the quantity2 to delete, and type 1k;;Quantity updated to 1000;;
;;;;;;;;;;;;;;;select the quantity2 to delete and type 1b;;"quantity updated to 1000000000 (quantity displayed in red if greater than 
incoming order)";;
;;;;;;;;;;;;;;;select the quantity2 to delete and type 1kk;;"only the first k is taken into account
1000 is displayed";;
QAP-T2770;"""CCY1"" Side to FX Blotters";Automated;;"In any message in FX (Quote, order, execution...), Currency must be either 
BaseCurrency or QuoteCurrency.
So, if in the message, Side=Buy and Currency=EUR, we show Buy.
If in the message, Side=Buy and Currency=USD, we show Sell.

In order, trade, RFQ, quote blotters, show ""CCY1 Side"" column:

For an FX instrument:
= Side, if Ordr, Execution, RFQ or Quote.Currency = Instrument.BaseCurrency
= opposite(Side), if Currency = Instrument.QuoteCurrency
blank for a non-FX instrument";/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, refactored_FX;;;PFX-1774;;QAP-2728;;On a FE, send a RFQ request using currency 1 (ex EUR/USD with currency EUR);;"Quotes replies

";;
;;;;;;;;;;;;;;;Send an order;;"In Order Book and Trades Book check column CCY1. There should be the same 
side as your sent order
";;
;;;;;;;;;;;;;;;Send a RFQ request using currency 2 (ex EUR/USD with currency USD);;Quotes replies;;
;;;;;;;;;;;;;;;Send an order;;"In Order Book and Trades Book check column CCY1. There should be the 
OPPOSITE side

";;
QAP-T2771;Test of MarketTicks window;Specified;;"This test validate the functioning of market ticks window

This window is connected to the TS component, and is very passive (it just 
receives marketdata from the feedhandler)

To receive something, you need to have entries in table VENUEMDSYMBOL

For example :

EBS-CITI QUOD 32:2 Y

The disctionary FE needs to be fully loaded to see all instruments
!screenshot-1.png|thumbnail!";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression, TobeAutomatized, UAQA;lzaharia;;;;QAP-2727;;From FE open window market ticks;;"Market ticks window opened with lines with prices coming, last updates 
always on the top of the window";;
QAP-T2772;FX FETrading - ESP tile : Exclude Unhealthy Venues From Trading FE Rates Tiles;Manual;;"Venue status can be changed on purpose via Reference Data => Venues => 
Status Metrics tab";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FETrading, FXregression;;;PFX-1379;;QAP-2715;;"Open Trading FE => ESP => EUR/USD => Direct Venue Execution and another one 
ESP with Aggregated Rates";;All tiles are opened with prices;;
;;;;;;;;;;;;;;;"RMC on ESP with Agregated Rates and select ""Exclude Unhealthy Venues""";;"any venues marked as being unhealthy should be treated exactly as they 
would as if the user had deselected them under the ""Filter Venues"" menu";;
;;;;;;;;;;;;;;;"RMC on ESP with Direct Venue Execution and select ""Exclude Unhealthy 
Venues""";;"any venues marked as being unhealthy should be treated exactly as they 
would as if the user had deselected them under the ""Filter Venues"" menu, 
with the exception that the corresponding row for that venue under the 
Direct Venue Execution sub-section should not be removed, only have its 
rates cleared";;
;;;;;;;;;;;;;;;Click on the ASK or BID on the TOB to open order ticket;;Venues which marked unhealthy are not displayed in order ticket;;
;;;;;;;;;;;;;;;"RMC on ESP with Direct Venue Execution and UNselect ""Exclude Unhealthy 
Venues""";;"once the venue again becomes healthy, it should be reintroduced back into 
the tile. This goes for either regular or full amount based venues";;
;;;;;;;;;;;;;;;Close FE with saving workspace and reopen;;"This setting must be saved along with the user's workspace per Aggregated 
Rates tile.";;
QAP-T2773;FX Pricing: Changing Published Status to Update Actual Published Prices;Specified;;;/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, SWED;;;PFX-1716;;QAP-2694;;"Go to AdminFE => Client Tier and modify Instrument (EUR/USD) for tier 
(Gold_Day) and change several qty to Published FALSE";;QTY - False;;
;;;;;;;;;;;;;;;Go to TradingFE => ClientPricingTile => Gold_Day => EUR/USD;;"The rows that have Published false have blank in ""Pub"" columns";;
;;;;;;;;;;;;;;;Go to Client Interface (Currenex) and open ESP tile with EUR/USD;;QTY that have Published false are not publishing on ESP tile;;
QAP-T2774;ESP tile Algo section : All venues selected in the order ticket when opened from the custom Algo section;Specified;;;/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FX_ALGO, FXregression;;;PFX-1939;;QAP-2686;;Open FE trading => ESP tile => Aggregated Rates;EUR/USD - Spot;Prices are moving;;
;;;;;;;;;;;;;;;"RMC on the tile and select Filter Venues and select only 4 of them to 
display in Aggregated Rates";;Only selected venues are displayed in Aggregated Rates;;
;;;;;;;;;;;;;;;RMC and chose Strategies;;Strategies tab is opened;;
;;;;;;;;;;;;;;;Create new algorithm and press on BID or ASK button;;Order ticket is opened with filtered venues;;
QAP-T2775;FETrading - Paused Venues: FE logs unsubscribed check;Manual;;"From the parent story PFX-1766:
_When a venue is paused from the trading FE Venue Status panel:_
_→ Market data is disabled (unsubscribed) from all market data locations in 
the user's FE (e.g. across the entire ESP tile, including aggregated rates 
/ full amount rates / VWAP / direct execution / etc, and also FX Best Rates 
and FX Market Ticks)_";/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression, VENUE_ST;kbrit;;PFX-1766;;QAP-2679;;"Open:
# FE Trading> Venue Status panel(VSP);
# C:QAFEQuod_Financial_Trader_Front-end...logsQUOD.FrontEnd.log
(or latest modified .log file in same folder if there is more than one 
file)";;Check that FE and logs are opened and logs are updating;;
;;;;;;;;;;;;;;;On VSP select and pause venue(ex.BAR);;Venue paused;;
;;;;;;;;;;;;;;;Check that unsubscription message send in FE logs;;"In logs appeared message like that:
SubscriptionRequestType = UNS MDSymbol = EUR/USD:SPO:REG:CITI
or
Unsubscribe sent on : EUR/USD:SPO:REG:GS.D.FSS";;
QAP-T2776;FETrading - Paused Venues: order ticket check;Specified;;;/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;kbrit;;PFX-1766;;QAP-2678;;" Open on FE Trading> Aggregated Market Rates>Rates(ESP) tile>:
* Aggregated Rates(AR);
* Direct Venue Execution(DVE);
Open of FE Trading> Venue Status Panel(VSP)";;"All windows opened,
Prices are displayed and moving
venues presented";;
;;;;;;;;;;;;;;;On VSP Pause some venues presented on DVE window;;"On VSP venue on status pause( || )
on DVE window vennue not dessapeared
but prices stop publishing";;
;;;;;;;;;;;;;;;Double click on AR window( you can use any venue from presented;;Order ticket widow opened with selected venue;;
;;;;;;;;;;;;;;;Check that in Order ticket window venue paused on 2step;;Venue is presented and unchecked;;
QAP-T2777;FETrading - Paused Venues: RFQ tile check;Specified;;;/PFX/FX_Display;Low - Nice to Have;FX_Display;FXregression, VENUE_ST;kbrit;;PFX-1766;;QAP-2677;;"Open
* FE Trading>Venue Status Panel(VSP);
* FE Trading>Aggregated  Market Rates> RFQ tile >Quotes";;"Windows opened
venues presented";;
;;;;;;;;;;;;;;;On RFQ tile send quote(ex. EUR/USD);;Quote send on all alive venues;;
;;;;;;;;;;;;;;;On VSP pause some venues presented in quotes window;;"Venue paused on VSP window
but still presented in list";;
;;;;;;;;;;;;;;;Try to press SEND button on RFQ tile;;"Quotes send from all not paused venues.
Paused venues presented with spaces in cells";;
QAP-T2778;FETrading - Paused Venues: ESP tile check;Specified;;;/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;kbrit;;PFX-1766, PFX-2788;;QAP-2676;;"Open

* FE Trading>Venue Status Panel(VSP);
* FE Trading>Aggregated  Market Rates> ESP tile >Aggregated Rates and 
Direct Venue Execution";;Windows are opened and showing venues and prices;;
;;;;;;;;;;;;;;;On VSP stop venue(ex. BAR);;Venue paused on VS panel;;
;;;;;;;;;;;;;;;On Aggregated Rates select any venue and double click on any price;;Opened order ticket window;;
;;;;;;;;;;;;;;;On Order ticket window check venues list;;Paused venue is unchecked but still in list;;
;;;;;;;;;;;;;;;On Direct Venue Execution check that prices disappear on selected venue;;Prices disappear;;
;;;;;;;;;;;;;;;"Open one more Rates Tile and check that in Direct Venue Execution selected 
venue presented without prices";;Window are opened and showing selected venue;;
QAP-T2779;Behaviour of MKT FOK orders with round lots;Specified;;"This test case checks the behaviour of multilisted order with TIF FOK and 
orderType MKT

 

Expected messages in logs :

2020-06-24 13:14:11.869736164 QUOD.SATS [32315] DEBUG algorithm 
(multilisted.cpp:5355) - AO1200624131410508002 - checking available pools 
for FOK order
2020-06-24 13:14:11.869745282 QUOD.SATS [32315] DEBUG algorithm 
(forex.cpp:746) - AO1200624131410508002 - found round lot 1e+06 on RSM-CITI
2020-06-24 13:14:11.869751907 QUOD.SATS [32315] DEBUG algorithm 
(forex.cpp:832) - AO1200624131410508002 - rounding based on round lot 1e+06
2020-06-24 13:14:11.869755213 QUOD.SATS [32315] INFO algorithm 
(multilisted.cpp:5375) - AO1200624131410508002 - round lot doesn't allow to 
send to RSM-CITI
2020-06-24 13:14:11.869758420 QUOD.SATS [32315] DEBUG algorithm 
(forex.cpp:838) - AO1200624131410508002 - no round lot, keeping quantity 
unchanged
2020-06-24 13:14:11.869763247 QUOD.SATS [32315] DEBUG algorithm 
(forex.cpp:746) - AO1200624131410508002 - found round lot 100000 on JPM
2020-06-24 13:14:11.869767854 QUOD.SATS [32315] DEBUG algorithm 
(forex.cpp:832) - AO1200624131410508002 - rounding based on round lot 
100000
2020-06-24 13:14:11.869769169 QUOD.SATS [32315] INFO algorithm 
(multilisted.cpp:5375) - AO1200624131410508002 - round lot doesn't allow to 
send to JPM
2020-06-24 13:14:11.869772486 QUOD.SATS [32315] DEBUG algorithm 
(forex.cpp:838) - AO1200624131410508002 - no round lot, keeping quantity 
unchanged
2020-06-24 13:14:11.869776295 QUOD.SATS [32315] DEBUG algorithm 
(forex.cpp:746) - AO1200624131410508002 - found round lot 100000 on BNP
2020-06-24 13:14:11.869780901 QUOD.SATS [32315] DEBUG algorithm 
(forex.cpp:832) - AO1200624131410508002 - rounding based on round lot 
100000
2020-06-24 13:14:11.869782220 QUOD.SATS [32315] INFO algorithm 
(multilisted.cpp:5375) - AO1200624131410508002 - round lot doesn't allow to 
send to BNP
2020-06-24 13:14:11.869787336 QUOD.SATS [32315] DEBUG algorithm 
(forex.cpp:746) - AO1200624131410508002 - found round lot 100000 on SS
2020-06-24 13:14:11.869790946 QUOD.SATS [32315] DEBUG algorithm 
(forex.cpp:832) - AO1200624131410508002 - rounding based on round lot 
100000
2020-06-24 13:14:11.869793169 QUOD.SATS [32315] INFO algorithm 
(multilisted.cpp:5375) - AO1200624131410508002 - round lot doesn't allow to 
send to SS
2020-06-24 13:14:11.869796473 QUOD.SATS [32315] DEBUG algorithm 
(forex.cpp:838) - AO1200624131410508002 - no round lot, keeping quantity 
unchanged
2020-06-24 13:14:11.869798480 QUOD.SATS [32315] DEBUG algorithm 
(forex.cpp:838) - AO1200624131410508002 - no round lot, keeping quantity 
unchanged";/PFX/FX_Taker_ESP;Low - Nice to Have;FX_Taker_ESP;FXregression;lzaharia;;;;QAP-2674;;Open aggregated panel on FE;;Aggregated panel opened;;
;;;;;;;;;;;;;;;Click on TOB (buy or sell) to open an order entry box;;Order entry box opened;;
;;;;;;;;;;;;;;;Change following parameters in TOB : orderType : MKT, TIF FOK;;Parameters changed;;
;;;;;;;;;;;;;;;"Make sure that some venues with round lots are included in the algo (on MF 
: Reuters, EBS...)";;Venues with round lots included;;
;;;;;;;;;;;;;;;Send order;;Order sent;;
QAP-T2780;Pricing and execution on forward quote when quote is single sided;Automated;;"This test validates issue PFX-1868

In manual RFQ, check single sided RFQ for forward";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, refactored_FX;lzaharia;;PFX-1868;;QAP-2670;;"From client interface / minifix / currenex, send a RFQ to be manually 
handled with the side sell";;"Quote request sent with side sell
Quote displayed with only one side";;
;;;;;;;;;;;;;;;from Dealer Int accept and send quote;;quote is sent;;
;;;;;;;;;;;;;;;"From client interface / minifix / currenex, send an order to reply to this 
quote";;Order with side sell, executed correctly;;
QAP-T2781;Changing manually last pip in order entry box in ESP tile;Specified;;"This test case validates issue PFX-1825 : changing pip in order entry box 
changed the big figure 

  

  

 ";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression;lzaharia;;;;QAP-2668;;"From ESP tile, choose instrument quoting like EUR/USD and open direct venue 
execution";;Direct Venue Execution opened;;
;;;;;;;;;;;;;;;"Open order entry, change 4th digit in ticket (for example if price is 
1.12345, change 4 to 5)";;"the 4th digit will change and subsequent digit will be 0 (for example 
1.12350)";;
QAP-T2782;Updating margin on a component of a cross impacts on the margin of the cross;Automated;;"For this test there needs ti be reconfigured a Cross Pair trough EUR or USD
And make cross pair without any venues";/PFX/FX_Synthetic;High - Must Have;FX_Synthetic_cross;FXregression, needs_refactoring_FX, UAQA;;;PFX-1426;;QAP-2646;;Open Trading FE and 3 Pricing Tile (NOK/SEK, USD/SEK, USD/NOK);;The tiles are opened;;
;;;;;;;;;;;;;;;Increase the margins for USD/SEK by 500;;Check that Prices for NOK/SEK have been changed;;
;;;;;;;;;;;;;;;Decrease the margins for USD/SEK by 500;;Check that Prices for NOK/SEK have been changed;;
;;;;;;;;;;;;;;;repeat step 2 and 3 with USD/NOK;;;;
QAP-T2783;Venue Status Panel: correct list of venue;Specified;;"This test-case is check next _Acceptance Criteria for PFX-266_

Ability to see in a single panel:
* the list of all available trading venues (presumably taking into account 
whether that user is permissioned to have access to the venue), including:
** ""Venue Code"" - the short code of the venue
** ""Venue Name"" - the long display name of the venue
** ""Status"" - icon indicating whether the venue is currently active, 
paused, or disconnected, etc
** ""Last Update"" - numeric value with time of last update of venue data
* a header panel above the list of trading venues to allow mass changes 
across multiple venues";/PFX/FX_Display;High - Must Have;FX_Display;FXregression, ToBeAutomated, VENUE_ST;kbrit;;PFX-266;;QAP-2633;;Check list of venues on FETrading>Venue Status panel;On WebAdmin>Reference Data>Venues List on venue names;List of Status Panel venues contained same values as WebAdmin venue list;;
;;;;;;;;;;;;;;;"Check that FETrading>Venue Status panel contain:
""Venue Code"" - the short code of the venue
""Venue Name"" - the long display name odf the venue
""Status""- icon indicating whether the venue is currently active
""Last Update"" - numeric value with time of last update of venue data";;Window contain field Venue Code(id), Venue Name, Status.;;
;;;;;;;;;;;;;;;"Check a header panel above the list of trading venues to allow mass changes 
across multiple venues";;Header is displayed;;
QAP-T2784;Trading FE: Display Spot and Forward Point Columns For Forwards;Automated;;"PFX-1528

Please rename the Spot column from ""Sp"" to ""Spot"" and the Forward Points 
column to ""Pts"" (fine for this to impact both ESP and Client Pricing 
tiles).
It is important that the Spot price we show is the margined spot price used 
to construct the outright.
It is important that the Forward Points we show are the margined points 
used to construct the outright, and not just the raw configured swap points 
on the tenor.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression, refactored_FX;;;PFX-1528;;QAP-2587;;Open Trading FE and two Pricing Tiles (EUR/USD spot and 1w);;The tiles are opened;;
;;;;;;;;;;;;;;;Check the second tile;;"1. ""Spot"" column displays the prices from the tile with spot tenor.
2. ""Pts"" column displays the margined points (margin + forward points)";;
QAP-T2785;Trading FE: Venue Health Check:  status bar, the relative priority;Manual;;"PFX-285
should be ALL


1. In the status bar for the ""Venues"" BarButtonItem used to open this 
panel, the relative priority of each displayed icon should be: Status_Error 
=> Status_Alert => Status_Warning => Status_Paused => Status_OK, such that 
if all venues are active, and none paused by the user, and none in 
Warning/Error summary status, the Status_OK icon should be displayed in the 
status bar.
2. If one or more venues are paused by the user, and all unpaused venues 
are active, and none in Warning/Error summary status, the Status_Paused 
icon should be displayed.
3. If any unpaused venues are in Warning summary status, but no unpaused 
venue is in Error summary status, and no unpaused venue is disconnected / 
unavailable, the Status_Warning icon should be displayed.
4. If any unpaused venues are in Error summary status (regardless of any 
venue in Warning summary status), and no unpaused venue is disconnected / 
unavailable, the Status_Alert icon should be displayed.
5. If any unpaused venues are disconnected / unavailable, the Status_Error 
icon should be displayed.

you should check that you have the following in your functional config file







";/PFX/FX_Display;High - Must Have;FX_Display;FXregression, VENUE_ST;;;PFX-285;;QAP-2582;;Open FE Trading =>Venue Status window;;all venues have status OK (green);;
;;;;;;;;;;;;;;;Paused one of them;;"Status for venue changed to Pause.
Status for status bar changed to Pause";;
;;;;;;;;;;;;;;;Un-Pause all venues;;;;
;;;;;;;;;;;;;;;"Via AdminFE (Reference Data => Venue => Status Metric section) make some of 
venue to Warning (enter -1) status and check FETrading";;"Status for venue changed to Warning.
Status for status bar changed to Warning";;
;;;;;;;;;;;;;;;"Via AdminFE (Reference Data => Venue => Status Metrics section) make some 
of venue to Error (enter -1) status and check FETrading";;"Status for venue changed to Error.
Status for status bar changed to Error";;
;;;;;;;;;;;;;;;Via Admin set for disconnected venue (which are not Forex) Metrics value;"or set to ""NONE"" in the vms config";"All venues which are not Forex have Status Disconnected
Status for status bar changed to Disconnected";;
QAP-T2786;FETrading : Unhealthy Venues : Pricing Tile, Warning Threshold;Manual;;"PFX-1381
Unhealthy venue is a venue which in warning or error status (PFX-285).";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression;;;PFX-1381;;QAP-2579;;"Open Admin FE -> FX_MM -> Client Tier and modify instrument (EUR/USD) for 
client tier (Gold)";;Modify wizard is opened;;
;;;;;;;;;;;;;;;Go to Venue section;;"""Exclude When Unhealthy"" checkbox which can be switched on and off";;
;;;;;;;;;;;;;;;"Add new venue or change the existed one and check ""Exclude When Unhealthy"" 
ON and Save and Go to Summary";leave only one venue;Check that changes for venue is saved;;
;;;;;;;;;;;;;;;press Submit;;no error should be;;
;;;;;;;;;;;;;;;"Go to Reference Data => Venues. Find that venue from client Tier and modify 
it";;modify wizard is opened;;
;;;;;;;;;;;;;;;"Go to the ""Status Metrics"" and enter -1 to the ""Warning Threshold"". and 
submit changes";to make error status;no error should be;;
;;;;;;;;;;;;;;;Open Trading FE => Pricing Tile (EUR/USD, Gold) and Venue status window;;"Venue has Warning Status.
Prices are displayed on Pricing Tile";;
;;;;;;;;;;;;;;;;;;;
QAP-T2787;FETrading : Unhealthy Venues : Pricing Tile, Error Threshold;Manual;;"PFX-1381
Unhealthy venue is a venue which in warning or error status (PFX-285).
The prices on Pricing Tile should be cleared. Not stale.
The BE will 1) stop the new prices from being sent and 2) send a message to 
clear the old price.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression;;;PFX-1381;;QAP-2577;;"Open Admin FE -> FX_MM -> Client Tier and modify instrument (EUR/USD) for 
client tier (Gold)";;Modify wizard is opened;;
;;;;;;;;;;;;;;;Go to Venue section;;"""Exclude When Unhealthy"" checkbox which can be switched on and off";;
;;;;;;;;;;;;;;;"Add new venue or change the existed one and check ""Exclude When Unhealthy"" 
ON and Save and Go to Summary";leave only one venue;Check that changes for venue is saved;;
;;;;;;;;;;;;;;;press Submit;;no error should be;;
;;;;;;;;;;;;;;;"Go to Reference Data => Venues. Find that venue from client Tier and modify 
it";;modify wizard is opened;;
;;;;;;;;;;;;;;;"Go to the ""Status Metrics"" and enter -1 to the ""Error Threshold"". and 
submit changes";to make error status;no error should be;;
;;;;;;;;;;;;;;;Open Trading FE => Pricing Tile (EUR/USD, Gold) and Venue status window;;"Venue has Error Status.
On the Pricing tile no prices";;
QAP-T2788;Trading FE: Venue Health Check: Alerts for Warning and Error;Manual;;"PFX-285
View and edit a single new entry ""Venue Status Warning"" in the trading FE 
-> User Options -> Alerts section to determine how to notify users when any 
venue moves to the Warning state for any configured metric. If a message is 
used in the notification, it should include Venue Code and the same details 
as used in the audit event described below.
View and edit a single new entry ""Venue Status Error"" in the trading FE -> 
User Options -> Alerts section to determine how to notify users when any 
venue moves to the Error state for any metric. If a message is used in the 
notification, it should include Venue Code and the same details as used in 
the audit event described in PFX-1670.

you should check that you have the following in your functional config file






<!-venueControl default Value : visible=""false""->
";/PFX/FX_Display;High - Must Have;FX_Display;FXregression, VENUE_ST;;;PFX-285;;QAP-2572;;Trading FE -> User Options -> Alerts section;;Check that Alert for Error and Warning is active;;
;;;;;;;;;;;;;;;Open Venue window;;Check allerts;;
QAP-T2789;Trading FE: Venue Health Check: Warning and Error status;Manual;;"PFX-285
If you set Warning Threshold to 3 seconds, and Error Threshold to 5 
seconds, then if no update has been received after 3 seconds, the Venue 
Status panel should show that Venue as being in the Warning state (as 
described in the ticket). Same after 5 seconds for the Error state.

you should check that you have the following in your functional config file






<!-venueControl default Value : visible=""false""->
";/PFX/FX_Display;High - Must Have;FX_Display;FXregression, VENUE_ST;;;PFX-285;;QAP-2570;;open AdminFE -> Reference Data -> Venues and modify some of them;;Modify wizard is opened;;
;;;;;;;;;;;;;;;"Go to ""Status Metrics"" venue and enter 0.2 to ""Warning Threshold"", 0.5 to 
check ""enable Metric"" ON";;"Warning Threshold =0.2
Error Threshold = 0.5";;
;;;;;;;;;;;;;;;Press Go to Summary -> Submit;;should be no errors;;
;;;;;;;;;;;;;;;"Open FE Trading -> Venue Panel window and filtered by Vanue Name selected 
only that you modified";may be necessary to restart MDA and VMS;"If no update has been received after 0.2 seconds, the Venue Status should 
show that Venue as being in the Warning state (as described in the ticket). 
Same after 0.5 seconds for the Error state.
for this case text mostly should be red";;
QAP-T2790;Trading FE: Venue Health Check: Last Update Timestamp;Manual;;"you should check that you have the following in your functional config file






<!-venueControl default Value : visible=""false""->


We must be able to send Market Data to one venue with delay about 5 sec and 
set for this venue Status metric which makes this venue in Warning Status.
For Error status we can just set -1 in Metrics.
Or we also can set -1 in Metrics for Warning status , but fir another venue 
.
Preconditions:
1) open AdminFE -> Reference Data -> Venues and modify some of them
2)Go to ""Status Metrics"" venue and enter -1 to Warning Threshold and check 
""enable Metric"" ON
3) Press Go to Summary -> Submit and do the same for another venue but 
enter -1 for ""Error Threshold"" and check ""enable Metric"" ON";/PFX/FX_Display;High - Must Have;FX_Display;FXregression, VENUE_ST;;;PFX-285;;QAP-2569;;Open FE Trading -> Venue Panel window;may be necessary to restart MDA and VMS;"Three venue. should be displayed.
One with ""Warning Threshold"" = -1: the cell's text should be displayed in 
the yellow text color of the active palette, with a mouse hover tooltip 
indicating ""Warning threshold of [WarningThresholdValue] exceeded"" to 
inform the user of the metric status and the value of the threshold;
One with One with ""Warning Threshold"" = -1: the cell's text should be 
displayed in the red text color of the active palette, with a mouse hover 
tooltip indicating ""Error threshold of [ErrorThresholdValue] exceeded"" to 
inform the user of the metric status and the value of the threshold;";;
QAP-T2791;Venue Status Panel:  venue status icons;Manual;;"This test-case is check next _Acceptance Criteria for PFX-266_
{quote}In the ""Status"" column, the relative priority of each displayed icon 
should be: Status_Paused => Status_Error => Status_OK, such that if a venue 
is in active status, and not paused by the user, it should display 
Status_OK.svg in the ""Status"" column for that venue. If a venue is 
disconnected / unavailable, but not paused by the user, it should display 
Status_Error.svg for that venue. If the venue is paused by the user, it 
should always show Status_Paused.svg regardless of whether the venue is 
actually connected or not in the BE. (Status_Warning.svg and 
Status_Alert.svg will not be used in this ticket, but should be available 
since they will be other possible states added in future tickets that start 
tracking venue status metrics.)

In the status bar for the ""Venues"" BarButtonItem used to open this panel, 
the relative priority of each displayed icon should be: Status_Error => 
Status_Paused => Status_OK, such that if _all_ venues are active, and none 
paused by the user, the Status_OK icon should be displayed in the status 
bar. If one or more venues are paused by the user, and all unpaused venues 
are active, the Status_Paused icon should be displayed. If any unpaused 
venues are disconnected / unavailable, the Status_Error icon should be 
displayed. Remember also to use the method described in this page for 
correctly coloring status bar 
icons: [https://support.quodfinancial.com/confluence/display/DVPT/Thick+Front-End+Design+Principles#ThickFront-EndDesignPrinciples-Colors |https://support.quodfinancial.com/confluence/display/DVPT/Thick+Front-End+Design+Principles#ThickFront-EndDesignPrinciples-Colors]...in 
the bullet that starts with ""In order for these Svg colors to appear 
properly in the Ribbon menu's Quick Access or Status Bars...""
{quote}";/PFX/FX_Display;Low - Nice to Have;FX_Display;FETrading, FXregression, VENUE_ST;kbrit;;PFX-266;;QAP-2565;;"On FE Trading check Venue Button,
if a venue is in active status, and not paused by the user, it should 
display Status_OK.svg";;Near Venue button is Status_OK.sVg image;;
;;;;;;;;;;;;;;;Check If any unpaused venues are disconnected / unavailable;;"If a venue is disconnected / unavailable, but not paused by the user, it 
should display Status_Error.svg for that venue.";;
;;;;;;;;;;;;;;;Check if there is at least one pause venue;;If the venue is paused by the user, it should always show Status_Paused.svg;;
;;;;;;;;;;;;;;;On FE Trading Venue Status Panel(window) check icons of venues;;Every venue has own icon. Icon is correct(check attached images).;;
QAP-T2792;Client Pricing Tile: workFlow of orders on behalf of client;Automated;;"PFX-233
Orders sent by a sales person on behalf of a client follow the same 
workflow as if submitted externally directly by the client, for instance 
displayed and managed through the Client Order Blotter panel (see PFX-170).";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX;;;PFX-233;;QAP-2556;;Сlicking on the top of book pips of a Client Pricing tile;EUR/USD SPOT;"The Client order ticket opens with the top of book quantity, price, and 
side for the clicked on price.";;
;;;;;;;;;;;;;;;Press on BUY button;;"Order is displayed in Order Book
Check Qty, price and client.
Status shouldn't be rejected";;
;;;;;;;;;;;;;;;"Do the same only click not on the top of Book but double-clicking on a row 
and side of the rates sub-section (SELL side)";;"Order is displayed in Order Book
Check Qty, price and client Status is Terminated";;
QAP-T2793;Client Pricing Tile: Order Ticket display;Specified;;PFX-233;/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, UAQA;;;PFX-233;;QAP-2555;;Click on the top of book pips of a Client Pricing tile;;"the Client order ticket opens with the top of book quantity, price, and 
side for the clicked on price";;
;;;;;;;;;;;;;;;"Close the previous order ticket and double-clicking on a row and side of 
the rates sub-section";;"* the Client order ticket opens with the quantity (cumulative if Sweepable, 
exact if Tiered), price, and side of the clicked on row
* A header on the order ticket is displayed with a centered label in large 
font size “CLIENT Order Ticket” styled in much the same way that we set the 
headers of each page of User Options to a different palette background 
color. In this case, the BackColor should be the palette's Accent Paint and 
the text ForeColor should be the palette's Accent Brush.
* The currency pair / tenor and tier from the tile are displayed in large 
labels at the top of the order ticket
* Price and Quantity fields displayed like in the normal FX ticket.
* Price type field displayed w supported client order price types 
(currently Limit and Market).
* Time in Force field displayed w supported client order TIFs (currently 
FOK and IOC).";;
;;;;;;;;;;;;;;;"Check ""Client"" field";;"The client can be selected from a drop down (makes sense to use current 
“Client” field), sorted alphabetically, filtered for only the external 
clients that are assigned to the indicated instrument and tier.";;
;;;;;;;;;;;;;;;Check Order side;;The order side is indicated as usual, also able to be changed;;
;;;;;;;;;;;;;;;"Check Slippage field.
Stop Price";;"Slippage can be displayed, always with a default of 0, and applied to the 
specified price in the same way we currently use it in the normal order 
ticket.";;
;;;;;;;;;;;;;;;Send order;;"Check in Order blotter that order is filled. qty and price match to values 
from order ticket";;
;;;;;;;;;;;;;;;"Open ""Trades"" window";;"Check that ExecID is the same as the filled order has in ""Order Book""
In Trades windows appears two rows: one is buy side from client and another 
one is sell side (internal execution)";;
QAP-T2794;TWAP : check that the reference price is taken into account;Manual;;TWAP : check that the reference price is taken into account;/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FX_ALGO, FXregression;lzaharia;;PFX-1203;;QAP-2549;;"Set a TWAP algo with passive mode, with a passive reference price set to 
primary market";;TWAP algo set;;
;;;;;;;;;;;;;;;Send a TWAP order lasting 10 minutes, with 10 waves, MKT;;Order sent : price of the child is the bid/ask of the primary market;;
;;;;;;;;;;;;;;;Check in logs the next row for your order;if it is BUY order;- AO1210201123055009001 - using BestBid (1.182);;
QAP-T2795;TWAP algo for FX : check that the forbidden venues are correctly transferred to the child;Specified;;"TWAP algo for FX : check that the forbidden venues are correctly 
transferred to the child

{color:#DE350B}_in case_{color} ""11800 Unable to get quote"" => in 
client_marketdata.xml do you have this




false

";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FX_ALGO, FXregression;lzaharia;;PFX-1203;;QAP-2545;;"From ESP Tile, select algorithm part of the tile and set a new TWAP 
algorithm with following parameters : start time now, end time (+ 1 hour), 
number of waves 20, aggressivity 3, forbidden venues : MS/CITI/DB/JPM";;Algorithm set;;
;;;;;;;;;;;;;;;Send an order of quantity 20M, GTC, with a slippage from this algorithm;;"Order sent, first child algo order sent with quantity 1M, no aggressive 
order sent on forbidden venues";;
;;;;;;;;;;;;;;;Check second wave;;"Depending on the status of the first algo, the quantity of the second wave 
is adjusted : if the first order is eliminated, the quantity of the second 
order is equal to 2,000,000, or adjusted if the first order is partially 
filled
Check that venues of the second waves are correct too";;
;;;;;;;;;;;;;;;Check algo parameters of TWAP algo and child algo;;"In parameters, allowed venues should be the same for TWAP and all child 
algos";;
QAP-T2796;FX Algo TWAP : functioning of reserved quantity;Specified;;"Check the functioning of reserved quantity for algo TWAP

{color:#DE350B}_in case_{color} ""11800 Unable to get quote"" => in 
client_marketdata.xml do you have this




false

";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FX_ALGO, FXregression;lzaharia;;PFX-1203;;QAP-2541;;"Prepare an algo TWAP with 10 waves, quantity 12000000 and a reserved 
quantity of 2000000, ending after 10 minutes";;"10 waves sent with a quantity of 1000000, last wave sent at the end with a 
quantity of 2000000
Check that the quantity of each wave is correct and that the last wave is 
sent just before the expiry time of the algo";;
QAP-T2797;Venue Status Panel : Pause/Resume of multi venues;Specified;;"This test is check ability to pause/resume of multi  venues in Venue Status 
Panel



+After checking pause/resume FE should send a message of Unsubscription to 
that venue
market data unsubscribe+";/PFX/FX_Display;Low - Nice to Have;FX_Display;AutomatedCodedUI, FETrading, FXregression, ToBeAutomated, UAQA;kbrit;;PFX-266, PFX-285;;QAP-2538;;On FE Trading, click on Venue btn( on footer panel);;Venue Status Panel opened;;
;;;;;;;;;;;;;;;"On FE Trading open Aggregated Rates> Rates Tile> click RMB> select 
Aggregated rates";;Aggregated Rates opened, venues are enabled;;
;;;;;;;;;;;;;;;On Venue Status Panel select more than one venue and disable/pause them.;;Venues disabled, also they disappear from Aggregated Rates list;;
;;;;;;;;;;;;;;;On Venue Status Panel select same venues > resume them;;Venues resumed and appeared in Aggregated Rates list;;
;;;;;;;;;;;;;;;Check logs of FE after paused of venues;;Check logs of FE after paused of venues;;
QAP-T2798;Venue Status Panel : Pause/Resume of venues;Specified;;"This test is check ability to pause/resume each of venues in Venue Status 
Panel

+After checking pause/resume FE should send a message of Unsubscription to 
that venue
market data unsubscribe+";/PFX/FX_Display;Low - Nice to Have;FX_Display;AutomatedCodedUI, FETrading, FXregression, ToBeAutomated, UAQA;kbrit;;PFX-266, PFX-285;;QAP-2537;;On FE Trading, click on Venue btn( on footer panel);;Venue Status Panel opened;;
;;;;;;;;;;;;;;;"On FE Trading open Aggregated Rates> Rates Tile> click RMB> select 
Aggregated rates";;Aggregated Rates opened, venues are enabled;;
;;;;;;;;;;;;;;;On Venue Status Panel select venue and disable/pause it.;;Venue disabled, also venue disappear from Aggregated Rates list;;
;;;;;;;;;;;;;;;On Venue Status Panel select same venue > resume it;;Venue resumed and appear in Aggregated Rates list;;
;;;;;;;;;;;;;;;Check logs of FE after paused of venues;;"In logs appeared messages similar to "" SubscriptionRequestType = UNS""";;
QAP-T2799;Algo TWAP : check respect of number of waves / slice duration;Specified;;"Algo TWAP : check respect of number of waves / slice duration

 
*round lot* is a minimum quantity for an order for a currency pair and a 
venue
Ex JPM has round lot 1M on JPM => you can only send orders multiple of 1M
1M, 2M, 3M, etc
but not 2,456,789

{color:#DE350B}_in case_{color} ""11800 Unable to get quote"" => in 
client_marketdata.xml do you have this




false

";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FX_ALGO, FXregression;lzaharia;;PFX-1203;;QAP-2536;;"On algo TWAP, set a an algo with slice duration of 1 minutes, finishing in 
one hour";;Algo TWAP set;;
;;;;;;;;;;;;;;;Send an order of quantity 20000000;;Child algo order sent every minute with quantity = equal for each slice;;
QAP-T2800;TWAP algo for FX : check that the allowed venues are correctly transferred to the child;Specified;;"TWAP algo for FX : check that the allowed venues are correctly transferred 
to the child

Check that ""AllowedVenue"" is presented in SCENARIOPARAMETER for 
ScenarioID=7
!screenshot-1.png|thumbnail!
!screenshot-2.png|thumbnail!
{color:#DE350B}_in case_{color} ""11800 Unable to get quote"" => in 
client_marketdata.xml do you have this




false



!screenshot-3.png|thumbnail!";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FX_ALGO, FXregression;lzaharia;;PFX-1203;;QAP-2535;;"From ESP Tile, select algorithm part of the tile and set a new TWAP 
algorithm with following parameters : start time now, end time (+ 1 hour), 
number of waves 20, aggressivity 3, allowed venues : MS/CITI/DB/JPM";;Algorithm set;;
;;;;;;;;;;;;;;;Send an order of quantity 20M, GTC, with a slippage from this algorithm;;"Order sent, first child algo order sent with quantity 1M, aggressive order 
sent on allowed venues";;
;;;;;;;;;;;;;;;Check second wave;;"Depending on the status of the first algo, the quantity of the second wave 
is adjusted : if the first order is eliminated, the quantity of the second 
order is equal to 2,000,000, or adjusted if the first order is partially 
filled
Check that venues of the second waves are correct too";;
;;;;;;;;;;;;;;;Check algo parameters of TWAP algo and child algo;;"In parameters, allowed venues should be the same for TWAP and all child 
algos";;
QAP-T2801;FETrading: Pricing and Executable for Tiered subsection;Automated;;"If Tiered is selected, the margin columns are hidden, the rows cannot be 
selected (so Pricing/Executable buttons can still be used, but not per 
volume band), and the margin increment value and margin arrow buttons are 
all disabled. The tile should then show the tiered TOB price and the tiered 
rates table.


bernestBen Ernest-Jones added a comment - 23/Apr/20 16:40
Just use the colors relative to the sweepable settings even if tiered is 
selected. No need to try and nap them to tiered view.";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXMM, FXregression, needs_refactoring_FX;;;;;QAP-2523;;Open FE trading -> Client Pricing Tile and go to Tiered section;be sure the current currrencyPair has tiered qty;All band are shown correctly;;
;;;;;;;;;;;;;;;Switch Executable to OFF;;"All columns and TOB disappeared except Band
Executable button became red";;
;;;;;;;;;;;;;;;Switch Executable to ON and Pricing to OFF;;"All columns and TOB disappeared except Band.
Pricing button became red";;
;;;;;;;;;;;;;;;Go to Sweepable tab;not necessary for TH2;All lines are red. TOB is showing the prices;;
QAP-T2802;FX RFQ: dependency of quantities for Uneven Swap;Automated;;"Test verifies the following requirements:
_""This will likely involve having quantity fields (and base currency 
buttons) for both the near and far legs of the swap quote request. If the 
user only edits the near leg quantity and/or base currency, then the far 
leg quantity and/or base currency will automatically update to the same 
values as the near leg. If the user edits the far leg quantity and/or base 
currency, this signals an override for the current quote request, such that 
the near and far leg quantities and base currencies can be different. Once 
the current uneven swap quote request is completed and the form is reset to 
a new quote request, the near and far legs will once again be in sync until 
the user again edits the far leg to override the quantity value.""_";/PFX/FX_Taker_RFQ;Low - Nice to Have;FX_Taker_RFQ;AutomatedCodedUI, FETrading, FXregression, refactored_FX, RFQ, swapMM;kbrit;;PFX-239, PFX-1491;;QAP-2514;;On FE Trading> Aggregated Rates> RFQ Tile add far tenor( ex. 2W, 1M, etc.);;Under qty 1 appears qty 2 with same value.;;
;;;;;;;;;;;;;;;Change qty1(near leg qty) to 2,000,000;;Qty2(far leg qty) changed to same value automatic.;;
;;;;;;;;;;;;;;;Change qty2 to 3,000,000;;"Qty1 = 2,000,000
Qty2 = 3,000,000";;
;;;;;;;;;;;;;;;Change qty1 to 4,000,000;;"Qty1 = 4,000,000
Qty2 = 3,000,000";;
;;;;;;;;;;;;;;;Send RFQ and stop it. Change qty1 to 1,000,000;;"Qty1 = 1,000,000
Qty2 = 1,000,000";;
QAP-T2803;Daily MTM Quote Position from zero;Automated;;"This test validates PFX-1052 

 
* Similar to PFX-1014 ""Quote Position"" we should also track the net quote 
currency quantity as the base currency quantity marked to market at 
scheduled time periods. At the moment of marking this value to market, we 
take the current base currency net quantity from all time, then multiply by 
the current market rate for the currency pair at that moment. After that, 
we continue to update this marked to market quote currency position value 
with the (trade qty * trade px) of each subsequent trade occurring after 
the position was marked to market, in the same way the normal Quote 
Position value is tracked.
* We should maintain this value for different scheduled marked to market 
time periods (Daily, Monthly, Yearly):
** Daily MTM Quote Position
** Monthly MTM Quote Position
** Yearly MTM Quote Position

 

Given the following conversion rates:

GBP/USD = 1.3

These are the values we would see for each field for the following trade 
activity:
||Trade||Daily MTM Quote Position||
|EUR/GBP BUY 10M @ 0.9|-9M|
|EUR/GBP SELL 2M @ 0.8|-7.4M|
|EUR/GBP SELL 12M @ 0.8|2.2M|";/PFX/FX_MM_Position;Critical - Do ASAP;FX_MM_Positions;FXregression, needs_refactoring_FX;lzaharia;;PFX-1052;;QAP-2508;;Send a buy order of 6M USD/CAD ccy USD;;"Position updated :
Daily MTM Quote Position = - 6M * Exec Px
";;
;;;;;;;;;;;;;;;Send a buy order of 2M USD/CAD ccy USD;;"Position updated :
Daily MTM Quote Position = -6M * Exec Px -2M * Exec Px";;
;;;;;;;;;;;;;;;Send a sell order of 8M USD/CAD ccy USD;;"Position updated :
Daily MTM Quote Position = -6M * ExecPx -2M*Exec Px + 8M* Exec Px";;
;;;;;;;;;;;;;;;Send a sell order of 3M USD/CAD ccy USD;;"Position updated :
Daily MTM Quote Position = -6M * ExecPx - 2M* ExecPx + 8
M * Exec Px + 3M * Exec Px";;
QAP-T2804;Quote Position (USD) Test;Automated;;"This test validates PFX-1014 

 

+Quote Currency Position+
* We should track the quote currency quantity changes as a net (currently 
""Quote Curr Posit Qty""), and net in system currency (currently ""RT Posit 
Qty (USD)"")
* Can we get away with the following column rename changes? Happy to debate 
these if you have a sense of what equities expects for the equivalent.
** Quote Curr Posit Qty => Quote Position
** RT Posit Qty (USD) => Quote Position (USD)

Given the following conversion rates:

GBP/USD = 1.3

These are the values we would see for each field for the following trade 
activity:
||Trade||Quote Position||Quote Position (USD)||
|EUR/GBP BUY 10M @ 0.9|-9M|-9M * 1.3 = -11.7M|
|EUR/GBP SELL 2M @ 0.8|-7.4M|-7.4M * 1.3 = -9.62M|
|EUR/GBP SELL 12M @ 0.8|2.2M|2.2M * 1.3 = 2.86M|



Mkt PX = system/quote (for NOK/SEK => USD/SEK)";/PFX/FX_MM_Position;Critical - Do ASAP;FX_MM_Positions;FXregression, needs_refactoring_FX;lzaharia;;PFX-1620;;QAP-2506;;Send a buy order of 6M USD/CAD ccy USD;;"Position updated :
Quote Position (USD) = - 6M * Exec Px / USDCAD Mkt Px";;
;;;;;;;;;;;;;;;Send a buy order of 2M USD/CAD ccy USD;;"Position updated :
Quote Position (USD) = (-6M * Exec Px -2M * Exec Px)/USDCAD Mkt Px";;
;;;;;;;;;;;;;;;Send a sell order of 8M USD/CAD ccy USD;;"Position updated :
Quote Position (USD) = (-6M * ExecPx -2M*Exec Px + 6M* Exec Px)/USDCAD Mkt 
Px";;
;;;;;;;;;;;;;;;Send a sell order of 3M USD/CAD ccy USD;;"Position updated :
Quote Position (USD) = (-6M * ExecPx - 2M* ExecPx + 6M * Exec Px + 3M * 
Exec Px)/USDCAD Mkt Px";;
QAP-T2805;Quote Position Test;Automated;;"This test validates PFX-1014 

 

+Quote Currency Position+
* We should track the quote currency quantity changes as a net (currently 
""Quote Curr Posit Qty""), and net in system currency (currently ""RT Posit 
Qty (USD)"")
* Can we get away with the following column rename changes? Happy to debate 
these if you have a sense of what equities expects for the equivalent.
** Quote Curr Posit Qty => Quote Position
** RT Posit Qty (USD) => Quote Position (USD)

Given the following conversion rates:

GBP/USD = 1.3

These are the values we would see for each field for the following trade 
activity:
||Trade||Quote Position||Quote Position (USD)||
|EUR/GBP BUY 10M @ 0.9|-9M|-9M * 1.3 = -11.7M|
|EUR/GBP SELL 2M @ 0.8|-7.4M|-7.4M * 1.3 = -9.62M|
|EUR/GBP SELL 12M @ 0.8|2.2M|2.2M * 1.3 = 2.86M|";/PFX/FX_MM_Position;Critical - Do ASAP;FX_MM_Positions;FXregression, Mixed, needs_refactoring_FX;lzaharia;;PFX-1603;;QAP-2505;;Send a buy order of 6M USD/CAD ccy USD (MiniFix or TradingFE);;"Position updated :
Quote Position = - 6M * Exec Px";;
;;;;;;;;;;;;;;;Send a buy order of 2M USD/CAD ccy USD;;"Position updated :
Quote Position = -6M * Exec Px -2M * Exec Px";;
;;;;;;;;;;;;;;;Send a sell order of 8M USD/CAD ccy USD;;"Position updated :
Quote Position = -6M * ExecPx -2M*Exec Px + 8M* Exec Px";;
;;;;;;;;;;;;;;;Send a sell order of 3M USD/CAD ccy USD;;"Position updated :
Quote Position = -6M * ExecPx - 2M* ExecPx + 8M * Exec Px + 3M * Exec Px";;
QAP-T2806;FX FETrading - Market Making Panic Labels;Specified;;"NOTICE!
in functional.config there is :

";/PFX/FX_Display;High - Must Have;FX_Display;AutomatedCodedUI, FXregression, UAQA;;;PFX-1311;;QAP-2502;;"Open FE Trading and press ""Panic"" button in the status bar";;Panic window is opened;;
;;;;;;;;;;;;;;;Check Panic window;;"* A larger font size label in the top left area of the top section of the 
window of ""Working Orders""
* A larger font size (same as the label above) label in the top left area 
of the bottom section of the window of ""Client Pricing""
* In the bottom section:
** Executable
** Pricing
** Send Hedge orders";;
;;;;;;;;;;;;;;;;;;;
QAP-T2807;FX Position keeping - PnL on cross currency;Specified;;"We should track the PnL quantity expressed in each currency pair's quote 
currency, defined as the sum of
* the base currency quantity converted to the quote currency with the 
current market rate
* the quote currency quantity

To perform this test, it is necessary to reset positions to zero in the DB";/PFX/FX_MM_Position;Critical - Do ASAP;FX_MM_Positions;FXregression, refactored, TobeAutomatized;lzaharia;;PFX-1055;;QAP-2501;;"From client interface, on the same currency pair, send two consecutive 
orders buy 6M and 2M on NOK/SEK";;Orders are executed;;
;;;;;;;;;;;;;;;"Check PnL
Check PnL(daily)
Check PnL (USD)
Check Daily PnL (USD)";;"PnL = position * mkt price + quote position
PnL(daily) = position * mkt price + quote position
PnL(USD) = (position * mkt price + quote position)/USD/NOK
Daily PnL(USD) = (position * mkt price + quote position)/USD/SEK";;
;;;;;;;;;;;;;;;Send a sell order quantity 8M on the same currency pair;;Order executed;;
;;;;;;;;;;;;;;;Check PnL;;"PnL = position * mkt price + quote position
PnL(daily) = position * mkt price + quote position
PnL(USD) = (position * mkt price + quote position)/USD/NOK
Daily PnL(USD) = (position * mkt price + quote position)/USD/SEK";;
;;;;;;;;;;;;;;;Send a sell order quantity 3M on the same currency pair;;"PnL = position * mkt price + quote position
PnL(daily) = position * mkt price + quote position
PnL(USD) = (position * mkt price + quote position)/USD/NOK
Daily PnL(USD) = (position * mkt price + quote position)/USD/SEK";;
;;;;;;;;;;;;;;;;;;;
QAP-T2808;FX Position keeping - PnL CCY2;Automated;;"We should track the PnL quantity expressed in each currency pair's quote 
currency, defined as the sum of
* the base currency quantity converted to the quote currency with the 
current market rate
* the quote currency quantity

Mkt Px (system/quote) =EUR/USD (EUR -> base & USD -> quote & USD -> system 
(that we have in quoteSettings table))";/PFX/FX_MM_Position;Critical - Do ASAP;FX_MM_Positions;FXregression, needs_refactoring_FX;lzaharia;;PFX-1055;;QAP-2500;;"From client interface, on the same currency pair, send two consecurive 
orders buy 6M USD/CAD ccy CAD";;Orders are executed;;
;;;;;;;;;;;;;;;Check PnL;Only Pnl (USD) for TH2;"PnL = position * mkt price + quote position
PnL (USD) = (position * mkt price + quote position)/Mkt Px";;
;;;;;;;;;;;;;;;Send a sell order quantity 8M on the same currency pair;;Order executed;;
;;;;;;;;;;;;;;;Check PnL;;PnL (USD) = (position * mkt price + quote position)/Mkt Px;;
;;;;;;;;;;;;;;;Send a sell order quantity 3M on the same currency pair;;PnL (USD) = (position * mkt price + quote position)/Mkt Px;;
;;;;;;;;;;;;;;;;;;;
QAP-T2809;FX Position keeping - Daily MTM PnL (USD);Automated;;"PnL = position * mkt price(base/quote) + quote position
PnL (USD) = (position * mkt price(base/quote) + quote position)/Mkt 
Px(system/quote)
system/base USD/EUR
system/quote USD/USD
_____________________________________________________________________________________________








We should track the PnL quantity expressed in each currency pair's quote 
currency, defined as the sum of
* the base currency quantity converted to the quote currency with the 
current market rate
* the quote currency quantity

If all positions are reset to zero, daily, monthly and yearly PnL must be 
equal to PnL

To perform this test, positions must be reset to zero

On each step, check daily, monthly and yearly PnL";/PFX/FX_MM_Position;Critical - Do ASAP;FX_MM_Positions;FXregression, Mixed, needs_refactoring_FX;lzaharia;;;;QAP-2497;;"From client interface, on the same currency pair, send two consecurive 
orders buy 6M and 2M on USD/CAD";;Orders are executed;;
;;;;;;;;;;;;;;;Check PnL;;Daily PnL (USD)= (position * mkt price + quote position)/Mkt rate;;
;;;;;;;;;;;;;;;Send a sell order quantity 8M on the same currency pair;;Order executed;;
;;;;;;;;;;;;;;;Check PnL;;Daily PnL(USD) = (position * mkt price + quote position)/MKT Rate;;
;;;;;;;;;;;;;;;Send a sell order quantity 3M on the same currency pair;;Daily PnL (USD) = (position * mkt price + quote position)/Mkt rate;;
;;;;;;;;;;;;;;;;;;;
QAP-T2810;FX Position keeping - MTM PnL (USD);Automated;;"We should track the PnL quantity expressed in each currency pair's quote 
currency, defined as the sum of
* the base currency quantity converted to the quote currency with the 
current market rate
* the quote currency quantity

PnL = position * mkt price(base/quote) + quote position
PnL (USD) = (position * mkt price(base/quote) + quote position)/Mkt 
Px(system/quote)";/PFX/FX_MM_Position;Critical - Do ASAP;FX_MM_Positions;FXregression, needs_refactoring_FX;lzaharia;;PFX-1055;;QAP-2496;;"From client interface, on the same currency pair, send two consecurive 
orders buy 6M and 2M on EUR/USD";;Orders are executed;;
;;;;;;;;;;;;;;;Check PnL;;PnL (USD) = (position * mkt price + quote position)/Mkt Px;;
;;;;;;;;;;;;;;;Send a sell order quantity 8M on the same currency pair;;Order executed;;
;;;;;;;;;;;;;;;Check PnL;;PnL (USD) = (position * mkt price + quote position)/Mkt Px;;
;;;;;;;;;;;;;;;Send a sell order quantity 3M on the same currency pair;;PnL (USD) = (position * mkt price + quote position)/Mkt Px;;
;;;;;;;;;;;;;;;;;;;
QAP-T2811;FX Position keeping - Daily MTM PnL;Automated;;"We should track the PnL quantity expressed in each currency pair's quote 
currency, defined as the sum of
* the base currency quantity converted to the quote currency with the 
current market rate
* the quote currency quantity

If all positions are reset to zero, daily, monthly and yearly PnL must be 
equal to PnL

To perform this test, positions must be reset to zero

On each step, check daily, monthly and yearly PnL

*PnL = position * mkt price(base/quote) + quote position*
*Daily pnl depends on QuoteCurrDailyMTMPositQty and not on 
QuoteCurrPositQty*";/PFX/FX_MM_Position;Critical - Do ASAP;FX_MM_Positions;FXregression, needs_refactoring_FX;lzaharia;;PFX-1055;;QAP-2494;;"From client interface, on the same currency pair, send two consecurive 
orders buy 6M and 2M on EUR/USD";;Orders are executed;;
;;;;;;;;;;;;;;;Check PnL;;Daily PnL = position * mkt price + Daily MTM Quote Position;;
;;;;;;;;;;;;;;;Send a sell order quantity 8M on the same currency pair;;Order executed;;
;;;;;;;;;;;;;;;Check PnL;;Daily PnL = position * mkt price + Daily MTM Quote Position;;
;;;;;;;;;;;;;;;Send a sell order quantity 3M on the same currency pair;;Daily PnL = position * mkt price + Daily MTM Quote Position;;
;;;;;;;;;;;;;;;;;;;
QAP-T2812;FX Position keeping - MTM PnL;Automated;;"We should track the PnL quantity expressed in each currency pair's quote 
currency, defined as the sum of
* the base currency quantity converted to the quote currency with the 
current market rate
* the quote currency quantity

PnL = position * mkt price(base/quote) + quote position (QuoteCurrPositQty)
PnL (USD) = (position * mkt price(base/quote) + quote position)/Mkt 
Px(system/quote)
System currency you set in DB in QuodSettings";/PFX/FX_MM_Position;Critical - Do ASAP;FX_MM_Positions;FXregression, needs_refactoring_FX, refactored;lzaharia;;PFX-1055;;QAP-2492;;"From client interface, on the same currency pair, send two consecurive 
orders buy 6M and 2M on EUR/USD";;Orders are executed;;
;;;;;;;;;;;;;;;Check PnL;;MTM PnL = position * mkt price + quote position;;
;;;;;;;;;;;;;;;Send a sell order quantity 8M on the same currency pair;;Order executed;;
;;;;;;;;;;;;;;;Check PnL;;MTM PnL = position * mkt price + quote position;;
;;;;;;;;;;;;;;;Send a sell order quantity 3M on the same currency pair;;MTM PnL = position * mkt price + quote position;;
;;;;;;;;;;;;;;;;;;;
QAP-T2813;FX Position keeping - avg/daily/monthly/yearly average price;Automated;;"Break Even Price
* We should track the time period based average price required to clear the 
current position (currently ""Avg Px""), defined as the marked to market time 
period based Quote Position (from PFX-1052) divided by the net Base 
Currency Position (""Position"" from PFX-995).
* This value should be calculated for all time and for of the same time 
periods as available for MTM Quote Position values:
** Avg Px - using the current net Quote Position from all time (PFX-1014)
** Avg Px (Daily) = Daily MTM Quote Position / Position
** Avg Px (Monthly) = Monthly MTM Quote Position / Position
** Avg Px (Yearly) = Yearly MTM Quote Position / Position

Epic for all FX positions:

https://support.quodfinancial.com/jira/browse/PFX-262

Ticket for average price (documented under it's other name... ""Break Even 
Price""):

https://support.quodfinancial.com/jira/browse/PFX-1053";/PFX/FX_MM_Position;Critical - Do ASAP;FX_MM_Positions;FXregression, needs_refactoring_FX;lzaharia;;PFX-1053;;QAP-2491;;"From client interface, on the same currency pair, send two consecutive 
orders buy 6M and 2M on EUR/USD";;Orders are executed;;
;;;;;;;;;;;;;;;Check average price;;Avg Px = Quote Position from all time / Position;;
;;;;;;;;;;;;;;;Check daily average price;;daily avg price = daily MTM Quote position / position;;
;;;;;;;;;;;;;;;Send a sell order quantity 8M on the same currency pair;;Order executed;;
;;;;;;;;;;;;;;;Check average price;;daily avg price is reset : empty in FX position window;;
;;;;;;;;;;;;;;;Send a sell order quantity 3M on the same currency pair;;daily avg price = daily MTM Quote position / position;;
;;;;;;;;;;;;;;;Check average price;;Avg Px = Quote Position from all time / Position;;
QAP-T2814;RFQ: If the tenor's swap points' Executable setting is off, then Executable is off for that tenor.;Automated;;"If there is not enough ""On"" ESP quantities, your RFQ can't be satisfied. 
There's no quote attached to it.
and it becomes a Manual RFQ. The trader must enter a manual price.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-528;;QAP-2490;;"From Trading FE select Bronze, EUR/USD, 1W and switch Executable to OFF 
(Pricing is ON) for all rows (qty level)";;All bands are grey;;
;;;;;;;;;;;;;;;From Client interface send swap RFQ;"near leg 1W
far leg 2W
instrument EUR/USD";request is sent;;
;;;;;;;;;;;;;;;Open Quote Request Book on trading FE;;"Last sent RFQ is appear here
Check:
- Status = New
- AutomaticQuoting = NO
- There's no quote attached to it
- NearLegQTY and FarLegQTY contains value";;
;;;;;;;;;;;;;;;Open Quote Request Dealer Intervention window;;Last sent RFQ is appeared here;;
QAP-T2815;RFQ: If the tenor's currency pair Spot -> Quantity Executable setting is off, then  Executable is off for that tenor.;Automated;;"If there is not enough ""On"" ESP quantities, your RFQ can't be satisfied. 
There's no quote attached to it.
and it becomes a Manual RFQ. The trader must enter a manual price.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-528;;QAP-2489;;"From Trading FE select Bronze, EUR/USD, SPOT and switch Executable to OFF 
(Pricing is ON) for all rows (qty level) except the first band (1M)";;All bands are grey except the first row;;
;;;;;;;;;;;;;;;From Client interface send forward RFQ;"tenor 1W
instrument EUR/USD
QTY 5M (more than 1M)";request is sent;;
;;;;;;;;;;;;;;;Open Quote Request Book on trading FE;;"Last sent RFQ is appear here
Check:
- Status = New
- AutomaticQuoting = NO
- There's no quote attached to it";;
;;;;;;;;;;;;;;;Open Quote Request Dealer Intervention window;;Last sent RFQ is appeared here;;
;;;;;;;;;;;;;;;From Client interface send forward RFQ with qty= 1M;"tenor 1W
instrument EUR/USD
QTY 1M";"Quote attached to this request.
After expired time Status = Terminated";;
QAP-T2816;RFQ:If the tenor's currency pair Spot -> Quantity Pricing setting is off, then Pricing is off for that tenor.;Automated;;"If there is not enough ""On"" ESP quantities, your RFQ can't be satisfied. 
There's no quote attached to it.
and it becomes a Manual RFQ. The trader must enter a manual price.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-528;;QAP-2488;;"From Trading FE select Bronze, EUR/USD, SPOT and switch Pricing to OFF 
(Executable is ON) for all rows (qty level) except the first band (1M)";;All bands are red except the first row;;
;;;;;;;;;;;;;;;From Client interface send forward RFQ;"tenor 1W
instrument EUR/USD
QTY 5M (more than 1M)";request is sent;;
;;;;;;;;;;;;;;;Open Quote Request Book on trading FE;;"Last sent RFQ is appear here
Check:
- Status = New
- AutomaticQuoting = NO
- There's no quote attached to it";;
;;;;;;;;;;;;;;;Open Quote Request Dealer Intervention window;;Last sent RFQ is appeared here;;
;;;;;;;;;;;;;;;From Client interface send forward RFQ with qty= 1M;;"Quote attached to this request.
After expired time Status = Terminated";;
QAP-T2817;RFQ: If the tenor->Quantity Pricing setting is off, then Pricing is off for that tenor->Quantity.;Automated;;"If there is not enough ""On"" ESP quantities, your RFQ can't be satisfied. 
There's no quote attached to it.
and it becomes a Manual RFQ. The trader must enter a manual price.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-528;;QAP-2486;;"From Trading FE select Bronze, EUR/USD, 1W and switch Pricing to OFF 
(Executable is ON) for all rows (qty level)";;All bands are red;;
;;;;;;;;;;;;;;;From Client interface send forward RFQ;"tenor 1W
instrument EUR/USD";request is sent;;
;;;;;;;;;;;;;;;Open Quote Request Book on trading FE;;"Last sent RFQ is appear here
Check:
- Status = New
- AutomaticQuoting = NO
- There's no quote attached to it";;
;;;;;;;;;;;;;;;Open Quote Request Dealer Intervention window;;Last sent RFQ is appeared here;;
QAP-T2818;RFQ: If the tenor Executable setting is off, then Executable  is off for that tenor.;Automated;;"If there is not enough ""On"" ESP quantities, your RFQ can't be satisfied. 
There's no quote attached to it.
and it becomes a Manual RFQ. The trader must enter a manual price.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-528;;QAP-2484;;"From Trading FE select Bronze, EUR/USD, 1W and switch Executable to OFF for 
tenor level (Pricing is ON)";;All bands are grey;;
;;;;;;;;;;;;;;;From Client interface send forward RFQ;"tenor 1W
instrument EUR/USD";request is sent;;
;;;;;;;;;;;;;;;Open Quote Request Book on trading FE;;"Last sent RFQ is appear here
Check:
- Status = New
- AutomaticQuoting = NO
- There's no quote attached to it";;
;;;;;;;;;;;;;;;Open Quote Request Dealer Intervention window;;Last sent RFQ is appeared here;;
QAP-T2819;RFQ: If the tenor Pricing setting is off, then Pricing is off for that tenor.;Automated;;"If there is not enough ""On"" ESP quantities, your RFQ can't be satisfied. 
There's no quote attached to it.
and it becomes a Manual RFQ. The trader must enter a manual price.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-528;;QAP-2483;;"From Trading FE select Palladium2, USD/NOK, 1W and switch Pricing to OFF 
for tenor level (Executable is ON)";"Palladium2
USD/NOK
W1";All bands are red;;
;;;;;;;;;;;;;;;From Client interface send forward RFQ;"tenor 1W
instrument USD/NOK";request is sent;;
;;;;;;;;;;;;;;;Open Quote Request Book on trading FE;;"Last sent RFQ is appear here
Check:
- Status = New
- AutomaticQuoting = NO
- There's no quote attached to it";;
;;;;;;;;;;;;;;;Open Quote Request Dealer Intervention window;;Last sent RFQ is appeared here;;
QAP-T2820;Quote Request : check level 2 is updated in real time;Automated;;"This test case validates PFX-1517 : the second layer of the quote requet 
book needs to update in real time";/PFX/FX_MM_RFQ;Critical - Do ASAP;FX_MM_RFQ;FXregression, refactored, refactored_FX;lzaharia;;PFX-1517;;QAP-2472;;From client interface, send a RFQ on a spot order;;RFQ replied;;
;;;;;;;;;;;;;;;Check quote request book;;RFQ replied on quote request book;;
;;;;;;;;;;;;;;;Open second level of quote request book;;Quote updating in real time on second level of quote request book;;
;;;;;;;;;;;;;;;Execute order;;Quote terminated immediately on second level of quote request book;;
;;;;;;;;;;;;;;;Send a new RFQ on a forward, check quote request book and open second level;;Quote updating on quote request book;;
;;;;;;;;;;;;;;;cancel the quote from the client interface;;Quote canceled and updated immediately in the quote request book;;
QAP-T2821;Check behaviour of autohedger when creating an order manually with autohedger accountgroup;Automated;;"This test validates the non activation of autohedger in case an order is 
created manually with the autohedger accountgroup

Example :

My autohedger accountgroup is INT_USDCAD

I create an order manually with the same accountgroup.

This order should trigger only one autohedger order

 

 ";/PFX/FX_MM_Autohedging;Critical - Do ASAP;FX_MM_Autohedging;FXregression, needs_refactoring_FX, refactored, UAQA;lzaharia;;PFX-1485;;QAP-2470;;From client interface, send several orders to have autohedger triggered;;Autohedger triggered sending an order;;
;;;;;;;;;;;;;;;"Send an order from FE (ESP taker) with autohedging accountgroup to trespass 
the limits upper";;"Autohedging order sent
Positions updated correctly in the FE";;
;;;;;;;;;;;;;;;Open order book blotter;;Check that Order blotter contains all AO orders we sent with difference;;
QAP-T2822;MM Pricing tile : Selected tab Sweapable/Tiered to be a part of the tile's State;Specified;;"From PFX-1377 Currently, when we open a new MM tile, we copy everything 
from the state of the last state. But the subscription mode is always set 
to Sweapable.
We need to add the point to the State of the tile. So if the last state is 
Tiered, the new opened tile will be opened as Tiered
Also need to save current state to user's workspace.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression;;;PFX-1377;;QAP-2453;;"Open FETrading -> Client Price Tile -> Pricing Tile and select some 
clientTier with working currencyPair";CurrencyPair has to got Tiered QTY;Pricing Tile with MD;;
;;;;;;;;;;;;;;;"Select ""Tiered"" tab and open new PricingTile";;New PricingTile open with last state;;
;;;;;;;;;;;;;;;"On the last Tile select ""Sweepable"" tab and change currencyPair. Open new 
Pricing Tile";;New PricingTile open with last state;;
;;;;;;;;;;;;;;;Save workspace and reopen FETrading;;FE opens with all tiles with saved state;;
QAP-T2823;FXMMPositions: Positions default window;Specified;;;/PFX/FX_MM_Position;Low - Nice to Have;FX_MM_Positions;AutomatedCodedUI, FXregression;;;PFX-1292;;QAP-2426;;Open TradingFE -> Dealing Positions window;;"* Make the following columns and order of columns the default the first 
time the FX Positions blotter is opened:
see Attachments";;
;;;;;;;;;;;;;;;Open Column Chooser (Customization);;"Check the following column existing:
""TTD PnL""
""WTD PnL""
""MTD PnL""
""QTD PnL""
""YTD PnL""";;
;;;;;;;;;;;;;;;Open child row;;there should be Settle Date;;
QAP-T2824;FX FETrading - Options - OrderTicket : A single Account Group for FX Order Ticket ESP;Manual;;"Set the orderTicketFillPreviousClient token to false in functional.config 
(QA9 on quod308@mercury)
Check WebAdmin -> Clients/Account -> Clients : there should be only ONE 
client (disable other clients and return them back after test)";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression;;;PFX-1350;;QAP-2420;;"Open Trading FE. Go to ""Options => Order Ticket => Default FX Values""";;Tree value should be there : Client (Account Group), DMA and Algo Slippages;;
;;;;;;;;;;;;;;;"Open ""Client"" drop down list and check";don't select any from list. left client empty;Only one client should be available;;
;;;;;;;;;;;;;;;"Press ""Cancel"". Open ""Order Book"" and Aggregated Market Rates -> ""Rates 
Tile"" (EUR/USD, Spot)";;;;
;;;;;;;;;;;;;;;On ESP tile press on BID/ASK to open order ticket;;"""Client"" should not be displayed";;
;;;;;;;;;;;;;;;Press on any bid or ask to send order;;"Check Order Book column ""Client ID"". Client should be as only one client we 
have in list. It takes by default";;
QAP-T2825;FX FETrading - Options - OrderTicket : Account Group for FX Order Ticket RFQ;Automated;;"Set the orderTicketFillPreviousClient token to false in functional.config
Check WebAdmin -> Clients/Account -> Clients : there should be several 
clients";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, needs_refactoring_FX;;;PFX-1350;;QAP-2419;;"Open Trading FE. Go to ""Options => Order Ticket => Default FX Values""";;Tree value should be there : Client (Account Group), DMA and Algo Slippages;;
;;;;;;;;;;;;;;;"Open ""Client"" drop down list and set one from all others as default client";;Selected client set as default client;;
;;;;;;;;;;;;;;;"Press ""Save"". Open ""Order Book"" and Aggregated Market Rates -> ""RFQ Tile 
(EUR/USD), Spot""";;;;
;;;;;;;;;;;;;;;On RFQ tile press Send;;Quotes are sent;;
;;;;;;;;;;;;;;;Press on any bid or ask to send order;;"Check Order Book column ""Client ID"". Client should be the same as we set in 
Options";;
QAP-T2826;FX FETrading - Options - OrderTicket : Account Group for FX Order Ticket ESP;Automated;;"Set the *orderTicketFillPreviousClient* token to *false* in 
functional.config
Check WebAdmin -> Clients/Account -> Clients : there should be several 
clients";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression, needs_refactoring_FX;;;PFX-1350;;QAP-2416;;"Open Trading FE. Go to ""Options => Order Ticket => Default FX Values""";;Tree value should be there : Client (Account Group), DMA and Algo Slippages;;
;;;;;;;;;;;;;;;"Open ""Client"" drop down list and set one from all others as default client";;Selected client set as default client;;
;;;;;;;;;;;;;;;"Press ""Save"". Open ""Order Book"" and Aggregated Market Rates -> ""Rates Tile"" 
(EUR/USD, Spot)";;;;
;;;;;;;;;;;;;;;On ESP tile press on any bid or ask to open order ticket;;"""Client"" should be displayed and selected client that was set in Options";;
;;;;;;;;;;;;;;;Press Sell/Buy to send order;;"Check Order Book column ""Client ID"". Client should be the same as we set in 
Options";;
QAP-T2827;Tooltips : check display on client pricing tile;Manual;;"Check display of tooltips :

!image-2020-03-13-11-41-20-109.png!

 

 ";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;lzaharia;;PFX-49;;QAP-2401;;"Open the pricing tile, then hover the mouse on the arrows next to the 
margin increment";;Check that the tooltips are displayed as described in the description;;
QAP-T2828;Spot price used for uneven swaps (Interpolation );Automated;;"The spot price for uneven swaps should be calculated as the spot price of 
the net quantity of the swap legs, for instance, a Buy of 1M on the near 
leg and Sell of 2M on the far leg would mean a net Sell of 1M, so we should 
use the ask spot rate for 1M.";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FX_fix, FXregression, refactored_FX;akovalen;;;;QAP-2382;;"From currenex/MiniFix interface, send a RFQ for a swap 1W/2W with 2 
different quantities : 1M and 2M";;RFQ replied;;
;;;;;;;;;;;;;;;Check quote spot price for even swaps;See comments;mid spot rate = (bidspotrate + offerspotrate)/2;;
QAP-T2829;Position: Settlement Date;Automated;;;/PFX/FX_MM_Position;Low - Nice to Have;FX_MM_Positions;FXregression, needs_refactoring_FX;akovalen;;;;QAP-2378;;From miniFix or TradingFE send an order;tenor = Spot;order is send;;
;;;;;;;;;;;;;;;Open Position blotter;;"there should appear two rows : 1) Position Book
2) External client";;
;;;;;;;;;;;;;;;"Open child level
Check Settle Date";;there should be Spot date;;
;;;;;;;;;;;;;;;Send another order;tenor = WK2;"In Position blotter check that for external client are appeared new row 
with 1wk settlDate
and for PositionBook are still spot settDate";;
QAP-T2830;ESP Tile : play with venues with crossing of currency pairs;Specified;;"This test case validates PFX-246 : 
* Select the venues that should be included in the displayed synthetic 
aggregated book.
* As venues are selected/deselected, make sure only selected venues appear 
in the displayed synthetic aggregated book.";/PFX/FX_Synthetic;Low - Nice to Have;FX_Synthetic_cross;FETrading, FXregression;lzaharia;;PFX-246;;QAP-2377;;"From a synthetic currency pair (for example AUD/JPY) click on cross through 
USD";;Cross through USD selected;;
;;;;;;;;;;;;;;;Select aggregated book;;Aggregated book selected;;
;;;;;;;;;;;;;;;select one venue MS;;venue MS selected;;
;;;;;;;;;;;;;;;Select 1 other venue;;Venue must be added immedialtely and prices updated immediately;;
;;;;;;;;;;;;;;;Select zero venue (unselect all);;No prices displayed;;
;;;;;;;;;;;;;;;select again 4 venues;;Prices displayed for these 4 venues;;
QAP-T2831;ESP Tile : check crossing of currency pairs per venue;Manual;;"This test case validates PFX-246 : 
* Select the venues that should be included in the displayed synthetic 
aggregated book.
* As venues are selected/deselected, make sure only selected venues appear 
in the displayed synthetic aggregated book.";/PFX/FX_Synthetic;Low - Nice to Have;FX_Synthetic_cross;FXregression;lzaharia;;PFX-246;;QAP-2374;;"From a synthetic currency pair (for example AUD/JPY) click on cross through 
USD";;Cross through USD selected;;
;;;;;;;;;;;;;;;Select Aggregated Rates;;Aggregated Rates is opened;;
;;;;;;;;;;;;;;;select one venue MS;;venue MS selected;;
;;;;;;;;;;;;;;;Check aggreagated rates visually;;"Prices must be displayed for this venue crossed and native
The cross are displayed with venue ""M/M""";;
;;;;;;;;;;;;;;;Open 2 tiles AUD/USD and USD/JPY with only one venue MS;;Tiles opened;;
;;;;;;;;;;;;;;;Check the price of the aggregated : AUD/USD USD/JPY;;Aggregated prices correct;;
QAP-T2832;Client Pricing Engine Margin System Currency Per Million (USD/mio) Format Calculation;Automated;;"As specification told

9.6.4.6 System currency per million
To be coherent with the storage of margins in pips, margins in system 
currency per million (a.k.a. dollar per million) are stored as 200 for 200 
USD/mio.

If the base currency is the system currency, the QS computes:
• BidPx = BidCorePx * (1 – BidMarginSpot / 1000000), rounded down to the 
SBP spot listing tick size
• OfferPx = OfferCorePx * (1 + OfferMarginSpot / 1000000), rounded up to 
the SBP spot listing tick size

If the quote currency is the system currency, the QS computes:
• BidPx = BidCorePx – BidMarginSpot / 1000000, rounded down to the SBP spot 
listing tick size
• OfferPx = OfferCorePx + OfferMarginSpot / 1000000, rounded up to the SBP 
spot listing tick size

If neither the base nor the quote currency is the system currency, the QS 
snaps the market depth, or quote book, depending what the primary venue 
supports, of the spot on either SysCurr/CCY2 or CCY2/SysCurr, depending 
which one exists, on its primary venue.
• If SysCurr/CCY2 exists:
◦ BidPx = BidCorePx – BidMarginSpot * SysCurr/CCY2Mid / 1000000, rounded 
down to the SBP spot listing tick size
◦ OfferPx = OfferCorePx + OfferMarginSpot * SysCurr/CCY2Mid / 1000000, 
rounded up to the SBP spot listing tick size
• If CCY2/SysCurr exists:
◦ BidPx = BidCorePx – BidMarginSpot / CCY2/SysCurrMid / 1000000, rounded 
down to the SBP spot listing tick size
◦ OfferPx = OfferCorePx + OfferMarginSpot / CCY2/SysCurrMid / 1000000, 
rounded up to the SBP spot listing tick size


======================== Analysis ===========================
https://support.quodfinancial.com/confluence/download/attachments/69206049/Quod_FunctionalAnalysis_Quoting.docx?api=v2

*Preconditions:*
# In web admin> FX Market Making> Client Tier select Generic>EUR/USD.
# EUR/USD>Edit>Tenors>Spot Edit>Manage Volume Bands
# Create or edit if exist Quantity:1000000. Big Margin =300/ Offer Margin 
400 > Save> OK
# Margin Format > Select SysCurrPerMillion>Save
# Go to Summary > Submit";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX;kbrit;;PFX-656;;QAP-2373;;"In FE Trading open window Aggregated Market Rates >
press Rates Tile > select EUR/USD-Spot
(will be easy to calculate if
in ""filter venue"" select only one venue)";;Base Prices are visible;;
;;;;;;;;;;;;;;;Open Client Pricing Tiles> Pricing Tile > select EUR/USD-Spot;;New Prices are visible;;
;;;;;;;;;;;;;;;Check that the new prices are calculated correctly;Formulas in description and Base Prices;New prices are calculated correctly;;
QAP-T2833;Check that user can remove pilot link;Specified;;"*Precondition:* ""Clear Pilot Links"" section of Agg Market rates window 
should be empty.";/PFX/FX_Display;High - Must Have;FX_Display;AutomatedCodedUI, FXregression, PILOTING;ysamoile;;PFX-348;;QAP-2363;;"Open Aggregated Market Rates window and focus piloted indicator to Order 
book window";;"Aggregated Market Rates: ""Clear Pilot Links"" section of drop down menu 
contains pilot link of Order book";;
;;;;;;;;;;;;;;;"Remove pilot link of Order book from ""Clear Pilot Links"" section";;"""Clear Pilot Links"" section inactive and not contains pilot link of Order 
book";;
QAP-T2834;Rejection of quote by QS with no market data;Automated;;"In case the quoting session is not able to map the FIX quote request (for 
instance because the instrument cannot be determined) and rejects it, it:
* Sends back a QuoteRequestReject to the FIX customer
* Does not notify users or the ORS of the rejection

Among others, absence of pricing, and hence rejections can be caused 
because:
* The instrument cannot be determined
* There is no pertaining record in ClientTierInstrSymbol, 
ClientTierInstrSymbQty, ClientTierSymbVenue
* There is no market data on any critical venue of ClientTierSymbVenue";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, refactored_FX;kbrit;;PFX-138;;QAP-2353;;"From Fix, send a quote request, with no market data on any critical venue 
of ClientTierSymbVenue on backend";tenor spot;Quote request received by QS;;
;;;;;;;;;;;;;;;Quote request rejected;;QuoteRequest reject 35=AG sent to FIX;;
QAP-T2835;Pricing Settings in Live Configuration Mode;Manual;;"Ben Ernest-Jones:
""PFX-732 is only for things you can change from the trading FE.
So margins, pricing on/off, executable on/off, that kind of thing"".

Preconditions:
*DB: QuodSettings => FX_LiveSettings_UseDefaults_Toggle = N*";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression;;;PFX-732, PFX-49, PFX-4115;;QAP-2350;;Open WebAdmin and trading FE Pricing Tile and select Silver GBP/USD Spot;;ClientTier and InstrumentSymbol are displayed correctly;;
;;;;;;;;;;;;;;;"On WebAdmin for Silver GBP/USD Spot change ""Margins Volume Bands"" for 
several quantities. Press ""Save"" -> ""Go to Summary"" -> ""Submit""";;"All changes are immediately displayed on FE Pricing Tile (Base should be 
equal to margins entered in WebAdmin)";;
;;;;;;;;;;;;;;;"From WAdm go to ""Tenor"" tab and change ""Pricing"" status to OFF for second 
quantity . Press ""Save""-> ""Save"" -> ""Go to Summary"" -> ""Submit""";;"The current price's row in tile become red
Pricing button is yellow";;
;;;;;;;;;;;;;;;"From WAdm go to ""Tenor"" tab and change ""Pricing"" status to OFF for tenor 
SPOT . Press ""Save"" -> ""Go to Summary"" -> ""Submit""";;"All rows on Pricing Tile become red
Pricing button is red";;
;;;;;;;;;;;;;;;"From WAdm go to ""Tenor"" tab and change ""Pricing"" status to ON for tenor 
SPOT . Press ""Save"" -> ""Go to Summary"" -> ""Submit""";;"All rows on Pricing Tile become colored except row selected in step 3
Pricing button is yellow";;
;;;;;;;;;;;;;;;On Pricing Tile select 2nd row and press Pricing;;"Selected row become colored
Pricing button is green";;
;;;;;;;;;;;;;;;"UnSelect row On PricingTile and press ""Executable""";;"""Executable"" button become red
All bands are grey";;
;;;;;;;;;;;;;;;"Reload WebAdmin and go to ""Tenor"" tab -> SPOT";;"""Executable"" is OFF for all tenor level";;
;;;;;;;;;;;;;;;"On WAdm go to Tenor -> Manage Volume Bands and change Executable to OFF for 
the first row -> Save ->OK -> Save -> Submit";;;;
;;;;;;;;;;;;;;;On TradingFE switch Executable to ON;;"All bands are colored except the first one
Executable button is yellow";;
;;;;;;;;;;;;;;;Change Executable for the first band to ON;;"Band is colored.
Executable is green";;
QAP-T2836;Check pricing of RFQ for CCY2;Automated;;"This test validates PFX-209

A client quote request submitted against the system for the second currency 
of the pair results in an auto-quoted response using the correct 
corresponding values using the second currency instead of the first.";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;;;PFX-209;;QAP-2345;;"Client tier must price USD/JPY with one band of 1M and one band of 2 
million at least:

Send 2 RFQ of 3M on USD/JPY
one on base currency
one on term currency";;RFQ received on the quoting server;;
;;;;;;;;;;;;;;;Check QS logs and verify the quote sent to the client.;;"For USD/JPY in base currency, the quote price should use the ESP price for 
both bands 1M and 2M

For USD/JPY in term currency, the quote price should use the ESP price for 
the band of 1M only";;
QAP-T2837;Impact of client tier schedule change to the client pricing tile (add Schedule Exception);Manual;;"_This test case validates PFX-437_

_Acceptance Criteria_
* Be able to view and edit the following settings per client tier (in a 
""Schedule"" tab immediately after the ""Values"" tab in the client tiers 
wizard):
** ""Schedule Enabled"" (checkbox on/off)
** ""Active Times"" - list of repeating weekly start and end times, with a 
specific start time and end time per each entry in the list during which 
the client tier should be considered active, where the start and end times 
include a day of the week (can choose from all 7 days) and a start time to 
the granularity of seconds. In the future we may get creative with the type 
of control we use for this, but right now, it can just be a list of 
start/end times, and if possible, maybe use a time picker control to set 
the time.
** ""Schedule Exceptions"" - list of specific calendar date/time start and 
end times during which an enabled schedule should be ignored. If the 
schedule is off, this list is not used and the pricing continues to always 
be active for the client tier at all times. Only in the case where the 
schedule is on, if the current date/time overlaps with one of the listed 
exception start/end timeframes in this exceptions list, any configured 
active times are ignored and the schedule and client tier is considered to 
be _inactive_.
* All schedule times are stored in the back end in UTC, but displayed and 
configured in the admin FE in the user's local time zone.
* When the same client is assigned to more than one client tier and the 
same currency pair, AND the client tiers are scheduled to be active at the 
same time, a warning is displayed next to the selected client in the client 
tier / currency pair configuration in the web admin FE, indicating ""Client 
already assigned to this currency pair for other active Client Tier(s) 
{DisplayName}"", where we list each of the display names for any client 
tiers the client is assigned for the given currency pair that also have 
overlapping active schedules, though this is only a warning message - it 
should not prevent saving the settings for the client tier.
* When a given client tier is active (either because the schedule is turned 
off, or it is both on and active), in the trading FE Client Pricing 
Tiles, in the tile itself for a selected client tier, all prices would show 
as normal, and no icon would be displayed in the tile to indicate anything 
regarding the schedule.
* When a given client tier is inactive (because the schedule is both turned 
on and is inactive), in the trading FE Client Pricing Tiles, in the tile 
itself for a selected client tier, all prices in the grid (not the TOB) 
would show as grey, just as they would if Pricing has been turned off for 
all volume bands, though the actual Pricing indicator itself should still 
show whether Pricing is turned on or off as it would if the schedule were 
active. Also, the attached image (Schedule_Disabled.svg) should be 
displayed at the top center of the tile to indicate an inactive schedule. 
See attached mockup as an example. The tooltip on the inactive schedule 
image should be ""Schedule inactive until {date} {time}"" indicating the next 
time the schedule will be active for the selected tier.";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression;;;PFX-437;;QAP-2344;;From webadmin, go to gold client tier, in tab schedule;;Tab schedule displayed;;
;;;;;;;;;;;;;;;Enter from time 07:00:00 and to time 20:00:00 for each day of the week;;Values entered;;
;;;;;;;;;;;;;;;Check that values are stored in UTC in DB and displayed current time;;There should be a 1h or 2h difference with the current time;;
;;;;;;;;;;;;;;;Open FETrading and go to client pricing for this specific tier;;"Pricing should be enable if local time correspond to what has been entered 
in the WebAdmin";;
;;;;;;;;;;;;;;;"Go to webadmin and add a schedule exception for the current day and the 
next 5 minutes";"For example if it is Monday and time is 12:03 put and exception on Monday 
for
12:04 to 12:05";"Make sure that client pricing in the frontend is disabled for the next 
minutes.
Client should be enable at 12:05";;
QAP-T2838;Impact of client tier schedule change to the client pricing tile (add Schedule);Specified;;"_This test case validates PFX-437_

_Acceptance Criteria_
* Be able to view and edit the following settings per client tier (in a 
""Schedule"" tab immediately after the ""Values"" tab in the client tiers 
wizard):
** ""Schedule Enabled"" (checkbox on/off)
** ""Active Times"" - list of repeating weekly start and end times, with a 
specific start time and end time per each entry in the list during which 
the client tier should be considered active, where the start and end times 
include a day of the week (can choose from all 7 days) and a start time to 
the granularity of seconds. In the future we may get creative with the type 
of control we use for this, but right now, it can just be a list of 
start/end times, and if possible, maybe use a time picker control to set 
the time.
** ""Schedule Exceptions"" - list of specific calendar date/time start and 
end times during which an enabled schedule should be ignored. If the 
schedule is off, this list is not used and the pricing continues to always 
be active for the client tier at all times. Only in the case where the 
schedule is on, if the current date/time overlaps with one of the listed 
exception start/end timeframes in this exceptions list, any configured 
active times are ignored and the schedule and client tier is considered to 
be _inactive_.
* All schedule times are stored in the back end in UTC, but displayed and 
configured in the admin FE in the user's local time zone.
* When the same client is assigned to more than one client tier and the 
same currency pair, AND the client tiers are scheduled to be active at the 
same time, a warning is displayed next to the selected client in the client 
tier / currency pair configuration in the web admin FE, indicating ""Client 
already assigned to this currency pair for other active Client Tier(s) 
{DisplayName}"", where we list each of the display names for any client 
tiers the client is assigned for the given currency pair that also have 
overlapping active schedules, though this is only a warning message - it 
should not prevent saving the settings for the client tier.
* When a given client tier is active (either because the schedule is turned 
off, or it is both on and active), in the trading FE Client Pricing 
Tiles, in the tile itself for a selected client tier, all prices would show 
as normal, and no icon would be displayed in the tile to indicate anything 
regarding the schedule.
* When a given client tier is inactive (because the schedule is both turned 
on and is inactive), in the trading FE Client Pricing Tiles, in the tile 
itself for a selected client tier, all prices in the grid (not the TOB) 
would show as grey, just as they would if Pricing has been turned off for 
all volume bands, though the actual Pricing indicator itself should still 
show whether Pricing is turned on or off as it would if the schedule were 
active. Also, the attached image (Schedule_Disabled.svg) should be 
displayed at the top center of the tile to indicate an inactive schedule. 
See attached mockup as an example. The tooltip on the inactive schedule 
image should be ""Schedule inactive until {date} {time}"" indicating the next 
time the schedule will be active for the selected tier.";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;FXregression, Mixed, UAQA;;;PFX-437;;QAP-2343;;From webadmin, go to gold client tier, in tab schedule;Or we can just create one clientTier which is always inactive;Tab schedule displayed;;
;;;;;;;;;;;;;;;Enter from time 07:00:00 and to time 20:00:00 for each day of the week;;Values entered;;
;;;;;;;;;;;;;;;Check that values are stored in UTC in DB and displayed current time;;There should be a 1h or 2h difference with the current time;;
;;;;;;;;;;;;;;;Open FETrading and go to client pricing for this specific tier;;"Pricing should be enable if local time correspond to what has been entered 
in the WebAdmin";;
;;;;;;;;;;;;;;;"Change the current day schedule in the webadmin and make sure that pricing 
is not enable at the current time of the test then press add schedule";(if it is 3:15 just put 4:00 and 5:00 in from and to time);Make sure entry is updated in database;;
;;;;;;;;;;;;;;;Check client pricing for this specific client tier;;"Pricing should be disabled and red round click icon should be visible in 
the pricing tile";;
;;;;;;;;;;;;;;;send MD request for this inactive ClientTier;"< 
8=FIXT.1.1|9=162|35=V|49=QUOD3|56=QUODFX_UAT|34=9|52=20201210-13:53:04|50=CLIENT1|262=1111222174|263=1|264=0|265=0|267=2|269=0|269=1|146=1|55=EUR/USD|460=4|64=20201214|167=FXSPOT|10=158|";"> 
8=FIXT.1.1|9=114|35=Y|34=9|49=QUODFX_UAT|52=20201210-13:53:06.324|56=QUOD3|1128=9|58=no 
data on critical venue CITI|262=1111222174|10=071|";;
QAP-T2839;Auto hedging synthetic orders (through USD);Automated;;"This test validates PFX-237


!screenshot-2.png|thumbnail!
 
If you have synthetic NOK/SEK => you have to create hedger rule for USD/NOK 
and USD/SEK
you'll get two AO orders with one child each (if the two major pairs 
USD/SEK and USD/NOK need to be hedged) since positions are maintained only 
on those major pairs
!screenshot-3.png|thumbnail!";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, Mixed, needs_refactoring_FX;lzaharia;;PFX-237;;QAP-2326;;"Having a cross currency pair in venue SBP, (for example NOK/SEK through 
USD)
Send an order to have an execution";;Execution received on order book and replied to client;;
;;;;;;;;;;;;;;;Send several orders (from MiniFix) to trigger autohedging orders;"EUR/CHF
AURUM1
1000000";autohedging orders triggered;;
;;;;;;;;;;;;;;;Check orders in FE and logs;"EUR/USD
USD/CHF
QUOD4_1";"There should be 2 AO orders created : one order for USD/NOK, one order 
USD/SEK
Check the side of the orders : the orders should be opposite (confirm exact 
side with Fabrice)";;
QAP-T2840;Autohedger : only one hedge order created in case of multiple autohedgers;Automated;;"This test validates PFX-754
* When the same position book is assigned to more than one Auto-Hedger, and 
a client order is executed and ready to be tracked for auto-hedging, the 
client order updates the spot position within the single position book 
shared by more than one auto-hedger. Whichever auto-hedger triggers first 
(this may be arbitrary), we make sure to enforce the rule that no more than 
one hedge order can be active at a time for a single position _in the same 
position book_, no matter how many auto-hedgers that position book is 
shared across.";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX;lzaharia;;PFX-754;;QAP-2325;;In web admin, configure 2 autohedgers to have the same booking account;;2 autohedgers configured;;
;;;;;;;;;;;;;;;Send an order, to have an execution and an autohedger account created;;Autohedger account created;;
;;;;;;;;;;;;;;;Check that there is only one autohedging order created;;Only one autohedger order created;;
QAP-T2841;Synthetic cross rates filtered by venue;Specified;;"This test validates story PFX-246

_Acceptance Critiera_
* Select the venues that should be included in the displayed synthetic 
aggregated book.
* As venues are selected/deselected, make sure only selected venues appear 
in the displayed synthetic aggregated book.

To perform this test, it is necessary to have a cross currency pair";/PFX/FX_Synthetic;Low - Nice to Have;FX_Synthetic_cross;FXregression;lzaharia;;PFX-246;;QAP-2320;;"From FE, open 3 tiles :
- one tile with currency pair 1
- one tile with currency pair 2
- one tile with cross currency pair";;Tiles opened;;
;;;;;;;;;;;;;;;Display aggregated rates on each tile;;Aggregated rates displayed;;
;;;;;;;;;;;;;;;On each tile, select a limited number of venues;;Number of venues limited on each tile;;
;;;;;;;;;;;;;;;Check aggregated rates on each tile;;Check that the venues reflect the choice on each tile;;
QAP-T2842;Check prices for broken dates when date is greater than all exiting tenors;Specified;;"This test validates PFX-320

Check prices for broken dates when date is between 2 exiting tenors";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;BDA, FXregression;lzaharia;;PFX-320;;QAP-2309;;"From Currenex, send a RFQ for a broken date with an automatic reply (small 
quantity) on client which have Forward venue";;Reply sent;;
;;;;;;;;;;;;;;;Check price approximatively;;Price must be greater than last existing tenor;;
QAP-T2843;Test the Price slippage range validation in RFQ with CCY2;Automated;;"_This test validates_ PFX-232

_Acceptance Criteria_
* Be able to view and edit the following settings per client tier per 
currency pair per tenor:
** Client Price Slippage Range Enabled: on/off
** Client Price Slippage Range (expressed in configured Margin format)
* When this setting is enabled, it is used to validate both orders against 
ESP streaming quotes as well as responses to previous RFQs
* Work with engineering to confirm the math of calculating a last look 
check in conditions where it both passes and fails.

1 pip = 0.0001

!screenshot-1.png|thumbnail!
*{color:#0747A6}#1{color}*

{code:java}
< 
8=FIXT.1.1|9=159|35=R|49=QUOD5|56=QUODFX_UAT|34=296|52=20210416-08:58:54|131=211333039|146=1|55=EUR/USD|167=FXFWD|537=1|54=1|38=1000000|64=20210427|63=W1|15=USD|1=CLIENT1|40=D|10=135|

{code}

*{color:#0747A6}#2{color}*

{code:java}
> 
8=FIXT.1.1|9=241|35=S|34=323|49=QUODFX_UAT|52=20210416-08:58:53.789|56=QUOD5|1128=9|15=USD|54=1|55=EUR/USD|62=20210416-09:00:53.767|63=W1|64=20210427|117=01210416085853822002|131=211333039|132=1.19535|134=1000000|167=FXFWD|188=1.1948|189=0.00055|460=4|537=1|10=170|

{code}

*{color:#0747A6}#3{color}*

{code:java}
< 
8=FIXT.1.1|9=208|35=D|49=QUOD5|56=QUODFX_UAT|34=298|52=20210416-08:59:16|1=CLIENT1|11=1052935891|21=1|15=EUR|38=1000000|40=D|44=1.19555|54=1|55=EUR/USD|59=3|60=20210416-08:59:16|64=20210427|167=FXFWD|117=01210416085853822002|10=223|


{code}

*{color:#0747A6}#4{color}*

{code:java}
> 
8=FIXT.1.1|9=402|35=8|34=325|49=QUODFX_UAT|52=20210416-08:59:15.364|56=QUOD5|1128=9|6=0|11=1052935891|14=0|15=USD|17=1476100001177|21=1|22=8|31=0|32=0|37=MO1210416085915316001|38=1000000|39=8|40=D|44=1.19555|48=EUR/USD|54=1|55=EUR/USD|58=order 
price is not ranging in [1.19525, 
1.19545]|59=3|60=20210416-08:59:15.345|63=B|64=20210427|120=EUR|150=8|151=0|207=XQFX|378=4|453=1|448=gtwquod5|447=D|452=36|460=4|528=A|854=0|10=223|

{code}

*{color:#0747A6}#5{color}*

{code:java}
< 
8=FIXT.1.1|9=208|35=D|49=QUOD5|56=QUODFX_UAT|34=299|52=20210416-08:59:20|1=CLIENT1|11=1052935892|21=1|15=EUR|38=1000000|40=D|44=1.19545|54=1|55=EUR/USD|59=3|60=20210416-08:59:20|64=20210427|167=FXFWD|117=01210416085853822002|10=214|

{code}

*{color:#0747A6}#6{color}*

{code:java}
> 
8=FIXT.1.1|9=454|35=8|34=327|49=QUODFX_UAT|52=20210416-08:59:20.197|56=QUOD5|1128=9|1=CLIENT1_1|6=1.19545|11=1052935892|14=1000000|15=USD|17=EX1210416085920335001|21=1|22=8|31=1.19545|32=1000000|37=MO1210416085920316001|38=1000000|39=2|40=D|44=1.19545|48=EUR/USD|54=1|55=EUR/USD|59=3|60=20210416-08:59:20.089|63=B|64=20210427|75=20210416|100=XQFX|120=EUR|150=F|151=0|167=FXFWD|194=1.1949|195=0.00055|207=XQFX|381=1195450|453=1|448=gtwquod5|447=D|452=36|460=4|528=A|854=0|10=038|

{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXMM, FXregression, needs_refactoring_FX;lzaharia;;PFX-232;;QAP-2297;;"From webadmin, enable client price slippage range from tenor wizard 1 pips 
for all tenors on GBP/USD Gold";"FOR TH2 send your own MD
see comments";slippage range enabled;;
;;;;;;;;;;;;;;;"From client interface / minifix, send a RFQ to have automatic replies with 
CCY2";"Buy
#1
tenor=w1";"Automatic replies received #2
For CCY1 Buy request we receive quote with 132 tag (BidPx 132=1.19535)";;
;;;;;;;;;;;;;;;Send 35=D with price which is not in range ( 44=1.19555);"#3
#4";Order is rejected;;
;;;;;;;;;;;;;;;Send 35=D with price which is in range ( 44=1.19545);;Order is filled;;
QAP-T2844;Test the Price slippage range validation in RFQ with CCY1;Automated;;"_This test validates_ PFX-232

_Acceptance Criteria_
* Be able to view and edit the following settings per client tier per 
currency pair per tenor:
** Client Price Slippage Range Enabled: on/off
** Client Price Slippage Range (expressed in configured Margin format)
* When this setting is enabled, it is used to validate both orders against 
ESP streaming quotes as well as responses to previous RFQs
* Work with engineering to confirm the math of calculating a last look 
check in conditions where it both passes and fails.";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXMM, FXregression, needs_refactoring_FX;lzaharia;;PFX-232;;QAP-2296;;"From webadmin, enable client price slippage range from tenor wizard 2 pips 
for spot eur/usd gold tier";;slippage range enabled;;
;;;;;;;;;;;;;;;From client interface / minifix, send an RFQ buy order with offerPx-0.0005m;;Order is rejected;;
;;;;;;;;;;;;;;;From client interface / minifix, send an RFQ buy order with offerPx-0.0001m;;Order is Filled;;
;;;;;;;;;;;;;;;From webadmin, DISABLE client price slippage range;;slippage range disenabled;;
;;;;;;;;;;;;;;;From client interface / minifix, send an RFQ buy order with offerPx-0.0001m;;Order is rejected;;
QAP-T2845;Test the Price slippage range validation in RFQ with CCY1 (fix);Automated;;"_This test validates_ PFX-232

_Acceptance Criteria_
* Be able to view and edit the following settings per client tier per 
currency pair per tenor:
** Client Price Slippage Range Enabled: on/off
** Client Price Slippage Range (expressed in configured Margin format)
* When this setting is enabled, it is used to validate both orders against 
ESP streaming quotes as well as responses to previous RFQs
* Work with engineering to confirm the math of calculating a last look 
check in conditions where it both passes and fails.

1 pip = 0.0001
!screenshot-1.png|thumbnail!

*{color:#0747A6}#1{color}*

{code:java}
< 
8=FIXT.1.1|9=159|35=R|49=QUOD5|56=QUODFX_UAT|34=193|52=20210416-08:12:44|131=211333034|146=1|55=EUR/USD|167=FXFWD|537=1|54=1|38=1000000|64=20210427|63=W1|15=EUR|1=CLIENT1|40=D|10=115|
{code}

*{color:#0747A6}#2{color}*

{code:java}
> 
8=FIXT.1.1|9=238|35=S|34=202|49=QUODFX_UAT|52=20210416-08:12:44.238|56=QUOD5|1128=9|15=EUR|54=1|55=EUR/USD|62=20210416-08:14:44.219|63=W1|64=20210427|117=01210416081244822002|131=211333034|133=1.1968|135=1000000|167=FXFWD|190=1.1958|191=0.001|460=4|537=1|10=225|
{code}

*{color:#0747A6}#3{color}*

{code:java}
< 
8=FIXT.1.1|9=206|35=D|49=QUOD5|56=QUODFX_UAT|34=195|52=20210416-08:13:11|1=CLIENT1|11=1052935886|21=1|15=EUR|38=1000000|40=D|44=1.197|54=1|55=EUR/USD|59=3|60=20210416-08:13:11|64=20210427|167=FXFWD|117=01210416081244822002|10=077|
{code}

*{color:#0747A6}#4{color}*

{code:java}
> 
8=FIXT.1.1|9=398|35=8|34=204|49=QUODFX_UAT|52=20210416-08:13:11.572|56=QUOD5|1128=9|6=0|11=1052935886|14=0|15=EUR|17=1476100001175|21=1|22=8|31=0|32=0|37=MO1210416081311316001|38=1000000|39=8|40=D|44=1.197|48=EUR/USD|54=1|55=EUR/USD|58=order 
price is not ranging in [1.1967, 
1.1969]|59=3|60=20210416-08:13:11.408|63=B|64=20210427|120=USD|150=8|151=0|207=XQFX|378=4|453=1|448=gtwquod5|447=D|452=36|460=4|528=A|854=0|10=252|
{code}

*{color:#0747A6}#5{color}*

{code:java}
< 
8=FIXT.1.1|9=207|35=D|49=QUOD5|56=QUODFX_UAT|34=196|52=20210416-08:13:18|1=CLIENT1|11=1052935887|21=1|15=EUR|38=1000000|40=D|44=1.1968|54=1|55=EUR/USD|59=3|60=20210416-08:13:18|64=20210427|167=FXFWD|117=01210416081244822002|10=149|
{code}

*{color:#0747A6}#6{color}*

{code:java}
8=FIXT.1.1|9=449|35=8|34=206|49=QUODFX_UAT|52=20210416-08:13:17.664|56=QUOD5|1128=9|1=CLIENT1_1|6=1.1968|11=1052935887|14=1000000|15=EUR|17=EX1210416081317335001|21=1|22=8|31=1.1968|32=1000000|37=MO1210416081317316001|38=1000000|39=2|40=D|44=1.1968|48=EUR/USD|54=1|55=EUR/USD|59=3|60=20210416-08:13:17.590|63=B|64=20210427|75=20210416|100=XQFX|120=USD|150=F|151=0|167=FXFWD|194=1.1958|195=0.001|207=XQFX|381=1196800|453=1|448=gtwquod5|447=D|452=36|460=4|528=A|854=0|10=029|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXMM, FXregression, needs_refactoring_FX;lzaharia;;PFX-232;;QAP-2295;;"From webadmin, enable client price slippage range from tenor wizard 1 pips 
for w1 tenor on EUR/USD Gold";"FOR TH2 send your own MD
see comments";slippage range enabled;;
;;;;;;;;;;;;;;;"From client interface / minifix, send a RFQ to have automatic replies with 
CCY1";"BUY
#1
tenor=w1";"Automatic replies received
#2
For CCY1 Buy request we receive quote with tag 133 (OfferPx)";;
;;;;;;;;;;;;;;;Send 35=D with price which is not in range ( 44=1.197);"#3
#4";Order is rejected;;
;;;;;;;;;;;;;;;Send 35=D with price which is in range ( 44=1.1968);"#5
#6";Order is filled;;
QAP-T2846;Manual handling of swaps based on the far quantity;Automated;;"This test validates PFX-529

Max quantity in sweepable corresponds to the sum of all quantities 

#1
{code:java}
< 
8=FIXT.1.1|9=269|35=R|49=QUOD5|56=QUODFX_UAT|34=9|52=20210319-10:45:40|131=22111134|146=1|55=EUR/USD|167=FXSWAP|54=2|38=40000000|64=20210319|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|624=2|587=W1|588=20210330|685=40000000|600=EUR/USD|609=FXFWD|624=1|587=W2|588=20210406|685=40000000|10=087|

{code}
#2
{code:java}
< 
8=FIXT.1.1|9=267|35=R|49=QUOD5|56=QUODFX_UAT|34=20|52=20210319-13:29:48|131=22111139|146=1|55=EUR/USD|167=FXSWAP|54=2|38=1000000|64=20210319|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|624=2|587=W1|588=20210330|685=1000000|600=EUR/USD|609=FXFWD|624=1|587=W2|588=20210406|685=2000000|10=248|

> 
8=FIXT.1.1|9=535|35=S|34=19|49=QUODFX_UAT|52=20210319-13:29:56.775|56=QUOD5|1128=9|1=CLIENT1|15=EUR|54=2|55=EUR/USD|62=20210319-13:31:49.467|64=20210319|117=01210319132949839002|131=22111139|132=-0.0000561|134=1000000|167=FXSWAP|188=1.18511|190=1.18531|460=4|537=1|555=2|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=2|685=1000000|587=W1|588=20210330|681=1.185392|684=1.185192|1067=0.000082|1068=0.000082|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=1|685=2000000|587=W2|588=20210406|681=1.1851359|684=1.185294|1067=0.0000259|1068=-0.000016|1065=-0.0000561|10=088|
{code}
#3
{code:java}
< 
8=FIXT.1.1|9=265|35=R|49=QUOD5|56=QUODFX_UAT|34=15|52=20210728-12:35:18|131=1148203830|146=1|55=EUR/USD|167=FXSWAP|38=1000000|64=20210806|15=EUR|1=CLIENT2|555=2|600=EUR/USD|609=FXFWD|624=1|587=W1|588=20210806|685=17000000|600=EUR/USD|609=FXFWD|624=2|587=W2|588=20210813|685=1000000|10=202|{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;lzaharia;;;;QAP-2294;;"From minifix / client interface, send a RFQ on even swap with quantity > 
max quantity in sweepable";#1;"Swap must be manual, unassigned, to be handled in manual intervention 
window";;
;;;;;;;;;;;;;;;"From minifix / client interface, send a RFQ on even swap with quantity < 
max quantity in sweepable";;Swap must be automatic and replied immediately;;
;;;;;;;;;;;;;;;"From minifix / client interface, send a RFQ on uneven swap spot / 1M with 
far leg qty < max quantity in sweepable";#2;Swap must be automatic and replied automatically;;
;;;;;;;;;;;;;;;"From minifix / client interface, send a RFQ on uneven swap spot / 1M with 
far leg qty > max quantity in sweepable";;"Swap must be manual, unassigned, to be handled in manual intervention 
window";;
;;;;;;;;;;;;;;;"From minifix / client interface, send a RFQ on uneven swap today / spot 
with near leg qty > max quantity in sweepable";#3;"Swap must be manual, unassigned, to be handled in manual intervention 
window";;
QAP-T2847;Test the max number of rejects in MPAS;Automated;;"This story validates PFX-709

 

To validate this story, it is necessary to have autohedging activated

It is necessary to have hedging orders rejected : they will be rejected on 
MF if the TIF is incorrect or if the price slippage is too big

maybe comment this for feedhandler xml !screenshot-1.png|thumbnail!
*{color:#DE350B}DELETE ""HEDGE EXECUTION STRATEGY"" FOR INSTRUMENT to get 
rejected{color}*";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX;lzaharia;;;;QAP-2293;;"From client gui / Minifix, send an order with a big quantity to be executed 
and trigger a hedging order";;order executed, hedging order created and rejected;;
;;;;;;;;;;;;;;;Check order book;;"The number of rejected orders should be equal to the number in config (5 by 
default)";;
QAP-T2848;Test for enabling / disabling Position;Automated;;"This test case validates story PFX-660
* When executing client orders for a given currency pair and this setting 
is on, the auto-hedger reflects changes to the net Spot position for that 
currency pair
* When executing client orders for a given currency pair and this setting 
is off, the auto-hedger does not reflect any changes to a Spot position for 
that currency pair
* When turning this setting off and Spot positions already exist for the 
given currency pair, leave the existing position as it is but do not 
reflect future client order executions for that currency pair";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX;lzaharia;;;;QAP-2292;;"From webadmin, go to market making / autohedging and select maintain hedge 
positions";;Hedge positions maintained;;
;;;;;;;;;;;;;;;From minifix/ client interface, send an order for this instrsymbol;;"order executed
positions displayed for internal account and client account";;
;;;;;;;;;;;;;;;"From webadmin, go to market making / autohedging and deselect maintain 
hedge positions";;Hedge positions removed;;
;;;;;;;;;;;;;;;From minifix/ client interface, send an order for this instrsymbol;;"order executed
positions updated only for client account";;
QAP-T2849;Test case for enabling / disabling hedging with working order;Automated;;"_Test for story PFX-659_

_Acceptance Criteria_
* View and edit the following settings per currency pair:
** “Send Hedge Orders” (on/off)
* When sending hedge orders is enabled and a trigger would normally send a 
hedge order, the hedge order is sent
* When sending hedge orders is disabled and a trigger would normally send a 
hedge order, the hedge order is not sent
* When disabling the sending of hedge orders and a hedge order is already 
active, cancel the active hedge order

To validate this test case, the TIF of hedging orders must be day or GTD 
with long exposure

To have the hedge order remaining in status open, you can choose a negative 
hedge price improvement";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXMM, FXregression, needs_refactoring_FX;lzaharia;;;;QAP-2291;;"From Minifix / client interface, send an order with quantity greater than 
long / short upper quantity";to achieve open AO try to create TWAP algorithm for your hedger;"order sent
order executed
hedge order sent remaining in status open";;
;;;;;;;;;;;;;;;From webadmin, disable send hedge orders;;"Hedge orders disabled
Hedge order canceled in order book";;
QAP-T2850;Test case for enabling / disabling hedging;Automated;;"_Test for story PFX-659_

_Acceptance Criteria_
* View and edit the following settings per currency pair:
** “Send Hedge Orders” (on/off)
* When sending hedge orders is enabled and a trigger would normally send a 
hedge order, the hedge order is sent
* When sending hedge orders is disabled and a trigger would normally send a 
hedge order, the hedge order is not sent
* When disabling the sending of hedge orders and a hedge order is already 
active, cancel the active hedge order";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXMM, FXregression, needs_refactoring_FX;lzaharia;;PFX-1736;;QAP-2290;;"From Wedadmin, go to market making / autohedging and choose the option send 
hedge orders";;"send hedge orders enabled
Validate to apply the changes";;
;;;;;;;;;;;;;;;"On the same currency pair, from minifix / send an order with a big quantity 
(greater than long / short upper quantity)";;"Order sent
Order executed
Hedge order triggered";;
;;;;;;;;;;;;;;;"From Wedadmin, go to market making / autohedging and deactivate the option 
send hedge orders";;Validate to apply the changes, send orders disabled;;
;;;;;;;;;;;;;;;"On the same currency pair, from minifix / send an order with a big quantity 
(greater than long / short upper quantity)";;Order sent, order executed, no hedge order sent;;
QAP-T2851;FETrading: Tiered subsection behaviour;Specified;;"Preconditions:

- in FE open Client Pricing tile, add some tile, move to Client Rates 
section.

The configured sweepable and tiered quote formats are available to be 
viewed in the Trading FE in the Client Pricing Tiles:
* A tabbed control on the rates subsection is used to select between either 
""Sweepable"" or ""Tiered""
* If Sweepable is selected, the tile behaves as it currently does, showing 
the sweepable TOB price and the sweepable rates table.
* If Tiered is selected, the margin columns are hidden, the rows cannot be 
selected (so Pricing/Executable buttons can still be used, but not per 
volume band), and the margin increment value and margin arrow buttons are 
all disabled. The tile should then show the tiered TOB price and the tiered 
rates table.";/PFX/FX_MM_ESP;Low - Nice to Have;FX_MM_ESP;AutomatedCodedUI, FXregression;akovalen;;PFX-538;;QAP-2288;;"Open FE => Client Pricing Tile => Select Client Tier from drop down list => 
select currency Pair from drop down list";;Prices appeared on the tile;;
;;;;;;;;;;;;;;;Look on Client Rates section;;Two tabs are available. Sweepable and Tiered;;
;;;;;;;;;;;;;;;Go to Tiered tab;;"Check that:
-margin arrows are disabled
-the margin increment value are disabled
-the Automated switcher is disabled
-the margin columns are hidden
-the rows cannot be selected";;
;;;;;;;;;;;;;;;click on the last qty row;;order ticket is opened with exact qty from the last row (not sweepable);;
QAP-T2852;"Check ""Pilot"" function for ESP";Specified;;"*Precondition*: send 2 orders with different currency pairs (as example: 
EUR/GBP and USD/JPY), open a new Aggregated Market Rates and click on add 
Rates Tile, open Order Book.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FETrading, FXregression;ysamoile;;PFX-348;;QAP-2283;;Focus piloted indicator from ESP on order Book;;Piloted indicator is focused on order book;;
;;;;;;;;;;;;;;;Select order and check currency pair on ESP tile section;;Currency pair on ESP tile is equal Symbol column of order on Order Book;;
;;;;;;;;;;;;;;;Select another order and check currency pair on ESP tile section;;Currency pair on ESP tile is equal Symbol column of order on Order Book;;
QAP-T2853;"Check ""Pilot"" function for RQF";Specified;;"*Precondition*: send 2 orders with different currency pairs (as example: 
EUR/GBP and USD/JPY), open a new Aggregated Market Rates and click on add 
RFQ Tile, open Orde Book.";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression;ysamoile;;PFX-348;;QAP-2278;;Focus piloted indicator from RFQ on order Book;;Piloted indicator is focused on order book;;
;;;;;;;;;;;;;;;Select order and check currency pair on RFQ tile section;;Currency pair on RFQ tile is equal Symbol column of order on Order Book;;
;;;;;;;;;;;;;;;Select another order and check currency pair on RFQ tile section;;Currency pair on RFQ tile is equal Symbol column of order on Order Book;;
QAP-T2854;Modify TIF and exposure duration in autohedger settings;Automated;;"This test validates PFX-723 : modification of TIF and duration in 
autohedging settings

 ";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXMM, FXregression, needs_refactoring_FX;lzaharia;;;;QAP-2265;;"From web admin, enter a new TIF and new duration on currency pair EUR/USD 
(for example, GTD 10 sec)";;GTD and 10 seconds added to autohedger;;
;;;;;;;;;;;;;;;Validate;;Modifications added in DB;;
;;;;;;;;;;;;;;;Enter a new order to trigger the autohedger;;Autohedging order triggered;;
;;;;;;;;;;;;;;;Check validity of order;;Order sent with TIF GTD, duration 10 sec;;
QAP-T2855;Autohedging on a forward order;Automated;;"Autohedging on a forward order :

check that the hedging orders on forward orders have the following 
specifications :
* they are sent against the spot
* they have the same side of the client order

To have an autohedging order, you muet have a small high watermark (for 
example 5m) and send an order at this watermark or higher";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX;lzaharia;;PFX-182, PFX-175;;QAP-2255;;From gui or minifix send a quote request EUR/USD 8M quantity 6m;;RFQ sent and replied;;
;;;;;;;;;;;;;;;Send a buy order to execute this quote;;Quote executed;;
;;;;;;;;;;;;;;;Check the hedging order;;"Hedging order has the following characteristics : quantity in sys currency, 
side is buy, instrument chosen is spot EUR/USD";;
QAP-T2856;Display of positions per accountgroup in both modes currency pair / currency in position window;Specified;;"This test validates PFX-248 : position display

Check that the display is coherent :
* without selecting an accoundgroup
* when selecting an accountgroup
* for currencies and currencypair modes

Display in currency mode :

!image-2020-01-03-17-59-57-724.png!

 

Display in currency pair mode :

!image-2020-01-03-17-57-41-430.png!";/PFX/FX_MM_Position;Low - Nice to Have;FX_MM_Positions;FXMM, FXregression, UAQA;lzaharia;;PFX-248;;QAP-2253;;"From FIX tool / Client gui, enter several orders to have positions on 
internal account and client account";;Positions updated on FX position window;;
;;;;;;;;;;;;;;;"Check this window : select currency pair / all accounts to have all 
accounts displayed";;All accounts displayed, check that columns are the same as attached;;
;;;;;;;;;;;;;;;Select currencypair, and check one account;;All data for this account only displayed;;
;;;;;;;;;;;;;;;Select currency, all accounts;;"All accounts displayed, one line per currency and per account (see display 
in description)";;
;;;;;;;;;;;;;;;Select currency, one account;;Only one account displayed;;
QAP-T2857;Autohedging : time in force with default validity;Automated;;"This test validates issue PFX-182

Check that orders have default time in force day, with a cancel after x 
seconds (default 5, otherwise setting in mpas.xml";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX;lzaharia;;PFX-182;;QAP-2252;;In config of mpas, set validity 60 seconds in config and restart MPAS;;Congig updated, MPAS restarted;;
;;;;;;;;;;;;;;;"Send several client orders from Fix interface or client gui to have several 
execution and trespass the limit";;Limit trespassed, hedged order sent;;
;;;;;;;;;;;;;;;Check TIF of hedge order;;Hedge order with TIF Day;;
;;;;;;;;;;;;;;;Check life of order after 1 minute;;Cancel of order after 1 minute;;
QAP-T2858;Default algo policy from accountgroup for auto hedging;Automated;;"This test validates PFX-572 :
* View and edit the following settings per currency pair:
** Algo Policy
* Confirm that the selected Algo Policy is used by the AutoHedger when 
hedging.
* Confirm that the Account Group's default Algo Policy is used by the 
AutoHedger when hedging if no Algo Policy is configured on the currency 
pair.";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXMM, FXregression, needs_refactoring_FX;lzaharia;;PFX-572;;QAP-2251;;"From webadmin, remove the algo policy for a selected currency pair (ex 
EUR/USD)";;algopolicy removed from auto hedging part;;
;;;;;;;;;;;;;;;"From webadmin, enter a default algo policy to the accountgroup used for 
autohedging";;algopolicy added for this accountgroup;;
;;;;;;;;;;;;;;;"Send an order, to have an autohedging order triggered
Check the policy of the algo order";;Policy of algo order should be the default algo policy from accountgroup;;
QAP-T2859;Algo policy selection for auto hedging;Automated;;"This test validates PFX-572 :
* View and edit the following settings per currency pair:
** Algo Policy
* Confirm that the selected Algo Policy is used by the AutoHedger when 
hedging.
* Confirm that the Account Group's default Algo Policy is used by the 
AutoHedger when hedging if no Algo Policy is configured on the currency 
pair.

 ";/PFX/FX_MM_Position;Low - Nice to Have;FX_MM_Autohedging;FXMM, FXregression, needs_refactoring_FX;lzaharia;;PFX-572, PFX-1736, PADM-996;;QAP-2250;;From webadmin, select auto hedging part from market making section;;Auto hedging part selected;;
;;;;;;;;;;;;;;;"Enter a new algo policy for autohedging to a selected currency pair (ex 
EUR/USD) and validate";;Algo policy selected for this currency pair and applied;;
;;;;;;;;;;;;;;;"Send an order, to have an autohedging order triggered
Check the policy of the algo order";;Policy of algo order should be the poicy selected with web admin;;
QAP-T2860;FX Autohedging : Check that there is only one hedge order at a time;Automated;;"This test case validates PFX-639 : 

If the AH sends a hedge order which remains active for some time, though 
has not brought the relative position down within limits, and another even 
happens that triggers the AH to evaluate whether positions are above their 
limit (e.g. a client order fill, a partial hedge order fill, etc), do not 
send another hedge order even though the position is still outside limits.

 

Not terminated orders can have :
* a child in pending cancel
* still be opened

This can be done by modifying the policy, or having an issue with the 
cancels
*{color:#DE350B}create not correct algo to keep AO in open status{color}*
test Quod MultiListing on quod308

The following configuration must be cleared (empty string instead of 
QUOD_1):

2021-07-29 09:46:14.059786178 QUOD.MPAS [15435] INFO configuration 
(configuration.cpp:373) - client_mpas.xml: = `QUOD_1'";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXMM, FXregression, needs_refactoring_FX;lzaharia;;PFX-639;;QAP-2228;;"After an execution from ESP order or RFQ order, the MPAS triggers an 
autohedging algo order";;Algo order in status open;;
;;;;;;;;;;;;;;;"Create a new RFQ/ESP order to have an execution on the same side as the 
previous one";;"The MPAS does not trigger a new order
Message in logs :
2019-12-23 13:29:02.652416147 QUOD.MPAS [26325] DEBUG automaton 
(AutoHedgerForexPositions.cpp:250) - found alive order 
AO1191223112401991002
2019-12-23 13:29:02.652419461 QUOD.MPAS [26325] INFO automaton 
(AutoHedgerForexPositions.cpp:253) - number of alive Buy orders on 
KExUjnMCR-wK6DgQBZpg8g is 1
2019-12-23 13:29:02.652422472 QUOD.MPAS [26325] INFO automaton 
(AutoHedgerForexPositions.cpp:204) - already at maximum number of orders 
(1)";;
QAP-T2861;FX MM RFQ : check quote cancel on SWAP RFQ;Automated;;"FX MM RFQ : check quote cancel on SWAP RFQ
{color:#0747A6}*#1*{color}

{code:java}
< 
8=FIXT.1.1|9=268|35=R|49=QUOD5|56=QUODFX_UAT|34=28|52=20210415-06:57:26|131=111333424|146=1|55=EUR/USD|167=FXSWAP|54=2|38=1000000|64=20210419|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|624=2|587=W1|588=20210426|685=1000000|600=EUR/USD|609=FXFWD|624=1|587=W2|588=20210503|685=1000000|10=051|
{code}

*{color:#0747A6}#2{color}*

{code:java}
< 
8=FIXT.1.1|9=75|35=Z|49=QUOD5|56=QUODFX_UAT|34=29|52=20210415-06:57:34|131=111333424|298=4|10=000|
{code}";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;lzaharia;;PFX-3145;;QAP-2177;;"From client interface / Currenex, send a quote request for swap (for 
example EUR/USD 1W/1M";#1;Quote replied;;
;;;;;;;;;;;;;;;From client interface / Currenex, send a quote cancel;#2;Quote canceled;;
QAP-T2862;Autohedging : order sent when position exceeds upper limit;Automated;;"This test case validates story PFX-175

Acceptance criteria : 

As positions exceed their relative ""Upper Limit"" the position is hedged to 
market using the given AutoHedger Execution Strategy, the quantity of 
""Current Position"" - ""Lower Threshold"", and a price based on the VWAP 
executed value of the position.

 

For this test, Autohedging should be sent for the chosen currency pair :

Use Long Quantities as Both Long and Short set to true

upper long / short limit : 5000000

lower long / short limit : 1000000

 

As the quantities are in USD, this test must be done with a currency pair 
beginning with USD (otherwise the quantitties must be converted)
!screenshot-1.png|thumbnail!";/PFX/FX_MM_Autohedging;Low - Nice to Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX, SWED, UAQA;lzaharia;;PFX-175, PFX-3416;;QAP-2159;;From Client Gui / 360T, send a buy order of quantity 5,000,000;;Order executed;;
;;;;;;;;;;;;;;;Check position in FX Position window;;"Position = 5000000 for client account, Position = -1000000 for internal 
(QUOD) account";;
;;;;;;;;;;;;;;;Check orders in blotter;;"Client order buy executed with quantity 5,000,000
Internal order buy executed with quantity 4,000,000";;
;;;;;;;;;;;;;;;From Client Gui / 360T, send a buy order of quantity 6,000,000;;Order executed;;
;;;;;;;;;;;;;;;Check position in FX Position window;;"Position = 11,000,000 for client account
Position = -1,000,000 for internal (QUOD) account";;
;;;;;;;;;;;;;;;Check orders in blotter;;"Client order buy executed with quantity 6,000,000
Internal order buy executed with quantity 6,000,000";;
;;;;;;;;;;;;;;;Check trades blotted;TH2 blocked by QAP-5449;"There should be executions that we have for AutoHedger order in order book 
(child row)";;
QAP-T2863;Manual handling of quote with modification of quoteTTL;Automated;;"Manual handling of quote with modification of quoteTTL

 

This test case validates acceptance criteria concerning the quoteTTL of 
PFX-146";/PFX/FX_MM_RFQ;Low - Nice to Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;lzaharia;;PFX-146;;QAP-2143;;"From a client interface / 360T / Currenex/ MiniFix, send a quote request 
with quantity > max quantity band";;Quote request sent, displayed in dealer intervention / unassigned;;
;;;;;;;;;;;;;;;Accept this quote request(assign to yourself);;Quote request accepted, displayed in assigned, estimated;;
;;;;;;;;;;;;;;;Watch pricing tile in dealer intervention;;"QuoteTTL = quoteTTL from DB, prices displayed, side displayed 
(ClientTierInstrSymbol table> column QuoteTTL)";;
;;;;;;;;;;;;;;;Change TTL to 10 and Publish price;;"QuoteTTL decrements, button send becomes resend
Quote Status Accepred
After 10 sec rfq expired Quote Status =Expired";;
QAP-T2864;Check the possibility to reject quote request from Quote request Book.;Specified;;"This test case follows the story FOB-34101, criteria :

An active quote request can be rejected.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;AutomatedCodedUI, FXregression;lzaharia;;PFX-35;;QAP-2137;;"From client interface (360T app), send an automatic quote request with qty 
< then sum of qty bands for your CientTier/CurrPair.";;"Quote appears in QuoteRequestBook with status= NEW, AutomaticQuoting=Y;";;
;;;;;;;;;;;;;;;"Right click on quote and choose option ""Reject"".";;"Do such checks in Quote request Book for your quote.
Check 1st level:
QuoteStatus=Canceled;
Check 2nd level: QuoteStatus=RemovedFromMarket;";;
QAP-T2865;Quote request book : update of all levels in real time;Automated;;"*For sending automatic quote you need send quote with qty < then sum of qty 
bands for your clientTier/currpair.

For example, if you have:  sumQty = 16 000 000, you need to send quote with 
qty lower then sumQty.

!image-2020-02-05-15-52-55-797.png|width=838,height=448!

 ";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;lzaharia;;PFX-35;;QAP-2130;;"On TradingFE, open a Quote requests Book in section MarketData on tab 
ForEx.";;Quote request book window appears.;;
;;;;;;;;;;;;;;;"From client interface (360T app), send a quote request with qty < then sum 
of qty bands.";Quote must be automatic.;"Quote appears in QuoteRequestBook with status= NEW, AutomaticQuoting=Y;";;
;;;;;;;;;;;;;;;"Open second level of quote in Quote request Book by clicking on ""+"" button.";;QuoteStatus=Accepted.;;
;;;;;;;;;;;;;;;"Execute the order, by clicking on prices on 360T app that appears after 
sending of quote.";;"Do such checks in Quote request Book for your quote.
Check 1st level:
QuoteStatus=TER and is updated in real time.
Check 2nd level: QuoteStatus=Filled and is updated in real time.";;
QAP-T2866;Test of quote request book : display of quote requests and quotes;Specified;;"This test case validates story FOB-34101

 A panel in the trading FE can be used to view a list of active and 
inactive (executed, rejected, expired, etc) quote requests, including 
details such as current state and latest bid/ask price (for active 
requests) or last published bid/ask price (for inactive requests)

 

Statuses:
# new - successfully created quote request;
# Expired - successfully created quote request change status to expired 
after TTL time(usually 120sec);
# Canceled - quote request canceled via QuoteCancel fix message;
# Terminated - quote request would change status from new to Terminated 
when the quote for these RFQ execute;
# Rejected - RFQ with status new should be Rejected from FE( Quote Request 
book or Dealer Manual Intervention windows);

Autotest should be updated(need to remove Cansell status fro quote request";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;AutomatedCodedUI, FXregression, Mixed, UAQA;lzaharia;;PFX-35;;QAP-2129;;"From client interface / Minifix, send several quote requests, with quotes 
having different status : New, Expired, Canceled, Terminated, Rejected";;Quote requests displayed in quote request book;;
;;;;;;;;;;;;;;;Check quote request status and quote status;;Quote requests and quotes have correct status (check step 1);;
;;;;;;;;;;;;;;;Close FE, and restart FE;;Open quote requests window and check if the status are as before the close;;
QAP-T2867;Cross currency pair with both currencies not having the same Spot settlement date;Manual;;"This test case validates FOB-34043, in case we have a different value date 
for currency 1 and currency 2

Example : GBP/CAD through USD

USD/CAD is T+1, GBP/USD is T+2";/PFX/FX_Synthetic;High - Must Have;FX_Synthetic_cross;FXregression;lzaharia;;PFX-212, PFX-199;;QAP-2124;;From an ESP tile, select GBP/CAD and open aggregated prices;;Aggregated prices displayed;;
;;;;;;;;;;;;;;;Select cross through USD;;Check that prices are crossed using GBP/USD spot, and USD/CAD T+2;;
;;;;;;;;;;;;;;;Select cross through EUR;;Check that prices are calculated using EUR/GBP spot, EUR/CAD spot;;
QAP-T2868;Synthetic cross with currency pair change;Specified;;"This test is linked to FOB-34037 and is about navigating in ESP tile 
between different currency pairs";/PFX/FX_Synthetic;High - Must Have;FX_Synthetic_cross;FXregression;lzaharia;;PFX-67, PFX-199;;QAP-2123;;From an ESP tile, select a configured cross currency pair;;Currency pair displayed;;
;;;;;;;;;;;;;;;Select the submenu to display the synthetic cross;;Synthetic cross displayed;;
;;;;;;;;;;;;;;;"In the currency pair section, choose a currency pair which is not enabled 
for cross (EUR/USD or another currency pair not configured)";;"New currency pair displayed with all sections enabled (order entry, direct 
venue, etc)";;
QAP-T2869;Verify that after unassigment, all values turn to default one.;Automated;;"This test case validates following acceptance criteria from FOB-34103 :
* Once a user releases a quote request back into the pool of ""unassigned"" 
requests, any edited values are forgotten.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;vmaschik;;PFX-146;;QAP-2121;;From minifix / client FE / 360T Interface send a RFQ with big qty;;RFQ received assign to oneself.;;
;;;;;;;;;;;;;;;Modify quote.;;Quote is modified.;;
;;;;;;;;;;;;;;;"Release a quote request back into the pool of ""unassigned"" requests.";;Any edited values are forgotten.;;
QAP-T2870;Verify clicking on/off Executable/Pricing;Automated;;"Pay attention that if selected client tier used schedule and it's not 
working time all prices for all bands are grey (example attached)";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression, needs_refactoring_FX;imaschik;;PFX-49, PFX-4115;;QAP-2117;;Open a pricing tile and select tenor/tier.;;"Tiles displays with selected currency pair and tenor. It contains rows with 
data.";;
;;;;;;;;;;;;;;;"Click on ""Executable"" button to make it OFF";don't need to check color by TH2;"Image of Button changes to inactive status.
Rows change color on grey.";;
;;;;;;;;;;;;;;;Press on the TOB and send an order;slippage=2;"Order gets rejected with freeNotes ""not tradeable""";;
;;;;;;;;;;;;;;;"Change ""Executable"" to ON and
Click on ""Pricing"" button to make it OFF";don't need to check color by TH2;Image of Button changes to inactive status. Rows change color on red.;;
;;;;;;;;;;;;;;;Press on the TOB and send an order;;"Order gets rejected with freeNotes ""not active""";;
;;;;;;;;;;;;;;;"Make ""Pricing"" ON.
Change ""Executable"" OFF for all rows except qty=1M";don't need to check color by TH2;"rows become gray.
Executable button becomes orange";;
;;;;;;;;;;;;;;;"Send 2 orders;
1) qty =1M
2) qty=2M";;"1)the first order is executed
2)the second order is rejected";;
;;;;;;;;;;;;;;;"Make ""Executable"" ON for all rows
Change ""Pricing"" to OFF for all rows except qty=1M";don't need to check color by TH2;"rows become red.
Pricing button becomes orange";;
;;;;;;;;;;;;;;;"Send 2 orders;
1) qty =1M
2) qty=2M";;"1)the first order is executed
2)the second order is rejected";;
;;;;;;;;;;;;;;;"Make Pricing ON for all rows
and send order qty=2M";;order is executed;;
QAP-T2871;ClientPricing: Verify connection between client tier and currency pairs.;Specified;;"Display of MM screen client tier part.

 

You need to check in DB that tier GOLD/Bronze and etc. contains pairs 
currency, if no you can add it via FEWebAdmin.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression;imaschik;;PFX-49, PFX-2607;;QAP-2114;;"Via Admin FE select clientTier Gold => EUR/USD => TENOR tab and add all 
available tenors";;All tenor are added;;
;;;;;;;;;;;;;;;Submit changes;;no errors;;
;;;;;;;;;;;;;;;Open FE => On Client pricing window, open client pricing tile.;;Client pricing tile is opened.;;
;;;;;;;;;;;;;;;Select ClientTier.;Gold;"Check that dropdown CurrencyPair contains all list of pairs for selected 
Tier.";;
QAP-T2872;Full workflow with Amending and Rejecting actions of AutoHedged order;Automated;;"This test check the possibility to amend and cancel an autohedger order 
(not possible in version 5.1.109.122 because no passive orders are allowed)

This can be done by modifying the policy, or having an issue with the 
cancels
*{color:#DE350B}create not correct algo to keep AO in open status{color}*
*test* with tif=DAY on quod308 (see Attachments)";/PFX/FX_MM_Autohedging;High - Must Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX;;;PFX-328;;QAP-2113;;"From Minifix / client interface or Trading FE ESP_MM send a sell ESP order 
on a spot currency pair";;Order, executed and replied to Fix;;
;;;;;;;;;;;;;;;Click on Dealing Order Book -> Order Book (Auto-Hedging);;Hedged order appears in Order Book (Auto-Hedging);;
;;;;;;;;;;;;;;;Amend Hedged order with other qty;;Hedged order correctly amended;;
;;;;;;;;;;;;;;;Cancel Hedged order;;Hedged order correctly Canceled;;
QAP-T2873;Cross calculation with directquotation false on USD Cross and true on EUR Cross;Manual;;"table *{color:#DE350B}INSTRUMENT{color}*
*{color:#DE350B}See Attachments for steps {color}*
* * If DirectQuotation1 is true and DirectQuotation2 is true

Curr1/Curr2[BrknDate]Bid = 
(PrimCurr/Curr2[BrknDate]Bid)/(PrimCurr/Curr1[BknDate]Offer)

Curr1/Curr2[BrknDate]Offer = 
(PrimCurr/Curr2[BrknDate]Offer)/(PrimCurr/Curr1[BknDate]Bid)
* If DirectQuotation1 is false and DirectQuotation2 is false

 Curr1/Curr2[BrknDate]Bid = 
(Curr1/PrimCurr[BrknDate]Bid)/(Curr2/PrimCurr[BrknDate]Offer)

Curr1/Curr2[BrknDate]Offer = 
(Curr1/PrimCurr[BrknDate]Offer)/(Curr2/PrimCurr[BrknDate]Bid)

Case of AUD/GBP cross through USD and EUR

 

Having the following data :

AUD/USD : Bid = 0.6748 Offer = 0.6734

GBP/USD : Bid = 1.22189 Offer = 1.22038

EUR/AUD : Bid = 1.62970 Offer = 1.62727

 EUR/GBP : Bid = 0.89933 Offer = 0.89692

 

AUD/GBP through USD :

Bid = 0.6748/1.22038 = 0.5529

Offer = 0.6734/1.22189 = 0.5511

 

AUD/GBP through EUR :

Bid = 0.89933/1.62727 = 0.55266

Offer = 0.89692/1.62970 = 0.55035";/PFX/FX_Synthetic;High - Must Have;FX_Synthetic_cross;FXregression;lzaharia;;PFX-58, PFX-199;;QAP-2109;;"On a FE, open 3 tiles :
AUD/USD Spot, GBP/USD Spot,AUD/GBP Spot";AUD/CAD on quod308@mercury;Tiles open and pricing;;
;;;;;;;;;;;;;;;Check cross through USD;;Cross through USD displayed and pricing;;
;;;;;;;;;;;;;;;Take a snapshot to study prices;;"Check that the price of the first bid / ask of cross AUD/GBP is 
corresponding to the calculation described above";;
;;;;;;;;;;;;;;;Open EUR/AUD and EUR/GBP and select cross through EUR;;EUR/AUD and EUR/GBP pricing;;
;;;;;;;;;;;;;;;Take a snapshot and study prices;;"Check that the price of the first bid / ask of cross AUD/GBP is 
corresponding to the calculation described above";;
;;;;;;;;;;;;;;;Select Cross Eur and Cross USD;;Both prices displayed;;
;;;;;;;;;;;;;;;Untick EUR;;Prices displayed only for USD;;
;;;;;;;;;;;;;;;Untick USD;;No cross displayed anymore;;
;;;;;;;;;;;;;;;Tick EUR;;Cross displayed on EUR;;
QAP-T2874;Cross calculation when DirectQuotation 1 is true and DirectQuotation 2 is true;Manual;;"* If DirectQuotation1 is true and DirectQuotation2 is true

Curr1/Curr2[BrknDate]Bid = 
(PrimCurr/Curr2[BrknDate]Bid)/(PrimCurr/Curr1[BknDate]Offer)

 

 Curr1/Curr2[BrknDate]Offer = 
(PrimCurr/Curr2[BrknDate]Offer)/(PrimCurr/Curr1[BknDate]Bid)

 

Case of JPY/CHF cross through USD

 

Having the following data :

USD/JPY : Bid = 106.961 Offer = 106.870

USD/CHF : Bid = 0.99210 Offer = 0.99122

 

JPY/CHF :

Bid = 106.961 / 0.99122 = 107.908

Offer = 106.870 / 0.99120 = 107.818


To get DirectQuotation 1 is true and DirectQuotation 2 you need to check 
via Admin in tab *Feature* select *Cross Through USD* and start ITK";/PFX/FX_Synthetic;High - Must Have;FX_Synthetic_cross;FXregression, UAQA;lzaharia;;PFX-212, PFX-199;;QAP-2108;;"On a FE, open 3 tiles :
NOK/SEK Spot, USD/SEK Spot, USD/NOK Spot";NOK/SEK on quod308@mercury;Tiles open and pricing;;
;;;;;;;;;;;;;;;"On the NOK/SEK right mouse click and select Filter Synthetic combinations 
=> USD and select one common venue (CITI for example) for all tile";;Tiles open and pricing;;
;;;;;;;;;;;;;;;Take a snapshot of these 4 tiles;;"Check that the price of the first bid / ask of cross EUR/CHF is 
corresponding to the calculation described above";;
QAP-T2875;Cross calculation when DirectQuotation 1 is false and DirectQuotation 2 is true;Manual;;"* If DirectQuotation1 is false and DirectQuotation2 is true:

Curr1/Curr2[BrkenDate]Bid = PrimCurr/Curr2[BrkenDate]Bid * 
Curr1/PrimCurr[BrkenDate]Bid

 

Curr1/Curr2[BrknDate]_~bidQty~_ = min(PrimCurr/Curr2[BrknDate]_~bidQty~_, 
Curr1/PrimCurr[BrknDate]_~bidQty~_)

 

Curr1/Curr2[BrknDate]_~offerQty~_ = 
min(PrimCurr/Curr2[BrknDate]_~offerQty~_, 
Curr1/PrimCurr[BrknDate]_~offerQty~_)

 

 

Case of EUR/CHF cross through USD

 

Having the following data :

EUR/USD : Bid = 1.09934 Offer = 1.09867

USD/CHF : Bid = 0.99410 Offer = 0.99080

 

EUR/CHF :

Bid = 1.09934 * 0.99410 = 1.09285

Offer = 1.09867 * 0.99080 = 1.10887";/PFX/FX_Synthetic;High - Must Have;FX_Synthetic_cross;FXregression;lzaharia;;PFX-212, PFX-199, PFX-3734;;QAP-2107;;"On a FE, open 4 tiles :
EUR/USD SPOT, EUR/CHF SPO Cross usd unchecked, EUR/CHF SPO Cross usd 
checked, USD/CHF SPO";GBP/JPY thought USD on quod308@mercury;Tiles open and pricing;;
;;;;;;;;;;;;;;;Take a snapshot of these 4 tiles;;"Check that the price of the first bid / ask of cross EUR/CHF is 
corresponding to the calculation described above";;
QAP-T2876;FX MM RFQ : Check that RFQ swap/NDS rejected on non-prepared currency pair.;Specified;;"Documentation 
link [https://support.quodfinancial.com/confluence/download/attachments/69206049/Quod_FunctionalAnalysis_Quoting.docx]. 
9.6.8, 9.6.9.

 

FIX 360T 
QuoteRequest: FIX.4.4|9=260|35=R|34=2|49=360T_RFQ_TEST|52=20191008-07:25:58.475|56=QUODFIN_RFQ_TEST|131=4576556356|7070=20191010|146=1|55=EUR/USD|537=1|54=1|38=1000000|64=20191017|193=20191024|192=1000000|15=EUR|1=MMCLIENT4|40=D|126=20191008-07:26:28.474|553=MMCLIENT4|7071=FX-STD|7074=Y|10=011|

STANDARD
{code:java}
< 
8=FIXT.1.1|9=267|35=R|49=QUOD5|56=QUODFX_UAT|34=7|52=20210415-06:39:49|131=111333423|146=1|55=EUR/XXX|167=FXSWAP|54=2|38=1000000|64=20210419|15=EUR|1=CLIENT1|555=2|600=EUR/USD|609=FXFWD|624=2|587=W1|588=20210426|685=1000000|600=EUR/USD|609=FXFWD|624=1|587=W2|588=20210503|685=1000000|10=031|
{code}


 

should be valid, documentation (section 
7.1.10). [https://support.quodfinancial.com/confluence/display/DVPT/360T+RFQ+MM+Fhometer+tester?preview=%2F113672658%2F113672769%2F360T-RFQ_FIX_MarketMaker_v1.13.0.pdf]


ORS
{code:java}
2021-03-18 15:40:25.786033027 QUOD.ORS [18142] INFO cache 
(RecordCache.cpp:372) - inserting in cache and database OrdRejected={ 
OrdRejectedID=1414900009227 CreationTime=2021-Mar-18 15:40:25.786026884 
MsgStr=""certified UM message {MessageType=""Fix_QuoteRequest"" Body=<266-byte 
sequence> qseq=78953}"" MsgByte=<330-byte sequence> 
SendSubject=""QUOD.ORS.FIX"" Reason=""ErrorCD: [QUOD-11620] - ErrorLevel: 
[Error] - ErrorMsg: [Unknown instrument]"" MessageName=""Order_QuoteRequest"", 
no revision }

{code}";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXMM, FXregression;;;PFX-143;;QAP-2106;;Send swap RFQ via FIX;"CurrencyPair = any un-prepared Currency Pair
ClientTier = GENERIC
AccountGroup = MMCLIENT1";Quote response should be Rejected;;
;;;;;;;;;;;;;;;Check FE Quote Book;;Quote should be created with Rejected status;;
QAP-T2877;FX MM RFQ : Check full RFQ NDS swap workflow on Sell side and Quote currency (SPOT/FWD);Automated;;"Documentation 
link [https://support.quodfinancial.com/confluence/download/attachments/69206049/Quod_FunctionalAnalysis_Quoting.docx]. 
9.6.8, 9.6.9.

 

*35=R*
{code:java}
8=FIXT.1.1|9=262|35=R|34=2988|49=QUOD9|52=20210802-12:27:19.283|56=QUODFX_UAT|131=380176992|146=1|55=USD/PHP|167=FXNDS|54=2|38=2964982|15=PHP|1=Iridium1|555=2|600=USD/PHP|609=FXSPOT|624=1|685=2964982|587=0|588=20210803|600=USD/PHP|609=FXNDF|624=2|685=2964982|587=W1|588=20210810|10=107|
{code}
 *35=S*
{code:java}
8=FIXT.1.1|9=481|35=S|34=3197|49=QUODFX_UAT|52=20210802-12:27:19.306|56=QUOD9|1128=9|15=PHP|54=2|55=USD/PHP|117=01210802122719939001|131=380176992|133=0.00001|135=2964982|167=FXNDS|188=1.1815|190=1.1815|460=4|537=1|555=2|600=USD/PHP|602=USD/PHP|603=8|616=XQFX|624=1|685=2964982|587=0|588=20210803|681=1.1815|684=1.1815|600=USD/PHP|602=USD/PHP|603=8|611=20210809|616=XQFX|624=2|685=2964982|587=W1|588=20210810|681=1.18154|684=1.18151|1067=0.00004|1068=0.00001|1066=0.00001|1166=01210802122719939001|10=151|
{code}
*35=AB*
{code:java}
8=FIXT.1.1|9=279|35=AB|34=2989|49=QUOD9|52=20210802-12:27:20.553|56=QUODFX_UAT|1=Iridium1|11=380176991|38=2964982|40=D|54=2|55=USD/PHP|59=4|60=20210802-12:27:18.000|117=01210802122719939001|167=FXNDS|460=4|555=2|600=USD/PHP|609=FXSPOT|587=0|588=20210803|600=USD/PHP|609=FXNDF|587=W1|588=20210810|10=116|
{code}
*35=8*
{code:java}
8=FIXT.1.1|9=695|35=8|34=3199|49=QUODFX_UAT|52=20210802-12:27:20.582|56=QUOD9|1128=9|1=Iridium1_1|6=0.00001|11=380176991|14=2964982|15=PHP|17=EX1210802122720112001|21=1|22=8|31=0.00001|32=2964982|37=MO1210802122720099001|38=2964982|39=2|40=D|48=USD/PHP|54=2|55=USD/PHP|59=4|60=20210802-12:27:20.570|75=20210802|100=XQFX|120=USD|150=F|151=0|167=FXNDS|194=1.1815|207=XQFX|381=29.65|453=1|448=gtwquod9|447=D|452=36|460=4|528=A|555=2|600=USD/PHP|602=USD/PHP|603=8|609=FXSPOT|616=XQFX|624=1|685=2964982|587=0|588=20210803|637=1.1815|1418=2964982|600=USD/PHP|602=USD/PHP|603=8|609=FXNDF|611=20210809|616=XQFX|624=2|685=2964982|587=W1|588=20210810|637=1.18151|1073=0.00001|1418=2964982|854=0|1071=0.00001|5055=20210803|10=163|
{code}
 

should be valid, documentation (section 
7.1.10). [https://support.quodfinancial.com/confluence/display/DVPT/360T+RFQ+MM+Fhometer+tester?preview=%2F113672658%2F113672769%2F360T-RFQ_FIX_MarketMaker_v1.13.0.pdf]";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXMM, FXregression, refactored_FX;;;PFX-143, PFX-3451;;QAP-2105;;"Send swap RFQ via FIX
near leg = SPOT
far leg = FWD";"CurrencyPair = USD/PHP
ClientTier = GENERIC
AccountGroup = MMCLIENT1";"Quotes should be received with:
• OfferSwapPoints = Far LegOfferPx – Near LegBidPx
• BidSpotRate
• OfferSpotRate
• Far LegOfferForwardPoints
• Far LegOfferPx = OfferSpotRate + far LegOfferForwardPoints
• Far LegOrderQty
• Near LegBidForwardPoints
• Near LegBidPx = BidSpotRate + near LegBidForwardPoints
• Near LegOrderQty";;
;;;;;;;;;;;;;;;Send NewOrderMultiLeg via FIX on received Quote;"Qty = 15M
OrdType = PreviouslyQuoted
Currency = PHP
Side = Sell";"FE Order Book status should be Filled
FIX execution report status should be Filled";;
;;;;;;;;;;;;;;;Check FE Order Book entry;;"Should be:
Qty = 15M
OrdType = PreviouslyQuoted
Currency = PHP
Side = Sell";;
;;;;;;;;;;;;;;;Check FIX execution report;;"Should be:
Qty = 15M
OrdType = PreviouslyQuoted
Currency = PHP
Side = Sell";;
QAP-T2878;FX MM RFQ : Check full RFQ NDS workflow on Sell side and Base currency (SPOT/FWD);Automated;;"Documentation 
link [https://support.quodfinancial.com/confluence/download/attachments/69206049/Quod_FunctionalAnalysis_Quoting.docx]. 
9.6.8, 9.6.9.

 

*35=R*
{code:java}
QUICKFIX: FIXT.1.1:QUODFX_UAT->QUOD5: incoming: 
8=FIXT.1.1|9=252|35=R|49=QUOD5|56=QUODFX_UAT|34=44|52=20210802-08:54:12|131=1788218910|146=1|55=USD/PHP|167=FXNDS|38=1000000|64=20210803|15=USD|1=CLIENT2|555=2|600=USD/PHP|609=FXSPOT|685=1000000|587=SPO|588=20210803|600=USD/PHP|609=FXNDF|685=1000000|587=B|588=20210810|10=150|{code}
 *35=S*
{code:java}
QUICKFIX: FIXT.1.1:QUODFX_UAT->QUOD5: outgoing: 
8=FIXT.1.1|9=522|35=S|34=57|49=QUODFX_UAT|52=20210802-08:54:34.011|56=QUOD5|1128=9|15=USD|55=USD/PHP|64=20210803|117=01210802085433897001|131=1788218910|132=0.00003|133=-0.00002|134=1000000|135=1000000|167=FXNDS|188=48.30499|190=48.30499|460=4|537=1|555=2|600=USD/PHP|602=USD/PHP|603=8|616=XQFX|685=1000000|587=0|588=20210803|681=48.30501|684=48.30501|600=USD/PHP|602=USD/PHP|603=8|611=20210809|616=XQFX|685=1000000|587=B|588=20210810|681=48.30503|684=48.305|1067=0.00002|1068=-0.00001|1065=0.00003|1066=-0.00002|1166=01210802085433897001|10=211|{code}
*35=AB*
{code:java}
QUICKFIX: FIXT.1.1:QUODFX_UAT->QUOD5: incoming: 
8=FIXT.1.1|9=290|35=AB|49=QUOD5|56=QUODFX_UAT|34=47|52=20210802-08:54:33|1=CLIENT2|11=1788218911|15=USD|38=1000000|40=D|54=2|55=USD/PHP|59=4|60=20210802-08:54:33|117=01210802085412897001|167=FXNDS|460=4|555=2|600=USD/PHP|609=FXSPOT|654=1|587=SPO|588=20210803|600=USD/PHP|609=FXNDF|654=1|587=W1|588=20210810|10=225|{code}
*35=8*
{code:java}
QUICKFIX: FIXT.1.1:QUODFX_UAT->QUOD5: outgoing: 
8=FIXT.1.1|9=749|35=8|34=58|49=QUODFX_UAT|52=20210802-08:54:34.245|56=QUOD5|1128=9|1=CLIENT2_2|6=0.00002|11=1788218911|14=1000000|15=USD|17=EX1210802085434106001|21=1|22=8|31=0.00002|32=1000000|37=MO1210802085433093001|38=1000000|39=2|40=D|48=USD/PHP|54=2|55=USD/PHP|59=4|60=20210802-08:54:34.191|64=20210803|75=20210802|100=XQFX|120=PHP|150=F|151=0|167=FXNDS|194=48.30501|207=XQFX|381=20|453=3|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod5|447=D|452=36|460=4|528=A|555=2|600=USD/PHP|602=USD/PHP|603=8|609=FXSPOT|616=XQFX|624=1|685=1000000|587=0|588=20210803|637=48.30501|1418=1000000|600=USD/PHP|602=USD/PHP|603=8|609=FXNDF|611=20210809|616=XQFX|624=2|685=1000000|587=W1|588=20210810|637=48.30503|1073=0.00002|1418=1000000|854=0|1071=0.00002|5055=20210803|10=060|{code}
should be valid, documentation (section 
7.1.10). [https://support.quodfinancial.com/confluence/display/DVPT/360T+RFQ+MM+Fhometer+tester?preview=%2F113672658%2F113672769%2F360T-RFQ_FIX_MarketMaker_v1.13.0.pdf]";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, refactored_FX;;;PFX-143, PCON-1953;;QAP-2104;;"Send swap RFQ via FIX
near leg = SPOT
far leg = FWD";"CurrencyPair = USD/PHP
ClientTier = BRONZE
AccountGroup = MMCLIENT2";"Quotes should be received with:
• BidSwapPoints = far LegBidPx – near LegOfferPx
• BidSpotRate
• OfferSpotRate
• Far LegBidForwardPoints
• Far LegBidPx = BidSpotRate + far LegBidForwardPoints
• Far LegOrderQty
• Near LegOfferForwardPoints
• Near LegOfferPx = OfferSpotRate + near LegOfferForwardPoints
• Near LegOrderQty";;
;;;;;;;;;;;;;;;Send NewOrderMultiLeg via FIX on received Quote;"Qty = 5M
OrdType = PreviouslyQuoted
Currency = USD
Side = Sell";"FE Order Book status should be Filled
FIX execution report status should be Filled";;
;;;;;;;;;;;;;;;Check FE Order Book entry;;"Should be:
Qty = 5M
OrdType = PreviouslyQuoted
Currency = USD
Side = Sell";;
;;;;;;;;;;;;;;;Check FIX execution report entry;;"Should be:
Qty = 5M
OrdType = PreviouslyQuoted
Currency = USD
Side = Sell";;
QAP-T2879;FX MM RFQ : Check full RFQ swap workflow on Buy side and Quote currency (SPOT/FWD) (fix);Automated;;"Documentation 
link [https://support.quodfinancial.com/confluence/download/attachments/69206049/Quod_FunctionalAnalysis_Quoting.docx]. 
9.6.8, 9.6.9.

 

 

should be valid, documentation (section 
7.1.10). [https://support.quodfinancial.com/confluence/display/DVPT/360T+RFQ+MM+Fhometer+tester?preview=%2F113672658%2F113672769%2F360T-RFQ_FIX_MarketMaker_v1.13.0.pdf]";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, refactored_FX;;;PFX-143;;QAP-2103;;"Send swap RFQ via FIX
near leg = SPOT
far leg = Forward";"CurrencyPair = EUR/USD
ClientTier = Palladium1
AccountGroup = Palladium1
SPOT/W1
ccy1= USD
ccy2= EUR";"Quotes should be received with:
• BidSwapPoints = far LegBidPx – near LegOfferPx
• BidSpotRate
• OfferSpotRate
• Far LegBidForwardPoints
• Far LegBidPx = BidSpotRate + far LegBidForwardPoints
• Far LegOrderQty
• Near LegOfferForwardPoints
• Near LegOfferPx = OfferSpotRate + near LegOfferForwardPoints
• Near LegOrderQty";;
;;;;;;;;;;;;;;;Send NewOrderMultiLeg via FIX on received Quote;"Qty = 1M
OrdType = PreviouslyQuoted
Currency = USD
Side = Buy";"FE Order Book status should be Filled
FIX execution report status should be Filled";;
;;;;;;;;;;;;;;;Check FE Order Book entry;NOT NECESSARY FOR TH2;"Should be:
Qty = 5M
OrdType = PreviouslyQuoted
Currency = USD
Side = Buy";;
;;;;;;;;;;;;;;;Check FIX execution report;;"Should be:
Qty = 5M
OrdType = PreviouslyQuoted
Currency = USD
Side = Buy";;
QAP-T2880;FX MM RFQ : Check full RFQ swap workflow on Buy side and Base currency (SPOT/FWD);Automated;;"Documentation 
link [https://support.quodfinancial.com/confluence/download/attachments/69206049/Quod_FunctionalAnalysis_Quoting.docx]. 
9.6.8, 9.6.9.

 
{color:#0747a6}*#1*{color}
{code:java}
8=FIXT.1.1|9=263|35=R|34=2558|49=QUOD9|52=20210730-13:00:26.955|56=QUODFX_UAT|131=260740787|146=1|55=GBP/USD|167=FXSWAP|54=1|38=1187695|15=GBP|1=Iridium1|555=2|600=GBP/USD|609=FXSPOT|624=2|685=1187695|587=0|588=20210803|600=GBP/USD|609=FXFWD|624=1|685=1187695|587=W1|588=20210810|10=118|
{code}
 
*{color:#0747a6}#2{color}*
{code:java}
8=FIXT.1.1|9=521|35=S|34=2596|49=QUODFX_UAT|52=20210730-13:00:27.000|56=QUOD9|1128=9|15=GBP|54=1|55=GBP/USD|62=20210730-13:02:26.971|117=01210730130026534001|131=260740787|133=0.0000216|135=1187695|167=FXSWAP|188=1.18151|190=1.18151|460=4|537=1|555=2|600=GBP/USD-SPO-QUODFX|602=GBP/USD|603=8|616=XQFX|624=2|685=1187695|587=0|588=20210803|681=1.18151|684=1.18151|600=EUR/USD|602=EUR/USD|603=8|616=XQFX|624=1|685=1187695|587=W1|588=20210810|681=1.1815384|684=1.1815316|1067=0.0000284|1068=0.0000216|1066=0.0000216|1166=01210730130026534001|10=052|
{code}
{color:#0747a6}*#3*{color}
 
{code:java}
8=FIXT.1.1|9=290|35=AB|34=2559|49=QUOD9|52=20210730-13:00:27.459|56=QUODFX_UAT|1=Iridium1|11=260740786|38=1187695|40=D|44=0.0000216|54=1|55=GBP/USD|59=4|60=20210730-13:00:26.000|117=01210730130026534001|167=FXSWAP|460=4|555=2|600=GBP/USD|609=FXSPOT|587=0|588=20210803|600=GBP/USD|609=W1|587=W1|588=20210810|10=222|
{code}
{color:#0747a6} {color}*{color:#0747a6}#4{color}*
{code:java}
8=FIXT.1.1|9=724|35=8|34=2598|49=QUODFX_UAT|52=20210730-13:00:27.503|56=QUOD9|1128=9|1=Iridium1_1|6=0.0000216|11=260740786|14=1187695|15=GBP|17=EX1210730130027063001|21=1|22=8|31=0.0000216|32=1187695|37=MO1210730130027069001|38=1187695|39=2|40=D|44=0.0000216|48=GBP/USD|54=1|55=GBP/USD|59=4|60=20210730-13:00:27.479|63=0|75=20210730|100=XQFX|120=USD|150=F|151=0|167=FXSWAP|194=1.18151|207=XQFX|381=25.65|453=1|448=gtwquod9|447=D|452=36|460=4|528=A|555=2|600=GBP/USD-SPO-QUODFX|602=GBP/USD|603=8|609=FXSPOT|616=XQFX|624=2|685=1187695|587=0|588=20210803|637=1.18151|1418=1187695|600=EUR/USD|602=EUR/USD|603=8|609=FXFWD|616=XQFX|624=1|685=1187695|587=W1|588=20210810|637=1.1815316|1073=0.0000216|1418=1187695|854=0|1071=0.0000216|5055=20210803|10=241|{code}

 ";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX, SWED;;;PFX-143, PCON-1725, PFX-3339, PFX-3631;;QAP-2101;;"Send swap RFQ via FIX
near leg = SPOT
far leg = FWD";"CurrencyPair = EUR/USD
ClientTier = GOLD
AccountGroup = MMCLIENT4";"Quotes should be received with:
• OfferSwapPoints = Far LegOfferPx – Near LegBidPx
• BidSpotRate
• OfferSpotRate
• Far LegOfferForwardPoints
• Far LegOfferPx = OfferSpotRate + far LegOfferForwardPoints
• Far LegOrderQty
• Near LegBidForwardPoints
• Near LegBidPx = BidSpotRate + near LegBidForwardPoints
• Near LegOrderQty";;
;;;;;;;;;;;;;;;Send NewOrderMultiLeg via FIX on received Quote;"Qty = 1M
OrdType = PreviouslyQuoted
Currency = EUR
Side = Buy";"FE Order Book status should be Filled
FIX execution report status should be Filled";;
;;;;;;;;;;;;;;;Check FIX execution report;;"Should be:
Qty = 1M
OrdType = PreviouslyQuoted
Currency = EUR
Side = Buy";;
;;;;;;;;;;;;;;;Check FE Order Book entry;;"Should be:
Qty = 1M
OrdType = PreviouslyQuoted
Currency = EUR
Side = Buy
LastMkt = XQFX";;
QAP-T2881;FX Synthetic cross display : respect of price display;Specified;;"This test case focuses on following acceptance criteria from FOB-34037 :

View the same details in the top of book header as can be seen for a normal 
non synthetic currency pair (value date, aggregated top of book cumulative 
quantity, big fig, and pips for bid and ask, and top of book spread)";/PFX/FX_Synthetic;High - Must Have;FX_Synthetic_cross;FXregression, SWED;lzaharia;;PFX-67, PFX-199;;QAP-2100;;"Open 2 ESP Tiles on 2 instruments having same pxprecision, 
largenumberpxprecision, forwardpointsdivisor, ticksize,
one of currency pairs has synthetic cross allowed (for example EUR/USD and 
EUR/CHF)";GBP/AUD quod308;Tiles open;;
;;;;;;;;;;;;;;;Check display of big figures, small figures in TOB;;"Display is the same for both currency pairs : example TOB price is 1.09170
1.09 is on top, 17 in bigger character, 0 in smaller character";;
;;;;;;;;;;;;;;;Click on cross USD;;"Display is the same for crossed currency pair :
price is 1.09170
1.09 is on top, 17 in bigger character, 0 in smaller character";;
;;;;;;;;;;;;;;;Check spread;;"Spread calculated the same way on both currency pairs :
(Offer px - Bid px)* forwardpointdivisor)";;
QAP-T2882;FX Synthetic cross display;Specified;;"This test validates acceptance criteria from FOB-34037 :

_Acceptance Critiera_
* Select a synthetic currency pair from the list of available instruments 
in the FX Aggregated Rates Tile.
* View the same details in the top of book header as can be seen for a 
normal non synthetic currency pair (value date, aggregated top of book 
cumulative quantity, big fig, and pips for bid and ask, and top of book 
spread)
* View the synthetic book in the aggregated rates sub-section, such that 
venues for the currency pair traded directly on a given venue are displayed 
as usual, but for cross leg combinations, the venues are displayed using 
very short venue codes (e.g. for crossing through Currenex and Reuters it 
might be C/R, though if Currenex and Credit Suisse are both configured, the 
short code for Credit Suisse and Reuters might be CS/R).
* Since synthetic crossed rates cannot currently be executed against the 
market, the following components should be modified in the tile:
** 1-Click Toggle Button Hidden
** Top of Book pips clicking disabled (no order ticket)
** Bid/Ask buttons hidden
** VWAP sub-section still available, but the the bid/ask price buttons 
disabled
** Direct Venue Execution sub-section still available, but no values 
displayed (we have to leave this since the user can switch between 
different instruments on the tile, so it's no good removing it completely 
from the context menu since it may have already been opened for another 
directly traded currency pair)
** Full Amounts sub-section still available, but no values displayed
** Algorithms sub-section still available, but no values displayed, and ""+"" 
button hidden so no new entries can be added
** No venues or any other options listed under the context menu's sub-menus 
for ""Top of Book Venue(s)"" or ""Filter Venues""

To have the synthetic cross enabled, the listings must 
have fxcrossinstrument = 'Y', crossthroughusd = 'Y' and/or  crossthrougheur 
= 'Y' *INSTRUMENT* table

The oneclick button can be enabled from functional.config with ";/PFX/FX_Synthetic;High - Must Have;FX_Synthetic_cross;FXregression, SWED, UAQA;lzaharia;;PFX-67, PFX-199;;QAP-2099;;"From a ESP tile, choose a cross currency pair having fxcrossinstrument = 
'Y', crossthroughusd = 'Y'
Ex : EUR/GBP";"run ITK after changing in Admin !!!
(cfg = itk_settldate.xml)";Currency pair selected;;
;;;;;;;;;;;;;;;From contextual menu, Click on 'Cross through USD';;Cross through USD ticked;;
;;;;;;;;;;;;;;;Check bid / ask buttons;;Bid / ask buttons are hidden;;
;;;;;;;;;;;;;;;Click on Price to send an order;;No order entry opens (order entry disabled);;
;;;;;;;;;;;;;;;Open VWAP section;;VWAP prices displayed, but no possibility to click on price to send orders;;
;;;;;;;;;;;;;;;Open Direct Venue Execution part;;Direct Venue execution available but empty;;
;;;;;;;;;;;;;;;Open Full amount section;;Full amount section available but empty;;
;;;;;;;;;;;;;;;Open algorithm sub section;;Algorithm sub section available, but no values displayed;;
;;;;;;;;;;;;;;;Open contextual menu;;No contextual menu for TOB venue;;
;;;;;;;;;;;;;;;From contextual menu, unclick filter synthetic combinations;;"Synthetic cross no longer displayed (straight prices displayed if 
available)";;
;;;;;;;;;;;;;;;Check bid / ask buttons;;Bid / ask buttons displayed;;
;;;;;;;;;;;;;;;Click on price to send an order;;Order entry box displayed;;
;;;;;;;;;;;;;;;Open VWAP section;;"VWAP section displayed with prices in color, possibility to send an order 
by clicking on price";;
;;;;;;;;;;;;;;;Open Direct Venue Execution part;;"Prices displayed on Direct venue execution part, possibility to send orders 
from prices on this section";;
;;;;;;;;;;;;;;;Open full amount;;Price displayed, possibility to send orders;;
;;;;;;;;;;;;;;;Open algorithm subsection;;Algorithm subsection displayed, possibility to send an order;;
QAP-T2883;Delete Quantity row via WebAdmin, check row is deleted in ClientPricingTile;Specified;;"Precondition:

Open WebAdmin / FX Market Making / Client Tier.

Edit Silver tier : choose AUD/USD, Quantities, Manage and add 2 rows (Qty: 
10 000 000, Qty: 20 000 000)

 

 ";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, SWED;mdomarie;;PFX-49, PFX-1183, PFX-3704;;QAP-2098;;Open FETrading / ForEx / Client Price Tiles;;Client Pricing window is displayed;;
;;;;;;;;;;;;;;;Add panel;"AUD/USD-Spot
Silver";AUD/USD-Spot tile is displayed with 2 rows in Aggregated Rates table;;
;;;;;;;;;;;;;;;"Open WebAdmin / FX Market Making / Client Tier / AUD/USD and modify 
instrument";;modification wizard is displayed;;
;;;;;;;;;;;;;;;Select Sweepable Quantites and delete one row and save changes;;no errors appear;;
;;;;;;;;;;;;;;;Check Client Pricing Tile AUD/USD;;Row that was deleted is disappeared from client pricing tile;;
;;;;;;;;;;;;;;;Delete all rows and save changes;;ClientPricingTile is empty (without bands);;
;;;;;;;;;;;;;;;Add all rows back;;All rows are displayed with correct prices;;
QAP-T2884;FX Cross Rates Display with cross through USD;Open;;"Extract from specifications :

The remainder of this paragraph assumes that the FXCrossInstrument flag is 
set. From the synthetic crossed rates tile:
* If the crossed spot CrossThroughUSD flag is set, the user can tick the 
'Cross through USD' box. If so, the front-end:
** subscribes to the depth of the crossed spot's USDMajorPairInstrID1 
instrument, on all the venues that provide a market depth.
** Aggregates these books, sorting them by price. It constitutes 
USDMajorPairInstrID1 aggregated depth, called USDMajor1 depth hereunder. 
This depth is not limited.
** subscribes to the depth of the crossed spot's USDMajorPairInstrID2 
instrument, on all the venues that provide a market depth.
** Aggregates these books, sorting them by price. It constitutes 
MajorPairInstrID2 aggregated depth, called USDMajor2 depth hereunder. This 
depth is not limited.
** For each level N of Major1 and Major2 depths, until whichever major 
depth runs out of liquidity, or one of the above configured limits is 
reached:
*** Depending on the crossed spot's USDMajorPairInstrID1, 
USDDirectQuotation1, USDMajorPairInstrID2 and USDDirectQuotation2, compute 
the cross BidPxN, OfferPxN, BidSizeN and OfferSizeN, as per paragraph 
_2.2.2_.
** This constitutes the cross depth through USD.

h3. 1.1.1     Cross example
* For instance, GBP/CAD spot requires to subscribe to the depths of 
MajorPairInstrID1 = GBP/USD spot and MajorPairInstrID2 = USD/CAD SpotNext 
forward on all the whitelisted venues. In one hand, the GBP/USD spot depths 
are aggregated, as follows.

 
|GBP/USD|
|Bid|Offer|
|Venue|Qty|Price|Price|Qty|Venue|
|EBS|2|1.2131|1.2134|5|RTS|
|RTS|4|1.2130|1.2134|1|CNX|
| | | |1.2135|3|FXAll|

 

So are the USD/CAD SN depths:
|USD/CAD SN|
|Bid|Offer|
|Venue|Qty|Price|Price|Qty|Venue|
|EBS|4|1.3274|1.3278|1|EBS|
|CNX|4|1.3172|1.3279|3|CNX|
| | | | | | |

 

In GBP/CAD spot, DirectQuotation1 is false and DirectQuotation2 is true, 
which according to paragraph 4.2.2.2, leads to the following formulas, at 
each level:

GBP/CAD~bid~ = USD/CAD-SN~bid~ * GBP/USD~bid~

Qty (GBP/CAD~bid~) = min (Qty (USD/CAD-SN~bid~), Qty (GBP/USD~bid~))

 

GBP/CAD~offer~ = USD/CAD-SN~offer~ * GBP/USD~offer~

Qty (GBP/CAD~offer~) = min (Qty (USD/CAD-SN~offer~), Qty (GBP/USD~offer~))

 

Any unused quantity on one side is reused at the same price to compute the 
next crossed level quantity.

 

The first level of the GBP/CAD through USD depth is then:

 
|*GBP/CAD level 1*|
|Bid|Offer|
|Venue|Qty|Price|Price|Qty|Venue|
|E/E|2|1.610269|1.611115|1|R/E|
| | | | | | |

 

Leftovers of the major pairs are then:

 
|GBP/USD|
|Bid|Offer|
|Venue|Qty|Price|Price|Qty|Venue|
|RTS|4|1.2130|1.2134|4|RTS|
| | | |1.2134|1|CNX|
| | | |1.2135|3|FXAll|

|USD/CAD SN|
|Bid|Offer|
|Venue|Qty|Price|Price|Qty|Venue|
|EBS|2|1.3274|1.3279|3|CNX|
|CNX|4|1.3172| | | |
| | | | | | |

 

The second level of the crossed depth is then:

 
|*GBP/CAD level 2*|
|Bid|Offer|
|Venue|Qty|Price|Price|Qty|Venue|
|E/E|2|1.610269|1.611115|1|R/E|
|R/E|2|1.610136|1.611274|3|R/C|

 

Leftovers of the major pairs are then:

 
|GBP/USD|
|Bid|Offer|
|Venue|Qty|Price|Price|Qty|Venue|
|RTS|2|1.2130|1.2134|1|RTS|
| | | |1.2134|1|CNX|
| | | |1.2135|3|FXAll|

 
|USD/CAD SN|
|Bid|Offer|
|Venue|Qty|Price|Price|Qty|Venue|
|CNX|4|1.3172| | | |
| | | | | | |
| | | | | | |

 

Finally, only the bid side of the third crossed level can be computed:

 
|*GBP/CAD level 3*|
|Bid|Offer|
|Venue|Qty|Price|Price|Qty|Venue|
|E/E|2|1.610269|1.611115|1|R/E|
|R/E|2|1.610136|1.611274|3|R/C|
|R/C|2|1.597764| | | |";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression;lzaharia;;;;QAP-2096;;"From AdminFE set ""cross through USD""";;"FXCrossInstrument flag set
cross through USD is set";;
;;;;;;;;;;;;;;;From ESP tile, select GBP/CAD spot;;GBP/CAD selected;;
;;;;;;;;;;;;;;;Tick on 'cross through USD';;"Cross through USD ticked
Subscription sent to BE";;
;;;;;;;;;;;;;;;"FE subscribes marketdata from BE on 3 currency pairs : GBP/CAD spot, 
GBP/USD spot, USD/CAD spot next";;"Check result of market data display on FE : the calculation of cross should 
be as expected in description";;
QAP-T2885;Workflow of previously quoted order negative case (incorrect quoteID);Automated;;" 

 

This test case validates acceptance criteria from FOB-34172
* Client orders in response to RFQs may be submitted and acknowledged. This 
can be validated either through the Client Quote Request panel 
(see FOB-34101) in the trading FE or through the use of a separate trading 
interface used to simulate client activity (see FOB-34104) or through any 
other possibly temporary means engineering may provide if the other methods 
are not yet completed.
* Confirm that orders sent in response to RFQs are accepted and fully 
filled or rejected according to the specified validation checks.

The purpose of this test is to check rejects in case of incorrect quoteID 
of order

 ";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;lzaharia;;PFX-168;;QAP-2092;;Client sends request for quotes;;Quote received;;
;;;;;;;;;;;;;;;"Client send order with clientquoteId and ordtype = previously quoted
and clientQuoteID
different than quote";;"Order received by ORS
ORS checks last quote and enrichs order
QS check QuoteID (must be existing and alive)";;
;;;;;;;;;;;;;;;ORS rejects the order;;"ORS rejects the order and sends back a message to FIX /FE indicating empty 
book or similar message";;
;;;;;;;;;;;;;;;FE see reject;;Order book order changes to status Rejected;;
;;;;;;;;;;;;;;;FIX see reject;;Reject message sent to FIX;;
QAP-T2886;Order previously quoted on for NDF;Automated;;"This test case validates acceptance criteria from FOB-34172
* Client orders in response to RFQs may be submitted and acknowledged. This 
can be validated either through the Client Quote Request panel 
(see FOB-34101) in the trading FE or through the use of a separate trading 
interface used to simulate client activity (see FOB-34104) or through any 
other possibly temporary means engineering may provide if the other methods 
are not yet completed.
* Confirm that orders sent in response to RFQs are accepted and fully 
filled or rejected according to the specified validation checks.

*{color:#0747a6}#1{color}*
{code:java}
8=FIXT.1.1|9=164|35=R|34=1852|49=QUOD9|52=20210730-12:03:13.826|56=QUODFX_UAT|131=934330182|146=1|55=USD/PHP|167=FXNDF|537=1|54=1|38=1000000|40=D|63=W1|64=20210809|15=USD|1=Iridium1|10=048|
{code}
*{color:#0747a6}#2{color}*
{code:java}
8=FIXT.1.1|9=274|35=S|34=1863|49=QUODFX_UAT|52=20210730-12:03:14.234|56=QUOD9|1128=9|15=USD|54=1|55=USD/PHP|62=20210730-12:05:14.141|63=W1|64=20210809|117=01210730120314534001|131=934330182|133=1.18161|135=1000000|167=FXNDF|190=1.1816|191=0.00001|537=1|541=20210805|1166=01210730120314534001|10=129|
{code}
*{color:#0747a6}#3{color}*
{code:java}
8=FIXT.1.1|9=228|35=D|34=1853|49=QUOD9|52=20210730-12:03:15.811|56=QUODFX_UAT|1=Iridium1|11=934330181|15=USD|21=1|38=1000000|40=D|44=1.18161|54=1|55=USD/PHP|59=4|60=20210730-12:03:13.000|63=W1|64=20210809|117=01210730120314534001|167=FXNDF|460=4|10=017|/35
{code}
*{color:#0747a6}#4{color}*
{code:java}
8=FIXT.1.1|9=476|35=8|34=1865|49=QUODFX_UAT|52=20210730-12:03:18.113|56=QUOD9|1128=9|1=Iridium1_1|6=1.18161|11=934330181|14=1000000|15=USD|17=EX1210730120316063001|21=1|22=8|31=1.18161|32=1000000|37=MO1210730120316069001|38=1000000|39=2|40=D|44=1.18161|48=USD/PHP|54=1|55=USD/PHP|59=4|60=20210730-12:03:16.842|63=W1|64=20210809|75=20210730|100=XQFX|120=PHP|150=F|151=0|167=FXNDF|194=1.1816|195=0.00001|207=XQFX|381=1181610|453=1|448=gtwquod9|447=D|452=36|528=A|541=20210806|854=0|5055=20210802|10=186|
{code}";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;lzaharia;;PFX-168, PFX-739;;QAP-2091;;"From FE client / 360T /minifix, send a RFQ qty 1000000 to have quotes 
published on NDF currency pair";"USD/PHP 1W
quod308
#1
#2";Quotes sent to client;;
;;;;;;;;;;;;;;;Send order in response of RFQ;#3;"Order received by BE and validated :
Validation of quoteId
Validation of accountgroup
Validation of price";;
;;;;;;;;;;;;;;;Order executed;#4;Execution contains price, forward points, spot price, quantity, fixing date;;
QAP-T2887;Order previously quoted on forward order (fix);Automated;;"This test case validates acceptance criteria from FOB-34172
* Client orders in response to RFQs may be submitted and acknowledged. This 
can be validated either through the Client Quote Request panel 
(see FOB-34101) in the trading FE or through the use of a separate trading 
interface used to simulate client activity (see FOB-34104) or through any 
other possibly temporary means engineering may provide if the other methods 
are not yet completed.
* Confirm that orders sent in response to RFQs are accepted and fully 
filled or rejected according to the specified validation checks.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;lzaharia;;PFX-168;;QAP-2090;;"From FE client / 360T /minifix, send a RFQ qty 1000000 to have quotes 
published on spot currency pair (for example EUR/USD 3W)";;Quotes sent to client;;
;;;;;;;;;;;;;;;Send order in response of RFQ;;"Order received by BE and validated :
Validation of quoteId
Validation of accountgroup
Validation of price";;
;;;;;;;;;;;;;;;Order executed;;Execution contains price, forward points, spot price, quantity;;
QAP-T2888;Order previously quoted on spot order sell side (fix);Automated;;"This test case validates acceptance criteria from FOB-34172
* Client orders in response to RFQs may be submitted and acknowledged. This 
can be validated either through the Client Quote Request panel 
(see FOB-34101) in the trading FE or through the use of a separate trading 
interface used to simulate client activity (see FOB-34104) or through any 
other possibly temporary means engineering may provide if the other methods 
are not yet completed.
* Confirm that orders sent in response to RFQs are accepted and fully 
filled or rejected according to the specified validation checks.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;lzaharia;;PFX-168;;QAP-2089;;"From FE client / 360T /minifix, send a RFQ qty 1000000 to have quotes 
published on spot currency pair (for example EUR/USD SPO)";sell side;Quotes sent to client;;
;;;;;;;;;;;;;;;Send order in response of RFQ;;"Order received by BE and validated :
Validation of quoteId
Validation of accountgroup
Validation of price";;
;;;;;;;;;;;;;;;Order executed;;"Execution contains price (spot price in some cases) quantity
Values of quoteID and clientQuoteID filled in order book";;
QAP-T2889;FOK spot orders against FX MM streaming feed rejected because of client validation;Automated;;"This test validates following acceptance criteria from FOB-34171 :
* Client orders of type Fill or Kill may be submitted and 
acknowledged. This can be validated either through the Client Pricing tiles 
(see FOB-34175 and FOB-34173) in the trading FE or through the use of a 
separate trading interface used to simulate client activity (see FOB-34104) 
or through any other possibly temporary means engineering may provide if 
the other methods are not yet completed.
* Confirm that FOK orders are accepted or rejected according to the 
specified validation checks.
* Confirm that FOK orders are either fully filled or rejected.

For this test, the correct accountgroup and tier must be set in 
configuration for the order incoming from the taker";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression, refactored_FX;lzaharia;;PFX-166;;QAP-2087;;"Taker has open interface / client FE / Minifix and sends a market data 
request on EUR/USD SPO";;Market data request received and replied;;
;;;;;;;;;;;;;;;"Taker sees market data in the FE with quantity = 1000000
Taker sends a buy order limit FOK with a price equal to best ask and 
quantity 1000000, but with an incorrect account (not set in client tier 
settings)";;"backend receives order
Check of accountgroup fails : the accountgroup is not authorized";;
;;;;;;;;;;;;;;;Order rejected;;"Ordreply sent to client / minifix / 360T with reject
Reject reason indicated in message (account not authorized or similar 
message)";;
QAP-T2890;FOK spot orders against FX MM streaming feed rejected because of price;Automated;;"This test validates following acceptance criteria from FOB-34171 :
* Client orders of type Fill or Kill may be submitted and 
acknowledged. This can be validated either through the Client Pricing tiles 
(see FOB-34175 and FOB-34173) in the trading FE or through the use of a 
separate trading interface used to simulate client activity (see FOB-34104) 
or through any other possibly temporary means engineering may provide if 
the other methods are not yet completed.
* Confirm that FOK orders are accepted or rejected according to the 
specified validation checks.
* Confirm that FOK orders are either fully filled or rejected.

For this test, the correct accountgroup and tier must be set in 
configuration for the order incoming from the taker";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX;lzaharia;;PFX-166;;QAP-2086;;"Taker has open interface / client FE / Minifix and sends a market data 
request on EUR/USD SPO";;Market data request received and replied;;
;;;;;;;;;;;;;;;"Taker sees market data in the FE with quantity = 1000000
Taker sends a buy order limit FOK with the price lower than first ask and 
quantity 1000000";;"backend receives order
Check of accountgroup
Check of quoteId (depending on the interface)";;
;;;;;;;;;;;;;;;Order open;;"Ordreply sent to client (depending on some interfaces the ordreply can be 
removed)";;
;;;;;;;;;;;;;;;"Order executed and
Order rejected";;"Order rejected, reply sent to FIX / client FE /360T with reason specified 
in message (incorrect price or similar message)";;
QAP-T2891;FOK forward orders against FX MM streaming feed fully executed;Automated;;"This test validates following acceptance criteria from FOB-34171 :
* Client orders of type Fill or Kill may be submitted and 
acknowledged. This can be validated either through the Client Pricing tiles 
(see FOB-34175 and FOB-34173) in the trading FE or through the use of a 
separate trading interface used to simulate client activity (see FOB-34104) 
or through any other possibly temporary means engineering may provide if 
the other methods are not yet completed.
* Confirm that FOK orders are accepted or rejected according to the 
specified validation checks.
* Confirm that FOK orders are either fully filled or rejected.

For this test, the correct accountgroup and tier must be set in 
configuration for the order incoming from the taker";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX;lzaharia;;PFX-166;;QAP-2085;;"Taker has open interface / client FE / Minifix and sends a market data 
request on EUR/USD 1W";;"Market data request received and replied
Taker sees market data in the FE with quantity >= 1000000";;
;;;;;;;;;;;;;;;"Taker sends a buy order limit FOK with the price equal to first ask 
quantity 1000000";;;;
;;;;;;;;;;;;;;;backend receives order;;"Check of accountgroup
Check of quoteId";;
;;;;;;;;;;;;;;;Order open;;"Ordreply sent to client (depending on some interfaces the ordreply can be 
removed)";;
;;;;;;;;;;;;;;;Order executed;;"Order fully executed and reply sent to FIX / Client FE / 360T
Execution contains price, forward points and spot price";;
QAP-T2892;FOK spot orders against FX MM eliminated because unsufficient quantity;Automated;;"This test validates following acceptance criteria from FOB-34171 :
* Client orders of type Fill or Kill may be submitted and 
acknowledged. This can be validated either through the Client Pricing tiles 
(see FOB-34175 and FOB-34173) in the trading FE or through the use of a 
separate trading interface used to simulate client activity (see FOB-34104) 
or through any other possibly temporary means engineering may provide if 
the other methods are not yet completed.
* Confirm that FOK orders are accepted or rejected according to the 
specified validation checks.
* Confirm that FOK orders are either fully filled or rejected.

For this test, the correct accountgroup and tier must be set in 
configuration for the order incoming from the taker";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression, refactored_FX;lzaharia;;PFX-166;;QAP-2084;;"Client has open interface / client FE / Minifix and sends a market data 
request on EUR/USD SPO";;Market data request received and replied;;
;;;;;;;;;;;;;;;"Taker sees market data in the FE with quantity = 1000000.
Taker sends a buy order limit FOK with the price equal to first ask 
quantity 30000000(30M)";;"backend receives order
Check of accountgroup
Check of quoteId (depending on the interface)";;
;;;;;;;;;;;;;;;Order rejected;;"Ordreply sent to client with status reject and reason like 'unsufficient 
quantity' or similar indicated in message";;
QAP-T2893;Market IOC spot orders against FX MM streaming feed fully executed (fix);Automated;;"For this test, the correct accountgroup and tier must be set in 
configuration for the order incoming from the taker

{color:#403294}*#1*{color}
{code:java}
< 
8=FIXT.1.1|9=163|35=D|49=QUOD3|56=QUODFX_UAT|34=4|52=20220222-14:50:09|1=CLIENT1|11=864322404|21=1|15=EUR|38=1000000|40=1|54=1|55=EUR/USD|59=3|60=20220222-14:50:09|63=0|167=FXSPOT|10=040| 
{code}
{code:java}
> 
8=FIXT.1.1|9=518|35=8|34=8|49=QUODFX_UAT|52=20220222-14:50:13.262|56=QUOD3|1128=9|6=1.18153|11=864322404|14=1000000|15=EUR|17=EX1220222145011584001|21=1|22=8|31=1.18153|32=1000000|37=MO1220222145010552001|38=1000000|39=2|40=1|48=EUR/USD|54=1|55=EUR/USD|59=3|60=20220222-14:50:11.161|63=0|64=20220224|75=20220222|100=XQFX|120=USD|150=F|151=0|167=FXSPOT|194=1.18153|207=XQFX|381=1181530|453=4|448=gtwquod5|447=D|452=117|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod3|447=D|452=36|2376=1011|460=4|528=A|854=0|2524=0|5055=20220224|10=250| 
{code}";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX;lzaharia;;PFX-164, PFX-3686;;QAP-2082;;Open interface / client FE / Minifix and send a market data request;EUR/USD SPOT, Gold_Day;Market data with quantity >= 1000000 received in reply;;
;;;;;;;;;;;;;;;Send a Market IOC order with the quantity = 1000000;#1;"Order is fully executed, 35=8 msg with a price equal to first ask received 
in reply";;
QAP-T2894;Limit IOC spot orders against FX MM streaming feed partially executed;Automated;;"This test validates following acceptance criteria from FOB-34170 :
* Client orders of type Immediate Or Cancel may be submitted and 
acknowledged. This can be validated either through the Client Pricing tiles 
(see FOB-34175 and FOB-34173) in the trading FE or through the use of a 
separate trading interface used to simulate client activity (see FOB-34104) 
or through any other possibly temporary means engineering may provide if 
the other methods are not yet completed.
* Confirm that IOC orders are accepted or rejected according to the 
specified validation checks.
* Confirm that IOC orders are able to be either partially or fully filled.

For this test, the correct accountgroup and tier must be set in 
configuration for the order incoming from the taker

{color:#403294}*#1*{color}
{code:java}
< 
8=FIXT.1.1|9=177|35=D|49=QUOD3|56=QUODFX_UAT|34=332|52=20220222-17:11:55|1=CLIENT1|11=864322441|21=1|15=EUR|38=10000000|40=2|44=1.18159|54=1|55=EUR/USD|59=3|60=20220222-17:11:55|63=0|167=FXSPOT|10=210|
{code}
{code:java}
> 
8=FIXT.1.1|9=532|35=8|34=398|49=QUODFX_UAT|52=20220222-17:11:54.914|56=QUOD3|1128=9|6=1.18159|11=864322441|14=8000000|15=EUR|17=EX1220222171154584001|21=1|22=8|31=1.18159|32=8000000|37=MO1220222171154552001|38=10000000|39=1|40=2|44=1.18159|48=EUR/USD|54=1|55=EUR/USD|59=3|60=20220222-17:11:54.894|63=0|64=20220224|75=20220222|100=XQFX|120=USD|150=F|151=0|167=FXSPOT|194=1.18159|207=XQFX|381=9452720|453=4|448=gtwquod5|447=D|452=117|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod3|447=D|452=36|2376=1011|460=4|528=A|854=0|2524=0|5055=20220224|10=249| 
{code}";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FX_fix, FXregression;lzaharia;;PFX-164;;QAP-2081;;Open interface / client FE / Minifix and send a market data request;EUR/USD SPOT;Market data is received;;
;;;;;;;;;;;;;;;Send a buy order limit IOC with larger quantity than available;#1;"Order partially executed with quantity which is available for that tier and 
reply sent to FIX / Client FE / 360T
Execution contains price and same spot price in case of 360T
Price equal to first ask";;
QAP-T2895;IOC spot orders against FX MM streaming feed rejected because of client validation;Automated;;"This test validates following acceptance criteria from FOB-34170 :
* Client orders of type Immediate Or Cancel may be submitted and 
acknowledged. This can be validated either through the Client Pricing tiles 
(see FOB-34175 and FOB-34173) in the trading FE or through the use of a 
separate trading interface used to simulate client activity (see FOB-34104) 
or through any other possibly temporary means engineering may provide if 
the other methods are not yet completed.
* Confirm that IOC orders are accepted or rejected according to the 
specified validation checks.
* Confirm that IOC orders are able to be either partially or fully filled.

For this test, the correct accountgroup and tier must be set in 
configuration for the order incoming from the taker";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX;lzaharia;;;;QAP-2080;;"Taker has open interface / client FE / Minifix and sends a market data 
request on EUR/USD SPO";;Market data request received and replied;;
;;;;;;;;;;;;;;;Taker sees market data in the FE with quantity = 1000000;;;;
;;;;;;;;;;;;;;;"Taker sends a buy order limit IOC with a price equal to best ask and 
quantity 1000000, but with an incorrect account (not set in client tier 
settings)";;"backend receives order
Check of accountgroup fails : the accountgroup is not authorized";;
;;;;;;;;;;;;;;;Order rejected;;"Ordreply sent to client / minifix / 360T with reject
Reject reason indicated in message (account not authorized or similar 
message)";;
QAP-T2896;Limit IOC spot orders against FX MM streaming feed rejected because of price;Automated;;"This test validates following acceptance criteria from FOB-34170 :
* Client orders of type Immediate Or Cancel may be submitted and 
acknowledged. This can be validated either through the Client Pricing tiles 
(see FOB-34175 and FOB-34173) in the trading FE or through the use of a 
separate trading interface used to simulate client activity (see FOB-34104) 
or through any other possibly temporary means engineering may provide if 
the other methods are not yet completed.
* Confirm that IOC orders are accepted or rejected according to the 
specified validation checks.
* Confirm that IOC orders are able to be either partially or fully filled.

For this test, the correct accountgroup and tier must be set in 
configuration for the order incoming from the taker

{color:#403294}*#1*{color}
{code:java}
< 
8=FIXT.1.1|9=183|35=D|49=QUOD3|56=QUODFX_UAT|34=90|52=20220222-15:28:29|1=CLIENT1|11=864322412|21=1|15=EUR|38=1000000|40=2|44=1.1|54=1|55=EUR/USD|59=3|60=20220222-15:28:29|63=0|167=FXSPOT|423=3|460=4|10=187| 
{code}
{code:java}
> 
8=FIXT.1.1|9=481|35=8|34=104|49=QUODFX_UAT|52=20220222-15:28:29.433|56=QUOD3|1128=9|6=0|11=864322412|14=0|15=EUR|17=58400000004|21=1|22=8|31=0|32=0|37=MO1220222152829552001|38=1000000|39=8|40=2|44=1.1|48=EUR/USD|54=1|55=EUR/USD|58=order 
price (1.1) lower than offer 
(1.18153)|59=3|60=20220222-15:28:29.418|63=0|64=20220224|120=USD|150=8|151=0|167=FXSPOT|207=XQFX|378=4|453=4|448=gtwquod5|447=D|452=117|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod3|447=D|452=36|2376=1011|460=4|528=A|854=0|10=107|
{code}";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX;lzaharia;;PFX-164;;QAP-2079;;Open interface / client FE / Minifix and send a market data request;EUR/USD SPOT, qty - 1000000;Market data is received with quantity = 1000000;;
;;;;;;;;;;;;;;;"Send a buy order limit IOC with the price lower than first ask and quantity 
1000000";#1;"Order rejected, reply sent to FIX / client FE /360T with reason specified 
in message (incorrect price or similar message)";;
QAP-T2897;Limit IOC forward orders against FX MM streaming feed fully executed;Automated;;"This test validates following acceptance criteria from FOB-34170 :
* Client orders of type Immediate Or Cancel may be submitted and 
acknowledged. This can be validated either through the Client Pricing tiles 
(see FOB-34175 and FOB-34173) in the trading FE or through the use of a 
separate trading interface used to simulate client activity (see FOB-34104) 
or through any other possibly temporary means engineering may provide if 
the other methods are not yet completed.
* Confirm that IOC orders are accepted or rejected according to the 
specified validation checks.
* Confirm that IOC orders are able to be either partially or fully filled.

For this test, the correct accountgroup and tier must be set in 
configuration for the order incoming from the taker

{color:#403294}*#1*{color}
{code:java}
< 
8=FIXT.1.1|9=176|35=D|49=QUOD3|56=QUODFX_UAT|34=256|52=20220222-16:42:50|1=CLIENT1|11=864322426|21=1|15=EUR|38=1000000|40=2|44=2.18189|54=1|55=EUR/GBP|59=3|60=20220222-16:42:50|63=W1|167=FXFWD|10=137| 
{code}
{code:java}
> 
8=FIXT.1.1|9=543|35=8|34=305|49=QUODFX_UAT|52=20220222-16:42:50.148|56=QUOD3|1128=9|6=2.18189|11=864322426|14=1000000|15=EUR|17=EX1220222164250584001|21=1|22=8|31=2.18189|32=1000000|37=MO1220222164250552001|38=1000000|39=2|40=2|44=2.18189|48=EUR/GBP|54=1|55=EUR/GBP|59=3|60=20220222-16:42:50.134|63=W1|64=20220303|75=20220222|100=XQFX|120=GBP|150=F|151=0|167=FXFWD|194=2.18187|195=0.00002|207=XQFX|381=2181890|453=4|448=gtwquod5|447=D|452=117|448=QUOD|447=D|452=1|448=QA1|447=D|452=12|448=gtwquod3|447=D|452=36|2376=1011|460=4|528=A|854=0|2524=0|5055=20220224|10=147|
{code}";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX, UAQA;lzaharia;;PFX-164;;QAP-2078;;Open interface / client FE / Minifix and send a market data request;EUR/USD 1W;"Market data request received and replied
Taker sees market data in the FE with quantity >= 1000000";;
;;;;;;;;;;;;;;;"Send a buy order limit IOC with the price equal to the first ask quantity 
1000000";#1;"Order fully executed and reply sent to FIX / Client FE / 360T
Execution contains price, forward points and spot price";;
;;;;;;;;;;;;;;;"Open ""Trades"" window";NOT NECESSARY FOR TH2;"Check that ExecID is the same as the filled order has in ""Order Book""";;
QAP-T2898;Market IOC forward orders against FX MM streaming feed partially executed (UI);Automated;;This test validates following acceptance criteria from PFX-164 :;/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX;lzaharia;;PFX-164, PFX-3686;;QAP-2077;;Open Client Pricing Tile with an instrument and see prices;EUR/USD 1W, qty = 10 000 000;"The instrument is open, prices and market data with quantity < 10 000 000 
is visible";;
;;;;;;;;;;;;;;;Send a buy order market IOC with the qty more than available;;Order is partially executed;;
;;;;;;;;;;;;;;;Open the Order Book;;"Partially executed order is present in the Order Book. Qty = 10 000 000, 
TIF = IOC";;
QAP-T2899;Recovery of saved client pricing tile with all settings;Specified;;"This test validates following criteria from FOB-34082 :

Current layout and state (apart from system configured settings) of the 
tile are saved and recovered as part of the user's saved workspace layout 
settings.

 ";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, SWED;lzaharia;;PFX-49;;QAP-2073;;"Open FE with 4 pricing tiles :
EUR/USD SPOT BRONZE
USD/CHF 1W GOLD
USD/INR 1M SILVER
USD/CAD 2M GOLD";;FE open with 4 pricing tiles, prices displayed;;
;;;;;;;;;;;;;;;Save workspace;;"workspace saved
take a screenshot of workspace";;
;;;;;;;;;;;;;;;Close FE, restart FE;;FE restarted;;
;;;;;;;;;;;;;;;Workspace opened;;Check recovery : tiles opened as before recovery (compare with screenshot);;
QAP-T2900;Display of pricing tile bands;Manual;;"Look at Screenshot. Colors are manage from Options in FE. Bid and Ask 
prices aren't necessary red and green (PFX-242).

This test validates following acceptance criteria from FOB-34082 :
* The price ladder for the selected client tier / currency pair / tenor is 
displayed as a sub-section of the tile, including each volume band's 
bid/ask client published price, client published quantity, configured 
quantity (which can be different from what is published for certain core 
pricing strategies), the base (configured) margin, and the effective margin 
(which can be different if modified by features like min/max spread or 
manual/automated margin level controls).";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression, SWED;lzaharia;;PFX-49;;QAP-2071;;From FE, open a pricing tile with prices published;;Pricing tile open, prices displayed;;
;;;;;;;;;;;;;;;Check bands;;"Bands display following information :
- price : bid in red, offer in green, showing only last 3 digits (if the 
greater part is the same as TOB)
- qty level : displayed in millions, ordered by quantity
- base margin : as defined in ClientTierSymbTenQtyTrd
- effective margin : displayed if max / min are trespassed";;
QAP-T2901;Display of pricing tile with hidden live and default settings;Manual;;"This test case checks following criteria from FOB-34082 :
* Buttons are either displayed or hidden to toggle between configured and 
live settings as well as reset to default configured settings, according 
to FOB-34070. If visible, when Use Defaults is selected, all live settings 
are reverted to default configured values, and when Live Settings is 
toggled, the tile switches between showing live settings with all tile 
controls enabled and showing default configured settings with all tile 
controls disabled and greyed out.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression, SWED;lzaharia;;PFX-49;;QAP-2070;;In DB.quotsettings change the settings to have default and live display off;DB: table is QuodSettings, field is FX_LiveSettings_UseDefaults_Toggle;default and live display off;;
;;;;;;;;;;;;;;;Start FE,;;FE started;;
;;;;;;;;;;;;;;;Open a pricing tile and check;;"On pricing tile, default and live buttons must be hidden, and display must 
be correct and nice";;
QAP-T2902;Display of FX Client Pricing screen TOB part for a forward instrument;Automated;;"See the attached screenshot for description of this window

The aim of this test is to check that the arrows and the spread are working 
correctly and smoothly

 

Following latest user stories, the pricing is not common for all tenors but 
must be enabled by tenor : so we need to be able to select tenor in pricing 
tile";/PFX/FX_UAQA;High - Must Have;FX_UAQA;AutomatedCodedUI, FXregression, UAQA;lzaharia;;PFX-49;;QAP-2069;;Open a MM Tile with currency pair EUR/USD 1M;;MM Tile open with prices displayed;;
;;;;;;;;;;;;;;;In TOB, check spread;;spread = (bid - ask) * 10000 on EUR/USD and USD/CHF;;
;;;;;;;;;;;;;;;"Select a line
Enter a 2 in the middle of TOB, and press <>";;Check that the ask and bid have increased by 2;;
;;;;;;;;;;;;;;;Select a line, Enter 1 in the middle of TOB and press ><;;Check that the ask and bid have decreased by 1;;
;;;;;;;;;;;;;;;"Select a line, Enter 2 and click on ""increase ask""";;Check that the ask has decreased by 2;;
;;;;;;;;;;;;;;;"Select a line, Enter 3 and click on ""decrease bid""";;Check that the bid has increased by 3;;
;;;;;;;;;;;;;;;Enter 4 and click on blue < on the left;;Check that the bid has increased and the ask has decreased by 4;;
;;;;;;;;;;;;;;;Enter 5 and click on blue > on the right;;Check that the bid has decreased and the ask has increased by 5;;
QAP-T2903;Display of manual tile after expiration / cancel;Automated;;"This test validates FOB-34103 following user story :
* After the quote is inactive (through a client accepting the quote, or the 
request being rejected, or the quote TTL expiring, or the user selecting 
""Auto-Quote""), all editable fields and controls are disabled and greyed 
out.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX, SWED;lzaharia;;;;QAP-2066;;"From minifix / client FE / 360T Interface send a RFQ with a quantity 
greater than allowed quantity";;RFQ received assign to oneself and estimate;;
;;;;;;;;;;;;;;;Publish quote, then cancel quote;;Quote canceled and RFQ terminated;;
;;;;;;;;;;;;;;;Check display of tile;;All fields editable become grey out;;
QAP-T2904;Manual quote intervention : buttons send / resend and time to live;Specified;;"This test case validates following acceptance criteria from FOB-34103 :

Before quote is sent, ""Send"" button publish a new active quote with 
specified values, after which the Time To Live field becomes read-only and 
starts to count down to expiration, the ""Send"" button remains active but is 
renamed to ""Resend"" so that the user can still update the values and click 
""Resend"" to kill the actively published quote and immediately republish a 
new active quote with the updated values, and the Time To Live field is 
reset to its original value and again starts to count down to expiration.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, SWED;lzaharia;;PFX-146;;QAP-2064;;"From minifix / client FE / 360T Interface send a RFQ with a quantity 
greater than allowed quantity";;RFQ received assign to oneself and estimate;;
;;;;;;;;;;;;;;;Click on button send;;"Quote publish, button takes the name ""resend""
TTL read only, starts to count down";;
;;;;;;;;;;;;;;;Click on resend;;"BE kills active quote and immediately republishes a new quote
TTL reset from original value and start to count down";;
;;;;;;;;;;;;;;;Click on resend one more time;;"BE kills active quote and immediately republishes a new quote
TTL reset from original value and start to count down";;
QAP-T2905;Manual handling of RFQ with the pricing tile from dealer intervention;Automated;;"This test case validates following acceptance criteria from FOB-34103 :
* Any time before or after quote is sent, ""Reject"" button is active to 
cancel any active quote response and reject the associated request.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX, SWED;lzaharia;;PFX-146;;QAP-2063;;"From minifix / client FE / 360T Interface send a RFQ with a quantity 
greater than allowed quantity";;RFQ received assign to oneself and estimate;;
;;;;;;;;;;;;;;;Check button reject;;Button reject active before quote;;
;;;;;;;;;;;;;;;Reject RFQ from button reject;;RFQ rejected;;
;;;;;;;;;;;;;;;"From minifix / client FE / 360T Interface send a RFQ with a quantity 
greater than allowed quantity";;RFQ received assign to oneself and estimate;;
;;;;;;;;;;;;;;;Publish prices;;Prices published;;
;;;;;;;;;;;;;;;From button reject, cancel quote;;"RFQ:
Status =Canceled
Quote:
QuoteStatus=RemovedFromMarket";;
QAP-T2906;Modification of pricing tile in dealer intervention window;Automated;;"This test case is checking the following test acceptance from FOB-34103
* The user can modify the following editable values:
** Time To Live (in seconds)
** If Spot:
*** Bid / Ask Spot Prices edited using same field populated with suggested 
auto-quote values
** If Forward, based on configurable user interface option (per user) of 
""Manual Client Quote Ticket - Editable Forward Value"" of either ""Spot"" or 
""Swap Points"" (let's please discuss together when it comes time to find a 
home for this setting in the User Options):
*** If ""Spot"", bid / ask swap points are shown in read-only labels, and the 
bid / ask Spot prices can be edited using the same field populated with 
suggested auto-quote values. 
*** If ""Swap Points"", bid / ask Spot prices are shown in read-only labels, 
and the bid / ask swap points can be edited using the same field populated 
with configured swap points
** If Swap:
*** For both near and far leg, the same values as indicated above depending 
on the leg being a Spot or Forward.
*** The bid / ask swap prices edited using the same field populated with 
the calculated values.
*** If the values of the legs are edited by the user, the swap prices are 
automatically updated accordingly. If the values of the swap prices are 
edited by the user, the values of the far leg are automatically updated 
accordingly.
** Calculated read-only spread values should be displayed in all cases, but 
only between editable price fields.
* For a live quote, the Manual Quote Intervention ticket has the following 
controls:
** Buttons to modify editable prices (both bid and ask simultaneously) by a 
configured increment, including: increase/decrease bid, increase/decrease 
ask, widen spread (decrease bid and increase ask), narrow spread (increase 
bid and decrease ask), skew towards the bid (decrease bid and ask), and 
skew towards the ask (increase bid and ask). This is straight forward for 
Spot and forward quote requests, and for swaps these buttons should modify 
the far leg values (and thus the swap prices at the same time).";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, MDI, needs_refactoring_FX;lzaharia;;PFX-146;;QAP-2062;;"From minifix / client FE / 360T Interface send a RFQ with a quantity 
greater than allowed quantity";tenor = spot;RFQ received assign to oneself and estimate;;
;;;;;;;;;;;;;;;On tile, modify the time to live to 360 seconds;;Time to live modified to 360 seconds;;
;;;;;;;;;;;;;;;If spot is modifiable, spot price is modifiable;;"Modify bid or spot manually
calculated points and price modified automatically";;
;;;;;;;;;;;;;;;"Fom arrows, with spread = 0.1, modify price :
blue left arrow to modify spread to the left";;bid and ask displayed minus zero dot one pip;;
;;;;;;;;;;;;;;;"Fom arrows, with spread = 0.1, modify price :
blue right arrow to modify spread to the left";;bid and ask displayed are adding + 0.1 pip;;
;;;;;;;;;;;;;;;"Fom arrows, with spread = 0.1, modify price :
spread green <> arrow to increase spread";;bid decreased by 0.1 pip, ask increased by 0.1 pip;;
;;;;;;;;;;;;;;;"Fom arrows, with spread = 0.1, modify price :
spread red >< arrow to decrease spread";;bid increased by 0.1 pip, ask decreased by 0.1 pip;;
;;;;;;;;;;;;;;;"Fom arrows, with spread = 0.1, modify price :
on the left side click on green to increase bid";;Bid increased by 0.1 pip;;
;;;;;;;;;;;;;;;"Fom arrows, with spread = 0.1, modify price :
on the left side click on red to decrease bid";;Bid decreased by 0.1 pip;;
;;;;;;;;;;;;;;;"Fom arrows, with spread = 0.1, modify price :
on the right side click on red to decrease ask";;ask decreased by 0.1 pip;;
;;;;;;;;;;;;;;;"Fom arrows, with spread = 0.1, modify price :
on the right side click on green to increase ask";;ask increased by 0.1 pip;;
QAP-T2907;Manual quote request : sales / head of sales rights;Specified;;"This test case checks the following user stories from FOB-34103
* A normal sales person can only view their own ""assigned"" manual quote 
requests, no one else's.
* A head of desk can view anyone's (or all) ""assigned"" manual quote 
requests, but they can only modify and control a manual quote ticket if the 
request is in their own ""assigned"" pool.

 ";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression;lzaharia;;PFX-146;;QAP-2060;;"Open 2 FE : one user sales or sales dealer (user 1), one user head of sales 
or sales dealer (user 2) on the same desk";;FE open, open the window dealer intervention;;
;;;;;;;;;;;;;;;"From Minifix / 360T/Client user, send a RFQ which is greater than quantity 
allowed";;RFQ displayed in dealer intervention / unassigned in both user FE;;
;;;;;;;;;;;;;;;As user 1 (sales or sales dealer) accept the RFQ;;RFQ assigned to user 1;;
;;;;;;;;;;;;;;;As user 2 (HSD or HS), try to estimate the RFQ;;Action not permitted;;
;;;;;;;;;;;;;;;"From Minifix / 360T/Client user, send a RFQ which is greater than quantity 
allowed";;RFQ displayed in dealer intervention / unassigned in both user FE;;
;;;;;;;;;;;;;;;As user 2 (HSD) accept RFQ;;RFQ assigned to user 2;;
;;;;;;;;;;;;;;;As user 1 (S or SD) try to see the RFQ;;Not possible : RFQ is not in user 1 FE;;
QAP-T2908;Workflow of assignment / unassignment;Specified;;"This test case validate following user story from FOB-34103 :
* A normal sales person can assign ""unassigned"" manual quote requests to 
their own pool of ""assigned"" manual quote requests, but they cannot assign 
them to anyone else. They can also release any of their ""assigned"" manual 
quote requests back into the ""unassigned"" pool of requests.
* A head of desk can be assign ""unassigned"" manual quote requests to 
anyone's pool of ""assigned"" manual quote requests. They can also release 
anyone's ""assigned"" manual quote requests back into the ""unassigned"" pool 
of requests.

For this test case, 2 users (sales and head of sales, or sales dealser and 
head of sales dealers) are required on the same desk consultative";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression;lzaharia;;PFX-146;;QAP-2059;;"Open 2 FE with dealer intervention, one FE with user SD (user 1), one FE 
with user HSD (user 2)";;2 FE opened;;
;;;;;;;;;;;;;;;"From minifix / sales FE / Client interface, send RFQ with quantity greater 
than allowed quantity";;RFQ sent, displayed on unassigned part of dealer intervention on both FEs;;
;;;;;;;;;;;;;;;HSD (user 2) assigns to SD (user 1);;"RFQ not displayed anymore on unassigned, displayed on user 1 assigned RFQ.
RFQ displayed in ""All Assigned Tickets"" for user 2";;
;;;;;;;;;;;;;;;HSD unassigned RFQ previously assigned to SD (user 1);;"RFQ not displayed anymore on assigned in user 1, back to unassigned for 
user 1 and user 2";;
;;;;;;;;;;;;;;;SD (user 2) tries to assign this RFQ to someone else;;Action impossible : assignment should be only enabled for himself;;
QAP-T2909;Manual Unassigned quote request display;Specified;;"This test validates story FOB-34103, acceptance criteria :
* When a quote request is determined to not be handled through 
auto-quoting, and the quote request indicates that the client is willing to 
have the quote be manually handled, the quote request is assigned to and 
can be viewed in a pool of ""unassigned"" manual quote requests.
* The pool of ""unassigned"" manual quote requests can be viewed by all sales 
people on the desk.

To perform this test, there should be at least one user *sales or sales 
dealer* and one user *head of sales dealer* on the same desk, and this desk 
must be consultative

{quote}A normal sales person can assign ""unassigned"" manual quote requests 
to their own pool of ""assigned"" manual quote requests, but they cannot 
assign them to anyone else. They can also release any of their ""assigned"" 
manual quote requests back into the ""unassigned"" pool of requests.
A normal sales person can only view their own ""assigned"" manual quote 
requests, no one else's.{quote}";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, SWED;lzaharia;;PFX-146;;QAP-2058;;"Open 2 FE : one user sales or sales dealer (user 1), one user head of sales 
or sales dealer (user 2) on the same desk";;FE open, open the window dealer intervention;;
;;;;;;;;;;;;;;;"From client FE / Minifix / 360T Interface, send a quote request with 
quantity greater than quantity allowed";;"Quote request received in FE user 1 and user 2 in dealer intervention, part 
unassigned";;
;;;;;;;;;;;;;;;As user 1, accept the RFQ;;"RFQ accepted by user 1 : disappeared from unassigned on user 1, displayed 
on assigned from user 1
diesappeared from unassigned on user 2, displayed on all RFQ assigned in 
user 2, but not displayed on my RFQ";;
;;;;;;;;;;;;;;;As user 1, unassign the quote;;"Quote unassigned
user 1 : disappears from assigned RFQ, displayed on unassigned RFQ
user 2 : displayed again on unassigned RFQ, disappeared from all assignes 
quote requests";;
;;;;;;;;;;;;;;;As user 2, accept the RFQ;;"RFQ accepted bu user 2 :
Disappears from unassigned quote request on user 2, appears on my quotes 
and all quotes on user 2
Disappears from unassigned quote requests on user 1";;
;;;;;;;;;;;;;;;Estimate and reply the quote;;Quote replied;;
QAP-T2910;Test for validation of max quantity for RFQ with booktype Sweepable;Automated;;"This test validates user story FOB-34099 :

When a client submits a RFQ for a given quantity, the Client Pricing Engine 
validates this quantity against the configured volume band quantities for 
the given client tier and currency pair and confirms that for a sweepable 
quote book format it does not exceed the cumulative sum of all configured 
quantities, and for a tiered quote book format it does not exceed the 
largest configured quantity.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;lzaharia;;PFX-138;;QAP-2055;;"In Webadmin, go to client tier / Instrsymbol to administrate quantities
Select for example GOLD USD/JPY";NOT FOR TH2;"Check the quantities or add new quantity if needed
For example 1M - 5M - 10M";;
;;;;;;;;;;;;;;;"In client FE / Minifix / 360T Interface, send a RFQ on CCY 1 for quantity 
17M";;"Quantity greater than sum set in ClientTierInstrSymbQty
Quote is set to manual";;
;;;;;;;;;;;;;;;In sales FE check status of RFQ;;"RFQ routed to delaer intervention, not automated
1. QuoteRequest book: AutomaticQuoting =No
2. Manual DI:
request is placed in the book";;
QAP-T2911;Min spread implementation in Pricing Tile;Automated;;"This Jira is testing FOB-34106 :

If a spread is less than the minimum, half of the difference between the 
minimum and the current spread is subtracted from the bid and added to the 
ask.
* MDEntryMargin~Bid~ = MDEntryBaseMargin~Bid~ + (MinSpread – BaseSpread) / 
2
* MDEntryMargin~Offer~ = MDEntryBaseMargin~Offer~+ (MinSpread – BaseSpread) 
/ 2

 

In both of these cases, the change should be applied to the configured 
margins, not directly to the final price, so that these limit-altered 
margins can be reported to the trading FE as separate from the configured 
margins. In addition, a flag should indicate whether these margins have 
been changed due to either a minimum or maximum spread limit so that the 
trade FE can display these margin values to reflect this, possibly 
displaying the value in red.
 ";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression, needs_refactoring_FX, SWED;lzaharia;;PFX-134;;QAP-2051;;"In Webdamin, configure min / max spread for selected tier / currency pair / 
tenor
For example, GOLD EUR/USD 2W";"Min spread 2
Max spread 10";Min and max spreads created : 2 and 10;;
;;;;;;;;;;;;;;;"In webadmin, configure default margins in webadmin for the same instrument 
GOLD EUR/USD 2W";"Default bid margin : 0.2
Default offer margin : 0.3
In pips";"Default margins created :
Default bid margin : 0.2
Default offer margin : 0.3
In pips";;
;;;;;;;;;;;;;;;On pricing tile, subscribe to GOLD EUR/USD 2W;;Client tier pricing;;
;;;;;;;;;;;;;;;Check quantity bands , column base;;On base margin, the default margins are displayed (0.2 / 0.3);;
;;;;;;;;;;;;;;;Check quantity bands, column effective;;"As the min spread is greater than effective spread, the min spread applies 
:
Bid : Bid price calculated - 1 (min 2/2)
Offer : Offer price calculated + 1 (min 2/2)";;
;;;;;;;;;;;;;;;From minifix / Client FE / 360T Interface, do a RFQ on GOLD EUR/USD 2W;;Price replied reflect effective margin (not base margin);;
QAP-T2912;Max spread implementation in Pricing Tile;Automated;;"This Jira is testing FOB-34106 :

If a spread is greater than the maximum, half of the difference between the 
current spread and the maximum is added to the bid and subtracted from the 
ask.

In both of these cases, the change should be applied to the configured 
margins, not directly to the final price, so that these limit-altered 
margins can be reported to the trading FE as separate from the configured 
margins. In addition, a flag should indicate whether these margins have 
been changed due to either a minimum or maximum spread limit so that the 
trade FE can display these margin values to reflect this, possibly 
displaying the value in red.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX, SWED;lzaharia;;PFX-134;;QAP-2050;;"In Webdamin, configure min / max spread for selected tier / currency pair / 
tenor
For example,
EUR/USD 2W";"Min spread 0.1
Max spread 0.2";Min and max spreads created : 0.1 and 0.2;;
;;;;;;;;;;;;;;;"In webadmin, configure default margins in webadmin for the same instrument
EUR/USD 2W";"Default bid margin : 1
Default offer margin : 1.2
In pips";"Default margins created :
Default bid margin : 1
Default offer margin : 1.2
In pips";;
;;;;;;;;;;;;;;;On pricing tile, subscribe to GOLD EUR/USD 2W;;Client tier pricing;;
;;;;;;;;;;;;;;;Check quantity bands , column base;;On base margin, the default margins are displayed (1 / 1.2);;
;;;;;;;;;;;;;;;Check quantity bands, column effective;;"As the max spread is lower than effective spread, the max spread applies :
Bid : Bid price calculated - (min)0.1 +(max 0.2/2)
Offer : Offer price calculated + (min)0.1 +(max 0.2/2)";;
;;;;;;;;;;;;;;;From minifix / Client FE / 360T Interface, do a RFQ on GOLD EUR/USD 2W;;Price replied reflect effective margin (not base margin);;
QAP-T2913;Display of Min spread / Max spread in Pricing tile;Automated;;"This test applies to FOB-34082 and FOB-34106

Acceptance criteria :

Margins are displayed in the Price Book of the Client Pricing tile such 
that 2 separate bid/ask margin columns indicate:
* ""Base"" - the configured margin (also impacted by using the margin 
modification buttons/arrows in the tile)
* ""Effective"" - the actual margins applied to the core price (possibly the 
same as ""Base"", but also possibly altered by the min/max spread limits, in 
which case they should appear differently, maybe in red). See FOB-34082.

!prototype_FOB-34082.png!

 ";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression, refactored_FX, SWED;lzaharia;;PFX-134, PFX-49;;QAP-2049;;"Having set min spread and max sprad in webadmin, start FE and open a client 
pricing tile on a selected currency pair / Tier / Tenor";;Pricing tile open, currency pair selected and pricing;;
;;;;;;;;;;;;;;;Check quantity bands;;"check at each side of quantity bands : 2 columns are displayed indicating 
Base margin / Effective margin or +
The margins displayed on each column are equal by default (if the margin 
does not reach min spread or max spread)";;
QAP-T2914;Check implementation of pricing method by QS following modification in webadmin;Open;;"This test is checking user story FOB-34088
* The configured client tier and currency pair and tenor (Spot in this 
case) is available to be selected in the FX Client Pricing tile, showing 
top of book and full price book calculated using this Core Pricing method 
(Sweepable VWAPSpeedOptimized Spot). See FOB-34082.

This test must be done using prepared internal market data, to check if the 
pricing method used is correct";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression;lzaharia;;PFX-122;;QAP-2041;;From webadmin, set the pricing method to VWAP Price optimized;;Pricing method validated and correctly applied;;
;;;;;;;;;;;;;;;Restart QS;;QS restarted;;
;;;;;;;;;;;;;;;From Pricing tile, do a subscription on EUR/USD spot;;"Use market data prepared for QAP-2014 (Calculation 3 price bands sweepable 
by QS using optimized price VWAP style)
Check that the price is displayed as expected in test case";;
;;;;;;;;;;;;;;;From webadmin, set the pricing method to VWAP Speed optimized;;Pricing method validated and correctly applied;;
;;;;;;;;;;;;;;;Restart QS;;QS restarted;;
;;;;;;;;;;;;;;;From Pricing tile, do a subscription on EUR/USD spot;;"Use marketdata prepared for QAP-2012 (Calculation 3 price bands sweepable 
by QS using optimized speed VWAP style)
Check that the price is displayed as expected in test case";;
QAP-T2915;Spot calculation price when the margins are in bips;Automated;;"The QS can publish all-in forward prices over FIX or to front-ends or to 
backend components. Forward and NDF initials and updates contain 
BidForwardPoints, OfferForwardPoints, BidSpotRate or OfferSpotRate, in 
addition to the usual BidPx and OfferPx. The trivial relationship between 
them is:

BidPx = BidSpotRate + BidForwardPoints rounded down to the SBP forward/NDF 
listing tick size.

OfferPx = OfferSpotRate + OfferForwardPoints rounded up to the SBP 
forward/NDF listing tick size.

BidForwardPoints and OfferForwardPoints are configured in ClientTierFXTenor 
table and are almost constant.

 

From user story FOB-34095 we have :

+Basis Points+

Expressed to one decimal place of precision, using an increment of 0.1 bp.

1 ""basis point"" (aka bp, pronounced ""bip"", or plural bps, pronounced 
""bips""), is equal to 0.01%. This provides a convenient way of expressing 
values using further precision than just using a ""percentage"" value.

Margins expressed in basis points are applied to Spot and forward prices in 
exactly the same way as described above for margins expressed in 
percentage, just using further precision.

 

+Percentage+

Expressed to one decimal place of precision, using an increment of 0.1%.

Margins expressed in percentage for the Spot of each currency pair are 
applied by multiplying (1 - the margin value) by the core bid price and 
multiplying (1 + the margin value) by the core ask price. As an example, 
consider the following settings for a client tier -> currency pair:

_Spot bid/ask margins configured for the 1mil volume band: 0.1% / 0.1%_

_Spot bid/ask core prices calculated for the 1 mil volume band: 1.1234 / 
1.1235_

_Spot bid/ask prices published to client for the 1 mil volume band: 
floor(1.1234 * (1 - 0.001)) / ceil(1.1235 * (1 + 0.001)) => 1.12227 
/ 1.12463_

Margins expressed in percentage for each forward tenor of each currency 
pair are applied by first applying the Spot margins to the Spot core bid 
and ask price, then applying the configured forward margin values to the 
configured swap points (FOB-34098). As an example, consider the following 
settings for a client tier -> currency pair:

_5M (5 month) forward bid/ask margins configured for the 1mil volume band: 
0.2% / 0.2%_

_Spot bid/ask prices published to client for the 1 mil volume band:_ 
_1.12227 / 1.12463_ _(taken from the example above, with Spot margins 
already applied)_

_5M (5 month) configured forward bid/ask points: 2.34 / 2.56_

_5M (5 month)_ _forward bid/ask prices published to client for the 1 mil 
volume band:_
* _Spot:_ _1.12227 / 1.12463_
* _Forward Points: floor(2.34 * (1 - 0.002) / ceil(2.56 * (1 + 0.002)) => 
2.335 / 2.566_
* _Outrights: (__1.12227_ _+ 0.000__2335_ _) / (__1.12463__+ 0.000__2566__) 
=> 1.1225035 / 1.1248866_";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX, SWED;lzaharia;;PFX-81;;QAP-2039;;"On Webadmin, update the configuration of tier / currency pair / tenor to 
have margins in basis points on EUR/USD
Set Bid : 1.5 and Offer : 3";;"Margins updated to :
Bid : 1.5
Offer : 3";;
;;;;;;;;;;;;;;;Open pricing window for spot(in FE);;pricing window opened;;
;;;;;;;;;;;;;;;"From Client FE / 360T Interface / Minifix, subscribe to have a price on 
EUR/USD spot";;"Check that the price in client interface and pricing tile simultaneously 
(do a snapshot)

bid price : price of bid spot * (1 - 1.5%/100)
offer price : price of offer spot * (1+3%/100)";;
;;;;;;;;;;;;;;;;;;;
QAP-T2916;Spot calculation price when the margins are in percentage;Automated;;"The QS can publish all-in forward prices over FIX or to front-ends or to 
backend components. Forward and NDF initials and updates contain 
BidForwardPoints, OfferForwardPoints, BidSpotRate or OfferSpotRate, in 
addition to the usual BidPx and OfferPx. The trivial relationship between 
them is:

BidPx = BidSpotRate + BidForwardPoints rounded down to the SBP forward/NDF 
listing tick size.

OfferPx = OfferSpotRate + OfferForwardPoints rounded up to the SBP 
forward/NDF listing tick size.

BidForwardPoints and OfferForwardPoints are configured in ClientTierFXTenor 
table and are almost constant.

 

From user story FOB-34095 we have :

+Percentage+

Expressed to one decimal place of precision, using an increment of 0.1%.

Margins expressed in percentage for the Spot of each currency pair are 
applied by multiplying (1 - the margin value) by the core bid price and 
multiplying (1 + the margin value) by the core ask price. As an example, 
consider the following settings for a client tier -> currency pair:

_Spot bid/ask margins configured for the 1mil volume band: 0.1% / 0.1%_

_Spot bid/ask core prices calculated for the 1 mil volume band: 1.1234 / 
1.1235_

_Spot bid/ask prices published to client for the 1 mil volume band: 
floor(1.1234 * (1 - 0.001)) / ceil(1.1235 * (1 + 0.001)) => 1.12227 
/ 1.12463_

Margins expressed in percentage for each forward tenor of each currency 
pair are applied by first applying the Spot margins to the Spot core bid 
and ask price, then applying the configured forward margin values to the 
configured swap points (FOB-34098). As an example, consider the following 
settings for a client tier -> currency pair:

_5M (5 month) forward bid/ask margins configured for the 1mil volume band: 
0.2% / 0.2%_

_Spot bid/ask prices published to client for the 1 mil volume band:_ 
_1.12227 / 1.12463_ _(taken from the example above, with Spot margins 
already applied)_

_5M (5 month) configured forward bid/ask points: 2.34 / 2.56_

_5M (5 month)_ _forward bid/ask prices published to client for the 1 mil 
volume band:_
* _Spot:_ _1.12227 / 1.12463_
* _Forward Points: floor(2.34 * (1 - 0.002) / ceil(2.56 * (1 + 0.002)) => 
2.335 / 2.566_
* _Outrights: (__1.12227_ _+ 0.000__2335_ _) / (__1.12463__+ 0.000__2566__) 
=> 1.1225035 / 1.1248866_";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX, SWED;lzaharia;;PFX-81;;QAP-2038;;"On Webadmin, update the configuration of tier / currency pair / tenor to 
have margins in percentage on EUR/USD
Set Bid : 1.5 and Offer : 3";;"Margins updated to :
Bid : 1.5
Offer : 3";;
;;;;;;;;;;;;;;;Open pricing window for spot(in FE);;pricing window opened;;
;;;;;;;;;;;;;;;"From Client FE / 360T Interface / Minifix, subscribe to have a price on 
spot EUR/USD";;"Check that the price in client interface and pricing tile simultaneously 
(do a snapshot)
bid price : price of spot * (1 - 1.5/100)
offer price : price of spot * (1 + 3/100)";;
;;;;;;;;;;;;;;;;;;;
QAP-T2917;Spot calculation price when the margins are in pips;Automated;;"The QS can publish all-in forward prices over FIX or to front-ends or to 
backend components. Forward and NDF initials and updates contain 
BidForwardPoints, OfferForwardPoints, BidSpotRate or OfferSpotRate, in 
addition to the usual BidPx and OfferPx. The trivial relationship between 
them is:

BidPx = BidSpotRate + BidForwardPoints rounded down to the SBP forward/NDF 
listing tick size.

OfferPx = OfferSpotRate + OfferForwardPoints rounded up to the SBP 
forward/NDF listing tick size.

BidForwardPoints and OfferForwardPoints are configured in ClientTierFXTenor 
table and are almost constant.

 

From user story FOB-34095 we have :

+Pips+

Expressed to one additional decimal place of precision, using a spot 
increment of 0.1 and a forward increment of 0.001.

Margins expressed in pips for the Spot of each currency pair are applied by 
subtracting the margin value from the core bid price and adding the margin 
value to the core ask price. As an example, consider the following settings 
for a client tier -> currency pair:

_Spot bid/ask margins configured for the 1mil volume band: 0.1 / 0.1_

_Spot bid/ask core prices calculated for the 1 mil volume band: 1.1234 / 
1.1235_

_Spot bid/ask prices published to client for the 1 mil volume band: (1.1234 
- 0.1) / (1.1235 + 0.1) => 1.12339 / 1.12351_

Margins expressed in pips for each forward tenor of each currency pair are 
applied by first applying the Spot margins to the Spot core bid and ask 
price, then applying the configured forward margin values to the configured 
swap points (FOB-34098). As an example, consider the following settings for 
a client tier -> currency pair:

_5M (5 month) forward bid/ask margins configured for the 1mil volume band: 
0.002 / 0.002_

_Spot bid/ask prices published to client for the 1 mil volume band: 1.12339 
/ 1.12351 (taken from the example above, with Spot margins already 
applied)_

_5M (5 month) configured forward bid/ask points: 2.34 / 2.56_

_5M (5 month)_ _forward bid/ask prices published to client for the 1 mil 
volume band:_
* _Spot: 1.12339 / 1.12351_
* _Forward Points: (2.34 - 0.002) / (2.56 + 0.002) => 2.338 / 2.562_
* _Outrights: (1.12339 + 0.0002338) / (1.12351 + 0.0002562) => 1.1236238 
/ 1.1237662_";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX, SWED;lzaharia;;PFX-81;;QAP-2037;;"On ClientTierFXTenor table, Check configuration of margins. They must be 
expressed in pips
For example b : 0,1, o: 0,2";;"Margins configured, note the value
Bid = 0.1
Offer = 0.2";;
;;;;;;;;;;;;;;;Open pricing window for spot(in FE);;pricing window opened;;
;;;;;;;;;;;;;;;"From Client FE / 360T Interface / Minifix, subscribe to have a price on 
forward";;"Check that the price in client interface and pricing tile simultaneously 
(do a snapshot)
Bid Price = Bid spot - 0.1 / 10exp-pxprecision
Offer Price = Offer spot + 0.2 / 10exp pxprecision";;
QAP-T2918;Pricing tile - margin display and margin style modification;Specified;;"This test is checking margin display of pricing tile, especially the 
criteria of FOB-34095 :
* The configured margins can be viewed and modified through the Client 
Pricing tile in the price book's ""Base"" column such that the column header 
name also indicates the margin format, such as ""Base (pips)"", ""Base (%)"", 
""Base (bps)"". See FOB-34082.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression, SWED;lzaharia;;PFX-81, PFX-1599;;QAP-2036;;"In the Admin FE go to FX_MM=>ClientTier=> Instrument => tenor and change 
Margin Format to Pips => Submit";;no errors;;
;;;;;;;;;;;;;;;Go to FE Trading => ClietnPricing Tile;;"when Pips is the current margin format, don't use any column name extension 
for ""Base"" column, simply display ""Base""";;
;;;;;;;;;;;;;;;"In the Admin FE go to FX_MM=>ClientTier=> Instrument => tenor and change 
Margin Format to SysCurrPerMillion => Submit";;;;
;;;;;;;;;;;;;;;Go to FE Trading => ClietnPricing Tile;;"when System Currency / mio is the current margin format, use a column name 
extension of ""(m)"" so it is ""Base (m)""";;
;;;;;;;;;;;;;;;"In the Admin FE go to FX_MM=>ClientTier=> Instrument => tenor and change 
Margin Format to BasisPointsOfPrice => Submit";;;;
;;;;;;;;;;;;;;;Go to FE Trading => ClietnPricing Tile;;"when System Currency / BasisPointsOfPrice is the current margin format, use 
a column name extension of ""(b)"" so it is ""Base (b)""";;
;;;;;;;;;;;;;;;"In the Admin FE go to FX_MM=>ClientTier=> Instrument => tenor and change 
Margin Format to PercentageOfPrice=> Submit";;;;
;;;;;;;;;;;;;;;Go to FE Trading => ClietnPricing Tile;;"""Base (%)""";;
QAP-T2919;Forward calculation price when the margins are in bips;Automated;;"The QS can publish all-in forward prices over FIX or to front-ends or to 
backend components. Forward and NDF initials and updates contain 
BidForwardPoints, OfferForwardPoints, BidSpotRate or OfferSpotRate, in 
addition to the usual BidPx and OfferPx. The trivial relationship between 
them is:

BidPx = BidSpotRate + BidForwardPoints rounded down to the SBP forward/NDF 
listing tick size.

OfferPx = OfferSpotRate + OfferForwardPoints rounded up to the SBP 
forward/NDF listing tick size.

BidForwardPoints and OfferForwardPoints are configured in ClientTierFXTenor 
table and are almost constant.

 

From user story FOB-34095 we have :

+Basis Points+

Expressed to one decimal place of precision, using an increment of 0.1 bp.

1 ""basis point"" (aka bp, pronounced ""bip"", or plural bps, pronounced 
""bips""), is equal to 0.01%. This provides a convenient way of expressing 
values using further precision than just using a ""percentage"" value.

Margins expressed in basis points are applied to Spot and forward prices in 
exactly the same way as described above for margins expressed in 
percentage, just using further precision.

 

+Percentage+

Expressed to one decimal place of precision, using an increment of 0.1%.

Margins expressed in percentage for the Spot of each currency pair are 
applied by multiplying (1 - the margin value) by the core bid price and 
multiplying (1 + the margin value) by the core ask price. As an example, 
consider the following settings for a client tier -> currency pair:

_Spot bid/ask margins configured for the 1mil volume band: 0.1% / 0.1%_

_Spot bid/ask core prices calculated for the 1 mil volume band: 1.1234 / 
1.1235_

_Spot bid/ask prices published to client for the 1 mil volume band: 
floor(1.1234 * (1 - 0.001)) / ceil(1.1235 * (1 + 0.001)) => 1.12227 
/ 1.12463_

Margins expressed in percentage for each forward tenor of each currency 
pair are applied by first applying the Spot margins to the Spot core bid 
and ask price, then applying the configured forward margin values to the 
configured swap points (FOB-34098). As an example, consider the following 
settings for a client tier -> currency pair:

_5M (5 month) forward bid/ask margins configured for the 1mil volume band: 
0.2% / 0.2%_

_Spot bid/ask prices published to client for the 1 mil volume band:_ 
_1.12227 / 1.12463_ _(taken from the example above, with Spot margins 
already applied)_

_5M (5 month) configured forward bid/ask points: 2.34 / 2.56_

_5M (5 month)_ _forward bid/ask prices published to client for the 1 mil 
volume band:_
* _Spot:_ _1.12227 / 1.12463_
* _Forward Points: floor(2.34 * (1 - 0.002) / ceil(2.56 * (1 + 0.002)) => 
2.335 / 2.566_
* _Outrights: (__1.12227_ _+ 0.000__2335_ _) / (__1.12463__+ 0.000__2566__) 
=> 1.1225035 / 1.1248866_";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX, SWED;lzaharia;;PFX-81;;QAP-2035;;"On Webadmin, update the configuration of tier / currency pair / tenor to 
have margins in basis points on EUR/USD 1M
Set Bid : 1.5 and Offer : 3";;"Margins updated to :
Bid : 1.5
Offer : 3";;
;;;;;;;;;;;;;;;Open pricing window for spot( in FE);;pricing window opened;;
;;;;;;;;;;;;;;;"From Client FE / 360T Interface / Minifix, subscribe to have a price on 
forward EUR/USD 1M";;"Check that the forward price in client interface and pricing tile 
simultaneously (do a snapshot)
spot : price of spot
forward points : bid = (forward points - 1.5%/100)
offer = (forward points +3%/100)
Bid Price = Bid spot + forwardpoints * 10exp-pxprecision
Offer Price = Offer spot + forwardpoints * 10exp pxprecision";;
;;;;;;;;;;;;;;;;;;;
QAP-T2920;Forward calculation price when the margins are in percentage;Automated;;"The QS can publish all-in forward prices over FIX or to front-ends or to 
backend components. Forward and NDF initials and updates contain 
BidForwardPoints, OfferForwardPoints, BidSpotRate or OfferSpotRate, in 
addition to the usual BidPx and OfferPx. The trivial relationship between 
them is:

BidPx = BidSpotRate + BidForwardPoints rounded down to the SBP forward/NDF 
listing tick size.

OfferPx = OfferSpotRate + OfferForwardPoints rounded up to the SBP 
forward/NDF listing tick size.

BidForwardPoints and OfferForwardPoints are configured in ClientTierFXTenor 
table and are almost constant.

 

From user story FOB-34095 we have :

+Percentage+

Expressed to one decimal place of precision, using an increment of 0.1%.

Margins expressed in percentage for the Spot of each currency pair are 
applied by multiplying (1 - the margin value) by the core bid price and 
multiplying (1 + the margin value) by the core ask price. As an example, 
consider the following settings for a client tier -> currency pair:

_Spot bid/ask margins configured for the 1mil volume band: 0.1% / 0.1%_

_Spot bid/ask core prices calculated for the 1 mil volume band: 1.1234 / 
1.1235_

_Spot bid/ask prices published to client for the 1 mil volume band: 
floor(1.1234 * (1 - 0.001)) / ceil(1.1235 * (1 + 0.001)) => 1.12227 
/ 1.12463_

Margins expressed in percentage for each forward tenor of each currency 
pair are applied by first applying the Spot margins to the Spot core bid 
and ask price, then applying the configured forward margin values to the 
configured swap points (FOB-34098). As an example, consider the following 
settings for a client tier -> currency pair:

_5M (5 month) forward bid/ask margins configured for the 1mil volume band: 
0.2% / 0.2%_

_Spot bid/ask prices published to client for the 1 mil volume band:_ 
_1.12227 / 1.12463_ _(taken from the example above, with Spot margins 
already applied)_

_5M (5 month) configured forward bid/ask points: 2.34 / 2.56_

_5M (5 month)_ _forward bid/ask prices published to client for the 1 mil 
volume band:_
* _Spot:_ _1.12227 / 1.12463_
* _Forward Points: floor(2.34 * (1 - 0.002) / ceil(2.56 * (1 + 0.002)) => 
2.335 / 2.566_
* _Outrights: (__1.12227_ _+ 0.000__2335_ _) / (__1.12463__+ 0.000__2566__) 
=> 1.1225035 / 1.1248866_";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX, SWED;lzaharia;;PFX-81;;QAP-2034;;"On Webadmin, update the configuration of tier / currency pair / tenor to 
have margins in percentage on EUR/USD 1M
Set Bid : 1.5 and Offer : 3";;"Margins updated to :
Bid : 1.5
Offer : 3";;
;;;;;;;;;;;;;;;Open pricing window for spot(in FE);;pricing window opened;;
;;;;;;;;;;;;;;;"From Client FE / 360T Interface / Minifix, subscribe to have a price on 
forward EUR/USD 1M";;"Check that the forward price in client interface and pricing tile 
simultaneously (do a snapshot)
Check that the forward price in client interface and pricing tile 
simultaneously (do a snapshot)
spot : price of spot
forward points : bid = (forward points - 1.5%)
offer = (forward points +3%)
Bid Price = Bid spot + forwardpoints * 10exp-pxprecision
Offer Price = Offer spot + forwardpoints * 10exp pxprecision";;
QAP-T2921;Availability of settings per client tier per currency pair and implementation in QS;Specified;;"This test case has been created following FOB-34074, for the following 
acceptance criteria :
* Be able to view and edit the following settings per client tier per 
currency pair:
** Volume Band Quantities List
*** Quantity
*** Published: on/off";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression;lzaharia;;PFX-111;;QAP-2020;;"From Webadmin, enter in Tier / currency pair settings, select a currency 
pair and add 3 bands";;"3 bands added as follow :
1 M published on
5 M published on
10 M published on";;
;;;;;;;;;;;;;;;"From Sales FE, pricing tile, make a subscription on this currency pair and 
check the result";;Prices published on Pricing tiles on bands 1M, 5M, 10M;;
;;;;;;;;;;;;;;;"From client interface (360T gui / minifix / other) make a market data 
request on this currency pair";;Prices published on Pricing tiles on bands 1M, 5M, 10M;;
;;;;;;;;;;;;;;;"On webadmin, add an additional band to have 1M, 2M,5M,10M
This band will be published off";;"4 bands available as follow :
1 M published on
2 M published off
5 M published on
10 M published on";;
;;;;;;;;;;;;;;;"From Sales FE, pricing tile, make a subscription on this currency pair and 
check the result";;"Prices published on Pricing tiles on bands 1M, 2M, 5M, 10M
The published quantity is blank";;
;;;;;;;;;;;;;;;"From client interface (360T gui / minifix / other) make a market data 
request on this currency pair";;"Prices published on Pricing tiles on bands 1M, 5M, 10M
Price on band 2M not published";;
QAP-T2922;Setting of VWAP style in Admin and implementation in QS;Open;;"Setting of VWAP style in Admin and implementation in QS

Following story FOB-34074:

Be able to view and edit the following settings per client tier:
* Core Price Strategy: VWAPSpeedOptimized

* The configured client tier and currency pair and tenor (Spot in this 
case) is available to be selected in the FX Client Pricing tile, showing 
top of book and full price book calculated using this Core Pricing method 
(Tiered VWAPSpeedOptimized Spot). See FOB-34082.
* However viewing the resulting client prices, working with engineering to 
confirm the math of calculating a snapshot of the client price book for 
this Core Pricing method (Tiered VWAPSpeedOptimized Spot), using a snapshot 
of the aggregated book.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression;lzaharia;;PFX-111;;QAP-2019;;From Web admin, select a client tier and enter VWAP speed optimized;;VWAP speed optimized entered;;
;;;;;;;;;;;;;;;Validate in Webadmin;;VWAP speed optimized validated;;
;;;;;;;;;;;;;;;Restart QS (the online update is not required at this stage);;QS restarted;;
;;;;;;;;;;;;;;;Apply the market data entries as explained in QAP-2013;;Check the result in QS price calculation : they should be as described;;
;;;;;;;;;;;;;;;From Web Admin, change the VWAP style to have price optimized;;Changes to price optimized validated;;
;;;;;;;;;;;;;;;Restart QS;;QS restarted;;
;;;;;;;;;;;;;;;Apply market data entry as explained on QAP-2015;;Check the result for price calculation : they should be as described;;
QAP-T2923;Calculation of price by QS using optimized speed VWAP style with different weights;Open;;"Following user story FOB-34074, the calculation is the following, 
considering the pricing for a quantity of 10 Millions on Bid side :
||Level||MarketDepth Venue A||QuoteBook Venue B||QuoteBook Venue C||
| |Bid|Bid|Bid|
|1|1M @ 1.02|1M @ 1.02|1M @ 1.01|
|2|2M @ 1.026|5M @ 1.025|5M @ 1.02|
|3| |10M @ 1.04|10M @ 1.03|

 

 *Venue C has a weight of 3*

 

*Quote books are tiered, so we can consider only one layer on these venues*
+{color:#172b4d}1 - checking level 1 :{color}+

-> checking best price for first price 1.01, level 1 :

1M @ 1.01 (Venue C)

-> the total quantity available is not sufficient for my requested 
quantity, for venue type quote book price discarded for further calculation 
for optimization

2 - checking best price for price 1.02, level 1 :

-> the quantity 1M on venue B is not sufficient, for venue type quotebook 
price discarded for further calculation for optimization

-> the quantity 1M on venue A is not sufficient. *As the venue is type 
market depth this quantity is kept in price calculation*

+2 - checking level 2 :+

-> checking best price for price 1.02 on venue C :

5M @ 1.02 (venue C)

-> total quantity is 6 : 1M @ 1.02 (venue A) + 5M @ 1.02 (venue C)

-> the total quantity is not sufficient to calculate a price for initial 
quantity 10 M

-> this price is discarded, because venue is quotebook

-> checking price 1.025, level 2

-> total quantity is 6 : 1M @ 1.02 (venue A) + 5M @ 1.025 (venue B)

-> the total quantity is not sufficient to calculate a price for initial 
quantity 10 M

-> this price is discarded, because venue is quotebook

> checking price 1.026, level 2

-> total quantity is 3 : 1M @ 1.02 (venue A) + 2M @ 1.026 (venue A)

-> the total quantity is not sufficient to calculate a price for initial 
quantity 10 M

*-> As the venue is type market depth this quantity is kept in price 
calculation*

+3 - checking level 3+

-> checking best price for price 1.03 on venue C :

-> the total quantity is :  1M @ 1.02 (venue A) + 2M @ 1.026 (venue A) + 7M 
@ 1.03 (venue C)

*As the available quantity on venue C is 10M, we have now the available 
quantity*

+4 - Calculation of Price+ 

As the venue C has a weight of 3, we have :

*-> VWAP = (1M @ 1.02 + 2M @ 1.026 + (7M @ 1.03)*3 ) / (1M+2M+21M) = 1.029*";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression;lzaharia;;PFX-111;;QAP-2016;;"On a Backend configured with QS Pricing, publish manually prices defined 
above";;QS must compute the VWAP price equal to 1.0282;;
QAP-T2924;Calculation 3 price bands tiered by QS using optimized price VWAP style;Open;;"Following user story FOB-34074, calculate 3 bands :

1M, 5M, 10M  based on the following market data :

 
||Level||MarketDepth Venue A||QuoteBook Venue B||QuoteBook Venue C||
| |Bid|Bid|Bid|
|1|1M @ 1.02|1M @ 1.02|1M @ 1.01|
|2|2M @ 1.026|5M @ 1.025|5M @ 1.02|
|3|20M @ 1.1|10M @ 1.04|10M @ 1.03|

 

{color:#172b4d} 1 - calculating band for 1M{color}

-> best price is 1.01 @ Venue C, considering this venue.

 

+2 - calculating band for 5M+
||Solution 1||Solution 2||Solution 3||
|1M @ 1.01 (venue C)|1M @ 1.01 (venue C)|5M @ 1.02 (venue C)|
|1M @ 1.02 (venue B)|4M @ 1.025 (venue B)| |
|1M @ 1.02 (venue A)| | |
|2M @ 1.026 (venue A)| | |
| | | |
|VWAP = 1.0204|VWAP = 1.022|VWAP = 1.02|

 

Price is 1.02

 

+3 - calculating band for 10M+

 

 
||Solution 1||Solution 2||Solution 3||Solution 4||Solution 5||Solution 
6||Solution 7|| ||
||1M @ 1.01 (venue C)||1M @ 1.01 (venue C)||1M @ 1.01 (venue C)||5M @ 1.02 
(venue C)||5M @ 1.02 (venue C)||5M @ 1.02 (venue C)||10M @ 1.03 (venue 
C)|| ||
||1M @ 1.02 (venue B)||5M @ 1.025 (venue B)||9M @ 1.025 (venue B)||1M @ 
1.02 (venue B)||5M @ 1.025 (venue B)||1M @ 1.02 (venue A)|| || ||
||1M @ 1.02 (venue A)||1M @ 1.02 (venue A)|| ||1M @ 1.02 (venue A)|| ||4M @ 
1.025 (venue B)|| || ||
||2M @ 1.026 (venue A||2M @ 1.026 (venue A)|| ||2M @ 1.026 (venue 
A)|| || || || ||
||5M @ 1.1 (venue A)||1M @ 1.1 (venue A)|| ||1M @ 1.1 (venue 
A)|| || || || ||
| |
|VWAP = 1.0602|VWAP = 1.0307|VWAP = 1.0235|VWAP = 1.0292|VWAP = 1.0225|VWAP 
= 1.022|VWAP = 1.03| |

 

The chosen solution will be solution 6:

5M @ 1.02 (venue C)

1M @ 1.02 (venue A)
4M @ 1.025 (venue B)";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression;lzaharia;;PFX-221;;QAP-2015;;"On a Backend configured with QS Pricing, publish manually prices defined 
above";;"QS must publish price as defined above :
1M @ 1.01
5M @ 1.02
10M @ 1.025";;
;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;
QAP-T2925;Calculation 3 price bands tiered by QS using optimized speed VWAP style;Open;;"Following user story FOB-34074, calculate 3 bands :

1M, 5M, 10M  based on the following market data :

 
||Level||MarketDepth Venue A||QuoteBook Venue B||QuoteBook Venue C||
| |Bid|Bid|Bid|
|1|1M @ 1.02|1M @ 1.02|1M @ 1.01|
|2|2M @ 1.026|5M @ 1.025|5M @ 1.02|
|3|20M @ 1.1|10M @ 1.04|10M @ 1.03|

 

{color:#172b4d} 1 - calculating band for 1M{color}

-> best price is 1.01 @ Venue C, considering this venue.

 

+2 - calculating band for 5M+

-> level 1 :

> checking best price for first price 1.01, level 1 :

1M @ 1.01 (Venue C)

-> the total quantity available is not sufficient for my requested 
quantity, for venue type quote book price discarded for further calculation 
for optimization

2 - checking best price for price 1.02, level 1 :

-> the quantity 1M on venue B is not sufficient, for venue type quotebook 
price discarded for further calculation for optimization

-> the quantity 1M on venue A is not sufficient. *As the venue is type 
market depth this quantity is kept in price calculation*

-> checking level 2 :

-> checking best price for price 1.02 on venue C :

5M @ 1.02 (venue C)

-> total quantity is 6 : 1M @ 1.02 (venue A) + 5M @ 1.02 (venue C)

-> keeping these venues for the price calculation : 1M @ 1.02 (venue A) + 
4M @ 1.02 (venue C) = 1.02

+2 - calculating band for 10M+

 

 _-> +{color:#172b4d}{color}+ {color:#172b4d}checking level 1 :{color}_

-> checking best price for first price 1.01, level 1 :

1M @ 1.01 (Venue C)

-> the total quantity available is not sufficient for my requested 
quantity, for venue type quote book price discarded for further calculation 
for optimization

2 - checking best price for price 1.02, level 1 :

-> the quantity 1M on venue B is not sufficient, for venue type quotebook 
price discarded for further calculation for optimization

-> the quantity 1M on venue A is not sufficient. *As the venue is type 
market depth this quantity is kept in price calculation*

_-> checking level 2 :_

-> checking best price for price 1.02 on venue C :

5M @ 1.02 (venue C)

-> total quantity is 6 : 1M @ 1.02 (venue A) + 5M @ 1.02 (venue C)

-> the total quantity is not sufficient to calculate a price for initial 
quantity 10 M

-> this price is discarded, because venue is quotebook

-> checking price 1.025, level 2

-> total quantity is 6 : 1M @ 1.02 (venue A) + 5M @ 1.025 (venue B)

-> the total quantity is not sufficient to calculate a price for initial 
quantity 10 M

-> this price is discarded, because venue is quotebook

> checking price 1.026, level 2

-> total quantity is 3 : 1M @ 1.02 (venue A) + 2M @ 1.026 (venue A)

-> the total quantity is not sufficient to calculate a price for initial 
quantity 10 M

*-> As the venue is type market depth this quantity is kept in price 
calculation*

_->  checking level 3_

-> checking best price for price 1.03 on venue C :

-> the total quantity is :  1M @ 1.02 (venue A) + 2M @ 1.026 (venue A) + 7M 
@ 1.03 (venue C)

*As the available quantity on venue C is 10M, we have now the available 
quantity*

-> VWAP = (1M @ 1.02 + 2M @ 1.026 + 7M @ 1.03 ) / 10 = 1.0282

 

 ";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression;lzaharia;;PFX-111;;QAP-2013;;"On a Backend configured with QS Pricing, publish manually prices defined 
above";;"QS must publish price as defined above :
1M @ 1.01
5M @ 1.02
10M @ 1.0852";;
QAP-T2926;Calculation 3 price bands sweepable by QS using optimized speed VWAP style;Automated;;"{color:#00875A}*LOOK AT COMMENTS*{color}

Following user story FOB-34074, calculate 3 bands :

1M, 5M, 10M  based on the following market data :

 
||Level||MarketDepth Venue A||QuoteBook Venue B||QuoteBook Venue C||
| |Bid|Bid|Bid|
|1|1M @ 1.02|1M @ 1.02|*1M @ 1.01*|
|2|2M @ 1.026|5M @ 1.025|5M @ 1.02|
|3|20M @ 1.1|10M @ 1.04|10M @ 1.03|

 

{color:#172b4d} 1 - calculating band for 1M{color}

-> best price is 1.01 @ Venue C, considering this venue.

-> discarding venue A for further calculation

+2 - calculating band for 5M+

-> level 1 :

-> checking 1M @ 1.02 on venue A, discarding because the quantity is not 
sufficient

-> checking 1M @ 1.02 on venue A with 5M @ 1.025 on venue B (the venue C is 
discarded)

-> keeping these bands for calculation of band of 5M : VWAP = (1*02 + 
4*1.025)/5 = 1.024

+2 - calculating band for 10M+

 -> venues B and C have been discarded, and 1M@1.02 has been discarded on 
venue A

-> price is 2M @ 1.026 (venue A) + 8M @ 1.1 (venue A) = 1.0852

 

 Send MD:
*{color:#0747A6}#1{color}* BARX

{code:java}
2021-06-04 14:44:33.905620327 QUOD.FXFH [ 2363] INFO qfstandard_buy50SP2 
(QuickfixQuodLog.h:58) - QUICKFIX: FIXT.1.1:MARKETDATA->TEST: incoming: 
8=FIXT.1.1|9=471|35=W|34=150|49=TEST|52=20210604-14:44:33.904|56=MARKETDATA|55=USD/CHF|167=FXSPOT|262=USD/CHF:SPO:REG:BARX_26|268=6|269=0|270=1.005|271=1000000|273=20210604|290=1|64=20210608|269=1|270=1.016|271=1000000|273=20210604|290=1|64=20210608|269=0|270=1.004|271=2000000|273=20210604|290=2|64=20210608|269=1|270=1.017|271=2000000|273=20210604|290=2|64=20210608|269=0|270=1.003|271=20000000|273=20210604|290=3|64=20210608|269=1|270=1.018|271=20000000|273=20210604|290=3|64=20210608|10=054|
{code}

*{color:#0747A6}#2{color}* CITI
 
{code:java}
2021-06-04 14:44:36.505316655 QUOD.FXFH [ 2363] INFO qfstandard_buy50SP2 
(QuickfixQuodLog.h:58) - QUICKFIX: FIXT.1.1:MARKETDATA->TEST: incoming: 
8=FIXT.1.1|9=470|35=W|34=151|49=TEST|52=20210604-14:44:36.504|56=MARKETDATA|55=USD/CHF|167=FXSPOT|262=USD/CHF:SPO:REG:CITI_27|268=6|269=0|270=1.008|271=1000000|273=20210604|290=1|64=20210608|269=1|270=1.019|271=1000000|273=20210604|290=1|64=20210608|269=0|270=1.007|271=5000000|273=20210604|290=2|64=20210608|269=1|270=1.02|271=5000000|273=20210604|290=2|64=20210608|269=0|270=1.006|271=10000000|273=20210604|290=3|64=20210608|269=1|270=1.021|271=10000000|273=20210604|290=3|64=20210608|10=006|
{code}

*{color:#0747A6}#3{color}* MS

{code:java}

2021-06-04 14:44:39.168933988 QUOD.FXFH [ 2363] INFO qfstandard_buy50SP2 
(QuickfixQuodLog.h:58) - QUICKFIX: FIXT.1.1:MARKETDATA->TEST: incoming: 
8=FIXT.1.1|9=468|35=W|34=152|49=TEST|52=20210604-14:44:39.167|56=MARKETDATA|55=USD/CHF|167=FXSPOT|262=USD/CHF:SPO:REG:MS_29|268=6|269=0|270=1.011|271=1000000|273=20210604|290=1|64=20210608|269=1|270=1.022|271=1000000|273=20210604|290=1|64=20210608|269=0|270=1.01|271=5000000|273=20210604|290=2|64=20210608|269=1|270=1.023|271=5000000|273=20210604|290=2|64=20210608|269=0|270=1.009|271=10000000|273=20210604|290=3|64=20210608|269=1|270=1.024|271=10000000|273=20210604|290=3|64=20210608|10=134|
{code}";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX;lzaharia;;PFX-111, PFX-122;;QAP-2012;;"Send MD
and prepare tier";"#1
#2
#3";;;
;;;;;;;;;;;;;;;"On a Backend configured with QS Pricing, publish manually prices defined 
above";;SEE the Last comment;;
QAP-T2927;Calculation of price by QS using optimized price VWAP style;Open;;"Following user story FOB-34074, the calculation is the following, 
considering the pricing for a quantity of 10 Millions on Bid side :
||Level||MarketDepth Venue A||QuoteBook Venue B||QuoteBook Venue C||
| |Bid|Bid|Bid|
|1|1M @ 1.02|1M @ 1.02|1M @ 1.01|
|2|2M @ 1.026|5M @ 1.025|5M @ 1.02|
|3|20M @ 1.1|10M @ 1.04|10M @ 1.03|

 

 

Quote books are tiered, so we can consider only one layer on these venues

 

On price optimized, considering each price one by one having only one band 
for quotebook venues :
||Solution 1||Solution 2||Solution 3||Solution 4||Solution 5||Solution 
6||Solution 7|| ||
||1M @ 1.01 (venue C)||1M @ 1.01 (venue C)||1M @ 1.01 (venue C)||5M @ 1.02 
(venue C)||5M @ 1.02 (venue C)||5M @ 1.02 (venue C)||10M @ 1.03 (venue 
C)|| ||
||1M @ 1.02 (venue B)||5M @ 1.025 (venue B)||9M @ 1.025 (venue B)||1M @ 
1.02 (venue B)||5M @ 1.025 (venue B)||1M @ 1.02 (venue A)|| || ||
||1M @ 1.02 (venue A)||1M @ 1.02 (venue A)|| ||1M @ 1.02 (venue A)|| ||4M @ 
1.025 (venue B)|| || ||
||2M @ 1.026 (venue A||2M @ 1.026 (venue A)|| ||2M @ 1.026 (venue 
A)|| || || || ||
||5M @ 1.1 (venue A)||1M @ 1.1 (venue A)|| ||1M @ 1.1 (venue 
A)|| || || || ||
| |
|VWAP = 1.0602|VWAP = 1.0307|VWAP = 1.0235|VWAP = 1.0292|VWAP = 1.0225|VWAP 
= 1.022|VWAP = 1.03| |

 

The chosen solution will be solution 6 :

5M @ 1.02 (venue C)

1M @ 1.02 (venue A)
4M @ 1.025 (venue B)

 

 ";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression;lzaharia;;PFX-221;;QAP-2010;;"On a Backend configured with QS Pricing, publish manually prices defined 
above";;QS must publish price as defined above (1.022);;
;;;;;;;;;;;;;;;;;;;
QAP-T2928;Calculation of price by QS using optimized speed VWAP style;Open;;"Following user story FOB-34074, the calculation is the following, 
considering the pricing for a quantity of 10 Millions on Ask side :
||Level||MarketDepth Venue A||QuoteBook Venue B||QuoteBook Venue C||
| |Ask|Ask|Ask|
|1|1M @ 1.02|1M @ 1.02|1M @ 1.01|
|2|2M @ 1.026|5M @ 1.025|5M @ 1.02|
|3| |10M @ 1.04|10M @ 1.03|

 

 

Quote books are tiered, so we can consider only one layer on these venues

+{color:#172b4d}1 - checking level 1 :{color}+

-> checking best price for first price 1.01, level 1 :

1M @ 1.01 (Venue C)

-> the total quantity available is not sufficient for my requested 
quantity, for venue type quote book price discarded for further calculation 
for optimization

2 - checking best price for price 1.02, level 1 :

-> the quantity 1M on venue B is not sufficient, for venue type quotebook 
price discarded for further calculation for optimization

-> the quantity 1M on venue A is not sufficient. *As the venue is type 
market depth this quantity is kept in price calculation*

+2 - checking level 2 :+

-> checking best price for price 1.02 on venue C :

5M @ 1.02 (venue C)

-> total quantity is 6 : 1M @ 1.02 (venue A) + 5M @ 1.02 (venue C)

-> the total quantity is not sufficient to calculate a price for initial 
quantity 10 M

-> this price is discarded, because venue is quotebook

-> checking price 1.025, level 2

-> total quantity is 6 : 1M @ 1.02 (venue A) + 5M @ 1.025 (venue B)

-> the total quantity is not sufficient to calculate a price for initial 
quantity 10 M

-> this price is discarded, because venue is quotebook

> checking price 1.026, level 2

-> total quantity is 3 : 1M @ 1.02 (venue A) + 2M @ 1.026 (venue A)

-> the total quantity is not sufficient to calculate a price for initial 
quantity 10 M

*-> As the venue is type market depth this quantity is kept in price 
calculation*

+3 - checking level 3+

-> checking best price for price 1.03 on venue C :

-> the total quantity is :  1M @ 1.02 (venue A) + 2M @ 1.026 (venue A) + 7M 
@ 1.03 (venue C)

*As the available quantity on venue C is 10M, we have now the available 
quantity*

+4 - Calculation of Price+ 

*-> VWAP = (1M @ 1.02 + 2M @ 1.026 + 7M @ 1.03 ) / 10 = 1.0282*
 ";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, Mixed;lzaharia;;PFX-111;;QAP-2009;;"On a Backend configured with QS Pricing, publish manually prices defined 
above
and subscribe to configured instrument via fix";;QS must compute the VWAP price equal to 1.0282;;
QAP-T2929;Worklow of Automated Quote forward on one side (buy) with booktype sweepable;Automated;;"Workflow of automatic RFQ

 

This test case corresponds to acceptance criteria of user story FOB-34099 :

The request for a quote must indicate:
* whether the client wishes to be sent just bid or just ask prices or both

* A client quote request submitted against the system for a valid quantity 
(and valid settlement date if a forward broken date is specified) results 
in an auto-quoted response for the given request. This can be validated 
either through the Client Pricing tiles (see FOB-34100 and FOB-34101) in 
the trading FE or through the use of a separate trading interface used to 
simulate client activity (see FOB-34104) or through any other possibly 
temporary means engineering may provide if the other methods are not yet 
completed.

*{color:#0747A6}#1{color}*

{code:java}
< 
8=FIXT.1.1|9=159|35=R|49=QUOD5|56=QUODFX_UAT|34=197|52=20210414-14:38:46|131=211333025|146=1|55=EUR/USD|167=FXFWD|537=1|54=1|38=1000000|64=20210423|63=W1|15=EUR|1=CLIENT1|40=D|10=120|
{code}

*{color:#0747A6}#2{color}*

{code:java}
> 
8=FIXT.1.1|9=241|35=S|34=211|49=QUODFX_UAT|52=20210414-14:38:48.167|56=QUOD5|1128=9|15=EUR|54=1|55=EUR/USD|62=20210414-14:40:45.143|63=W1|64=20210423|117=01210414143845181002|131=211333025|133=1.18298|135=1000000|167=FXFWD|190=1.1827|191=0.00028|460=4|537=1|10=112|
{code}

*{color:#0747A6}#3{color}*

{code:java}
< 
8=FIXT.1.1|9=213|35=D|49=QUOD5|56=QUODFX_UAT|34=201|52=20210414-14:39:46|1=CLIENT1|11=1050979462|21=1|15=EUR|38=1000000|40=D|44=1.18298|54=1|55=EUR/USD|59=3|60=20210414-14:39:46|63=0|64=20210423|167=FXFWD|117=01210414143845181002|10=145|
{code}

*{color:#0747A6}#4{color}*

{code:java}
> 
8=FIXT.1.1|9=454|35=8|34=217|49=QUODFX_UAT|52=20210414-14:39:45.808|56=QUOD5|1128=9|1=CLIENT1_1|6=1.18298|11=1050979462|14=1000000|15=EUR|17=EX1210414143945259001|21=1|22=8|31=1.18298|32=1000000|37=MO1210414143945243001|38=1000000|39=2|40=D|44=1.18298|48=EUR/USD|54=1|55=EUR/USD|59=3|60=20210414-14:39:45.761|63=0|64=20210423|75=20210414|100=XQFX|120=USD|150=F|151=0|167=FXFWD|194=1.1827|195=0.00028|207=XQFX|381=1182980|453=1|448=gtwquod5|447=D|452=36|460=4|528=A|854=0|10=022|
{code}";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX, SWED;lzaharia;;PFX-138, PFX-530;;QAP-1978;;"From 360T/Minifix, send a RFQ on a forward instrument with a quantity lower 
than sum of quantity in clienttierinstrsymbqty , indicating side buy";#1;"RFQ sent, and reply received in 360T interface / minifix
Prices corresponding to Client pricing tile for the quantity
Prices moving according to the Client pricing tile";;
;;;;;;;;;;;;;;;Check reply in minifix / Client interface;#2;Reply must contain offer price, offer spot rate, offer points;;
;;;;;;;;;;;;;;;From the 360T interface / minifix, send an order to execute the RFQ;#3;Order executed and correctly responded to FIX;;
;;;;;;;;;;;;;;;Check execution report;#4;Executioon report must contain execution price, points, spot rate;;
QAP-T2930;Display of dealer intervention window;Automated;;"Display of dealer intervention window :

To be easily handled, this window should have the following features :
* the creation time should be displayed in large un assigned and unassigned 
window, and the sorting must be done by creation time
* the publish window should be displayed in full (no scrolling needed)

 

 ";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX, SWED;lzaharia;;PFX-146;;QAP-1972;;Open a dealer intervention window with already existing quote requests;;"Assigned and unassigned ordered by creation time
Publish window displayed in full";;
QAP-T2931;Manual quote workflow : sending several consecutive publish;Automated;;"Manual quotes can be estimated and published several times during the life 
of the quote ";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX, SWED;lzaharia;;PFX-146;;QAP-1970;;"From Minifix / 360Gui/ Client FE, send a manual quote request with a 
quantity greater than autorfqthreshold";;Quote request is displayed on dealer intervention / unassigned;;
;;;;;;;;;;;;;;;Accept this quote (or assign to yourself);;Quote request assigned to me;;
;;;;;;;;;;;;;;;Publish after a first estimate;;Quote published;;
;;;;;;;;;;;;;;;"Modify the quote manualy from the interface in dealer intervention and 
republished";;Modification published to Fix or look on 360T app, ther must be pricies;;
QAP-T2932;Workflow of positions for Sell order Forward on RFQ;Automated;;"Workflow of positions for Buy order Forward on RFQ :

 

The workflow is the following :

1 - the taker sends a RFQ on a forward order

2 - the maker sends back a quote

3 - the taker sends a sell order to execute the quote

-> there is one execution sell, attached to the sell order for the client 
which impacts the position of the client

-> there is one execution buy, attached to the quote which impacts the 
internal position

 

In this test, we need to check that the process is correct and positions 
impacted correctly

The tables FXCURRPAIRPOSIT and FXCURRPOSIT must be empty at the beginning 
of the test

 

At the end of the test, there should be 2 opposite positions for client and 
internal

!image-2019-09-13-09-28-01-970.png!

New behaviour following PFX-1486 :

 The Posit quantity from the internal account appears always as spot date

The posit quantity from client account appears with its own settlement date

Each position  [AccountID/Currency Pair] appears in the summary, it is 
possible to see the detail of settlement dates by expanding the lines

 

Example of new display :

!image-2020-10-14-12-01-57-856.png!";/PFX/FX_MM_Position;High - Must Have;FX_MM_Positions;FXregression, needs_refactoring_FX, SWED, UAQA;lzaharia;;PFX-171, FOB-32812;;QAP-1898;;Send a RFQ on a forward order on EUR/USD;;RFQ received, quote sent back to client;;
;;;;;;;;;;;;;;;Send a sell order to hit the quote ask;;"Order received and executed :
- execution Sell sent back to client
- Position short (sell) impacted on client account
- execution buy created on quote
- position buy (long) impacted on internal account";;
;;;;;;;;;;;;;;;Send order to exceed the limit and trigger AH;;"in Order book (Auto-Hedger)
check order is appeared";;
QAP-T2933;Workflow of positions for Buy order Forward on RFQ;Automated;;"Workflow of positions for Buy order Forward on RFQ :

 

The workflow is the following :

1 - the taker sends a RFQ on a forward order

2 - the maker sends back a quote

3 - the taker sends a buy order to execute the quote

-> there is one execution buy, attached to the buy order for the client 
which impacts the position of the client

-> there is one execution sell, attached to the quote which impacts the 
internal position

 

In this test, we need to check that the process is correct and positions 
impacted correctly

The tables FXCURRPAIRPOSIT and FXCURRPOSIT must be empty at the beginning 
of the test

 

At the end of the test, there should be 2 opposite positions for client and 
internal

!image-2019-09-13-09-19-31-408.png!";/PFX/FX_MM_Position;High - Must Have;FX_MM_Positions;FXregression, needs_refactoring_FX, SWED, UAQA;lzaharia;;PFX-171, FOB-32812;;QAP-1897;;Send a RFQ on a 1W order on EUR/USD;;RFQ received, quote sent back to client;;
;;;;;;;;;;;;;;;Send a buy order to hit the quote ask;;"Order received and executed :
- execution Buy sent back to client
- Position short (buy) impacted on client account
- execution sell created on quote
- position sell (long) impacted on internal account";;
QAP-T2934;Workflow of positions for Sell order Spot on RFQ;Automated;;"Workflow of positions for Sell order Spot on RFQ :

 

The workflow is the following :

1 - the taker sends a RFQ on a spot order

2 - the maker sends back a quote

3 - the taker sends a sell order to execute the quote

-> there is one execution sell, attached to the buy order for the client 
which impacts the position of the client

-> there is one execution buy, attached to the quote which impacts the 
internal position

 

In this test, we need to check that the process is correct and positions 
impacted correctly

The tables FXCURRPAIRPOSIT and FXCURRPOSIT must be empty at the beginning 
of the test

 

At the end of the test, there should be 2 opposite positions for client and 
internal

!image-2019-09-12-18-11-03-270.png!";/PFX/FX_MM_Position;High - Must Have;FX_MM_Positions;FXregression, needs_refactoring_FX, SWED, UAQA;lzaharia;;PFX-171, FOB-32812;;QAP-1896;;Send a RFQ on a spot order on EUR/USD;;RFQ received, quote sent back to client;;
;;;;;;;;;;;;;;;Send a sell order to hit the quote ask;;"Order received and executed :
- execution Sell sent back to client
- Position short (sell) impacted on client account
- execution buy created on quote
- position buy (long) impacted on internal account";;
QAP-T2935;Workflow of positions for Buy order Spot on RFQ;Automated;;"Workflow of positions for Buy order Spot on RFQ :

 

The workflow is the following :

1 - the taker sends a RFQ on a spot order

2 - the maker sends back a quote

3 - the taker sends a buy order to execute the quote

-> there is one execution buy, attached to the buy order for the client 
which impacts the position of the client

-> there is one execution sell, attached to the quote which impacts the 
internal position

 

In this test, we need to check that the process is correct and positions 
impacted correctly

The tables FXCURRPAIRPOSIT and FXCURRPOSIT must be empty at the beginning 
of the test

 

At the end of the test, there should be 2 opposite positions for client and 
internal

!image-2019-09-12-18-02-44-607.png!";/PFX/FX_MM_Position;High - Must Have;FX_MM_Positions;FXregression, needs_refactoring_FX, SWED, UAQA;lzaharia;;PFX-171, FOB-32812;;QAP-1895;;Send a RFQ on a spot order on EUR/USD;;RFQ received, quote sent back to client;;
;;;;;;;;;;;;;;;Send a buy order to hit the quote offer;;"Order received and executed :
- execution Buy sent back to client
- Position long (buy) impacted on client account
- execution sell created on quote
- position sell (short) impacted on internal account";;
QAP-T2936;Autohedging  : quantities with decimals;Automated;;"Autohedging  : quantities with decimals : choose a weird quantity 
(1234567.23) for example and check if the whole process is keeping the 
decimals in quantity

This is valid for currency pairs USD/XXX (otherwise the quantity is always 
converted to USD)";/PFX/FX_MM_Autohedging;High - Must Have;FX_MM_Autohedging;FXregression, needs_refactoring_FX, SWED;lzaharia;;PFX-4098;;QAP-1762;;"From a client interface / Minifix, send a RFQ request with a quantity with 
decimals (for example 1234567.89";;"Quote request sent with this quantity, and quotes received with the same 
quantity";;
;;;;;;;;;;;;;;;Send an order to match the quantity;;"Order sent, hedged order sent same size with the same quantity, hedged 
order filled, excution report sent back to Fix / client interface";;
;;;;;;;;;;;;;;;Check quantity;;"Quantity in execution reports, hedging quotes and hedging orders are the 
same and contain decimals";;
QAP-T2937;AutoHedging - price determination sell order;Deprecated;;"Price determination with autohedging

From the specifications, the processing of hedging price is the following :

When processing an execution on a hedged quote, the hedging automaton 
considers the following hedging price:
* BidPx of the aggressed quoted + (DiscretionOffset + BidMargin) / 
10^PxPrecision if the hedging side, hence the client order side, is sell
* OfferPx of the aggressed quoted - (DiscretionOffset + OfferMargin) / 
10^PxPrecision if the hedging side, hence the client order side, is buy

Where the margin is taken from the ClientTierInstrSymbQty matching the 
order account-group’s tier, symbol and size.

 

Whatever the configured value, in the order, DiscretionOffsetValue of buy 
order must be positive and DiscretionOffsetValue of sell order must be 
negative.
* DiscretionOffsetValue = | InstrSymbolHedging.DiscretionOffsetValue | for 
a buy order
* DiscretionOffsetValue = -| InstrSymbolHedging.DiscretionOffsetValue | for 
a sell order

DB: it still exist in DB in table +autohedgerinstrsymbol+";/PFX/FX_MM_Autohedging;High - Must Have;FX_MM_Autohedging;AutomatedCodedUI, FXregression, SWED;lzaharia;;PFX-187;;QAP-1761;;"From a Fix interface / client interface, do an RFQ to have quotes on 
EUR/USD SPO";;Quotes displayed on EUR/USD SPO;;
;;;;;;;;;;;;;;;Send a sell order to execute the quote;;"Order sent
Hedging order created with same side and quantity as client order";;
;;;;;;;;;;;;;;;Check price;;"Price of hedging order equal to :
price of client order
minus discretion from configuration / 10^PxPrecision
minus bidmargin / 10^PxPrecision";;
;;;;;;;;;;;;;;;;;;;
QAP-T2938;AutoHedging - price determination buy order;Deprecated;;"Price determination with autohedging

From the specifications, the processing of hedging price is the following :

When processing an execution on a hedged quote, the hedging automaton 
considers the following hedging price:
* BidPx of the aggressed quoted + (DiscretionOffset + BidMargin) / 
10^PxPrecision if the hedging side, hence the client order side, is sell
* OfferPx of the aggressed quoted - (DiscretionOffset + OfferMargin) / 
10^PxPrecision if the hedging side, hence the client order side, is buy

Where the margin is taken from the ClientTierInstrSymbQty matching the 
order account-group’s tier, symbol and size.

 

Whatever the configured value, in the order, DiscretionOffsetValue of buy 
order must be positive and DiscretionOffsetValue of sell order must be 
negative.
* DiscretionOffsetValue = | InstrSymbolHedging.DiscretionOffsetValue | for 
a buy order
* DiscretionOffsetValue = -| InstrSymbolHedging.DiscretionOffsetValue | for 
a sell order

DB: it still exist in DB in table +autohedgerinstrsymbol+";/PFX/FX_MM_Autohedging;High - Must Have;FX_MM_Autohedging;AutomatedCodedUI, FXregression, SWED;lzaharia;;PFX-187;;QAP-1760;;"From a Fix interface / client interface, do an RFQ to have quotes on 
EUR/USD SPO";;Quotes displayed on EUR/USD SPO;;
;;;;;;;;;;;;;;;Send a buy order to execute the quote;;"Order sent
Hedging order created with same side and quantity as client order";;
;;;;;;;;;;;;;;;Check price;;"Price of hedging order equal to :
price of client order
+ discretion from configuration / 10^PxPrecision
+ offermargin / 10^PxPrecision";;
QAP-T2939;Worklow of Automated Quote on NDF;Automated;;"Workflow of automatic RFQ

 

This test case corresponds to acceptance criteria of user story FOB-34099 :
* A client quote request submitted against the system for a valid quantity 
(and valid settlement date if a forward broken date is specified) results 
in an auto-quoted response for the given request. This can be validated 
either through the Client Pricing tiles (see FOB-34100 and FOB-34101) in 
the trading FE or through the use of a separate trading interface used to 
simulate client activity (see FOB-34104) or through any other possibly 
temporary means engineering may provide if the other methods are not yet 
completed.

*{color:#0747A6}#1{color}*
{code:java}
< 
8=FIXT.1.1|9=154|35=R|49=QUOD5|56=QUODFX_UAT|34=167|52=20210414-14:26:09|131=111333024|146=1|55=EUR/JPY|167=FXFWD|537=1|38=1000000|64=20210423|63=W1|15=EUR|1=CLIENT1|40=D|10=153|
{code}
{color:#0747A6}*#2*{color}
{code:java}
< 
8=FIXT.1.1|9=209|35=D|49=QUOD5|56=QUODFX_UAT|34=170|52=20210414-14:26:34|1=CLIENT1|11=1050979460|21=1|15=EUR|38=1000000|40=D|44=124|54=1|55=EUR/JPY|59=3|60=20210414-14:26:34|63=0|64=20210423|167=FXFWD|117=01210414142608181002|10=186|
> 
8=FIXT.1.1|9=448|35=8|34=184|49=QUODFX_UAT|52=20210414-14:26:36.699|56=QUOD5|1128=9|1=CLIENT1_1|6=124|11=1050979460|14=1000000|15=EUR|17=EX1210414142633259001|21=1|22=8|31=124|32=1000000|37=MO1210414142633243001|38=1000000|39=2|40=D|44=124|48=EUR/JPY|54=1|55=EUR/JPY|59=3|60=20210414-14:26:33.640|63=0|64=20210423|75=20210414|100=XQFX|120=JPY|150=F|151=0|167=FXFWD|194=124.00001|195=-0.00001|207=XQFX|381=124000000|453=1|448=gtwquod5|447=D|452=36|460=4|528=A|854=0|10=145|

{code}";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX, SWED;lzaharia;;;;QAP-1755;;"From 360T/Minifix, send a RFQ on a NDF instrument with a quantity lower 
than autoRFQThreshold";"USD/PHP 1W

#1";"RFQ sent, and reply received in 360T interface / minifix
Prices corresponding to Client pricing tile for the quantity
Prices moving according to the Client pricing tile";;
;;;;;;;;;;;;;;;Check reply in minifix / Client interface;;"Reply must contain bid price, offer price, bid spot rate, offer spot rate, 
bid / offer points, fixing date";;
;;;;;;;;;;;;;;;From the 360T interface / minifix, send an order to execute the RFQ;;Order executed and correctly responded to FIX;;
;;;;;;;;;;;;;;;Check execution report;#2;"Executioon report must contain execution price, points, spot rate, fixing 
date";;
QAP-T2940;Basic worklow of Automated Quote on Forward with booktype sweepable (fix);Automated;;"Basic workflow of automatic RFQ on Forward

 

This test case corresponds to following acceptance criteria of FOB-34099 :
* A client quote request submitted against the system for a valid quantity 
(and valid settlement date if a forward broken date is specified) results 
in an auto-quoted response for the given request. This can be validated 
either through the Client Pricing tiles (see FOB-34100 and FOB-34101) in 
the trading FE or through the use of a separate trading interface used to 
simulate client activity (see FOB-34104) or through any other possibly 
temporary means engineering may provide if the other methods are not yet 
completed.

Following review from Ben, the autoRFQThreshold does not apply anymore

Instead, the quantity should be validated against the max of 
ClientTierInstrSymbQty if the BookType is tiered, sum 
of ClientTierInstrSymbQty if the BookType is full";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;lzaharia;;PFX-138, PFX-530;;QAP-1746;;"From 360T/Minifix, send a RFQ on a Forward instrument with a quantity lower 
than sum of quantitues in clientTierInstrSymQty";without side (tag 54);"RFQ sent, and reply received in 360T interface / minifix
Prices corresponding to Client pricing tile for the quantity
Prices moving according to the Client pricing tile";;
;;;;;;;;;;;;;;;Check content of reply;;"Must contain quantity (possibly bid and offer quantity), bid price, offer 
price, bid spot rate, offer spot rate, bid points, offer points";;
;;;;;;;;;;;;;;;From the 360T interface / minifix, send an order to execute the RFQ;;Order executed and correctly responded to FIX;;
;;;;;;;;;;;;;;;Check execution report;;Execution report must contain price, spot rate;;
QAP-T2941;FETrading - Order Book : NetAmount and NetPrice calculation verification;Automated;;"Order book, should display new definition of:

NetAmount=(CumQty*AvgPrice) + Commission
NetPrice= NetAmount/CumQty. 

Technical.config contains to check decimals after separator:

 ";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, FXregression, refactored_FX;;;;;QAP-1713;;Open Aggregated Market Rates window > RFQ tile.;;RFQ tile is opened.;;
;;;;;;;;;;;;;;;Open Order Book;;Order Book window is opened.;;
;;;;;;;;;;;;;;;Select instrument and click Send;EUR/USD - spot;Quotes received.;;
;;;;;;;;;;;;;;;Send Order;;Order is sent and filled;;
;;;;;;;;;;;;;;;Check NetAmount=(CumQty*AvgPrice) + Commission;;NetAmount calculation should be valid;;
;;;;;;;;;;;;;;;Check NetPrice= NetAmount/CumQty. ;;NetPrice calculation should be valid;;
QAP-T2942;ESP tile: custom algos are saved after FE restaring;Open;;"Req: FOB-32692

Aggregates Market Rates open with ESP tile";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, qa2019q2;;;;;QAP-1703;;Choose Instument symbol on ESP tile;e.g. EUR/USD;Instrument is choosed, values are shown;;
;;;;;;;;;;;;;;;Do right click on ESP tile and choose Strategies;;"Section with ""Algorithms"" title is opened";;
;;;;;;;;;;;;;;;"Add new algo (Click on ""+"" sign)";;New line is added;;
;;;;;;;;;;;;;;;Click on 3 dotes and set custom name and algorithm;;Custom algo is updated;;
;;;;;;;;;;;;;;;Restart FE;;Custom algo is saved and shown on tile;;
QAP-T2943;Display of prices with min spread greater than margins;Automated;;"Check the display of quotes with min margin  greater than bid / offer 
margins";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression, needs_refactoring_FX, SWED;lzaharia;;PFX-49, PFX-134;;QAP-1696;;From admin FE, set min spread = 2, bid margin = 0.1, offer margin = 0.1;;Margins updated;;
;;;;;;;;;;;;;;;On Client pricing tile, check display;;Check that the spread between bid and offer => 2;;
QAP-T2944;Multiple actions publish with panic and directly from tiles;Specified;;" 

 ";/PFX/FX_Display;High - Must Have;FX_Display;FXregression;lzaharia;;PFX-1312;;QAP-1685;;"Click ""Panic !"" button (bottom right corner)";;"""Panic !"" window is opened";;
;;;;;;;;;;;;;;;"Click ""Stop"" button in line with ""Executable Prices"" row";;"Red symbol has appeared on the left side of the row, the button contains 
""Resume"" text now";;
;;;;;;;;;;;;;;;"Click ""Resume"" button in line with ""Executable Prices"" row";;"Green symbol has appeared on the left side of the row. The button contains 
""Stop"" text now";;
;;;;;;;;;;;;;;;"Click ""Stop"" button in line with ""Pricing"" row";;"Red symbol has appeared on the left side of the row, the button contains 
""Resume"" text now";;
;;;;;;;;;;;;;;;"Click ""Resume"" button in line with ""Pricing"" row";;"Green symbol has appeared on the left side of the row. The button contains 
""Stop"" text now";;
QAP-T2945;Check that fwd points recovered after restart FE;Specified;;;/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression;lzaharia;;PFX-4513;;QAP-1650;;Send Swap RFQ via miniFIX or FX MM RFQ tile;"Client tier - Iridium1
GBP/USD - 1W/2W
Qty - 1000000";Request send and recieve Quote;;
;;;;;;;;;;;;;;;On received Quote send NewORderSingle;;Order sent and filled;;
;;;;;;;;;;;;;;;In order book select your order and open execution section;;Check that order have near and far fwd points;;
;;;;;;;;;;;;;;;Reopen FE;;Check that order have near and far fwd points after restart;;
QAP-T2946;Check behaviour of pricing tile with 2 FE on the same tile;Specified;;"Check behaviour with pricing tiles on same currency pair / client tier on 2 
different FEs";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression, SWED;lzaharia;;PFX-49;;QAP-1645;;Open FE with user 1 and open a tile on this FE on EUR/USD, gold;;EUR/USD Gold pricing;;
;;;;;;;;;;;;;;;Open FE with user 2 and open a pricing tile on this FE with EUR/USD Gold;;EUR/USD Gold pricing;;
;;;;;;;;;;;;;;;Change margins on first FE;;"Margins changed
Check that 2nd FE is also updated";;
;;;;;;;;;;;;;;;"Change Pricing
on second FE";;Pricing changed, check that it is also changed on 1st FE;;
;;;;;;;;;;;;;;;On first FE enable Pricing back;;"Pricing enabled
Check that it is also enabled on 2nd FE";;
;;;;;;;;;;;;;;;On second FE change margins;;"Check margins change
It must be also changed on first FE";;
QAP-T2947;Adjustment of spread on bid side and ask side;Automated;;"Specific check for the behaviour of spread adjustment on bid side and ask 
side";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression, refactored_FX, SWED;lzaharia;;PFX-49;;QAP-1644;;Open a client pricing tile EUR/USD, generic;;Client pricing tile open;;
;;;;;;;;;;;;;;;Check margins and spread;;Margin and spread set to default;;
;;;;;;;;;;;;;;;Select the last line, and decrease the bid of 2;;"Check that the bid price has changed
Check that the margin has changed on bid side";;
;;;;;;;;;;;;;;;Decrease the bid of 1;;Check that the bid price and bid margin has been updated;;
;;;;;;;;;;;;;;;Select again the line, and increase the ask of 3;;Ask increased by 3, ask margin updated;;
;;;;;;;;;;;;;;;Decrease the ask margin by 2;;Ask decreased accordingly, margin updated;;
QAP-T2948;Multiple actions on pricing tile;Automated;;Play with levels and spread / publish / accept orders functionalities;/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression, refactored_FX, SWED;lzaharia;;PFX-49;;QAP-1643;;Open a Pricing tile on EUR/USD, with client tier generic;;Pricing tile displayed with prices changing;;
;;;;;;;;;;;;;;;Check the margins and the spreads;;"Prices displayed with default margins and default spread as defined in the 
database";;
;;;;;;;;;;;;;;;Select the 2nd line;;Second line selected;;
;;;;;;;;;;;;;;;Change the offset to 1.5 and increase (button <>);;"margins updated (initial offset + new offset), bid / ask display a spread 
of 2 * (initial offset + new offset)";;
;;;;;;;;;;;;;;;On the same line, click on Pricing;;Pricing disabled for this line, line in red;;
;;;;;;;;;;;;;;;On the same line, decrease the offset by 1;;Price and margin changes to adjust to the new offset;;
;;;;;;;;;;;;;;;On the same line, click on Pricing;;Prices published on this line;;
;;;;;;;;;;;;;;;select all lines and click in default;;lines back to default;;
QAP-T2949;Check displaying Kibana TCA action in backstage menu;Open;;"FOB-32415

*Precondition:*
FE is opened

TcaKibana tag from functional.config file:


enable property must be ""true""";/PFX/FX_Display;High - Must Have;FX_Display;FXregression, UAQA;;;;;QAP-1618;;Open backstage menu(click on Quod logo);;"Backstage menu is opened and Kibana TCA function is enable (if this 
function is configured in functional config)";;
;;;;;;;;;;;;;;;"Click on ""Trade Analytics"" button in side menu.";;"The browser should be open the link specified in the ""url"" property of the 
tcaKibana config tag.";;
;;;;;;;;;;;;;;;;;;;
QAP-T2950;Full amounts : price display and execution on NDF;Specified;;Check the behaviour of Full amount for NDF;/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression, UAQA;lzaharia;;;;QAP-1606;;"From a FE tile, send a subscription to full amount on venue MS for 2 
quantities : 2M and 4M on a NDF (for example USD/INR or USD/PHP";;"Subscription sent to Market with |9000=2|9001=2000000|9001=4000000| and no 
tag 40
tag 63 has tenor, tag";;
;;;;;;;;;;;;;;;Check reply in Gateway logs;;Reply sent with quantities 2M and 4M, QuoteEntryID sent to MDA;;
;;;;;;;;;;;;;;;Check display on FE;;FE displays Full amount prices and quantity for venue MSF;;
;;;;;;;;;;;;;;;Send an order with quantity 2000000;;In gateway logs, check that the order contains the quoteEntryID in tag 278;;
QAP-T2951;Full amounts : price display and execution on forward;Specified;;"Check the behaviour of Full amount for forward

*278*=1AaReNrCLh57Vi75KP2ngr9/w+/1M
{code:java}
2021-03-12 10:10:58.226279369 QUOD.QFSSESPO [ 1685] INFO qffss_esp 
(QuickfixQuodLog.h:68) - QUICKFIX: FIX.4.4:TRD.NY.SIM.QUF.3->FSS: outgoing: 
8=FIX.4.4|9=250|35=D|34=1070|49=TRD.NY.SIM.QUF.3|52=20210312-10:10:58.225|56=FSS|11=MO1210312101058319001|15=EUR|38=1000000|40=D|44=1.18228|54=1|55=EUR/USD|59=4|60=20210312-10:10:58.203|63=W1|64=20210323|278=1AaReNrCLh57Vi75KP2ngr9/w+/1M|453=1|448=CITI|447=D|452=35|10=206|{code}";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression, UAQA;lzaharia;;;;QAP-1605;;"From a FE tile, send a subscription to full amount on venue MS for 2 
quantities : 2M and 4M on a forward";;"Subscription sent to Market with |9000=2|9001=2000000|9001=4000000| and no 
tag 40
tag 63 has tenor";;
;;;;;;;;;;;;;;;Check reply in Gateway logs;;Reply sent with quantities 2M and 4M, QuoteEntryID sent to MDA;;
;;;;;;;;;;;;;;;Check display on FE;;FE displays Full amount prices and quantity for venue MSF;;
;;;;;;;;;;;;;;;Send an order with quantity 2000000;;In gateway logs, check that the order contains the quoteEntryID in tag 278;;
QAP-T2952;Full amounts : price display and execution on spots;Open;;"Check the behaviour of Full amount for spot

*278*=1AaReNrCLh57Vi75KP2ngr9/w+/1M
{code:java}
2021-03-12 10:10:58.226279369 QUOD.QFSSESPO [ 1685] INFO qffss_esp 
(QuickfixQuodLog.h:68) - QUICKFIX: FIX.4.4:TRD.NY.SIM.QUF.3->FSS: outgoing: 
8=FIX.4.4|9=250|35=D|34=1070|49=TRD.NY.SIM.QUF.3|52=20210312-10:10:58.225|56=FSS|11=MO1210312101058319001|15=EUR|38=1000000|40=D|44=1.18228|54=1|55=EUR/USD|59=4|60=20210312-10:10:58.203|63=W1|64=20210323|278=1AaReNrCLh57Vi75KP2ngr9/w+/1M|453=1|448=CITI|447=D|452=35|10=206|{code}";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, UAQA;lzaharia;;;;QAP-1604;;"From a FE tile, send a subscription to full amount on venue CITI for 2 
quantities : 2M and 4M";;"Subscription sent to Market with |9000=2|9001=2000000|9001=4000000| and no 
tag 40";;
;;;;;;;;;;;;;;;Check reply in Gateway logs;;Reply sent with quantities 2M and 4M, QuoteEntryID sent to MDA;;
;;;;;;;;;;;;;;;Check display on FE;;FE displays Full amount prices and quantity for venue CITIF;;
;;;;;;;;;;;;;;;Send an order with quantity 2000000;;In gateway logs, check that the order contains the quoteEntryID in tag 278;;
QAP-T2953;Use default feature of pricing tile;Specified;;"When the user presses the ‘Use defaults’ button, the pricing window sends a 
QuoteDefaultMarginRequest to the main quoting session, containing the pair 
and tier under consideration. The quoting session:
* replaces the bid and offer margins stored in all the 
ClientTierSymbTenQtyTRD entries of the pair and tier with the default bid 
and offer margins.
* replaces the manual bid and offer margins in all the 
ClientTierSymbTenQtyTRDentries of the pair and tier with the default bid 
and offer margins.
* Sets the ClientTierInstrSymbol ManualQuoting flag

 

It then notifies other sessions via cache updates and the next publication 
update to the FIX counterpart and to GUIs will take the new margins and 
ManualQuoting flag into account. All the pricing tiles on this pair and 
tier update the margins, prices and Manual quoting toggle accordingly.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression;lzaharia;;PFX-107, PFX-49;;QAP-1602;;From a quoting pricing tile, press default button;;"Check in DB :
QuoteDefaultMargin
request sent to QS to : replace bid and offer margins in all 
ClientTierSymbTenQtyTRD with default bid and offer margins, - replaces the 
manual bid and offer margins in all the ClientTierSymbTenQtyTRD entries of 
the pair and tier with the default bid and offer margins, Sets the 
ClientTierInstrSymbol ManualQuoting flag";;
;;;;;;;;;;;;;;;Check FE results;;New margins taken into account in the ESP tiles;;
QAP-T2954;Spread on Pricing window;Automated;;"PriceSpreadOffset can be changed and equals TickSize by default. Like all 
other FX offsets, it is multiplied by ForwardPointDivisor before display. 
It represents the offset bid and offer margins will be incremented or 
decremented by, every time the user is pressing an adjustment button.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression, refactored_FX, SWED;lzaharia;;PFX-49;;QAP-1601;;"Choose a currency pair, check that it is correctly configured in DB : 
correct tick size, correct pxprecision, largepxprecision and 
forwardpointdivisor
Open a pricing tile and check the spread";;"Spread should be equal to ticksize * forwardpointsdivisor (ex 0,00001*10000 
= 0,1)";;
QAP-T2955;Forward calculation price when the margins are in pips;Automated;;"_emphasized text_The QS can publish all-in forward prices over FIX or to 
front-ends or to backend components. Forward and NDF initials and updates 
contain BidForwardPoints, OfferForwardPoints, BidSpotRate or OfferSpotRate, 
in addition to the usual BidPx and OfferPx. The trivial relationship 
between them is:

BidPx = BidSpotRate + BidForwardPoints rounded down to the SBP forward/NDF 
listing tick size.

OfferPx = OfferSpotRate + OfferForwardPoints rounded up to the SBP 
forward/NDF listing tick size.

BidForwardPoints and OfferForwardPoints are configured in ClientTierFXTenor 
table and are almost constant.

 

From user story FOB-34095 we have :

+Pips+

Expressed to one additional decimal place of precision, using a spot 
increment of 0.1 and a forward increment of 0.001.

Margins expressed in pips for the Spot of each currency pair are applied by 
subtracting the margin value from the core bid price and adding the margin 
value to the core ask price. As an example, consider the following settings 
for a client tier -> currency pair:

_*S*pot bid/ask *m*argins configured for the 1mil volume band:  *Ms* = 0.1 
/ 0.1_

_Spot bid/ask core *p*rices *c*alculated for the 1 mil volume band: *Pc* = 
1.1234 / 1.1235_

_*S*pot bid/ask *p*rices *p*ublished to client for the 1 mil volume band: 
*Pps* = (__*Pc*__-*Ms*)/_ _(Scpc-Sm)=>__(1.1234 - 0.1) / (1.1235 + 0.1) => 
1.12339 / 1.12351_

Margins expressed in pips for each forward tenor of each currency pair are 
applied by first applying the Spot margins to the Spot core bid and ask 
price, then applying the configured forward margin values to the configured 
swap points (FOB-34098). As an example, consider the following settings for 
a client tier -> currency pair:

_5M (5 month) *f*orward bid/ask *m*argins configured for the 1mil volume 
band: *Mf =* 0.002 / 0.002_

_Spot bid/ask prices published to client for the 1 mil volume band: 
(__*Pps)*__1.12339 / 1.12351 (taken from the example above, with Spot 
margins already applied)_

_5M (5 month) configured *f*orward bid/ask *p*oints: 2.34 / 2.56 (*Fpc)*_

_5M (5 month)_ _forward bid/ask prices published to client for the 1 mil 
volume band:_
* _Spot: 1.12339 / 1.12351__(__*Pps)*_
* _*F*orward *P*oints: *FP =*(*Fpc* - *Mf*) / ( *Fpc* + *Mf*) =>(2.34 - 
0.002) / (2.56 + 0.002) => 2.338 / 2.562_
* _Outrights: (*Pps* + *FP* *0.0001)/__(*Pps* + *FP* *0.0001) =>__(1.12339 
+ 0.0002338) / (1.12351 + 0.0002562) => 1.1236238 / 1.1237662_";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, Mixed, needs_refactoring_FX, SWED;lzaharia;;PFX-81;;QAP-1599;;"On ClientTierSymbTenorQTY table, Check configuration of margins. They must 
be expressed in pips
For example b : 0,1, o: 0,2";;"Margins, note the value
Bid = 0.1
Offer = 0.2";;
;;;;;;;;;;;;;;;"Open pricing window for
spot";;pricing window opened;;
;;;;;;;;;;;;;;;"From Client FE / 360T Interface / Minifix, subscribe to have a price on 
forward";;"Check that the forward price in client interface and pricing tile 
simultaneously (do a snapshot)
spot : price of spot
forward points : bid = (forward points - 0.1)
offer = (forward points +0.2°
Bid Price = Bid spot + forwardpoints * 10exp-pxprecision
Offer Price = Offer spot + forwardpoints * 10exp pxprecision";;
QAP-T2956;Reject of market data request via fix with wrong instrument;Automated;;"In case the quoting session rejects the FIX subscription request, the 
MarketDataRequestReject is sent back over the same FIX session.

 
{code:java}
< 
8=FIXT.1.1|9=152|35=V|49=QUOD3|56=QUODFX_UAT|34=206|52=20210520-18:22:31|50=CLIENT1|262=1111222232|263=1|264=0|265=0|267=2|269=0|269=1|146=1|55=EUR/ddd|460=4|167=FXSPOT|10=008|

{code}";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX, SWED;lzaharia;;PFX-78;;QAP-1597;;"Send a market data request 35=V with incorrect data (for example, incorrect 
instrument)";;"Market data request received and rejected by QS
35=Y message sent back to FIX";;
;;;;;;;;;;;;;;;Check FIX gateway;;35=Y message correctly received by gateway;;
QAP-T2957;FIX subscription with full image (35=V replied by 35=W);Specified;;"If MDUpdateType is not provided in the incoming MarketDataRequest, the 
QuotingSession’s MDUpdateType flag indicates whether the quoting session 
publishes updates as incremental or full images. It depends on what format 
the customer application or platform can support.
!screenshot-1.png|thumbnail!
!screenshot-2.png|thumbnail!
Quoting Session = *QSESP1* for quod308@mercury
{color:#0747a6}*#1*{color}
{code:java}
< 
8=FIXT.1.1|9=163|35=V|49=QUOD3|56=QUODFX_UAT|34=19|52=20201110-15:29:23|50=CLIENT1|262=1111222157|263=1|264=0|265=1|267=2|269=0|269=1|146=1|55=EUR/USD|460=4|63=0|167=FXSPOT|10=212|

{code}";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, SWED;lzaharia;;PFX-78;;QAP-1596;;Make a market data request with tag 265=1 (incremental);"in Admin change Quote Update Format to Incremental and restart QS
#1";"Reply should be sent with incrementals (one message 35=W followed by 35=X)
In Market_Data_Incremental_Refresh to 35=X mapping, tag 64 (SettlDate) 
should be removed from the ""top-level"" (after tag 55)";;
;;;;;;;;;;;;;;;Stop subscription;;Subscription stopped;;
;;;;;;;;;;;;;;;Make a market data request with tag 265 = 0 (full refresh);;Reply sent with full images (only 35=W);;
QAP-T2958;Forward display on ESP tiles;Automated;;"Check the Display of forwards on the ESP tiles :
* the tenor must be present
* on aggregated rates, the spot rate and the pts must be visible";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression, needs_refactoring_FX, SWED;lzaharia;;;;QAP-1591;;Open a tile ESP with EUR/USD 1M;;Tile opened;;
;;;;;;;;;;;;;;;See display of instrument;;"Check Instrument display : currencypair, tenor, value date must be 
displayed";;
;;;;;;;;;;;;;;;See aggregated rates;;Spot, forward pts, prices must be displayed;;
QAP-T2959;FX FETrading - RFQ tile: After resizing or clicking on Quotes table header, Order should not be sent to the system.;Specified;;"*Precondition:* 

Open 'Aggregated Market Rates' and 'Order book'. Open 'RFQ Tile'.";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression;;;;;QAP-1590;;Select 'EUR/USD' currency pair, Near tenor - 'Spot'.;;Check that currency pair, near tenor, near tenor date are changed.;;
;;;;;;;;;;;;;;;Send RFQ request.;;Check that Quotes is responded.;;
;;;;;;;;;;;;;;;Sell/Buy currency pair using 'BNP' venue in Quotes section.;;Check that Order is appeared in Order Book.;;
;;;;;;;;;;;;;;;Send RFQ request.;;Check that Quotes is responded.;;
;;;;;;;;;;;;;;;Resize header of any column in Quotes section.;;Check that Order should not be sent in system (also in Order Book).;;
;;;;;;;;;;;;;;;Сlick on header of any column in Quotes section.;;Check that Order should not be sent in system (also in Order Book).;;
QAP-T2960;FX MM ESP : live settings;Automated;;"h3. This test validates FOB-34082 :
* Buttons are either displayed or hidden to toggle between configured and 
live settings as well as reset to default configured settings, according 
to FOB-34070. If visible, when Use Defaults is selected, all live settings 
are reverted to default configured values, and when Live Settings is 
toggled, the tile switches between showing live settings with all tile 
controls enabled and showing default configured settings with all tile 
controls disabled and greyed out.

h3. 1.1.1     Live Settings

When the user toggles the “Live Settings button” off, the pricing window 
unsubscribes from the SBP listing, then re-subscribes to the same main 
quoting session to the same SBP spot listing, indicating TBD how? It wants 
default margins to be applied.

 

The GUI disables all the controls described in paragraphs _10.6.9_ to 
_10.6.14_ and sends a MarketDataRequest to the main quoting session over 
the same topic as in paragraph _10.6.3_. The request contains the 
DefaultMargin flag.

 

The main quoting session:
* computes prices taking the default bid and offer margins at each volume 
band.
* does not notify other sessions via cache updates, as nothing is modified 
in database
* at the next throttling interval, publishes the new prices on a topic that 
slightly differs from paragraph 6.4:
*
** Does not publish such default margin prices over the embedded FIX 
gateway
 

When the user presses the “Live Settings button” again, the pricing window 
unsubscribes from .

 

To do this test, the default bid / offer margins must be set

table *quodsetting.FX_LiveSettings_UseDefaults_Toggle = Y*";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression, refactored_FX;lzaharia;;PFX-107, PFX-49;;QAP-1589;;Open Client Pricing Tile and press Default;;Prices have priced with default margins;;
;;;;;;;;;;;;;;;Change spread on 1 (do widen spread as on the picture );;Base Margins are changed;;
;;;;;;;;;;;;;;;Change the settings to live;;Base margins return to default values;;
;;;;;;;;;;;;;;;Change back the settings to live;;Base margins return to changed values;;
QAP-T2961;RFQ Layout : Recovery selection of venues with filter.;Automated;;Check the filtering and saving of venues;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, needs_refactoring_FX;;;;;QAP-1585;;Open menu filter venues;;Check that venues are removed / displayed when clicking on the venues;;
;;;;;;;;;;;;;;;Save workspace with different selections of venues, reopen FE;;Different selections of venues are saved;;
QAP-T2962;Workflow of previously quoted order negative case (incorrect price);Automated;;"This paragraph pertains to a quoting session having a cleared 
TradingQuotingSession flag. I.e. the order is mapped by a standard 
sell-side FIX gateway to the ORS, which maintains a (possibly outdated) 
image of the QuoteRequest and Quote records, according to paragraphs 
_9.6.3_ and _9.7.7_.

 

The ORS queries the QS instance responsible for the quote, thanks to the 
QuotingSessionID stored in the quote, to get the latest QuoteRequest and 
Quote images. It is a synchronous request published over a non-certified 
transport. Standard validations against the quote then take place.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, needs_refactoring_FX;lzaharia;;PFX-168;;QAP-1563;;Client sends request for quotes;;Quote received;;
;;;;;;;;;;;;;;;"Client send order with clientquoteId and ordtype = previously quoted
and clientQuoteID
Price is not equal to the price for volume band :

- lower for a sell order";;"Order received by ORS
ORS checks last quote and enrichs order
ORS check quantity of order (it must match the quote size)

Order rejected by QS";;
;;;;;;;;;;;;;;;Check FIX;;Order is rejected on FIX;;
;;;;;;;;;;;;;;;Client sends request for quotes;;Quote received;;
;;;;;;;;;;;;;;;"Client send order with clientquoteId and ordtype = previously quoted
and clientQuoteID
Price is not equal to the price for volume band :
- greater for a buy order";;"order is filled at price of the quote, doesn't matter how big price was 
sent";;
QAP-T2963;Workflow of previously quoted order negative case (incorrect quantity of order);Automated;;"This paragraph pertains to a quoting session having a cleared 
TradingQuotingSession flag. I.e. the order is mapped by a standard 
sell-side FIX gateway to the ORS, which maintains a (possibly outdated) 
image of the QuoteRequest and Quote records, according to paragraphs 
_9.6.3_ and _9.7.7_.

 

The ORS queries the QS instance responsible for the quote, thanks to the 
QuotingSessionID stored in the quote, to get the latest QuoteRequest and 
Quote images. It is a synchronous request published over a non-certified 
transport. Standard validations against the quote then take place.

 

The purpose of this test is to check rejects in case of incorrect quantity 
of order

 

This test can be done from minifix only";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, refactored_FX;lzaharia;;PFX-168;;QAP-1562;;Client sends request for quotes;tenor SPOT;Quote received;;
;;;;;;;;;;;;;;;"Client send order with clientquoteId and ordtype = previously quoted
and clientQuoteID
Quantity different than quoted quantity";;"Order received by ORS
ORS checks last quote and enrichs order
ORS check quantity of order (it must match the quote size)";;
;;;;;;;;;;;;;;;ORS rejects the order;;ORS rejects the order and sends back a message to FIX /FE;;
;;;;;;;;;;;;;;;FE see reject;;Order book order changes to status REJ;;
;;;;;;;;;;;;;;;FIX see reject;;Reject message sent to FIX;;
QAP-T2964;"Client Pricing: Verify functionality of ""default"" button.";Automated;;"When the user presses the ‘Use defaults’ button, the pricing window sends a 
QuoteDefaultMarginRequest to the main quoting session, containing the pair 
and tier under consideration. The quoting session:
* replaces the bid and offer margins stored in all the 
ClientTierInstrSymbQty entries of the pair and tier with the default bid 
and offer margins.
* replaces the manual bid and offer margins in all the 
ClientTierInstrSymbQty entries of the pair and tier with the default bid 
and offer margins.
* Sets the ClientTierInstrSymbol ManualQuoting flag

 

 

It then notifies other sessions via cache updates and the next publication 
update to the FIX counterpart and to GUIs will take the new margins and 
ManualQuoting flag into account. All the pricing tiles on this pair and 
tier update the margins, prices and Manual quoting toggle accordingly.

 

These default margins can only be changed from the administrative 
front-end.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX;lzaharia;;PFX-107, PFX-49;;QAP-1560;;"On sales FE, open client price tile with currency pair EUR/USD and 
subscribe to EUR/USD prices via fix";;Client price tile open;;
;;;;;;;;;;;;;;;"Modify spread, shift prices to the right to modify the initial spread and 
prices";;Prices modified in client pricing tile;;
;;;;;;;;;;;;;;;Check client interface;;Prices modified in client interface (miniFix);;
;;;;;;;;;;;;;;;On sales FE, come back to client price tile and click on default;;Spread and prices come back to default;;
;;;;;;;;;;;;;;;Check client interface;;Prices published, modified back to default;;
QAP-T2965;Enabling / Disabling pricing (fix);Automated;;"*simillar test for GUI QAP-2117*

After the user has selected one or more lines of the SBP quote book, the 
‘Publish prices’ toggle is made available in the instrument dashboard. 
Pressing this button switches the price publication state of each selected 
line from ‘disabled’ to ‘enabled’ alternatively. In the quote book, the 
selected volume lines are modified as follows:
* QuoteCondition gains or loses the Closed (a.k.a. Inactive) enumeration 
value. An entry is by default active.

 

In all the GUIs that receive a Closed (a.k.a. inactive) QuoteCondition in 
the market data full or incremental refresh, the quote book entry still 
blinks but its prices are greyed out. The quote book entry gets its normal 
colors back when its market data QuoteCondition loses the Closed value. The 
‘Publish prices’ button color is:
* Green if no entry is inactive
* Orange is at least one entry is inactive
* Red no entry is open (a.k.a. active)

 
{code:java}
< 
8=FIXT.1.1|9=164|35=V|49=QUOD3|56=QUODFX_UAT|34=677|52=20201127-12:13:18|50=CLIENT1|262=1111222172|263=1|264=0|265=0|267=2|269=0|269=1|146=1|55=EUR/USD|460=4|64=20201201|167=FXSPOT|10=012|
{code}


 ";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX, UAQA;lzaharia;;PFX-49, PFX-528;;QAP-1559;;Having tenor with Pricing OFF send and MD request from fix;"tenor=w2
USD/CAD";"Check the update of QuoteCondition in FIX
276=B (Closed/Inactive) for standard plugin";;
;;;;;;;;;;;;;;;Send an order;;"The order should be rejected
58=empty book";;
;;;;;;;;;;;;;;;unsubscribe USD/CAD;;;;
;;;;;;;;;;;;;;;Send MD request for tenor where Pricing OFF for all row except qty=1M;"tenor=w2
EUR/CAD";276=B for bands where Pricing OFF;;
;;;;;;;;;;;;;;;From client FE, send an order;qty=1M;Order sent successfully;;
;;;;;;;;;;;;;;;From client FE, send an order;qty=2M;Order gets rejected;;
QAP-T2966;Enabling / Disabling order Executable (fix);Automated;;"*simillar test for GUI QAP-2117*

A toggling button to accept/no longer accept customer orders is available 
in the instrument dashboard. It applies at the instrument symbol and client 
tier level. If the sales user disables or enables order acceptance, it 
sends a QuoteAdjustmentRequest message to the QS containing all the volume 
entries of the quote book modified as follows:
* MDQuoteType is set to Indicative (to disable order acceptance) or 
Tradeable (to enable it)

 

The button alternatively passes from green to red (respectively from red to 
green) when the window receives an Indicative (respectively Tradeable) 
MDQuoteType on any half-row market data. All the entries in the window 
shall actually be simultaneously Indicative or Tradeable.

 

Some LPs don't support indicative MDQuoteType (for example 360t)

In this case it is still possible to send an order *but the backend must 
reject the order*


{code:java}
< 
8=FIXT.1.1|9=165|35=V|49=QUOD3|56=QUODFX_UAT|34=40|52=20210517-11:59:33|50=Palladium1|262=1111222025|263=1|264=0|265=0|267=2|269=0|269=1|146=1|55=USD/CAD|460=4|64=20210525|167=FXFWD|10=045|
{code}

{code:java}
> 
8=FIXT.1.1|9=1467|35=W|34=41|49=QUODFX_UAT|52=20210517-11:59:35.993|56=QUOD3|1128=9|55=USD/CAD|262=1111222025|268=6|269=0|278=4_USD/CAD_20210517T115935986667577_Bid1_20210525|270=1.31699|271=1000000|272=20210517|273=11:59:35|299=4_USD/CAD_20210517T115935986667577_Bid1_20210525|290=1|1024=1|63=W1|64=20210525|1070=0|1026=1.31697|1027=0.00002|269=1|278=4_USD/CAD_20210517T115935986667577_Ask1_20210525|270=1.31699|271=1000000|272=20210517|273=11:59:35|299=4_USD/CAD_20210517T115935986667577_Ask1_20210525|290=1|1024=1|63=W1|64=20210525|1070=0|1026=1.317|1027=-0.00001|269=0|278=4_USD/CAD_20210517T115935986667577_Bid2_20210525|270=1.31696|271=2000000|272=20210517|273=11:59:35|299=4_USD/CAD_20210517T115935986667577_Bid2_20210525|290=2|1024=1|63=W1|64=20210525|1070=0|1026=1.31695|1027=0.00001|269=1|278=4_USD/CAD_20210517T115935986667577_Ask2_20210525|270=1.31702|271=2000000|272=20210517|273=11:59:35|299=4_USD/CAD_20210517T115935986667577_Ask2_20210525|290=2|1024=1|63=W1|64=20210525|1070=0|1026=1.31702|1027=0|269=0|278=4_USD/CAD_20210517T115935986667577_Bid3_20210525|270=1.31694|271=3000000|272=20210517|273=11:59:35|299=4_USD/CAD_20210517T115935986667577_Bid3_20210525|290=3|1024=1|63=W1|64=20210525|1070=0|1026=1.31694|1027=0|269=1|278=4_USD/CAD_20210517T115935986667577_Ask3_20210525|270=1.31704|271=3000000|272=20210517|273=11:59:35|299=4_USD/CAD_20210517T115935986667577_Ask3_20210525|290=3|1024=1|63=W1|64=20210525|1070=0|1026=1.31703|1027=0.00001|779=20210517-11:59:35.986|10=038|

{code}";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, needs_refactoring_FX, UAQA;lzaharia;;PFX-49, PFX-528, PFX-4123;;QAP-1558;;Having tenor with Executable OFF send and MD request from fix;"tenor=w1
USD/CAD";"(QS: MDQuoteType is indicative )
Check the update of MDQuoteType in FIX
1070=0 (Indicative) for standard plugin";;
;;;;;;;;;;;;;;;Send an order when the mdquotetype is indicative;;"The order should be rejected
58=empty book";;
;;;;;;;;;;;;;;;unsubscribe USD/CAD;;;;
;;;;;;;;;;;;;;;Send MD request for tenor where Executable OFF for all row except qty=1M;"tenor=w1
EUR/CAD";"MDQuoteType=1 for qty=1M (Executable ON)
and
MDQuoteType=0 for all others (Executable OFF)";;
;;;;;;;;;;;;;;;From client FE, send an order;qty=1M;Order sent successfully;;
;;;;;;;;;;;;;;;From client FE, send an order;qty=2M;Order gets rejected;;
QAP-T2967;Client Price Summary display (regular prices);Specified;;"The Client price grid, after selecting the client tier, shows the spot and 
all the forwards or NDFs prices published by the main quoting session on 
the available pairs. The window only subscribes to the SBP spot price, as 
per paragraph _10.6.3_ and, at each volume band of the spot, computes the 
forwards or NDF prices from the bid and offer forward points found in 
ClientTierFXTenor, as per the previous paragraph.

 

Each cell separates decimals before and after LargeNumberPxPrecision by a 
space character. Then, the decimals up to the LargeNumberPxPrecision-th one 
are not repeated on the offer part if they equal those of the bid part.
!screenshot-2.png|thumbnail!";/PFX/FX_Display;High - Must Have;FX_Display;AutomatedCodedUI, FETrading, FXregression, UAQA;lzaharia;;PFX-49;;QAP-1557;;"From a sales FE, open a client price grid (by clicking on ""Client Price 
Summary"") for ccy pair EUR/USD";;Client price grid open showing tenors for EUR/USD;;
;;;;;;;;;;;;;;;Check display;;"Space character before the large pxprecision decimal place, bid and ask 
with different colors";;
;;;;;;;;;;;;;;;Check coherence of prices with database;;Points respect rates entered in table ClientTierSymbTenor;;
;;;;;;;;;;;;;;;Check coherence of prices inside grid;;For 5 different tenors on bid and ask, check that Fwd price = spot + points;;
QAP-T2968;Detailed workflow of ESP market data request;Automated;;"Workflow of ESP quote requests and replies for Spot instruments

In case of ESP, marketdata subscription is handled by 35=V, replies are 
coming with 35=W and 35=X

Message contains :
* Optional ClientClientTierID. It is usually mapped from the SenderSubID 
header tag. The session determines the client-tier from QuotSessCltCltTier.
* MDReqID, which must be unique per FIX session
* Quod does not support snapshot requests from external applications.
* A list of instruments. Listings need not be specified because the venue 
is necessarily Quod SBP. P1 only support one instrument per market data 
request. In FX, SecurityIDs are not available, and the customer application 
must provide the details of the instrument or instrument-leg (InstrSymbol, 
InstrType, Tenor…).
* Optional MDEntrySize. P1 Quod publishes all configured bands and does not 
factor in MDEntrySize. P2 Quod publishes individualized price-for-volume 
books over individualized subjects, whose largest band is capped by 
MDEntrySize.
* Optional MarketDepth. P1 Quod publishes full book depth made of fixed 
volume bands determined per client tier and per instrument. P3 Quod 
publishes individualized price-for-volume books that are limited to 
MarketDepth levels (0 means full book depth) over individualized subjects.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX, SWED;lzaharia;;PFX-78, PFX-4702;;QAP-1554;;"Send marketdata request for EUR/USD spot with following settings :
ClientClientTierID gold
MDEntrySize : 1000000
Full book";;"Market data request characteristics are recognized by QS
QS sends reply 35=W with quoantity 1000000 and clientclientTier Gold";;
;;;;;;;;;;;;;;;Unsubscribe sent;;QS stops sending prices;;
;;;;;;;;;;;;;;;"Send marketdata request on EUR/USD W1 with following settings : 
ClientClientTierID silver MDEntrySize 2000000 Full Book";;QS sends market data replies with ClientClientTier Silver, quantity 2000000;;
;;;;;;;;;;;;;;;Unsubscribe sent;;QS stops sending prices;;
QAP-T2969;Workflow of previously quoted order;Automated;;"This paragraph pertains to a quoting session having a cleared 
TradingQuotingSession flag. I.e. the order is mapped by a standard 
sell-side FIX gateway to the ORS, which maintains a (possibly outdated) 
image of the QuoteRequest and Quote records, according to paragraphs 
_9.6.3_ and _9.7.7_.

 

The ORS queries the QS instance responsible for the quote, thanks to the 
QuotingSessionID stored in the quote, to get the latest QuoteRequest and 
Quote images. It is a synchronous request published over a non-certified 
transport. Standard validations against the quote then take place.



{{*Client send quote request:*}}
{{8=FIXT.1.1|9=174|35=R|34=2|49=QUOD5|52=20200813-10:02:38.500|56=QUODFX_UAT|131=2783684142|146=1|55=EUR/USD|537=1|54=B|38=6000000|64=20200817|15=EUR|1=MMCLIENT1|40=D|126=20200813-10:04:48.498|10=064|}}
{{*Client receiving quote:*}}
{{8=FIXT.1.1|9=283|35=S|34=2|49=QUODFX_UAT|52=20200813-10:02:38.872|56=QUOD5|1128=9|1=MMCLIENT1|15=EUR|55=EUR/USD-SPO-QUODFX|62=20200813-10:03:08.872|63=0|64=20200817|117=01200813100238065002|131=2783684142|132=1.19587|133=1.19613|134=6000000|135=6000000|167=FXSPOT|188=1.19587|190=1.19613|460=4|537=1|10=095|}}

{{*Client send previously quoted newOrderSingle:*}}
{{ 8=FIXT.1.1|9=218|35=D|34=3|49=QUOD5|52=20200813-10:02:38.763|56=QUODFX_UAT|1=MMCLIENT1|11=5527352128|15=EUR|38=6000000|40=D|44=1.19587|48=EUR/USD|54=2|55=EUR/USD|59=3|60=20200813-13:02:38.762|64=20200817|117=01200813100238065002|460=4|10=020|}}
{{*Client get execution report* Pending new: }}
{{8=FIXT.1.1|9=313|35=8|34=3|49=QUODFX_UAT|52=20200813-10:02:39.728|56=QUOD5|1128=9|1=MMCLIENT1|6=0|11=5527352128|14=0|15=EUR|17=MO1200813100239335001|21=1|22=8|31=0|32=0|37=MO1200813100239335001|38=6000000|39=A|40=D|44=1.19587|48=EUR/USD|54=2|55=EUR/USD|59=3|60=20200813-13:02:38.762|120=USD|150=A|151=6000000|207=XQFX|460=4|854=0|10=035|}}
{{*Client get execution report* Filled}}{{: 
8=FIXT.1.1|9=424|35=8|34=4|49=QUODFX_UAT|52=20200813-10:02:40.336|56=QUOD5|1128=9|1=MMCLIENT1|6=1.19587|11=5527352128|14=6000000|15=EUR|17=EX1200813100239346002|21=1|22=8|31=1.19587|32=6000000|37=MO1200813100239335001|38=6000000|39=2|40=D|44=1.19587|48=EUR/USD|54=2|55=EUR/USD|59=3|60=20200813-10:02:39.728|63=B|64=20200817|75=20200813|100=XQFX|120=USD|150=F|151=0|167=FXSPOT|194=1.19587|207=XQFX|460=4|854=0|453=1|448=gtwquod5|447=D|452=36|10=190|}}";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;AutomatedCodedUI, FXregression, needs_refactoring_FX, UAQA;lzaharia;;PFX-168;;QAP-1552;;"Client sends request for quotes
from miniFix";;"Quote received
in Quote Book appears new quote";;
;;;;;;;;;;;;;;;"Client send order with clientquoteId and ordtype = previously quoted
and clientQuoteID";;"Order received by ORS
ORS checks last quote and enrichs order
ORS check quantity of order (it must match the quote size)";;
;;;;;;;;;;;;;;;QS;;"QS manages transac Ordreply, execution
(orders previously quoted are immediately filled)";;
;;;;;;;;;;;;;;;QS validate;;"QS validates that order quantity is less tha or equal to the price for 
volume band";;
;;;;;;;;;;;;;;;QS;;Opposite side execution created internally and attached to the quote;;
;;;;;;;;;;;;;;;Quote;;Termination of originating quote request;;
QAP-T2970;Workflow of reassignment of quote;Automated;;"Head traders can assign unassigned quote requests to any user potentially 
responsible for the request’s account-group, including themselves, by 
selecting the assignee from the appropriate column of the ‘Assigned 
tickets’ grid. Likewise, head traders can reassign already assigned quote 
requests to any other subordinate. They send a QuoteRequestActionRequest of 
‘Assign’ type to the ORS. The QS, in turn, validates that the user is a 
head trader, then sends a QuoteRequestNotif message to initial recipients 
to notify the QuoteReqAssignStatus stays ‘Assigned’, to update the assignee 
and clear LiveQuoteID if present. The quote request status remains ‘New’.

 

Should a live quote be already tied to the quote request, the ORS sends a 
QuoteRequestNotif to the quoting session the quote request initially 
originates from. Because the associated quote request is still alive, the 
session terminates that quote and notifies the same recipients so, via a 
QuoteStatusReport message containing QuoteStatus=RemovedFromMarket. The QS 
simultaneously sends a FIX QuoteStatusReport with the same content back to 
FIX customers.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;AutomatedCodedUI, FXregression, needs_refactoring_FX;lzaharia;;PFX-146;;QAP-1551;;Quote request with qty > threshold quantity is sent to ORS;;Quote request with status unassigned;;
;;;;;;;;;;;;;;;Quote request assigned to sales A;;Quote request assigned to HSD A;;
;;;;;;;;;;;;;;;Quote request unassigned;;Quote request disappears from assigned grid, appears in unassigned grid;;
;;;;;;;;;;;;;;;Quote request assigned to sales A;;Quote request asigned to sales A, disappears from unassigned grid;;
QAP-T2971;Manual Quote Request reject - Negative cases;Specified;;"The QS simultaneously sends a FIX QuoteRequestReject back to customers 
through the quoting session responsible for it.

 

It is not permitted to reject:
* A terminated quote request
* Or an unassigned quote request
* Or a quote request the user is not the assignee
* Or a quote request that already has LiveQuoteID

In case a rejection request is itself rejected, the QS sends a reply back 
to the entering GUI only.

DeskMode must be {color:#DE350B}*Collaborative or Consultative*{color} in 
DB
!screenshot-1.png|thumbnail!";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, SWED;lzaharia;;PFX-146;;QAP-1549;;Manual quote request (qty > threshold) received by sales;;Quote request unassigned;;
;;;;;;;;;;;;;;;Head of sales rejects the quote request;;unassigned quote requests can be rejected;;
;;;;;;;;;;;;;;;Manual quote request (qty > threshold) received by sales;;quote assigned to sales A;;
;;;;;;;;;;;;;;;Open FE of sales B;;FE of Sales B open;;
;;;;;;;;;;;;;;;From sales B, reject quote request;;Action impossible : quote request already assigned to sales A;;
;;;;;;;;;;;;;;;Manual quote request (qty > threshold) received by sales;;Quote receives by sales;;
;;;;;;;;;;;;;;;Sales assigns to himself and begins quoting;;Quoting ongoing;;
;;;;;;;;;;;;;;;Sales reject quote request;;Action possible: quote request Cancelled;;
QAP-T2972;Manual quote request rejected by assignee;Automated;;"From the ‘Assigned tickets’ grid, any sales person or head trader can 
reject quote requests without live quote they are responsible for. They 
send a QuoteRequestActionRequest of ‘Reject’ type message to the QS, which 
immediately passes the quote request status to ‘Rejected’, sets 
TerminationTime and notifies front-ends that had already received the quote 
request so via a QuoteRequestNotif message. Users can always remove 
terminated quote requests from any grid.

 

*{color:#0747a6}#1{color}*

{code:java}
< 
8=FIXT.1.1|9=161|35=R|49=QUOD5|56=QUODFX_UAT|34=164|52=20210414-12:22:47|131=1113331102|146=1|55=EUR/USD|167=FXSPOT|537=1|54=1|38=40000000|64=20210416|63=0|15=EUR|1=CLIENT1|40=D|10=209|
{code}

 *{color:#0747A6}#2{color}*

{code:java}
> 
8=FIXT.1.1|9=158|35=AG|34=309|49=QUODFX_UAT|52=20210414-12:24:33.282|56=QUOD5|1128=9|131=1113331102|146=1|55=EUR/USD|167=FXSPOT|537=1|54=1|63=0|64=20210416|15=EUR|40=D|658=99|10=223|
{code}";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;AutomatedCodedUI, FXregression, refactored_FX;lzaharia;;PFX-146;;QAP-1548;;"Manual quote request (with quantity greater than threshold) assigned to a 
sales";#1;Quote request displayed in Quote screen of user;;
;;;;;;;;;;;;;;;User sends a QuoteReqAction = Reject from Trading FE;;ORS updates status to REJ, notifies FE and FIX;;
;;;;;;;;;;;;;;;Check FE;;Quote request status to REJ;;
;;;;;;;;;;;;;;;Check FIX;#2;35=AG to FIX;;
QAP-T2973;Workflow of manual quoting;Automated;;"Once quote prices have been adjusted, as per section _9.7.6__,_ when 
pressing the ‘Publish’ button, the GUI sends a Quote message to the quoting 
session on the topic described in section _9.3.8_.

 

The Quote message contains net prices only.

In addition to normal validations, the quoting session validates that if 
the quote is tied to a non-automatic quote request, the user issuing the 
quote is the quote request’s assignee. It forwards the quote to the FIX 
customer that initially issued the quote request. It uses the quote request 
LiveQuoteID that was forwarded in the [Quote estimate|#_Quote_estimate]. It 
generates a ClientQuoteID that conforms to account-group’s or session’s 
ClientQuoteIDFormat pattern, as usual. The session re-purposes the 
request’s LiveQuoteID. The quoting session finally notifies standard GUIs 
via a QuoteStatusReport message.

 

The workflow is the following :

The quote requests arrives in 'dealer intervention' window, tab unassigned 
quotes

The user assigns the quote request to himself

the quote request disappears from the unassigned quotes, it is now present 
in assigned quotes

The user clicks on the quote, the price is displayed in the quoting part of 
the window

the user clicks on publish and it is sent to the client

*{color:#0747a6}#1{color}*
{code:java}
< 
8=FIXT.1.1|9=161|35=R|49=QUOD5|56=QUODFX_UAT|34=164|52=20210414-12:22:47|131=1113331102|146=1|55=EUR/USD|167=FXSPOT|537=1|54=1|38=40000000|64=20210416|63=0|15=EUR|1=CLIENT1|40=D|10=209|
{code}
{color:#0747a6}*#2*{color}
{code:java}
> 
8=FIXT.1.1|9=229|35=S|34=306|49=QUODFX_UAT|52=20210414-12:23:05.002|56=QUOD5|1128=9|15=EUR|55=EUR/USD|62=20210414-12:28:04.984|117=01210414122304048002|131=1113331102|132=0|133=1.11254|134=40000000|135=40000000|167=FXSPOT|188=0|190=1.11254|460=4|10=050|
{code}";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;AutomatedCodedUI, FXregression, refactored_FX, SWED;lzaharia;;PFX-146;;QAP-1547;;Client sends a quote request with quantity > max band quantity;#1;"Quote unassigned, to be validated by user.
It is displayed in dealer intervention, in unassigned part";;
;;;;;;;;;;;;;;;User assigns to himself;;RFQ is displayed in assigned quotes;;
;;;;;;;;;;;;;;;user select quote;;Price estimate displayed in dealer intervention;;
;;;;;;;;;;;;;;;user clicks on send(publish);#2;Price published to client;;
QAP-T2974;Workflow of unassigned quote request acceptance;Automated;;"From the ‘Unassigned tickets’ grid of the ‘Quote request Dealer 
Intervention’ window, sales people and head sales/dealers can accept 
unassigned quote requests, i.e. assign them to themselves. They send a 
QuoteRequestActionRequest of ‘AckAssignment’ type to the ORS, which in 
turn:
* Simply validates that the quote request is unassigned.
* Determines ExpireTime, as per paragraph _4.2_.
* Requests the quoting session that initiated the quote request in the 
first place to compute the best aggregated prices compatible with the quote 
request quantity, as per section _6.2_. The query is a synchronous and 
published on the quoting session topic over a non-certified transport. No 
quotes are created or inserted yet, as this is a simulation and estimation.
* Sends a QuoteRequestNotif message to previous recipients to notify that 
the quote request is now assigned to someone and its QuoteReqAssignStatus 
became ‘Assigned’.

This corresponds to user story FOB-34103 :
* Once a request is in a sales person's ""assigned"" pool, the details and 
controls required for responding to the request can be opened in a 
specially laid out Manual Quote Intervention ticket (see attachment).
* For a live quote, the Manual Quote Intervention ticket displays details 
for the request of:
** Currency Pair
** If Spot:
*** ""Spot""
*** Spot Value Date
*** Suggested auto-quote bid / ask spot prices, generated based on quantity 
/ spot price curve extrapolation.
** If Forward:
*** Tenor or Broken Date
*** Forward Settlement Date (and Fixing Date if NDF)
*** Suggested auto-quote bid / ask spot prices, generated based on quantity 
/ spot price curve
*** Configured (or interpolated) swap points for given Tenor or Broken Date
** If Swap:
*** ""Spot"", Tenor or Broken Date of both near leg and far leg
*** Spot or Forward Settlement Dates (and Fixing Dates if NDS) of both near 
leg and far leg
*** Suggested auto-quote bid / ask spot prices for both near leg and far 
leg, generated based on quantity / spot price curve extrapolation.
*** If a leg is a Forward, configured (or interpolated) swap points for 
given Tenor or Broken Date of both near leg and far leg
*** If a leg is a Forward, calculated forward outright price as sum of Spot 
and Swap Points for both near leg and far leg
*** Bid / Ask swap prices as difference between far and near leg prices
** Client Name
** Requested quantity
** Timestamp request was received
** State of Quote Request
** Requested Bid/Ask Side (Bid or Ask or Both)
** Filled Side (once traded)
** Default Time To Live value (in seconds) to be in effect once quote is 
published
* The user can modify the following editable values:
** Time To Live (in seconds)
** If Spot:
*** Bid / Ask Spot Prices edited using same field populated with suggested 
auto-quote values
** If Forward, based on configurable user interface option (per user) of 
""Manual Client Quote Ticket - Editable Forward Value"" of either ""Spot"" or 
""Swap Points"" (let's please discuss together when it comes time to find a 
home for this setting in the User Options):
*** If ""Spot"", bid / ask swap points are shown in read-only labels, and the 
bid / ask Spot prices can be edited using the same field populated with 
suggested auto-quote values. 
*** If ""Swap Points"", bid / ask Spot prices are shown in read-only labels, 
and the bid / ask swap points can be edited using the same field populated 
with configured swap points
** If Swap:
*** For both near and far leg, the same values as indicated above depending 
on the leg being a Spot or Forward.
*** The bid / ask swap prices edited using the same field populated with 
the calculated values.
*** If the values of the legs are edited by the user, the swap prices are 
automatically updated accordingly. If the values of the swap prices are 
edited by the user, the values of the far leg are automatically updated 
accordingly.
*

 In this test case, the user needs to send a quote request with a 
quantity > last band quantity, and assign this quote request to himself, 
then see if it appears in the assigned quote requests part of the window

 ";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;AutomatedCodedUI, FXregression, refactored_FX;lzaharia;;PFX-146;;QAP-1545;;User sends quote with quantity greater than sum of bands quantity;;Quote appears in Manual Dealer Intervention unassigned order grid in FE;;
;;;;;;;;;;;;;;;"Sales FE user sends a QuoteReqAction = Assign, assignee = self (from the 
dealer intervention window, he clicks on assign on the unassigned part of 
the window";;The quote appears in the assigned quotes part;;
;;;;;;;;;;;;;;;Check sales FE;;"Quote Request notif : Quote disapears from from unassigned order grid, 
appears in assigned section of dealer intervention grid";;
;;;;;;;;;;;;;;;"Quote estimated
After being assigned with a quote request, the sales FE sends a 
QuoteReqAction = Estimate";;"ORS receives this requests, transmits to QS, QS computes prices and sends 
reply
Estimate displayed on Dealer intervention
It must contain :
Tenor, settlement date, spot rate, points, client name, requested quantity, 
timestamp when received, state of quote request,deault time to live value";;
;;;;;;;;;;;;;;;Check FE, on tile Client Price;User can modify from estimate;"Quote estimated prices are displayed on tile Client Price
Time to live(TTL), prices";;
QAP-T2975;Workflow of quotes if the quantity is greater than quantity allowed;Specified;;"The ORS clears the AutomaticQuoting flag of FIX quote requests for a 
quantity that exceeds AutoRFQThreshold or if PublishPrices flag is cleared. 
It publishes them to all account-group’s usual recipients. It sends a 
QuoteRequestNotif with ‘New’ QuoteRequestStatus and ‘Unassigned’ 
QuoteReqAssignStatus to above front-ends. If ExpireTime was not provided in 
the FIX message, the ORS does not manage it until someone takes ownership 
of the quote request.

 

This test case corresponds to user story FOB-34103
* When a quote request is determined to not be handled through 
auto-quoting, and the quote request indicates that the client is willing to 
have the quote be manually handled, the quote request is assigned to and 
can be viewed in a pool of ""unassigned"" manual quote requests.
* The pool of ""unassigned"" manual quote requests can be viewed by all sales 
people on the desk.";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;AutomatedCodedUI, AutotestTH2, FXregression;lzaharia;;PFX-146;;QAP-1544;;"Send a quote request with a quantity greater than quantity defined in 
AutoRFQThreshold";;Quote request received by quoting session and transmitted to ORS;;
;;;;;;;;;;;;;;;Check ORS;;ORS inserts QuoteRequestStatus = New with AssignStatus = Unassigned;;
;;;;;;;;;;;;;;;Check Sales FE with user1 (for example QA1);;"Quote displayed in Quote request dealer intervention window part 
'unassigned'
Quote request received with status NEW and Unassigned";;
;;;;;;;;;;;;;;;Check Sales FE with another user (for example QA2);;"Quote displayed in Quote request dealer intervention window part 
'unassigned'
Quote request received with status NEW and Unassigned";;
QAP-T2976;Rejection of quote by ORS;Automated;;"In case the ORS rejects an automatic FIX quote request for functional 
reasons, it inserts the quote request in New status, not Rejected. The ORS 
sends a QuoteRequestNotif with ‘Unassigned’ QuoteReqAssignStatus, cleared 
assignee and cleared AutomaticQuoting flag to the quote request’s account 
group usual recipients. The quote request remains in ‘New’ status. 

 

*It can be for example if the user is unknown, if the instrument is not 
recognized (settlement date on a bank holiday)*

{color:#0747A6}*#1*{color}

{code:java}
< 
8=FIXT.1.1|9=158|35=R|49=QUOD5|56=QUODFX_UAT|34=81|52=20210414-11:43:34|131=111333406|146=1|55=EUR/XXX|167=FXSPOT|537=1|54=1|38=1000000|64=20210416|63=0|15=EUR|1=CLIENT1|40=D|10=098|
{code}

*{color:#0747A6}#2{color}*

{code:java}
> 
8=FIXT.1.1|9=185|35=AG|34=215|49=QUODFX_UAT|52=20210414-11:43:34.444|56=QUOD5|1128=9|58=11620 
Unknown 
instrument|131=111333406|146=1|55=EUR/XXX|167=FXSPOT|537=1|54=1|63=0|64=20210416|15=EUR|40=D|658=99|10=252|
{code}
{color:#0747A6}*#3*{color}

{code:java}
< 
8=FIXT.1.1|9=159|35=R|49=QUOD5|56=QUODFX_UAT|34=83|52=20210414-11:44:26|131=111333407|146=1|55=EUR/USD|167=FXSPOT|537=1|54=1|38=1000000|64=20210416|63=0|15=EUR|1=CLIENT45|40=D|10=132|
{code}

*{color:#0747A6}#4{color}*

{code:java}
> 
8=FIXT.1.1|9=237|35=AG|34=217|49=QUODFX_UAT|52=20210414-11:44:26.444|56=QUOD5|1128=9|58=11620 
Unknown 'AccountGroupID': CLIENT45 (not found in 'AccountGroup' 
cache)|131=111333407|146=1|55=EUR/USD|167=FXSPOT|537=1|54=1|63=0|64=20210416|15=EUR|40=D|658=99|10=018|
{code}";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;FXregression, refactored_FX, SWED;lzaharia;;PFX-138;;QAP-1542;;Quote Request 35=R sent to QS;"#1 55=EUR/XXX
or
#3";Quote request received by QS;;
;;;;;;;;;;;;;;;QS sends QuoteRequest to ORS;;"ORS receives the quote request
ORS rejects quote request, inserts QuoteRequestStatus = New, AssignStatus = 
Unassigned";;
;;;;;;;;;;;;;;;ORS replies to QS;;"QuoteRequest with status = New, AssignStatus = 
Unassigned(QuoteReqAssignStatus = Unassigned), AutomaticQuoting=false
(AutomationQuoting= No)";;
;;;;;;;;;;;;;;;ORS sends QuoteRequestNotif to recipients;;Notifs received by FE;;
;;;;;;;;;;;;;;;QS sends 35=AG to fix;;QuoteRequest reject 35=AG sent to FIX;;
QAP-T2977;Basic workflow of automatic quoting on spot instrument with booktype swepable;Automated;;"Description from Fabrice specifications :

If ClientTierInstrSymbol’s PublishPrices flag is set, for quote requests 
smaller than or equal to the ClientTierInstrSymbol’s AutoRFQThreshold, the 
ORS:
* Sets the AutomaticQuoting flag.
* Inserts the quote request in New status.
** Originator is the ORS instance.
** LiveQuoteID is anticipated from the inbound request, even though it does 
not exist yet.
* Sends back an internal QuoteRequest to the quoting session that mapped 
the initial quote request. It builds a topic that depends on the inbound 
QuotingSessionID.

 

The QS automatically responds in a positive manner to such quote requests.

Quote requests remains in status NEW

 

*Following review from Ben, the autoRFQThreshold does not apply anymore*

Instead, the quantity should be validated against the max of 
ClientTierInstrSymbQty if the BookType is tiered, sum 
of ClientTierInstrSymbQty if the BookType is full

Description from user story :
* A client quote request submitted against the system for a valid quantity 
(and valid settlement date if a forward broken date is specified) results 
in an auto-quoted response for the given request. This can be validated 
either through the Client Pricing tiles (see FOB-34100 and FOB-34101) in 
the trading FE or through the use of a separate trading interface used to 
simulate client activity (see FOB-34104) or through any other possibly 
temporary means engineering may provide if the other methods are not yet 
completed.

 

*Sendign quote request:*
8=FIXT.1.1|9=174|35=R|34=2|49=QUOD5|52=20200813-12:47:47.366|56=QUODFX_UAT|131=3255412167|146=1|55=EUR/USD|537=1|54=S|38=1000000|64=20200817|15=EUR|1=MMCLIENT1|40=D|126=20200813-12:48:17.365|10=087|{{  }}


*{{Getting quote message:}}*

{{ 
8=FIXT.1.1|9=283|35=S|34=2|49=QUODFX_UAT|52=20200813-12:47:48.029|56=QUOD5|1128=9|1=MMCLIENT1|15=EUR|55=EUR/USD-SPO-QUODFX|62=20200813-12:48:17.365|63=0|64=20200817|117=01200813124748460002|131=3255412167|132=1.18986|133=1.18996|134=1000000|135=1000000|167=FXSPOT|188=1.18986|190=1.18996|460=4|537=1|10=131|}}

 ";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;AutomatedCodedUI, FXregression, refactored_FX, SWED;lzaharia;;PFX-138;;QAP-1540;;Quote request sent by FIX (35=R);QTY 1M;"Quote request received by QS
QS check quantity against sum of quantity in ClientTierInstrSymbQty and 
accept the quote request";;
;;;;;;;;;;;;;;;Quote sent to ORS;;ORS inserts QuoteRequest with status NEW;;
;;;;;;;;;;;;;;;Quote request snt back to QS;;QS creates quotes with status Accepted and sends to FIX;;
;;;;;;;;;;;;;;;Gateway creates quote message (35=S);;"Quotes received by client interface (Fix/360T gui/Client FE)
The quote contains : bid price, ask price bidquantity, askquantity
In case of 360t, it contains also bidspotrate, offersportrate";;
;;;;;;;;;;;;;;;Wait till Quote expires;;"QSession updates quote status = Exp after validity
Quote status report sent to FE
35=Z(Quote Cancel) sent to FIX
Quote status report sent to ORS";;
;;;;;;;;;;;;;;;Trading FE receives the quote status report;;Quote appears as expired in Trading FE;;
;;;;;;;;;;;;;;;FIX session receives 35=Z(Quote Cancel);;Message is received by minifix session;;
;;;;;;;;;;;;;;;ORS receives the quote status report;;ORS terminates quote request and notifies the FE and FIX;;
QAP-T2978;Workflow of quote cancel by a LP (fix);Automated;;"If the liquidity provider platform sends a QuoteCancel message, asking to 
stop pricing the listing, the quoting session simply terminates the quote. 
The session notifies the ORS instance the quote request originates from via 
an expired QuoteStatusReport and cancels the quote at the same time. The 
ORS clears the quote request LiveQuoteID and terminates the quote request 
to prevents its expiration.

 

Note, a cancel is enabled only on a quote request containing a live quoteId 
(all unassigned requests cannot be canceled)

*{color:#0747A6}#1{color}*

{code:java}
< 
8=FIXT.1.1|9=158|35=R|49=QUOD5|56=QUODFX_UAT|34=66|52=20210414-11:37:27|131=111333405|146=1|55=EUR/USD|167=FXSPOT|537=1|54=1|38=1000000|64=20210416|63=0|15=EUR|1=CLIENT1|40=D|10=077|
{code}

*{color:#0747A6}#2{color}*

{code:java}
> 
8=FIXT.1.1|9=228|35=S|34=201|49=QUODFX_UAT|52=20210414-11:37:29.659|56=QUOD5|1128=9|15=EUR|54=1|55=EUR/USD|62=20210414-11:39:26.646|63=0|64=20210416|117=01210414113726048002|131=111333405|133=1.1825|135=1000000|167=FXSPOT|190=1.1825|460=4|537=1|10=031|
{code}

*{color:#0747A6}#3{color}*

{code:java}
< 
8=FIXT.1.1|9=75|35=Z|49=QUOD5|56=QUODFX_UAT|34=68|52=20210414-11:37:52|131=111333405|298=4|10=251|
{code}";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;AutomatedCodedUI, FXregression, refactored_FX;lzaharia;;PFX-78;;QAP-1539;;from fix send 35=R;"#1
#2";FE receive request and quotes were sent in reply;;
;;;;;;;;;;;;;;;Do cancel on quote via 360T/MiniFix/Code app.;#3;Check status of quote on FE, It must be Canceled.;;
;;;;;;;;;;;;;;;Check FE QuoteRequest book;;Status = terminated;;
;;;;;;;;;;;;;;;Check FE QuoteBook;;QuoteStatus= Canceled;;
QAP-T2979;Workflow of quote request cancel for reason already quoted;Automated;;" 

If a quote has been already quoted, a quote request expiration is sent

If the quote request has any live quote, the ORS sends a QuoteCancel to the 
quoting session responsible for this live quote. Because the quote request 
is also expired, the session expires the live quote. For that, it sends a 
front-end QuoteStatusReport message similar to that of paragraph _9.7.9_, 
except for the quote status, which values ‘Expired’.

 

This test can be done from minifix only
{color:#0747A6}*#1*{color}
tag 126 = Expire Time
{code:java}
< 
8=FIXT.1.1|9=180|35=R|49=QUOD5|56=QUODFX_UAT|34=54|52=20210414-11:32:28|131=111333403|146=1|55=EUR/USD|167=FXSPOT|537=1|54=1|38=1000000|64=20210416|63=0|15=EUR|1=CLIENT1|40=D|126=20210414-11:33:00|10=109|
{code}
{color:#0747A6}*#2*{color}

{code:java}
> 
8=FIXT.1.1|9=230|35=S|34=182|49=QUODFX_UAT|52=20210414-11:32:27.557|56=QUOD5|1128=9|15=EUR|54=1|55=EUR/USD|62=20210414-11:33:00.000|63=0|64=20210416|117=01210414113227048002|131=111333403|133=1.18252|135=1000000|167=FXSPOT|190=1.18252|460=4|537=1|10=086|
{code}
*{color:#0747A6}#3{color}*
 
{code:java}
> 
8=FIXT.1.1|9=121|35=Z|34=184|49=QUODFX_UAT|52=20210414-11:32:59.540|56=QUOD5|1128=9|117=0|131=111333403|295=1|55=EUR/USD|167=FXSPOT|298=5|10=226|
{code}";/PFX/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;AutomatedCodedUI, AutotestTH2, FXregression, refactored_FX, SWED;lzaharia;;PFX-138;;QAP-1537;;Quote request sent via FE or FIX with tag 126;"#1
#2";Quote request received;;
;;;;;;;;;;;;;;;Waite until TTL of quote request is exceed;;Quote request expired;;
;;;;;;;;;;;;;;;ORS sends a quote cancel to quoting session;;"Quote cancel sent to quoting session, notification to sales FE
Update of quote request status = Canceled";;
;;;;;;;;;;;;;;;Qsession receives the quote cancel;#3;QS update quote status = Canceled;;
QAP-T2980;ClientPricing: Verify client tier and value date values.;Automated;;"Display of MM screen client tier part.

 

You need to check in DB that tier GOLD contains EUR/USD currency, if no you 
can add it via FEWebAdmin.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX, UAQA;lzaharia;;PFX-49;;QAP-1536;;On Client pricing window, open client pricing tile and select ClientTier;ClientTier = Gold;Client pricing tile is opened. ClientTier is displayed correctly;;
;;;;;;;;;;;;;;;Select currency pair EUR/USD spot.;;"Check that value date is correct for selected currency pair.
Check that tenor is Spot and displayed in field.
Client tier GOLD displayed in the client pricing window";;
;;;;;;;;;;;;;;;Select another currency pair (GBP/OMR) which does not have client tier;;Nothing has changed as current Client tier;;
QAP-T2981;Verify that after modification of passive quantity down for AO, new child will be generated by the system.;Open;;"*Requirement:* 

When modifying existing passive order quantities:
- If needing to modify passive quantity up then place a new order for (as 
opposed to cancel and replace entire order)
- +If needing to modify passive quantity down then just modify existing 
orders down without cancelling+ (where venue supports)

*Pre-condition:*

*BE:*

You need put true in sats.xml config for such block:

Configuration for priority management:


true
5


*FE:*

Create CO with buy side and qty= 4 500 000 via OrderTicket window.

Right click on this order in OrderBook and choose SplitESP and click on BID 
button.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression;vmaschik;;;;QAP-1532;;"Fill such fields:
Price: decrease price;
Qty: 4 500 000
LitSORGeneralParameters: enable checkboxes -> Allow missing prim, 
|Available venues;
LitSORAggressiveParameters: enable checkbox -> FOK exploration;
LitSORPassiveParameters:
PostMode-> Single;
LitSORSweepingParameters:
enable checkbox -> Sweeping allowed.";;All values are entered on SplitESP window.;;
;;;;;;;;;;;;;;;Click on Buy button.;;OrderTicket closed automatically.;;
;;;;;;;;;;;;;;;Click on + button near the CO.;;"""ChildOrders"" tab appears with AO (status=Open, qty= 4 500 000) that you 
just created.";;
;;;;;;;;;;;;;;;Click on + button near the AO.;;ChildTab appears with MO order (status=Open, qty= 4 500 000).;;
;;;;;;;;;;;;;;;Modify AO, by right clicking on it and choosing Amend in dropdown.;decrease qty=3 000 000;"Another child (MO) order is updated on qty = 3 000 000 and AO also will 
have qty=3 000 000.";;
QAP-T2982;Verify that after modification of passive qty up of AO, new child will be generated by the system.;Specified;;"*Requirement:* 

When modifying existing passive order quantities:
- +If needing to modify passive quantity up then place a new order for+ (as 
opposed to cancel and replace entire order)
- If needing to modify passive quantity down then just modify existing 
orders down without cancelling (where venue supports)

*Pre-condition:*

*BE:*

You need put true in sats.xml config for such block:

Configuration for priority management:


true
5


*FE:*

Create CO with buy side and qty= 4 500 000 via OrderTicket window.

Right click on this order in OrderBook and choose SplitESP and click on BID 
button.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FETrading, FXregression;vmaschik;;PEQ-6818;;QAP-1526;;"Fill such fields:
Price: decrease price;
Qty: 4 000 000
LitSORGeneralParameters: enable checkboxes -> Allow missing prim, 
|Available venues;
LitSORAggressiveParameters: enable checkbox -> FOK exploration;
LitSORPassiveParameters:
PostMode-> Single;
LitSORSweepingParameters:
enable checkbox -> Sweeping allowed.";;All values are entered on SplitESP window.;;
;;;;;;;;;;;;;;;Click on Buy button.;;OrderTicket closed automatically.;;
;;;;;;;;;;;;;;;Click on + button near the CO.;;"""ChildOrders"" tab appears with AO (status=Open, qty= 4 000 000) that you 
just created.";;
;;;;;;;;;;;;;;;Click on + button near the AO.;;ChildTab appears with MO order (status=Open, qty= 4 000 000).;;
;;;;;;;;;;;;;;;Modify AO, by right clicking on it and choosing Amend in dropdown.;increase qty=4 500 000;"Another child (MO) order is generated with qty = 500 000.
Totally you will have:
AO with qty=4 500 000 and
two market order (MO) with qty=4 000 000 and qty=500 000.";;
;;;;;;;;;;;;;;;Cancel CO order;;Order and all children are canceled;;
QAP-T2983;Workflow of FOK order through quoting session;Automated;;Workflow of FOK order in FX MM (excepted part with positions);/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, refactored_FX, UAQA;lzaharia;;PFX-166, PFX-218;;QAP-1518;;"Taker has open interface / client FE / Minifix and sends a market data 
request on EUR/USD SPO";;"Market data request received and replied
Taker sees market data in the FE with quantity >= 1000000";;
;;;;;;;;;;;;;;;"Taker sends a buy order limit FOK with the price equal to first ask 
quantity 1000000";;"backend receives order
Check of accountgroup
Check of quoteId";;
;;;;;;;;;;;;;;;QSession recognised quoteEntryID;;Transac created;;
;;;;;;;;;;;;;;;Order filled;;Execution sent to FE / Minifix;;
;;;;;;;;;;;;;;;Check Execution Report;;"TIF=FillOrKill
ExecSts=Filled";;
QAP-T2984;Display of FX MM screen Swap points;Manual;;"Display of FX MM screen swap points

This test check story FOB-34094 :
* A sub-section called ""Swap Points"" can be shown or hidden through 
selecting the sub-section from the context menu of a Client Pricing Tile 
under the ""Display Sub-Sections"" section of the context menu.
* The bid and ask swap points are displayed in a chart with point values 
(in pips) on the Y-Axis and standard forward tenors (spread out by the 
lengths of their respective time periods) on the X-Axis. The bid/ask swap 
points should be displayed in the configured system Bid/Ask color.";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FXregression, SWED;lzaharia;;PFX-198, PFX-49;;QAP-1512;;"On a FE, pricing tile, select a currency pair / tier / tenor
For example : EUR/USD GOLD 1W";;Currency pair / tenor selected, pricing;;
;;;;;;;;;;;;;;;Go to section swap points to display forward points curve;;"Section swap points displayed, showing swap points curve
Bid / ask displayed in different colors, we need to see a mix of both 
colors when they are aligned";;
;;;;;;;;;;;;;;;Save workspace with modifications;;Workspace saved;;
;;;;;;;;;;;;;;;Open FE again;;"FE open : check that the pricing tile is displayed with swap point section 
when reopen";;
QAP-T2985;Display of FX MM screen Aggregated part;Automated;;"Display of FX MM screen Aggregated part

See attached screenshot";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;AutomatedCodedUI, FXregression, refactored_FX, SWED;lzaharia;;PFX-49;;QAP-1511;;Select a currency pair set in clienttier;;Currency pair displayed, with aggregated displayed on tile;;
;;;;;;;;;;;;;;;Check quantities displayed in Client Rates;Sample Data for TH2;Quantities should reflect the quantities set in DB;;
;;;;;;;;;;;;;;;Change instrument;;Instrument change in tile;;
;;;;;;;;;;;;;;;Check quantity displayed in aggregated;;Quantity displayed in aggregated reflect quantity set for this pair;;
QAP-T2986;Display of FX Client Pricing screen TOB part for a spot instrument;Automated;;"See the attached screenshot for description of this window

The aim of this test is to check that the arrows and the spread are working 
correctly and smoothly";/PFX/FX_MM_ESP;High - Must Have;FX_MM_ESP;FETrading, FXregression, UAQA;lzaharia;;PFX-49;;QAP-1418;;Open a Client Pricing Tile with currency pair EUR/USD Spot;;Tile is opened with prices displayed;;
;;;;;;;;;;;;;;;In TOB, check spread;;spread = (bid - ask) * 10000 on EUR/USD;;
;;;;;;;;;;;;;;;Enter a 2 in the middle of TOB, and press <>;;Check that the spread has increased by 4;;
;;;;;;;;;;;;;;;Enter 1 in the middle of TOB and press ><;;Check that the spread has decreased by 2;;
;;;;;;;;;;;;;;;"Enter 2 and click on ""increase ask";;Check that the ask has increased by 2;;
;;;;;;;;;;;;;;;"Enter 3 and click on ""decrease bid""";;Check that the bid has decreased by 3;;
;;;;;;;;;;;;;;;Enter 4 and click on blue < on the left;;Both bid and ask are minus 4 ticks;;
;;;;;;;;;;;;;;;Enter 5 and click on blue > on the right;;Both bid and ask are + 5 ticks;;
QAP-T2987;Check columns in the Book's (ESP);Automated;;;/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;akovalen;;;;QAP-1115;;"Send an order:
From ESP tile (AggRates)";;Order is sent and placed in OrderBook;;
;;;;;;;;;;;;;;;"Open order book, call context menu Choose ""Owner"" column in Column chooser";;Column should appear with info for all existing orders;;
;;;;;;;;;;;;;;;"Open order book, call context menu and press Column Chooser. Find DisplayPX 
column and add it to the order book";;Column should appear with prices for all existing orders;;
;;;;;;;;;;;;;;;Check InstrType column;;"InstrType has a long value (e. g. ""Spot"", ""FXSwap"", ""FXForward"", etc.)";;
QAP-T2988;Value date for currency pair T+1 with USD;Automated;;"Check the expiry for pair USD/RUB which is T+1

To validate the date it is possible to compare with Reuters

https://dxtra.markets.reuters.com/Dx/DxnOutbound/400201810051452215953001.htm";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, refactored_FX;lzaharia;;;;QAP-992;;Check the value date of spot;;"Value date is T+1, except if it is a weekend or currency pair or US holiday 
or currency holiday";;
;;;;;;;;;;;;;;;Check the value date of NDF 1M;;"Value date is spot date + 1M. Except if the date is on weekend, or holiday 
of currency and USD";;
;;;;;;;;;;;;;;;Check the fixing date of NDF 1M;;"Fixing date is value date -1
Except if the date is on weekend, or holiday of currency and USD";;
;;;;;;;;;;;;;;;Check the dates for several tenors (1m, 1y);;Check value date and fixing date;;
QAP-T2989;RFQ Layout : Verify default values on RFQ panel.;Automated;;Precondition: Open RFQ panel.;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, refactored_FX;vmaschik;;;;QAP-982;;Check currency pair dropdown.;;"It equals to ""AUD/BRL""";;
;;;;;;;;;;;;;;;Check qty field.;;"It has value ""10,000,000.00""";;
;;;;;;;;;;;;;;;Check NearTenor.;;"It has value ""Spot""";;
;;;;;;;;;;;;;;;Check Date.;;"It has value ""Today+2""";;
;;;;;;;;;;;;;;;Check Currency for sell and buy side.;;"It has value ""AUD""";;
;;;;;;;;;;;;;;;Check currency button.;;"It has value ""AUD""";;
QAP-T2990;Verify that Cum Qty Chart labels are on the top of each bar.;Specified;;"Link requirement to: FOB-29857.

 

!image-2020-07-08-13-56-52-018.png!";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, SWED, TobeAutomatized;agonchar;;;;QAP-870;;Add Rates Panel with Cum Qty Chart.;;Cum Qty Chart is added and displayed the data.;;
;;;;;;;;;;;;;;;Check the bars in Cumuluative Quantity Chart.;;"There are five numbers in the chart with one number in the center top of 
the each bar.";;
QAP-T2991;Verify that dropdown for Algorithm contains list of algorithms.;Specified;;req: FOB-25675;/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression;vmaschik;;;;QAP-852;;"Open order ticket from DirectVenueExecution section for venue with existing 
Algo (CS or JPM)";;Order entry is opened with innactive checkbox and dropdown for Algorithm.;;
;;;;;;;;;;;;;;;Select checkbox.;;Checkbox is selected, dropdown becomes editable.;;
;;;;;;;;;;;;;;;Click on dropdown.;;"List with values that, filtered for External scenarios, appears only for 
the selected venue.";;
QAP-T2992;Verify that checkbox and dropdown for Algorithm are displayed and innactive on OrderTicket.;Automated;;req: FOB-25675;/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression, needs_refactoring_FX;vmaschik;;;;QAP-851;;Open order ticket from DirectVenueExecution section.;;Order entry is opened with innactive checkbox and dropdown for Algorithm.;;
QAP-T2993;Swap RFQ with ccy2;Automated;;"Check the behaviour of SWAP RFQ for currency 2
Example USD/JPY 1 m 3 m with currency JPY";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, refactored_FX, SWED;lzaharia;;;;QAP-850;;"On a FE, send a swap RFQ request using currency 2 (ex USD/JPY 1M 3M with 
currency JPY)";;"Quotes replies
Check that message contains correct currency in gateway, check quote 
display in FE (bid < ask)";;
;;;;;;;;;;;;;;;Send an order to execute RFQ;;"Order filled with correct currency (displayed in order book in FE and FIX 
message)";;
QAP-T2994;NDF RFQ with ccy2;Automated;;"Check the behaviour of NDF RFQ for currency 2
Example USD/INR 1 m with currency INR";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, refactored_FX;lzaharia;;PFX-3008;;QAP-849;;"On a FE, send a RFQ request using currency 2 (ex USD/INR 1 M with currency 
INR)";USD/PHP;"Quotes replies
Check that message contains correct currency in gateway, check quote 
display in FE (bid < ask)";;
;;;;;;;;;;;;;;;Send an order to execute RFQ;;"Order filled with correct currency (displayed in order book in FE and FIX 
message)";;
QAP-T2995;Forward RFQ with ccy2;Automated;;"Check the behaviour of Forward RFQ for currency 2
Example EUR/USD 1 m with currency USD";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, refactored_FX, SWED;lzaharia;;;;QAP-848;;"On a FE, send a RFQ request using currency 2 (ex EUR/USD, tenor 1M with 
currency USD)";;"Quotes replies
Check that message contains correct currency in gateway, check quote 
display in FE (bid < ask)";;
;;;;;;;;;;;;;;;Send an order to execute RFQ;;"Order filled with correct currency (displayed in order book in FE and FIX 
message)";;
QAP-T2996;Spot RFQ with ccy2;Automated;;"Check the behaviour of RFQ for currency 2
Example EUR/USD with currency USD";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, refactored_FX;lzaharia;;;;QAP-847;;On a FE, send a RFQ request using currency 2 (ex EUR/USD with currency USD);;"Quotes replies
Check that message contains correct currency in gateway, check quote 
display in FE (bid < ask)";;
;;;;;;;;;;;;;;;Send an order to execute RFQ;;"Order filled with correct currency (displayed in order book in FE and FIX 
message)";;
QAP-T2997;Verify that the beneficiary is selected automatically on each order by default.;Specified;;"Precondition:
Login as regular FX (HSD) user on FE.

Default Beneficiary value is the first value in the list.

Link requirement to: FOB-27071.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression;agonchar;;;;QAP-843;;Open TOB order entry box. Click on Advanced settings.;;Beneficiary field is editable.;;
;;;;;;;;;;;;;;;Look on Beneficiary dropdown.;;Check there is list of values;;
;;;;;;;;;;;;;;;Enable 1-Click Orders Mode.;;;;
;;;;;;;;;;;;;;;Send new order.;;Order was sent.;;
QAP-T2998;Verify that after deletion Qty, value of this field equals 0.00 and could be changed.;Automated;;"After deletion value of the field Qty from RFQ panel, value of this field 
equals 0.00 and could be changed.

Link requirement to: FOB-28992.";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, refactored_FX;agonchar;;;;QAP-842;;Open a RFQ panel.;;RFQ panel is opened with default qty = 10M.;;
;;;;;;;;;;;;;;;Delete whole quantity.;;Quantity is equal to 0.00 now.;;
;;;;;;;;;;;;;;;Enter new qty.;;Qty is equal accordingly to entered value.;;
;;;;;;;;;;;;;;;Delete whole qty.;;Quantity is equal to 0.00 now.;;
QAP-T2999;Verify that there is no drop down list for Beneficiaries when user is a PM.;Open;;"Precondition:
Be sure that benefeciary settings in functional.config set to

Login as PM (FXPM1) on FE.

Link requirement to: FOB-29631.";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression;agonchar;;;;QAP-837;;Add RFQ Panel.;;RFQ panel is opened.;;
;;;;;;;;;;;;;;;"Check the ""beneficiary"" field.";;There is no dropdown list.;;
QAP-T3000;FX ESP display : tooltip with LP on full amount (only Aspect);Specified;;Test for FOB-29473 : show LP on full amount section;/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression;lzaharia;;;;QAP-836;;Open a FE and display an ESP tile with prices on full amount section;;Different prices on full amount displayed;;
;;;;;;;;;;;;;;;Hover the mouse to display venue;;Venue displayed;;
;;;;;;;;;;;;;;;Send Care order on Full Amount (assign to yourself);;order is sent;;
;;;;;;;;;;;;;;;"On a care order, click on split full amount to display full amount and 
hover the mouse over price";;Venue displayed;;
QAP-T3001;FXCare : using k,m,b to enter the quantity;Automated;;Quantity with k, m, b;/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXCareDisplay, FXregression, needs_refactoring_FX;lzaharia;;;;QAP-833;;From an care order, display a piloted ESP tile;;ESP tile displayed with order quantity;;
;;;;;;;;;;;;;;;Change the quantity of ESP tile typing 1M;;Quantity updated to 1 000 000;;
;;;;;;;;;;;;;;;select the quantity to delete, and type 1k;;Quantity updated to 1000;;
;;;;;;;;;;;;;;;select the quantity to delete and type 1b;;"quantity updated to 1000000000 (quantity displayed in red if greater than 
incoming order)";;
;;;;;;;;;;;;;;;select the quantity to delete and type 1kk;;"only the first k is taken into account
1000 is displayed";;
;;;;;;;;;;;;;;;Open an order entry and repeat actions 2,3,5;;Quantity displayed as for ESP tiles;;
QAP-T3002;Verify that OrderBook and TradeBook have required fields for swap.;Automated;;;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, refactored_FX, SWED;vmaschik;;;;QAP-751;;Place order with RFQ swap;;Order was filled.;;
;;;;;;;;;;;;;;;"Open OrderBook, click on ""+"" near the order and choose ExecutionTab.";If need it, add these all fields via column chooser.;"Fields:
- NearTenor
- NearQty
- NearFwdPts
- NearPx
- NearSettlDate

- FarTenor
- FarQty
- FarFwdPts
- FarPx
- FarSettlDate

- LastSpotRate

are diplayed in the book.";;
;;;;;;;;;;;;;;;Open TradeBook.;If need it, add these all fields via column chooser.;"Fields:
- NearTenor
- NearQty
- NearFwdPts
- NearPx
- NearSettlDate

- FarTenor
- FarQty
- FarFwdPts
- FarPx
- FarSettlDate

- LastSpotRate

are diplayed in the book.";;
QAP-T3003;Use Quote currency with buy side.;Automated;;"When currency is quote currency, the side must be based on the currency in 
the order sent to market";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, refactored_FX;vmaschik;;;;QAP-741;;Precondition;In RFQ Panel, select EUR/USD as pair currency;;;
;;;;;;;;;;;;;;;select USD as currency;;The currency is displayed as USD;;
;;;;;;;;;;;;;;;click on send;;quotes are updated in the panel;;
;;;;;;;;;;;;;;;click on bid side of TOB;;Order is created;;
;;;;;;;;;;;;;;;Check Order Book;;the side must be BUY;;
QAP-T3004;Verify that user was blackout on 20 sec, after sending order with EM currency.;Specified;;"!!! Currencies must be -> EM(Emerging markets)
Check that DB has table like in attacment screenshot, if no add such table 
to your db.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression;vmaschik;;;;QAP-722;;Place FA order with Qty from 0m up to 24m.;;Order was traded,System blackouts user on 20 sec.;;
QAP-T3005;Verify that user was blackout on 30 sec, after sending order with not EM currency.;Specified;;"!!! Currencies must be NOT -> EM(Emerging markets)
Check that DB has table like in attacment screenshot, if no add such table 
to your db.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression;vmaschik;;;;QAP-721;;Place FA order with Qty from 50m+.;;Order was traded.System blackouts user on 30 sec.;;
QAP-T3006;Verify that user was blackout on 20 sec, after sending order with not EM currency.;Specified;;"!!! Currencies must be NOT -> EM(Emerging markets)
Check that DB has table like in attacment screenshot, if no add such table 
to your db.


{code:java}
2021-06-15 14:21:33.416201636 QUOD.ORS [20996] INFO order 
(FrontToBack.cpp:12870) - checking full amount black out rules for QA9 
Buying on EUR/USD
2021-06-15 14:21:33.416207252 QUOD.ORS [20996] DEBUG cache 
(RecordCache.cpp:776) - found UserInstrSymbBlackOut={ UserID=""QA9"" 
InstrSymbol=""EUR/USD"" IndiceUpperQty=1 UpperQty=9000000.000000000 
BlackOutPeriod=20 Alive=Alive, revision 1 }
2021-06-15 14:21:33.416218275 QUOD.ORS [20996] DEBUG cache 
(RecordCache.cpp:776) - found UserInstrSymbBlackOut={ UserID=""QA9"" 
InstrSymbol=""EUR/USD"" IndiceUpperQty=2 UpperQty=15000000.000000000 
BlackOutPeriod=30 Alive=Alive, revision 1 }

{code}";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression;vmaschik;;;;QAP-720;;Place FA order with Qty from 25m up to 49m.;;Order was traded, System blackouts user on 20 sec.;;
QAP-T3007;Verify that user was blackout on 10 sec, after sending order with not EM currency.;Specified;;"!!! Currencies must be NOT -> EM(Emerging markets)
Check that DB has table like in attacment screenshot, if no add such table 
to your db.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression;vmaschik;;;;QAP-719;;Place FA order with Qty from 0m up to 24m.;;Order was traded, System blackouts user on 10 sec.;;
QAP-T3008;Verify that Posit Qty updates when Buy order was send.;Automated;;For your Client and Instrument must be created AutoHedger rule;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, needs_refactoring_FX;vmaschik;;;;QAP-718;;"Select Client (Firm) which is attached to AutoHedger. Click on Send button 
on RFQ panel.";;Data appears on TOB.;;
;;;;;;;;;;;;;;;"Select checkbox near ""Buy"" title and send buy order.";;Order was sent.;;
;;;;;;;;;;;;;;;Click on Dealing Positions.;;Window with positions appears.;;
;;;;;;;;;;;;;;;Look on column PositQty.;;PositQty must increase on BuyQty.;;
QAP-T3009;Use Quote currency with sell side.;Automated;;"When currency is quote currency, the side must be based on the currency in 
the order sent to market";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, refactored_FX, SWED;;;;;QAP-714;;Precondition;In RFQ Panel, select EUR/USD as pair currency;;;
;;;;;;;;;;;;;;;select USD as currency;;The currency is displayed as USD;;
;;;;;;;;;;;;;;;click on send;;quotes are updated in the panel;;
;;;;;;;;;;;;;;;click on ask side of TOB;;Order is created;;
;;;;;;;;;;;;;;;Check Order Book;;the side must be SELL;;
QAP-T3010;Check update of settlement date after itk_online;Open;;"{color:#DE350B}*USE start_ITKTZUS for this test*{color}
Set the polling frequency to be in 15 minutes :
Example
18:00

Empty the column instrsettledate in the DB (instrument table)

In backend, stop rds, remove dictionary files in directory dictionaryfiles, 
restart the RDS and start start_ITKTZUS and wait that time 
(pollingFrequency)

Start the FE";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, UAQA;lzaharia;;;;QAP-713;;Select a few currency pairs in a few tiles;;In the open FE all settlement dates in FE are empty;;
;;;;;;;;;;;;;;;The itk updates the settlement dates at the expected time;;Check that the instrsettlement dates are updated;;
;;;;;;;;;;;;;;;The itk updates the settlement dates at the expected time;;"Check that the instrsettlement date is updated in the tiles
For MM : check that settlement date is updated in pricing tiles";;
QAP-T3011;Verify that after select of checkbox, price of that side becomes colored.;Specified;;;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression;vmaschik;;;;QAP-711;;Click on Send button on RFQ panel.;;Data appears on TOB.;;
;;;;;;;;;;;;;;;"Select checkbox near ""Sell"" title.";;The values of price become colored.;;
;;;;;;;;;;;;;;;"Select checkbox near ""Buy"" title.";;The values of price become colored.;;
QAP-T3012;Verify that after deselect of checkbox, price of that side becomes grey.;Automated;;;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, refactored_FX;vmaschik;;;;QAP-710;;Click on Send button on RFQ panel.;;Data appears on TOB.;;
;;;;;;;;;;;;;;;"Deselect checkbox near ""Sell"" title.";;The values of price become grey.;;
;;;;;;;;;;;;;;;"Deselect checkbox near ""Buy"" title.";;The values of price become grey.;;
QAP-T3013;"Verify that two checkboxes are displayed to the ""buy""/""sell"" labels on RFQ panel.";Automated;;;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, refactored_FX;vmaschik;;;;QAP-709;;Open RFQ panel.;;"Two checkboxes are diplayed near ""buy""/""sell"" labels.";;
QAP-T3014;Verify that after recovery of FE checkboxes of quotes save their values on RFQ panel.;Automated;;;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, needs_refactoring_FX, SWED;vmaschik;;;;QAP-708;;"Check two checkboxes near the button ""Send"".";;Checkboxes are checked.;;
;;;;;;;;;;;;;;;Close FE with saving workspace.;;FE is closed with saving workspace.;;
;;;;;;;;;;;;;;;Open FE by the same user.;;Checkboxes saved their statuses, they are checked.;;
;;;;;;;;;;;;;;;"Uncheck two checkboxes near the button ""Send"".";;Checkboxes are unchecked.;;
;;;;;;;;;;;;;;;Close FE with saving workspace.;;FE is closed with saving workspace.;;
;;;;;;;;;;;;;;;Open FE by the same user.;;Checkboxes saved their statuses, they are unchecked.;;
QAP-T3015;Verify that after sending order via RFQ panel, there is Beneficiary field in Books.;Automated;;;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, refactored_FX;vmaschik;;;;QAP-702;;Open a RFQPanel.;;The field beneficiary is displayed with default value.;;
;;;;;;;;;;;;;;;Send order.;;Order was sent.;;
;;;;;;;;;;;;;;;Open Order book.;;The field beneficiary has correct value.;;
QAP-T3016;Verify that beneficiary code is not editable column in OrderBook.;Open;;"Requirement:
* In the order book (blotter) the beneficiary is displayed but cannot be 
changed, so it will be not editable column.

!screenshot-1.png|thumbnail!";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression;vmaschik;;;;QAP-699;;Login with user FXPM1.;;;;
;;;;;;;;;;;;;;;Open order ticket window and send order.;;Check that beneficiary code column is not editable field in Order Book.;;
QAP-T3017;Verify that beneficiary code was added automaticly.;Open;;"Requirement:
* The PM code once set for the given PM user must then be add to all orders 
created by this PM user automatically.
Therefore on that particular instance of the FE the dropdown list should be 
hidden on the order ticket.



!screenshot-1.png|thumbnail!";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression;vmaschik;;;;QAP-698;;Login with user FXPM1.;;;;
;;;;;;;;;;;;;;;Open different order tickets windows and send orders.;;"Check that beneficiary code was added automatically with value in Order 
Book, MyOrders .";;
QAP-T3018;Verify that by added beneficiary code automatically, there is no displaying of beneficiary list on order ticket.;Deprecated;;"Link required to: FOB-27070.

Be sure that benefeciary settings in functional.config set to
.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression;vmaschik;;;;QAP-697;;Login with user FXPM1.;;;;
;;;;;;;;;;;;;;;Open different order tickets windows.;;Check that there is no beneficiary list on these windows.;;
;;;;;;;;;;;;;;;Open an Order Book.;;Check that beneficiary field is set and not editable.;;
;;;;;;;;;;;;;;;Enable 1-Click Orders and place an order.;;Order was sent.;;
;;;;;;;;;;;;;;;Open an Order Book.;;"Check that Beneficiary field is set and the same as in FE config.
If beneficiary code is not set in the config, the ""Beneficiary"" column
has the default value (the first value in the list). In case the 
beneficiary code is set in the FE config but to a wrong value that doesn't 
exist in the database, the FE will send it on the order messages that will 
be rejected by the backend (ORS).";;
QAP-T3019;Behaviour of quote already expired with timer still going on;Specified;;"Check the behaviour of NDF (USD/PHP for example) if the quote expires 
before the timer";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression;lzaharia;;;;QAP-691;;Send a quote on NDF 3W on USD/PHP;;Quotes replied on USD/PHP;;
;;;;;;;;;;;;;;;"Wait for some time and see if some venues are not updating before the end 
of the counter, try to send an order on this venue";;"You shouldn't be allowed to send an order : the order will be rejected
The prices should appear in grey";;
QAP-T3020;Check broken swap broken date / broken date;Automated;;Check the functioning of swaps broken date / broken date;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutotestOutOfDate, FXregression, needs_refactoring_FX;lzaharia;;;;QAP-687;;"Open a tile RFQ and select 2 broken dates
Send a RFQ request";;RFQ reply for venue DB;;
;;;;;;;;;;;;;;;Send an order for venue;;Order sent, RFQ stopped quoting;;
;;;;;;;;;;;;;;;Check order book;;"Order filled, 1execution displayed on Exec Tab and contains such data:
FarPx, FarQty, FarFwdPts, NearPx, NearQty, NearForwardPts.";;
QAP-T3021;Check broken swap broken date / broken date on FSS;Specified;;Check the functioning of swaps broken date / broken date on FSS;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, SWED;lzaharia;;;;QAP-686;;"Open a tile RFQ and select 2 broken dates
Send a RFQ request";;RFQ reply for several venues quoting on FSS;;
;;;;;;;;;;;;;;;Send an order for one venue quoting on FSS;;Order sent, RFQ stopped quoting;;
;;;;;;;;;;;;;;;Check order book;;Order filled;;
QAP-T3022;IMM RFQ Process on FSS;Specified;;Full process of RFQ from request to order sending for forward;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression;lzaharia;;;;QAP-685;;Select a currency pair, select IMM;;"RFQ sent - reply received with countdown
Check that market data is received on both sides";;
;;;;;;;;;;;;;;;Send an order by clicking from TOB;;Order sent and filled;;
;;;;;;;;;;;;;;;Resend a RFQ on the same currency pair;;Reply sent, countdown back to 120;;
;;;;;;;;;;;;;;;Send an order by clicking on a price in a venue;;Check that the order is filled;;
QAP-T3023;Swap display with a swap SPOT/2W;Automated;;Display for a swap spot/tenor on wide mode;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, needs_refactoring_FX;lzaharia;;;;QAP-683;;Open a RFQ panel and make a quote request for a swap SPOT/2W;;"Check the display in grid : the SP price should be the same as 'near leg' 
price";;
;;;;;;;;;;;;;;;Check the Dist;;The dist is the difference between the TOB and the venue price;;
;;;;;;;;;;;;;;;Check the pts;;"The pts is the difference between the the SP and W2 price on the same side 
(ex bid w2 - bid spot for bid pts)";;
QAP-T3024;RFQ tile layout applied to a new tile;Automated;;Following FOB-27485 description;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestOutOfDate, FETrading, FXregression, refactored_FX;lzaharia;;;;QAP-682;;"Select a RFQ panel with settings :
EUR/USD
Mar IMM
Unselect some venues
(RMB klick on TOB>Filter venue> unselect several venues)";;RFQ panel displayed correctly with the new settings;;
;;;;;;;;;;;;;;;Open a new tile;;"Check the tile has the same characteristics :
EUR/USD
Mar IMM
Same unselected venues";;
;;;;;;;;;;;;;;;Close both RFQ;;RFQs closed;;
;;;;;;;;;;;;;;;"Select a RFQ panel with settings :
EUR/USD
swap 7M / 8M
Unselect some venues";;RFQ Panel correctly displayed;;
;;;;;;;;;;;;;;;Open a new tile;;"Check that the tile has the same characteristics :
EUR/USD
swap 7M / 8M
Same unselected venues";;
QAP-T3025;Verify that after changing currency in title, the currency changes also in TOB section;Automated;;"After changing currency by using button ""currency"" in title of panel, the 
currency changes also in TOB section near button Send.";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, refactored_FX;lzaharia;;;;QAP-648;;Open a RFQ panel.;;Panel is displayed;;
;;;;;;;;;;;;;;;Click on button currency.;;Currency is also changed in TOB section near button Send.;;
;;;;;;;;;;;;;;;Send a RFQ to display prices;;Prices are displayed;;
;;;;;;;;;;;;;;;Send an order on venue;;Check that the currency in the order is the currency from the TOB;;
QAP-T3026;RFQ process with small quantity on swap;Automated;;Modify the quantity from 1,000,000 to 11;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutotestOutOfDate, AutotestTH2, FETrading, FXregression, refactored_FX;lzaharia;;;;QAP-646;;"From a RFQ tile with a swap, modify the quantity from 1,000,000 to 11
Send a RFQ";;"RFQ sent to the market
Replies received";;
;;;;;;;;;;;;;;;Send a Buy order;;check that the order is filled;;
;;;;;;;;;;;;;;;"Modify the quantity to 110.50
Send a RFQ";;"RFQ sent to the market
Replies received";;
;;;;;;;;;;;;;;;Send an order from TOB;;check that the order is filled;;
QAP-T3027;RFQ Layout : selection of Currency pair and quantity on SWAP;Automated;;Check the selection of instrument and quantity in RFQ panel on swap;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, refactored_FX;lzaharia;;;;QAP-645;;Open a new Aggregated Rates and click on add RFQ Panel;;A new RFQ panel is open;;
;;;;;;;;;;;;;;;Select a new currency pair;;Check that the currency pair is correctly selected;;
;;;;;;;;;;;;;;;Check the settlement date;;"If no tenor is selected, the date is spot date T+2 (except sat sundays and 
holidays)";;
;;;;;;;;;;;;;;;Change the tenor of the first leg;;the date is spot date +2 + forward date (except sat sundays and holidays);;
;;;;;;;;;;;;;;;Add a new tenor to make a swap;;the date is spot date +2 + forward date (except sat sundays and holidays);;
;;;;;;;;;;;;;;;Change the currency;;Currency is changed and currency Sell/Buy under TOB price is changed too;;
;;;;;;;;;;;;;;;Change the quantity;;Select 1m and check that qty is updated to 1,000,000;;
;;;;;;;;;;;;;;;Change the quantity;;Select 1k and check that qty is updated to 1,000;;
;;;;;;;;;;;;;;;Change the tenor;;Check that the date is updated accordingly;;
QAP-T3028;SWAP RFQ Process;Automated;;Full process of RFQ from request to order sending for swaps on DB;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, refactored_FX;lzaharia;;;;QAP-643;;"Select a currency pair forward and send a RFQ on swaps
For example 1M / 2M";;"RFQ sent - reply received with countdown
Check that market data is received on both sides";;
;;;;;;;;;;;;;;;Send an order by clicking on TOB;;Order sent and filled;;
;;;;;;;;;;;;;;;Resend a RFQ on the same currency pair;;Reply sent, countdown back to 120;;
;;;;;;;;;;;;;;;Send an order by clicking on a price in a venue;;Check that the order is filled;;
QAP-T3029;SWAP_MultipleRFQ several RFQ panel;Automated;;For validating that user can do the full RFQ workflow after stop a RFQ;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FETrading, FXregression, multiRFQ, refactored_FX, SWED;lzaharia;;;;QAP-639;;Open 3 RFQ panels and select different instrument on each panel;"EUR/USD swap Spot/1W
Non-deliverable currency swap(AUD/BRL or USD/PHP)
EUR/GBP swap 1M/2M";Instruments selected, tenor dates correct;;
;;;;;;;;;;;;;;;user sends the RFQ on all 3 instruments;;user receives the Quote on all 3 instruments;;
;;;;;;;;;;;;;;;User sends an order on a received quote for each instrument;;The order is sent to market and executed;;
;;;;;;;;;;;;;;;User click on 'send' again for each instrument;;User receives new quotes;;
;;;;;;;;;;;;;;;User sends an order on a received quote for each instrument;;The order is sent to market and executed;;
;;;;;;;;;;;;;;;User click on 'send' again for each instrument;;User receives new quotes;;
;;;;;;;;;;;;;;;Stop quote on the first instrument;;The quote is disable. User can not places order on this quote;;
;;;;;;;;;;;;;;;User places order on a quote on the second instrument;;the order is sent to market and executed;;
;;;;;;;;;;;;;;;Wait for the end of quote on the last instrument;;The quote is disable, user can not place order on the quote;;
QAP-T3030;SWAP RFQ Process with FSS feed;Specified;;Full process of RFQ from request to order sending for swaps;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FETrading, FXregression, SWED;lzaharia;;PFX-2878;;QAP-638;;"Select a currency pair forward and send a RFQ on swaps
For example 1M / 2M
(Aggregated Rates> select Near tenor 1M/ and Far tenor 2M)";"see comment #1
check tag 167";"RFQ sent - reply received with countdown
Check that market data is received on both sides";;
;;;;;;;;;;;;;;;Send an order by clicking from TOB;;Order sent and filled;;
;;;;;;;;;;;;;;;Resend a RFQ on the same currency pair;;Reply sent, countdown back to 120;;
;;;;;;;;;;;;;;;Send an order by clicking on a price in a venue;;Check that the order is filled;;
QAP-T3031;Swap display with a swap SPOT/2W on FSS;Open;;Display for a swap spot/tenor;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutotestOutOfDate, FXregression;lzaharia;;;;QAP-637;;Open a RFQ panel and make a quote request for a swap SPOT/2W;;"Check the display in grid : the SP price should be the same as 'near leg' 
price";;
;;;;;;;;;;;;;;;Check the Dist;;The dist is the difference between the TOB and the venue price;;
;;;;;;;;;;;;;;;Chect the pts;;The pts is the difference between the OfferPx(FarLeg)-BidPx(NearLeg);;
QAP-T3032;Display of points in RFQ panel for swaps;Automated;;"ForwardPointDivisor - is a column in the *INSTRUMENT* table in the oracle 
sql.

BidSwapPoints - tag *189*

OfferSwapPoints - tag *191*

*---*

Upon hitting *send* button you will get a reply in a fix messages with the 
tags mentioned above.

You will find logs for the *BAR* in the *BARXP* gateway, and you will need 
to check *FSSP* gateway to find all others.

You will need to make calculations with the formulas below to check if 
everything is showing accurately in the FE.

!image (3).png!

In case of an FXSwap, the TOB and main central columns shall display:

Quote.BidSwapPoints * ForwardPointDivisor
Quote.OfferSwapPoints * ForwardPointDivisor
Unlike the other FX instr types, do not apply the small/large font 
presentation because values are already multiplied by a divisor.

Distance columns shall display:
(TOB.BidSwapPoints - Quote.BidSwapPoints) * ForwardPointDivisor
(Quote.OfferSwapPoints - TOB.OfferSwapPoints) * ForwardPointDivisor

Like PxPrecision defaults to 4, ForwardPointDivisor defaults to 10000. The 
number of decimal places depends on TickSize. If the swap TickSize=5e-7 and 
ForwardPointDivisor=10000, it means that the TickSize can accommodate 7 
decimal places. There are 3 decimals left to display after the 
multiplication.";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutotestOutOfDate, FXregression, needs_refactoring_FX;lzaharia;;;;QAP-636;;"Open a RFQ and enter a swap
Send a RFQ";;Check that the Dist and Pts are displayed as in the description;;
QAP-T3033;Check calculation of [tenor] column in quotes for FWD;Automated;;"Formula :
Bid side :
Quote BidForwardPoints * Instrument.ForwardPointDivisor.

Offer side :
Quote OfferForwardPoints * Instrument.ForwardPointDivisor.

To check the input values :
The Bid/OfferForwardPoints are in quote reply message :
2018-01-17 15:48:40.987095017 QUOD.FSSR [14862] INFO mip_common 
(Message.cpp:99) - serializing gateway Quote={ QuoteBlock={ 
InstrumentBlock={ InstrSymbol=EUR/USD Tenor=Y1 } 
ClQuoteReqID=01180117154839323003 
VenueQuoteID=01180117154839323003:6tasd4rjN.1M+:6tazS+LCG.1M+ SettlType=Y1 
SettlDate=2019-Jan-21 Currency=EUR BidPx=1.196070000 
BidSize=1000000.000000000 OfferPx=1.196290000 OfferSize=1000000.000000000 
BidSpotRate=1.195900000 OfferSpotRate=1.196010000 
BidForwardPoints=0.000170000 OfferForwardPoints=0.000280000 } }

In DB I have :
select forwardpointdivisor from instrument where instrsymbol like 
'EUR/USD%' and tenor = 'YR1';
10000

This value is also the difference between spot price and forward price

See FOB-27748";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, needs_refactoring_FX;lzaharia;;;;QAP-612;;"Open a RFQPanel, on a forward instrument
Send a quote request";;Quote replies arriving;;
;;;;;;;;;;;;;;;Take a screenshot, or cancel the quote to freeze the panel;;Check the column tenor content on bid and ask;;
;;;;;;;;;;;;;;;Check calculation;;"Offer : Pts - SP *0.01
Bid : Pts -SP *0.01 (depending on forward point divisor)";;
QAP-T3034;NDF_RFQ after Expiration;Automated;;For validating that user can do the full RFQ workflow after stop a RFQ;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;expiredrfq, FXregression, multiRFQ, refactored_FX;lzaharia;;;;QAP-611;;User select a NDF instrument in RFQ panel;;the ndf is selected;;
;;;;;;;;;;;;;;;user sends the RFQ;;user receives the Quote;;
;;;;;;;;;;;;;;;User wait for the expiration of quote;;The Quote is disable. User can not place any order on this quote;;
;;;;;;;;;;;;;;;User click on send;;User receives new quotes;;
;;;;;;;;;;;;;;;User sends an order on a quote;;The order is sent to market, then executed;;
QAP-T3035;NDF_RFQ after stop;Automated;;For validating that user can do the full RFQ workflow after stop a RFQ;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, multiRFQ, refactored_FX;lzaharia;;;;QAP-610;;User select a NDF instrument in RFQ panel;USD/PHP;the NDF is selected;;
;;;;;;;;;;;;;;;user sends the RFQ;;user receives the Quote;;
;;;;;;;;;;;;;;;User stop the Quote;;The Quote is disable. User can not place any order on this quote;;
;;;;;;;;;;;;;;;User click on send;;User receives new quotes;;
;;;;;;;;;;;;;;;User sends an order on a quote;;The order is sent to market, then executed;;
QAP-T3036;NDF_MultipleRFQ several RFQ panel;Automated;;For validating that user can do the full RFQ workflow after stop a RFQ;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, multiRFQ, refactored_FX;lzaharia;;;;QAP-609;;Open 2 RFQ panels and select different instrument on each panel;"USD/PHP 1M
USD/CAD 2M";;;
;;;;;;;;;;;;;;;user sends the RFQ on all 2 instruments;;user receives the Quote on all 2 instruments;;
;;;;;;;;;;;;;;;User sends an order on a received quote for each instrument;;The order is sent to market and executed;;
;;;;;;;;;;;;;;;User click on 'send' again for each instrument;;User receives new quotes;;
;;;;;;;;;;;;;;;User sends an order on a received quote for each instrument;;The order is sent to market and executed;;
;;;;;;;;;;;;;;;Redo the step 4;;;;
;;;;;;;;;;;;;;;Stop quote on the first instrument;;The quote is disable. User can not places order on this quote;;
;;;;;;;;;;;;;;;User places order on a quote on the second instrument;;the order is sent to market and executed;;
QAP-T3037;Display of SWAPS on RFQ panel;Automated;;"Check the RFQ panel for swaps

Remark from the client :
_________________________________________
The text under the FX swap TOB is misplaced
Under the bid we have ""Buy USD at Far Date"" we should have ""Sell USD at Far 
date""
See the attached screenshot and comments below for clarification w examples 
for both spot, forwards, and swaps, all of which need to be corrected.

SOLUTION decided after exchanges by email :
__________________________________________

SPOT or FORWARDS:
__________________________________________
Quote Request: Symbol(55)=EUR/USD, Currency(15)=EUR
on the bid entries, ""sell EUR"" and buy the equivalent amount in USD
on the offer entries, ""buy EUR"" and sell the equivalent amount in USD

Quote Request: Symbol(55)=EUR/USD, Currency(15)=USD
on the bid entries, ""buy USD"" and sell the equivalent amount in EUR
on the offer entries, ""sell USD"" and buy the equivalent amount in EUR

SWAPS:
_________________________________________

Quote Request: Symbol(55)=EUR/USD, Currency(15)=EUR
on the bid entries, ""sell EUR Far"" and buy the equivalent amount in USD Far
on the offer entries, ""buy EUR Far"" and sell the equivalent amount in USD 
Far

Quote Request: Symbol(55)=EUR/USD, Currency(15)=USD
on the bid entries, ""buy USD Far"" and sell the equivalent amount in EUR Far
on the offer entries, ""sell USD Far"" and buy the equivalent amount in EUR 
Far";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutotestOutOfDate, FXregression, refactored_FX, SWED;lzaharia;;;;QAP-606;;On a RFQ panel, enter an instrument and add 2 Tenors to have a swap;;"Check the display of swaps
The validity date must be updated automatically for each tenor";;
;;;;;;;;;;;;;;;Check the Diff;;"The Diff must display the number of days between the first leg and the 
second leg";;
;;;;;;;;;;;;;;;"Change the tenors to have again a single leg : select blank tenor on the 
second line";;"No far tenor appears on the second line and one instrument FWD, NDF or SPOT 
is displayed";;
;;;;;;;;;;;;;;;"Change again to have a swap, currency = quote currency, and check the text 
under the prices";;"Bid side : Sell EUR Far
Offer side : Buy EUR Far";;
;;;;;;;;;;;;;;;Change the currency on the swap, and check the text;;"Bid side : Buy USD Far
Sell side : Sell USD Far";;
QAP-T3038;Check display of RFQ Order in order book;Automated;;Check that all necessary information is correct and displayed in order book;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestOutOfDate, FXregression, refactored_FX;lzaharia;;;;QAP-604;;"From a RFQ panel, send an order to be filled
Check the order book";;Instrument identifiable with symbol, near tenor, far tenor (if available);;
;;;;;;;;;;;;;;;;;Limit price and quantity correct;;
;;;;;;;;;;;;;;;;;Beneficiary present (to be confirmed);;
;;;;;;;;;;;;;;;Check the execution;;Quantity and price present in execution, with same value as order;;
QAP-T3039;IMM RFQ Process (simulator);Automated;;Full process of RFQ from request to order sending for forward;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestOutOfDate, FXregression, refactored_FX, SWED;lzaharia;;;;QAP-602;;Select a currency pair, select IMM;;"RFQ sent - reply received with countdown
Check that market data is received on both sides";;
;;;;;;;;;;;;;;;Send an order by clicking from TOB;;Order sent and filled;;
;;;;;;;;;;;;;;;Resend a RFQ on the same currency pair;;Reply sent, countdown back to 120;;
;;;;;;;;;;;;;;;Send an order by clicking on a price in a venue;;Check that the order is filled;;
QAP-T3040;FXF_Check SettlDate for all tenor;Automated;;"Check that the settlDate is correct for each tenor

The following indicates how each type of standard tenor is to be calculated 
and validated:
o Today (“TOD”) – Trade Date (T+0)
o Tomorrow (“TOM”) – first working day after the Trade Date (T+1)
o Overnight (“ON”) – first working day after the Trade Date (T+1)
o Tomorrow Next (“TN”) – second working day after the Trade Date (T+2)
o Spot Next (“SN”) – first working day after the Spot Value Date (T+3)";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, FXregression, refactored_FX;;;;;QAP-601;;User select a tenor;;the settldate is correct for spot;;
;;;;;;;;;;;;;;;User selects TOM;;Check settle date is correct (today + 1);;
;;;;;;;;;;;;;;;User selects TODAY;;Check settle date is correct (today);;
;;;;;;;;;;;;;;;User selects SN;;Check settle date is correct (spot + 1);;
QAP-T3041;"If user selects ""Broken"" date for 'Near Leg' or 'Far Leg' which is Saturday or Sunday it should be applied for Monday";Automated;;"If user selects ""Broken"" data for 'Near Leg' or 'No Far Leg' which is 
Saturday or Sunday it should be applied for Monday";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, FXregression, refactored_FX, SWED;;;;;QAP-600;;"Select a currency pair, select Near/Far Leg as Broken and enter the date of 
Saturday or Sunday";;The date should be changed for the nearest Monday's date.;;
QAP-T3042;Changing of the selected currency pair shall immediately stop any active quote request;Automated;;"Changing the selected currency pair or any of the near or far leg 
settlement date details shall immediately stop any active quote request and 
clear all price values";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, FXregression, refactored_FX, SWED;;;;;QAP-599;;Select a currency pair, select Near/Far Leg and enter the date from the FE;;RFQ sent - reply received with countdown;;
;;;;;;;;;;;;;;;"Click on 'SEND' button and change a currency pair to another one 
immediately.";;"Changing the selected currency pair or any of the near or far leg 
settlement date details shall immediately stop any active quote request and 
clear all price values.";;
QAP-T3043;Quote request quantity;Automated;;"In the end, we determined that 12 integer digits is sufficient for our 
client base.";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, refactored_FX;;;;;QAP-598;;Open RFQ Panel in wide mode.;;RFQ Panel is opened in wide mode.;;
;;;;;;;;;;;;;;;"Try to enter different quantities at Quantity fields(Near/Far legs) and 
check that user shall be able to enter quote request quantities with 12 
integer digits +2 .";"Now (Maximal count of digit is 14= 12.2)
Example:
123,456,789012,45";"The user is able to enter quote request quantities with 12 integer 
digits+2.";;
QAP-T3044;The “Stop” button shall allow the user to stop the currently active quote request;Automated;;"The “Stop” button shall allow the user to stop the currently active quote 
request";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, refactored_FX;;;;;QAP-597;;Select a currency pair, select Near/Far Leg and enter the date from the FE;;RFQ sent - reply received with countdown;;
;;;;;;;;;;;;;;;"Click on 'SEND' button and check that quote request are sent to all venues 
in the current venue filter";;Quote request are started.;;
;;;;;;;;;;;;;;;"Click on 'Stop' button and check that the currently active quote request 
are stopped, stopping all prices from updating, disabling all price 
buttons, and setting the 'Stop' button to 'Send'.";;"The currently active quote request are stopped, stopping all prices from 
updating, disabling all price buttons, and setting the 'Stop' button to 
'Send'.";;
QAP-T3045;A “Send” button shall allow the user to send the quote request to all venues in the current venue filter;Automated;;"A “Send” button shall allow the user to send the quote request to all 
venues in the current venue filter";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestOutOfDate, FXregression, refactored_FX;;;;;QAP-595;;"Select a currency pair, select Near/Far Leg and enter the date from the FE
Unselect a few venues";;RFQ sent - reply received with countdown;;
;;;;;;;;;;;;;;;"Click on 'SEND' button and check that quote request are sent to all venues 
in the current venue filter";;"Quote request are sent to all venues in the current venue filter
Check that nothing is coming on unselected venues";;
;;;;;;;;;;;;;;;"Check that all price buttons are enabled and setting the ""Send"" button to 
""Stop"".";;"All price buttons are enabled and setting the ""Send"" button to ""Stop"".";;
QAP-T3046;Direct Venue RFQ: No order shall be used during an active quote request;Automated;;No order ticket shall be used during an active quote request;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, refactored_FX;;;;;QAP-594;;Select a currency pair, select Near/Far Leg and enter the date from the FE;;RFQ sent - reply received with countdown;;
;;;;;;;;;;;;;;;Send an order by clicking from TOB;;Order sent and submitted;;
;;;;;;;;;;;;;;;"Check that quote request is immediately terminated, stopping all prices 
from updating, disabling all price buttons.";;"Quote request is immediately terminated, stopping all prices from updating, 
disabling all price buttons.";;
QAP-T3047;Verify that when once the count-down timer reaches 0, all price buttons shall be disabled.;Automated;;"Once the count-down timer reaches 0, all price buttons shall be disabled, 
and the “Stop” button shall be set to “Send.”";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, defense, FXregression, refactored_FX;vmaschik;;;;QAP-593;;Open a RFQ, send a quote request on FWD (for example tenor M1);;Quote is displayed;;
;;;;;;;;;;;;;;;"Check timer and wait when it will be equal to ""0"".";;Price buttons are disabled, and the “Stop” button is set to “Send.”;;
;;;;;;;;;;;;;;;Send Order on any Venue;;Order should not be present in order book;;
QAP-T3048;SPO_RFQ The first request after workspace importing;Automated;;;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;firstrequest, FXregression, ManualTestQA, needs_refactoring_FX;;;;;QAP-592;;User imports the workspace file on his PC;;The workspace is loaded;;
;;;;;;;;;;;;;;;User add a new Aggrated rate Tile;;The Tile is open and it s layout is like the previous tile created;;
;;;;;;;;;;;;;;;User add a RFQ panel;;The panel is added;;
;;;;;;;;;;;;;;;User select a instrument SPOT;;The instrument is selected;;
;;;;;;;;;;;;;;;User send a RFQ;;User receives the quotes;;
;;;;;;;;;;;;;;;User places an order on a received quote;;Order is sent to market and executed;;
QAP-T3049;Validation of the corresponding Far Leg column in Order book;Automated;;"Validation of the corresponding Far Leg column in Order book
Work only with swap rfq";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestOutOfDate, AutotestTH2, FXregression, refactored_FX;;;;;QAP-591;;Select a currency pair, select Far Leg and enter a tenor from the FE;;RFQ sent - reply received with countdown;;
;;;;;;;;;;;;;;;Send an order by clicking from TOB;;Order sent and filled;;
;;;;;;;;;;;;;;;"Check that displaying value at the Far Leg column in Order Book is 
corresponded with Far Leg tenor on RFQ Panel for just sent order.";;"Value at the Far Leg column in Order Book is corresponded with Far Leg on 
RFQ Panel for just sent order.";;
QAP-T3050;Validation of the corresponding Near Leg column in Order book;Automated;;"Validation of the corresponding Near Leg column in Order book

Work only with swap rfq

 ";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestOutOfDate, AutotestTH2, FXregression, refactored_FX, SWED;;;;;QAP-590;;"Select a currency pair, select Near Leg and enter the date from the FE, 
sent RFQ";;Verify that reply received with countdown;;
;;;;;;;;;;;;;;;Send an order by clicking from TOB;;Order sent and filled;;
;;;;;;;;;;;;;;;"Check that displaying value at the Near Leg column in Order Book is 
corresponded with Near Leg on RFQ Panel for just sent order.";;"Value at the Near Leg column in Order Book is corresponded with Near Leg on 
RFQ Panel for just sent order.";;
QAP-T3051;Check the date for tenor NextDay;Automated;;Check that the date for NextDate is correct;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, FXregression, refactored_FX;vmaschik;;;;QAP-589;;Select a currency pair, choose a near tenor NextDay (TOM);;Check that the settlement date is correct. It must be next working day.;;
;;;;;;;;;;;;;;;Choose a far tenor NextDay (TOM);;"Check that the far leg settlement date is correct. It must be next working 
day.";;
QAP-T3052;RFQ Display: Displaying the list of No Far Tenor;Specified;;List of No Far Tenor;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, SWED;;;;;QAP-588;;Open 'No Far Tenor' dropdown on RFQ panel.;;'No Far Tenor' dropdown is opened.;;
;;;;;;;;;;;;;;;Check displaying of the 'No Far Tenor' dropdown.;;"The following list of forward tenors shall be configured for the current 
project, though the list may be modified by system administrators:
Spot
TODAY
TOM
SN
1W
2W
1M
2M
3M
6M
9M
1Y
18M
2Y
3Y
Mar IMM
Jun IMM
Sep IMM
Dec IMM";;
QAP-T3053;SPO_MultipleRFQ several RFQ panel;Automated;;For validating that user can do the full RFQ workflow after stop a RFQ;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression, multiRFQ, refactored_FX;;;;;QAP-587;;Open 2 RFQ panels and select different instrument on each panel;"EUR/USD spot
USD/CAD spot";;;
;;;;;;;;;;;;;;;user sends the RFQ on all 2 instruments;;"user receives the Quote on all 2
instruments";;
;;;;;;;;;;;;;;;User sends an order on a received quote for each instrument;;The order is sent to market and executed;;
;;;;;;;;;;;;;;;User click on 'send' again for each instrument;;User receives new quotes;;
;;;;;;;;;;;;;;;User sends an order on a received quote for each instrument;;The order is sent to market and executed;;
;;;;;;;;;;;;;;;User click on 'send' again for each instrument;;User receives new quotes;;
;;;;;;;;;;;;;;;Stop quote on the first instrument;;The quote is disable. User can not places order on this quote;;
;;;;;;;;;;;;;;;User places order on a quote on the second instrument;;the order is sent to market and executed;;
QAP-T3054;RFQ Display: Displaying the list of Near Tenor;Specified;;List of Near Tenor;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, tenor;;;;;QAP-586;;1.Open 'Near Tenor' dropdown on RFQ panel.;;'Near Tenor' dropdown is opened.;;
;;;;;;;;;;;;;;;Check displaying of the 'Near Tenor' dropdown.;;"The following list of forward tenors shall be configured for the current 
project, though the list may be modified by system administrators:
TOD
TOM
SN
1W
2W
1M
2M
3M
6M
9M
1Y
18M
2Y
3Y
Mar IMM
Jun IMM
Sep IMM
Dec IMM";;
QAP-T3055;SPO_MultipleRFQ;Automated;;For validating that user can do the full RFQ workflow after stop a RFQ;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, FETrading, FXregression, multiRFQ, refactored_FX, SWED;;;;;QAP-585;;User select a SPOT instrument in RFQ panel(aggregatedReatesPanel);;the spot is selected;;
;;;;;;;;;;;;;;;user sends the RFQ;;user receives the Quotes;;
;;;;;;;;;;;;;;;User sends an order on the received quote;;The order is sent to market and executed;;
;;;;;;;;;;;;;;;User click on send;;User receives new quotes;;
;;;;;;;;;;;;;;;User sends an order on a received quote;;The order is sent to market and executed;;
;;;;;;;;;;;;;;;Redo the step 4;;;;
;;;;;;;;;;;;;;;redo step 5;;Order is sent to market and executed;;
QAP-T3056;SPO_RFQ after Stop And Expiration;Automated;;For validating that user can do the full RFQ workflow after stop a RFQ;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, expiredrfq, FXregression, multiRFQ, refactored_FX, SWED;;;;;QAP-584;;User select a SPOT instrument in RFQ panel;;the spot is selected;;
;;;;;;;;;;;;;;;user sends the RFQ;;user receives the Quote;;
;;;;;;;;;;;;;;;User stop the quote;;The Quote is disable. User can not place any order on this quote;;
;;;;;;;;;;;;;;;User click on send;;User receives new quotes;;
;;;;;;;;;;;;;;;User wait for the expiration of quote;;The Quote is disable. User can not place any order on this quote;;
;;;;;;;;;;;;;;;Redo the step 4;;;;
;;;;;;;;;;;;;;;User places an order on a received quote;;Order is sent to market and executed;;
QAP-T3057;SPO_RFQ after ExpirationAndStop;Automated;;For validating that user can do the full RFQ workflow after stop a RFQ;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, expiredrfq, FXregression, multiRFQ, refactored_FX, SWED;;;;;QAP-582;;User select a SPOT instrument in RFQ panel;;the spot is selected;;
;;;;;;;;;;;;;;;user sends the RFQ;;user receives the Quote;;
;;;;;;;;;;;;;;;User wait for the expiration of quote;;The Quote is disable. User can not place any order on this quote;;
;;;;;;;;;;;;;;;User click on send;;User receives new quotes;;
;;;;;;;;;;;;;;;User stop the quote;;The Quote is disable. User can not place any order on this quote;;
;;;;;;;;;;;;;;;Redo the step 4;;;;
;;;;;;;;;;;;;;;User places an order on a received quote;;Order is sent to market and executed;;
QAP-T3058;SPO_RFQ after Expiration;Automated;;For validating that user can do the full RFQ workflow after stop a RFQ;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, expiredrfq, FXregression, multiRFQ, refactored_FX, SWED;;;;;QAP-581;;User select a SPOT instrument in RFQ panel;;the spot is selected;;
;;;;;;;;;;;;;;;user sends the RFQ;;user receives the Quote;;
;;;;;;;;;;;;;;;User wait for the expiration of quote;;The Quote is disable. User can not place any order on this quote;;
;;;;;;;;;;;;;;;User click on send;;User receives new quotes;;
;;;;;;;;;;;;;;;User sends an order on a quote;;The order is sent to market, then executed;;
QAP-T3059;SPO_RFQ after stop;Automated;;For validating that user can do the full RFQ workflow after stop a RFQ;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, FXregression, multiRFQ, refactored_FX, SWED;;;;;QAP-580;;User select a SPOT instrument in RFQ panel;;the spot is selected;;
;;;;;;;;;;;;;;;user sends the RFQ;;user receives the Quote;;
;;;;;;;;;;;;;;;User stop the Quote;;The Quote is disable. User can not place any order on this quote;;
;;;;;;;;;;;;;;;User click on send;;User receives new quotes;;
;;;;;;;;;;;;;;;User sends an order on a quote;;The order is sent to market, then executed;;
QAP-T3060;Verify that qty of order by default equals 10 M.;Automated;;Check currency value in order book .;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, FXregression, refactored_FX;vmaschik;;;;QAP-579;;Open a RFQ panel.;;Panel is displayed;;
;;;;;;;;;;;;;;;Check qty on the title of the panel.;;Qty=10M;;
;;;;;;;;;;;;;;;Send order.;;Order is diplayed in My Order book with qty=10M.;;
QAP-T3061;"Verify that after changing currency by using button ""currency"" in title of panel, order is placed with chose currency.";Automated;;Check currency value in order book .;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, FXregression, refactored_FX, SWED;vmaschik;;;;QAP-578;;Open a RFQ panel.;;Panel is displayed;;
;;;;;;;;;;;;;;;"Change currency by clicking on ""currency"" button in title.";;Currency is changed.;;
;;;;;;;;;;;;;;;Send order.;;Order is displayed in My Order book.;;
;;;;;;;;;;;;;;;Check currency.;;Currency equals one that was chose in step 2.;;
QAP-T3062;RFQ Layout : check display after quote sending on NDF;Automated;;Display after quote sending on NDF;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, needs_refactoring_FX, SWED;lzaharia;;;;QAP-577;;Open a RFQ, send a quote request on NDF (for example tenor M1);USD/PHP quod309@kratos;Quote is displayed;;
;;;;;;;;;;;;;;;On the panel check that the Fixing date is displayed;;"Fixing date is displayed
For normal pairs, the fixing date should be 2 working days after settlement 
date

For USD/RUB, USD/PHP, 1 working day after settlement date

When using broken date, it should be the same result as using tenors";;
;;;;;;;;;;;;;;;Check countdown;;Countdown begins : it is to 120 by default;;
;;;;;;;;;;;;;;;Check display in TOB;;5 decimals are displayed;;
;;;;;;;;;;;;;;;Check column Pts;;"Pts is displayed with data. It may not be labeled but it's the central 
white columns.";;
;;;;;;;;;;;;;;;Check Dist;;"Dist is the difference of price in ticks between the best bid/offer and the 
price";;
;;;;;;;;;;;;;;;Check column with date;;Title must be tenor or broken date;;
;;;;;;;;;;;;;;;Check column SP;;Spot must be displayed;;
QAP-T3063;Check the date for tenor 2Y;Automated;;"Years (“1Y,” “2Y,” and so on) – X years after the Spot Value Date, moving 
the
date forward to the first working day for both currencies in the pair";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, FXregression, refactored_FX;lzaharia;;;;QAP-576;;Open a RFQ tile, select a currency pair and a tenor 2Y;;Check that the value date is correct;;
QAP-T3064;Broken date check with sundays / holidays;Automated;;"Check that the broken date can't fall on a sunday, saturday or holiday
Precondition: holiday calendar should be deployed on site ";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, refactored_FX;lzaharia;;;;QAP-575;;"Open a RFQ Panel and select a broken date
Choose a broken date with the next sunday / saturday";;Check that the broken date is automatically updated to monday;;
;;;;;;;;;;;;;;;"Open a RFQ Panel with broken date on USD/XXX and select the broken date 25 
dec";;Check that the broken date is automatically updated to the next day;;
QAP-T3065;Broken date RFQ Process;Automated;;Full process of RFQ from request to order sending for forward;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutotestTH2, FETrading, FXregression, refactored_FX, SWED, UAQA;lzaharia;;;;QAP-574;;Select a currency pair, select broken date and enter the date from the FE;;"RFQ sent - reply received with countdown
Check that market data is received on both sides";;
;;;;;;;;;;;;;;;Send an order by clicking from TOB;;Order sent and filled;;
;;;;;;;;;;;;;;;Resend a RFQ on the same currency pair;;Reply sent, countdown back to 120;;
;;;;;;;;;;;;;;;Send an order by clicking on a price in a venue;;Check that the order is filled;;
QAP-T3066;Check the date for tenor M1;Automated;;"Check that the date for M1 is correct

From specifications :
Months (“1M,” “2M,” and so on) – X months after the Spot Value Date, moving
the date forward to the first working day for both currencies in the pair
§ For month-based tenors, if the Spot Value Date falls on the last working
day of the month for both currencies in the pair, then the Settlement Date
is the last working day of the target month (aka “Trading End-End”)
• Ex: EUR/USD 1M, Trade Date on Wed 26 Apr 2017, Value Date
is Fri 28 Apr 2017 which is the last working day of the month,
Settlement Date is Wed 31 May which is the last working day of
the target month
§ For month-based tenors, if the Spot Value Date falls before the end of
the last working day of the month, but the resulting Settlement Date is
beyond the end of the target month, then the Settlement Date is the last
working day of the target month
• Ex: EUR/USD 1M, Trade Date is Thu 26 Jan 2017, Value Date
is Mon 30 Jan which is before the end of the month but 30 Feb
is after the end of the target month, Settlement Date is Tue 28
Feb which is the last working day of the target month";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, FXregression, refactored_FX;lzaharia;;;;QAP-573;;Select a currency pair, choose a tenor M1;;Check that the settlement date is correct according to specifications;;
QAP-T3067;RFQ Display : minimize and maximize the window;Specified;;"Check the behaviour of RFQ panel when reducing and increasing the size of 
the window";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestOutOfDate, FXregression, SWED;lzaharia;;;;QAP-572;;Maximize the RFQ panel;;"top part must be correct :
- instrument
- quantity
- tenor
- date
- fixing date (for NDF)
- number of days (for swaps)";;
;;;;;;;;;;;;;;;;;"TOB must be correct
Quote part must be correct";;
QAP-T3068;change currency pair and quantities on a RFQ panel;Automated;;"Check that the modification of currency pair and quantity is ergonomic and 
easy";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, refactored_FX, SWED;lzaharia;;;;QAP-571;;Open a tile RFQ;;Tile open with default currency pair;;
;;;;;;;;;;;;;;;change the currency pair from the drop down;TH2 blocked;"Check that the currency pair is correctly changed and the display is 
correct";;
;;;;;;;;;;;;;;;change the currency pair with typing EUR/USD in keyboard;;"Check that the currency pair is correctly changed and the display is 
correct";;
;;;;;;;;;;;;;;;Change the quantity with typing;;Check that the quantity is correctly modified;;
;;;;;;;;;;;;;;;"Change the quantity with short keys 1m and 1k (this option is only availabe 
when the tile is large)";;Check that the quantity is correctly modified;;
QAP-T3069;RFQ process with small quantity;Automated;;"Modify the quantity from 1,000,000 to 11
This can be done only when the tile is in big size";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, FXregression, refactored_FX;lzaharia;;;;QAP-570;;"From a RFQ tile, modify the quantity from 1,000,000 to 11
Send a RFQ";;RFQ sent to the market;;
;;;;;;;;;;;;;;;Check that Replies are receieved;;Send a buy order from the TOB : check that the order is filled;;
;;;;;;;;;;;;;;;"Modify the quantity to 110.50
Send a RFQ";;RFQ sent to the market;;
;;;;;;;;;;;;;;;Reply is received;;Send an order from the TOB : check that the order is filled;;
QAP-T3070;FWD RFQ Process;Automated;;Full process of RFQ from request to order sending for forward;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, FETrading, FXregression, refactored_FX, SWED, UAQA;lzaharia;;;;QAP-569;;"From AggregatedRates> RFQ Tile >select a currency pair forward and send a 
RFQ
For example 1M";;"RFQ sent - reply received with countdown
Check that market data is received on both sides(price appeared with venue 
names and red/green color)";;
;;;;;;;;;;;;;;;Send an order by clicking from TOB(Top Of Book button);;Order sent and filled(it visible in Order book);;
;;;;;;;;;;;;;;;Resend a RFQ on the same currency pair;;"Reply sent, countdown back to 120( default value = 120, may be changed on 
WebAdmin)";;
;;;;;;;;;;;;;;;Send an order by clicking on a price in a venue;;Check that the order is filled;;
QAP-T3071;SPOT RFQ Process;Automated;;Full process of RFQ from request to order sending;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, FXregression, refactored_FX, SWED, UAQA;lzaharia;;;;QAP-568;;Select a currency pair and send a RFQ;;"RFQ sent - reply received with countdown
Check that market data is received on both sides";;
;;;;;;;;;;;;;;;Send an order by clicking from TOB;;Order sent and filled;;
;;;;;;;;;;;;;;;Resend a RFQ on the same currency pair;;Reply sent, countdown back to 120;;
;;;;;;;;;;;;;;;Send an order by clicking on a price in a venue;;Check that the order is filled;;
QAP-T3072;RFQ Layout : check display after quote sending on FWD;Automated;;Display after quote sending on FWD;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutotestOutOfDate, FXregression, needs_refactoring_FX, SWED;lzaharia;;;;QAP-567;;Open a RFQ, send a quote request on FWD (for example tenor M1);;Quote is displayed;;
;;;;;;;;;;;;;;;Check countdown;;Countdown begins : it is to 120 by default;;
;;;;;;;;;;;;;;;Check display in TOB;;5 decimals are displayed;;
;;;;;;;;;;;;;;;Check Dist;;Dist is the difference between the venue price and the TOB price;;
;;;;;;;;;;;;;;;Check column with date;;Title must be tenor or broken date;;
;;;;;;;;;;;;;;;Check column SP;;Spot must be displayed;;
QAP-T3073;RFQ Layout : check display after quote sending on spot;Automated;;Check display of quotes after quote request on spot;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, refactored_FX, SWED;lzaharia;;;;QAP-566;;Send a quote request on a spot;;"All the venues shown on the FE should have a live price. Venue that is not 
pricing should receive a warning. Countdown 2 minutes begins";;
;;;;;;;;;;;;;;;Check decimals on venues and TOB;;"Prices are displayed with 5 decimals (3 decimals are displayed in TOB white 
panel)
The display is the same as Aggregated panel (colors, small figures)";;
QAP-T3074;RFQ Layout : selection of venues with filter;Automated;;Check the filtering and saving of venues;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, AutotestTH2, FXregression, refactored_FX, SWED;lzaharia;;;;QAP-565;;"In an existing RFQ Panel, open contextual menu
Open menu quote";;Check menu quote is open/closed when clicking on menu quote;;
;;;;;;;;;;;;;;;Open menu filter venues;;Check that venues are removed / displayed when clicking on the venues;;
QAP-T3075;RFQ Layout : selection of Currency pair and quantity on foward;Automated;;Check the selection of instrument and quantity in RFQ panel;/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutomatedCodedUI, FXregression, refactored_FX, SWED;lzaharia;;;;QAP-564;;Open a new Aggregated Rates and click on add RFQ Panel;;A new RFQ panel is open;;
;;;;;;;;;;;;;;;Select a new currency pair;;Check that the currency pair is correctly selected;;
;;;;;;;;;;;;;;;Check the settlement date;;"If no tenor is selected, the date is spot date T+2 (except sat sundays and 
holidays)";;
;;;;;;;;;;;;;;;Change the currency;;Currency is changed and currency Sell/Buy under TOB price is changed too;;
;;;;;;;;;;;;;;;Change the quantity;;Select 1m and check that qty is updated to 1,000,000;;
;;;;;;;;;;;;;;;Change the quantity;;Select 100k and check that qty is updated to 100,000;;
;;;;;;;;;;;;;;;Change the tenor;;Check that the date is updated accordingly;;
QAP-T3076;FX Trader layout : settings of tiles kept when opening a new tile;Specified;;"Check that layout is kept when opening a new tile in the same aggregated 
panel";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression, SWED, TobeAutomatized;lzaharia;;;;QAP-561;;Open a FE with a new aggregated panel;;Aggregated panel open with nothing;;
;;;;;;;;;;;;;;;Click on add to add a panel;;Tile opened without any options, just TOB section;;
;;;;;;;;;;;;;;;"Change the display :
add quantities for full amount, remove statistics, remove VWAP, remove some 
venues on filter venues, select one venue on TOB";;Check that these options apply on the first tile;;
;;;;;;;;;;;;;;;Open a new tile with a new currency pair;;Check that the previous settings apply to the new tile;;
QAP-T3077;Copp Clark test for JPY bank holiday on T+1;Specified;;"Check the value date when the day=1 is holiday (for example friday when we 
are on thursday)
The value date is expected to be on next tuesday
To do the test, it is necessary to enter an entry on the holiday calendar 
table (remove any other previous test lines if necessary) :
- check the holidayId from currencyenum :
select * from currencyenum where currencycode = 'JPY';
- insert a line in table holidaycalendar
For example :
insert into holidaycalendar 
(HOLIDAYID,HOLIDAYDATE,HOLIDAYDESCRIPTION,alive)
values (1000062,'20171213','Test of holidays','Y');
- Launch the itk_settledate
- Restart the RDS (before delete the dictionaryfiles)";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression;lzaharia;;;;QAP-556;;Open a FE with an aggregated on USD/JPY;;Check that the value date is on next tuesday;;
QAP-T3078;Copp Clark test for JPY bank holiday on T+2;Specified;;"Check the value dates with a holiday calendar on monday with a standard 
holiday
The value date is expected to be on tuesday
To do the test, it is necessary to enter an entry on the holiday calendar 
table :
- check the holidayId from currencyenum :
select * from currencyenum where currencycode = 'JPY';
- insert a line in table holidaycalendar
For example :
insert into holidaycalendar 
(HOLIDAYID,HOLIDAYDATE,HOLIDAYDESCRIPTION,alive)
values (1000062,'20171218','Test of holidays','Y');
- Launch the itk_settledate
- Restart the RDS (before delete the dictionaryfiles)";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;FXregression;lzaharia;;;;QAP-555;;Open a FE with an aggregated panel on currency pair USD/JPY;;Check that the value date is after the holiday calendar;;
QAP-T3079;Default SpotDate with holiday;Open;;"Validate that the default Spot value date must be T+2working days
Add into column currencyenum.holidayid => id from table 
holidaycalendar.holidayid and start ITK
!screenshot-1.png|thumbnail!";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression;;;;;QAP-545;;Set into DB that tomorrow is a holiday.;;DB is updated;;
;;;;;;;;;;;;;;;Run ITK for updating the settlementDate;;The Spot date must be Today+2working days;;
QAP-T3080;Full Amount: Configured Quantities;Specified;;"Users can be able to specify the exact quantities they want to see, it is 
not dynamic, and it should be considered configuration of the panel, so we 
should not clear the configured quantities when the user changes the 
instrument.
We should clear the prices in the buttons when the instrument changes, but 
not remove the FA buttons or configured FA quantities.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression, SWED;akovalen;;;;QAP-542;;"Open aggregate rates panel, add 3 different FullAmount Quantities with 
right click on panel";;"Check that the 3 quantities fields added on each side, and price exist in 
each field";;
;;;;;;;;;;;;;;;Change currency pair to another one;;Check that prices has changed, and all fields are exist;;
QAP-T3081;FXOrder ticket : Price Entry;Specified;;"As reference, to add more detail as to how this should work overall for the 
price and qty fields:

* Typing a number should replace the character in front of the cursor, and 
make any digits in front of it 0. So |123 typing 4 would go to 4|00
* Typing so that the cursor reaches the end of the price field should 
auto-focus the quantity field
* When changing the price more than 50 pips down for bids or up for asks 
should roll the big figure accordingly down or up, and then back up or down 
if you move it back up for bids and down for asks. The prototype has this 
right, which can be used for reference.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression, SWED;akovalen;;;;QAP-534;;Open order entry box. Focus should be on price. Type 3 numbers.;;Check that last digits of price was changed and focus moved to qty field;;
;;;;;;;;;;;;;;;"Open Order Entry box.
Change price more than 50 pips down for bids or up for asks";;Check that the big figure of price accordingly roll down or up;;
QAP-T3082;Aggregated Rates panel: Instrument selection;Specified;;;/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression;akovalen;;;;QAP-533;;Add Rates Panel;;Panel is displayed on Aggregated Market Rates.;;
;;;;;;;;;;;;;;;Select instrument pair by clicking on dropdown.;;"Panel has chose instrument pair in title with value date. In inst dropdown 
list Tenor and Type should be present";;
QAP-T3083;Passive order on venue with TIF GTC;Automated;;Check the behaviour of algo orders with TIF GTC;/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;lzaharia;;;;QAP-530;;"Send a passive order from BID on venues EBS and REUTERS (decrease the price 
to be passive)";;"Order is placed on EBS or Reuters
Check that the TIF from the child is GTC";;
;;;;;;;;;;;;;;;Modify the quantity of the order;;"Check that the quantity of parent / child is updated. (cancel replace is 
acceptable : the quantity of child must be updated and the TIF is GTC";;
;;;;;;;;;;;;;;;Cancel the order;;Check that the parent and child orders are canceled;;
QAP-T3084;Aggregated Rates panel: New Aggregation Tiles Use Previous Layout;Specified;;"Using the Previous Layout for new panels is an important feature to provide 
to end users is a faster way of configuring aggregation tiles.

When adding the first tile in a new Aggregated Rates panel, it should just 
show the tile and let the user configure it, but then for each new tile 
added after that in the same Aggregated Rates panel instance, the new tile 
uses the same layout configuration as the previous tile in the panel. Same 
sub-sections, TOB margin, venue filter, etc.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression, SWED;akovalen;;;;QAP-529;;Open new Aggregated Market Rates workspace.;;Check that the blanked workspace is opened.;;
;;;;;;;;;;;;;;;"Add first Panel and chose couple sub-sections (VWAP and Statistics for 
example)";;Check that the only chosen sub-sections are shown;;
;;;;;;;;;;;;;;;Add next Panel;;Check that the only chosen sub-sections are shown;;
;;;;;;;;;;;;;;;"Open another one Aggregated Market Rates workspace (it should be blanked).
Add Panel";;Check that new panel opened with all subsections selected (as by default);;
QAP-T3085;FXOrder ticket : focus on price and specific features;Specified;;"Focus on price on order ticket. On focus, the price field in the order 
ticket should be highlighted.

The Advanced section of the order ticket should remember the state of being 
expanded or collapsed by the user, such that:

1) The last state of the section is saved when the user saves the 
workspace, so that this is the state that will be used initially the next 
time the workspace is reloaded (e.g. on login).
2) Even after loading the workspace, whatever state the user leaves it in, 
the FE should remember this the next time the order ticket is opened. But 
this does not impact the saved workspace automatically... only the user 
re-saving the workspace would update the state in the saved workspace for 
the next reload of the saved workspace.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression, SWED;lzaharia;;;;QAP-516;;Open an order ticket from the TOB price;;Check that the focus in the order ticket is on price;;
;;;;;;;;;;;;;;;Check the order ticket;;Check that the price is highlighted;;
;;;;;;;;;;;;;;;On the order ticket expand /remove advanced section;;Check that the advanced section is removed / expanded;;
;;;;;;;;;;;;;;;Move order entry box and close it. Open again;;"Check that the advanced section is displayed as it was before closing the 
ticket, Order box should open in the same place as it was closed before";;
;;;;;;;;;;;;;;;"Save workspace and close the FE
Then restart the FE and open an order ticket";;Check that the order ticket is displayed as it was before closing the FE;;
QAP-T3086;Beneficiary : choose beneficiary in the order entry box;Specified;;"Check the workflow of beneficiary assignment for a new order
Jira FOB-25718 for reference

Following requirement changes, the functioning is the following for the 
beneficiary :
- user with role HSD (traders) : the beneficiary used by default is the 
first one from counterpart list. It is selected by default and there is no 
need to click on beneficiary to add it to the order sending
- user role SAL (portfolio managers) : the have a beneficiary assigned to 
them by default set in FE configuration file";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression;lzaharia;;;;QAP-504;;"Open a FE with user FXUser1
From an aggregated panel, click on bid to create a passive buy order(to 
have open order)";;Order entry box is displayed;;
;;;;;;;;;;;;;;;Click on buy;;"Order is sent
Check in order book :
Beneficiary is displayed in Beneficiary column";;
;;;;;;;;;;;;;;;Send a new order, without adding any beneficiary;;The default beneficiary should be added when sending the order;;
QAP-T3087;Algo orders from TOB : 1-click orders;Specified;;"1-click orders from TOB should follow the same rules as orders opened with 
order entry box.
Exception. According to FOB-26900
Even when 1-Click is enabled and turned on, that it is not applied to any 
buttons that result in a resting order. These buttons should always open 
the order ticket.
This would include:
1) the Bid and Ask buttons in the TOB panel of the aggregated rates tile
2) the ECN (not bank) buttons in the Direct Venue Execution sub-section 
when ""Resting Orders"" is selected. If Resting Orders is not selected, it 
should still apply 1-Click, as that produces aggressive , not resting, 
orders.

In all cases orders should not be sent on full amount venues if they are 
sent from TOB, even if the venues are in the filter


{color:#DE350B}*!!!!*{color} To activate ""ForEx Configs"" need to change 
functional.config

and

{color:#DE350B}*!!!!*{color} If there is a issue with *"" Algorithm policy 
is left undefined in DB and in order - one option at least is required ""* 
check in Admin FE => Clients/Accounts => Clients => in tab Policies ""Defaul 
SOR AlgoPolicy"" is selected that for your Client";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression, needs_refactoring_FX, SWED, UAQA;lzaharia;;PFX-3473;;QAP-492;;"From an aggregated panel, activate 1-click to Single click
Click on a TOP price from aggregated panel to send an order";"Before this you need to set on Options=>Order Ticket default setting for 
algo";"On the order book, check that the order has been sent with default slippage 
and IOC on venues which are non full amount";;
;;;;;;;;;;;;;;;"Activate 1-click to Double click
Click on a TOP price from aggregated panel to send an order";;"On the order book, check that the order has been sent with default slippage 
and IOC on venues which are non full amount";;
;;;;;;;;;;;;;;;"with activated 1-click to Double
Click - click on a BID/ASK button to send an order";;Check that Order Entry Box is opening and order wasn't sent to order book;;
;;;;;;;;;;;;;;;"with activated 1-click to Single
Click - click on a BID/ASK button to send an order";;Check that Order Entry Box is opening and order wasn't sent to order book;;
QAP-T3088;Order Entry Box for Full Amount;Specified;;"The order entry box for full amount doesn't display the price, the price is 
selected at order sending

 

It's configurable by functional.config parameter:

";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression;lzaharia;;;;QAP-467;;"On currency pair EUR/USD on Full Amount panel, select a price to open an 
order entry box
Send the order";;"Check that the full amount order entry doesn't display the price
There is no slippage
Only one side is available (buy or sell)
Only full amount venues are available
Check that the order is sent with TIF FOK and ordrType MKT in order book";;
;;;;;;;;;;;;;;;"Open an other order entry box from full amount.
Modify the quantity of the order
Check that price can`t be modified";;"The price does not appear in the modification, only the quantity can be 
modified";;
;;;;;;;;;;;;;;;Send the order;;Check that order has been sent with the modified quantity;;
QAP-T3089;1-click orders : Full Amount;Open;;"Full amount orders with functionality 1-click should work the same way as 
order entry box.

 ";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, SWED, UAQA;lzaharia;;;;QAP-462;;"From Aggregated market rates, activate 1-click functionality to Single 
click";;Functionality 1 click activated;;
;;;;;;;;;;;;;;;Click on Full Amount price to send an order (2nd qty on ask side);;"Order sent with :
side buy
price type MKT
TIF : FOK
Qty : qty displayed under price
Price : price clicked and the default slippage applied
ExecPolicy : synthetic";;
;;;;;;;;;;;;;;;Activate 1-click functionality to Double click;;Functionality 1 click activated;;
QAP-T3090;Algo order entry : check the functioning of algo with TIF FOK;Automated;;"Check the functioning of algo orders with venues with TIF FOK, and venues 
with TIF IOC

!screenshot-1.png|thumbnail!";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, needs_refactoring_FX, SWED;lzaharia;;;;QAP-458;;"On aggregated panel filter venues to have at least one venue with allowed 
TIF FOK, one venue with allowed TIF IOC";;Check the venues are selected correctly in aggregated panel;;
;;;;;;;;;;;;;;;Send an order with TIF IOC;;"Check that the order sends an aggressive FOK on the venue that supports 
only TIF FOK, and IOC on venues that suppport IOC";;
;;;;;;;;;;;;;;;Send an order with TIF FOK;;"Check that the algo sends an aggressive FOK on the venue that supports only 
TIF FOK

(check with best price )";;
QAP-T3091;Specific tests for currency pairs USD/JPY, EUR/JPY, GBP/JPY;Automated;;"Currency pairs USD/JPY, EUR/USD, GBP/JPY have 3 digits
Check the display in :
- currency panel
- order entry
- best rates

!image-2020-07-08-14-09-21-254.png!

!image-2020-07-08-14-09-54-159.png!";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, needs_refactoring_FX, SWED, TobeAutomatized;lzaharia;;;;QAP-404;;Load currency pair EUR/JPY in currency panel;;"Display of large part / small part in :
- TOB : ex large part 128.
small part 453
only small part 453
in Direct Venue, Full amount, aggregated (if the large part is the same, 
else display all data)";;
;;;;;;;;;;;;;;;Order entry on currency pair EUR/JPY;;"Check the order entry display : large part (ex 128. )
small part (ex 456)";;
QAP-T3092;Date validation for NDF;Automated;;"• All dates used throughout the system shall be validated against a 
standardized set of rules to avoid conflicts with weekends and holidays, 
including spot value dates, settlement dates for standard forward tenors, 
and broken dates specified by the user. All holiday data is based on 
regular updates from a currency holiday service provided by Copp Clark. 
Please see the Appendix for a complete set of rules for validating dates.
• The following list of forward tenors shall be configured for the current 
project, though the list may be modified by system administrators:
o TOD
o TOM
o SN
o SW
o 2W
o 1M
o 2M
o 3M
o 6M
o 9M
o 1Y
o 18M
o 2Y
o 3Y
o Mar IMM
o Jun IMM
o Sep IMM
o Dec IMM";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;lzaharia;;;;QAP-382;;"On thursday :
Load dictionary, and instrsettlementdates with ITK
Select a NDF 1W currency pair EUR/USD";;"The maturity of NDF 1 Week is the same day on next week (expiry next 
thursday)
Instrsettlementdate must be on monday next week";;
;;;;;;;;;;;;;;;Select EUR/USD NDF 1 month;;"The maturitydate of a 1M NDF is the same day next month (ex if the test is 
occuring on 3rd august, the maturity is 3rd sept.
The instrsettlementdate is occuring 2 days after if no holiday or weekend";;
;;;;;;;;;;;;;;;Select EUR/USD NDF 1Y;;"The maturitydate of a 1Y NDF is the same day next year (ex if the test is 
occuring on 03/08/2017, the expiry is on 03/08/2018)
The instrsettlement date is 2 days after if no holiday or weekend";;
;;;;;;;;;;;;;;;Select EUR/USD NDF IMM;;"From the spot settlement date, calculate the next 3rd wednesday of march, 
june, september or december.";;
QAP-T3093;Manual Strategy Order Entry : submit pending order;Automated;;"• A user opens an order ticket, configures the price and quantity and other 
settings in the order ticket, selects the “Pending” check-box, and sends 
the order, creating an entry for that order marked Pending in the order 
blotter. The user amends the order to change some settings for the order, 
leaving the “pending” check-box selected, and sends the order, leaving the 
order marked Pending in the order blotter. The user amends the order to 
de-select the “Pending” check-box and sends the order, causing the order to 
be executed against the market.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression, needs_refactoring_FX;lzaharia;;;;QAP-231;;From a currency pair panel, click on TOB Ask price to send a buy order;;"Order entry box displayed
side : buy
price : TOB ask";;
;;;;;;;;;;;;;;;"Click on 'Pending' and send the order
Check the order book";;"Order in order book with
Sts = Validated";;
;;;;;;;;;;;;;;;Amend the order;;"Check that Order Entry box opening with Pending check-box ticket as 
checked.";;
;;;;;;;;;;;;;;;Change qty or price and press Modify button.;;Order with OLD values placed in order book with Sts = Validated;;
;;;;;;;;;;;;;;;Validate order to open.;;"Check that the order get status OPN and new values (qty or price that was 
changed in step 4)";;
QAP-T3094;Direct Venue Execution : Order Sending with mofification of TIF;Automated;;"• A user clicks on a price button in the Direct Venue Execution sub-section 
of an aggregation tile to open an order ticket to send an order to a 
specific venue. The user modifies the venue specific order settings and 
sends the order.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, needs_refactoring_FX, TobeAutomatized;lzaharia;;;;QAP-228;;"From a currency pair panel, click on ask price on direct venue HOTSPOT with 
resting not selected";;"Order entry will open price : ask price
Quantity : default quantity
Side : buy
TIF : IOC";;
;;;;;;;;;;;;;;;Change the TIF to DAY (any TIF);;Chek that the update is applied on order entry box;;
;;;;;;;;;;;;;;;Send the order and open the order book to see the order;;The order is in order book with TIF DAY;;
QAP-T3095;Smart Order Router Strategies : Order filled with ECNs and Banks;Specified;;"Order to be filled against ECN and Banks

• A user clicks on a Top of Book price button in an aggregation tile to 
open an order ticket to Buy against the best Ask price or Sell against the 
best Bid price, adjusts the price and/or quantity, and clicks Send button 
to send the order to be executed by the selected strategy.

For this test, the order must be executted with a mix of ECNs and Banks

ECNs are : EBS, Reuters, Hotspot, Fastmatch
Banks are the others : JPMorgan, Barclays, Morgan Stanley, HSBC, BAML....";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, SWED;lzaharia;;;;QAP-223;;From a TOB on a currency pair panel, click on ask price;;Order entry box is displayed;;
;;;;;;;;;;;;;;;"Change the quantity to have a large quantity sufficient to grab Banks and 
ECNs
Send the order";;Order is executed against banks and ECNs;;
QAP-T3096;Full Amount Execution : quantity specificities;Specified;;"o Given a number of different Full Amount feeds from different bank venues, 
a user shall be able to submit a Full Amount order for a user specified 
quantity such that the order will be submitted to the venue with the best 
price at that moment for the first Full Amount subscribed quantity equal to 
or greater than the user specified quantity.
o If a user specifies a quantity larger than the largest Full Amount 
subscribed quantity, then the price for the largest available Full Amount 
subscribed quantity should be used.
o While the user should only have access to modify the quantity of a Full 
Amount order (not the price), the message submitted to the back-end should 
indicate the last price displayed in the FE for that quantity, along with 
the specified slippage value (see next points).
o The Full Amounts Order Execution order ticket shall use the Venue 
Slippage value by default, and on submission of an order the Venue Slippage 
default value shall be updated with the current value for the selected 
instrument for the remainder of the user’s FE session.
o When executing 1-Click orders through Full Amounts Order Execution, 
orders shall be sent using the last configured default Venue Slippage for 
the given instrument.

Activation of 1-click button:
1. Set in functional.config  and 
2. In FE Trading> Options>ForEx Configs> 1-Click Orders Mode= singleClick";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression, SWED, UAQA;lzaharia;;;;QAP-111;;"From an aggregated panel full amount open an order entry and change the 
quantity";;The quantity is changed;;
;;;;;;;;;;;;;;;Send the order;;"Check the characteristics : the order is sent MKT, FOK, and will create a 
child Limit, FOK";;
;;;;;;;;;;;;;;;On aggregated panel,activate the 1-click : send a full amount order;;Check that the order is successfully sent;;
;;;;;;;;;;;;;;;;;Check that the 1-click order is sent Algo, MKT, FOK;;
QAP-T3097;Direct Venue Execution : 1-click orders;Automated;;"o When executing 1-Click orders through Direct Venue Order Execution, 
orders shall be sent as Immediate Or Cancel (or the equivalent order type 
for a given venue) and shall use the last configured default Venue Slippage 
for the given instrument.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression, needs_refactoring_FX, SWED;lzaharia;;;;QAP-110;;"From an aggregated panel, activate 1-click
Click on a direct venue price from aggregated panel to send an order
This panel must be configured with resting orders unchecked";;"On the order book, check that the order has been sent with default slippage 
and IOC / FOK";;
;;;;;;;;;;;;;;;"From an aggregated panel, with inactivate 1-click
Click on a direct venue price from aggregated panel to send an order 
(resting orders checked)";;Check that Order Entry Box is opening and order wasnt sent to order book;;
QAP-T3098;Direct Venue Execution : order type supported by each venue;Specified;;"o When executing orders directly against specific venues, the user shall be 
able to select basic order types supported by each venue (e.g. Market, 
Immediate Or Cancel, Fill or Kill, Limit).";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, SWED;lzaharia;;;;QAP-108;;"From Direct venue EBS (EBS) in aggregated panel, open an order entry box

If EBS is not available try Reuters and eventually HPF or FAM (Hotspot and 
Fastmatch are accepting only Day orders)";TIF enabled for EBS (EBS) : IOC GTC;Check that only 2 choices are enabled for the order TIF : IOC GTC;;
;;;;;;;;;;;;;;;"From Direct venue JPM (JPM) in aggregated panel, open an order entry box
If BARX or JPM are not available choose another bank : HSBC, CS, SCB, DB";TIF enabled for JPM (JPM): FOK;Check that only 1 choice is enabled for the order TIF : FOK;;
QAP-T3099;Manual Strategy Order Entry : pending function;Specified;;"o A “Pending” check-box shall indicate whether the order shall be staged, 
and viewable from the order status blotter, but not executed against the 
market until indicated by the user (see “Order Status Blotter” for more 
information on controlling pending orders).";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, TobeAutomatized;lzaharia;;;;QAP-106;;"From an aggregated panel, open an order entry box to send an order and 
click on 'pending'";;Check that the order appear in pending status(Validated) in the order book;;
;;;;;;;;;;;;;;;Release the order;;Check that the order is successfully sent to the market;;
;;;;;;;;;;;;;;;"From a direct venue price, open an order entry box to send an order and 
click on 'pending'";;Check that the order appears in pending status(Validated) in the order book;;
;;;;;;;;;;;;;;;"From a full amount price, open an order entry box to send an order and 
click on 'pending'";;Check that the order appears in pending status(Validated) in the order book;;
QAP-T3100;Date validation for SPOT;Automated;;"• All dates used throughout the system shall be validated against a 
standardized set of rules to avoid conflicts with weekends and holidays, 
including spot value dates, settlement dates for standard forward tenors, 
and broken dates specified by the user. All holiday data is based on 
regular updates from a currency holiday service provided by Copp Clark. 
Please see the Appendix for a complete set of rules for validating dates.
• The following list of forward tenors shall be configured for the current 
project, though the list may be modified by system administrators:
Spot
o TODAY
o TOM
o SN
1W
o 2W
3W
o 1M
o 2M
o 3M
o 6M
o 9M
o 1Y
o 18M
o 2Y
o 3Y
o Mar IMM
o Jun IMM
o Sep IMM
o Dec IMM


The rules to follow are showing a 0-padded 2-digit day and a 3 character 
form of the month (DD-MMM).

The year should only be displayed (using 2 digits) if it is not the current 
year.

So on the day of 4 Nov 2017, a value date of 6 Nov 2017 would appear as 
06-Nov, but a settlement date of 3 Mar 2018 would appear as 03-Mar-18.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, needs_refactoring_FX;lzaharia;;;;QAP-105;;"On thursday :
Load dictionary, and instrsettlementdates with ITK
Select a SPOT currency pair";;Check that the instrsettlement date is on monday;;
;;;;;;;;;;;;;;;Open an aggregated panel and check the display of the date;;Display must be with format 3-nov or 3-nov + year if year is different;;
QAP-T3101;Full Amount Execution;Specified;;"AO creates previously quoted childs if there is a quoteID in the marketdata
even if there is no previously quoted configured


o Clicking on a Full Amount price button shall open a Full Amount order 
ticket, with no price field, only a quantity field, using the quantity of 
the button clicked as the default quantity value. See details below 
regarding the Full Amounts order ticket.
o Once the user submits a Full Amounts order to a venue for execution, all 
Full Amounts rates for that currency pair shall be suspended only for that 
user during a blackout period which shall only last until rates are once 
again received from the executing venue, at which point all Full Amounts 
rates for that currency pair shall be made available.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression, SWED, UAQA;lzaharia;;;;QAP-99;;From an aggregated panel, click on one price on full amount;;"Check that an order entry is displayed specific for full amount
This order entry displays : Full amount, quantity, pending
It is possible to modify the quantity but not the price";;
;;;;;;;;;;;;;;;Check the order book;;The order is placed and traded;;
QAP-T3102;Aggregated Instrument View : Full Amount;Open;;"o Clicking on a Full Amount price button shall open a Full Amount order 
ticket, with no price field, only a quantity field, using the quantity of 
the button clicked as the default quantity value. See details below 
regarding the Full Amounts order ticket.
o Once the user submits a Full Amounts order to a venue for execution, all 
Full Amounts rates for that currency pair shall be suspended only for that 
user during a blackout period which shall only last until rates are once 
again received from the executing venue, at which point all Full Amounts 
rates for that currency pair shall be made available.
Modified accordingly to requirements from FOB-27096.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, SWED;lzaharia;;;;QAP-98;;Open an aggregated panel and check the part full amount;;"Header of the tile has ""Full Amounts"" label only.
The venues displayed on panel full amount have option fullamount = Y in 
venue table
Display quantity is set in menu / full amount quantity
Prices are displayed with upper bid closest to the center and lower ask 
closer to the center
Bid are in red, offers in blue with only 3 last digits displayed (if the 
large part is the same)
When a venue is Full Amount, it is not displayed in Direct Venue or 
aggregated";;
QAP-T3103;1-Click Orders : functional test;Specified;;"• Each user shall be able to configure their own mode of 1-Click order 
execution through the front-end user configuration screen.
• 1-Click order execution modes shall include:
o Disabled – no 1-Click order execution shall be permitted
o Single-Click – a user may execute 1-Click orders using a single click of 
the left mouse button, where supported in the front-end
o Double-Click – a user may execute 1-Click orders using a double click of 
the left mouse button, where supported in the front-end
• The 1-Click setting applies to use of the mouse only. It does not apply 
to use of the EBS keypad, which should always use an order ticket.

1- Some clarifications on how 1-Click should work in terms of state 
persistence...

2- The setting for 1-Click in the FE Configuration screen (Disabled, Single 
Click, Double Click) should be persisted to the server and recovered on new 
sessions from any desktop client.

3- On selecting 1-Click - Disabled (which can be the default setting), this 
will cause all 1-click buttons in the agg tiles to be hidden. This should 
happen immediately, without the need to restart the session.

4- On selecting 1-Click - Single or Double Click, this will cause all 
1-click buttons in the agg tiles to be shown. This should happen 
immediately, without the need to restart the session. On showing the button 
for the first time in an agg tile, the default can be that it is 
""deselected"" (showing ""1-Click Off""), though it is fine if the button 
remains in it's previous state for currently open tiles when 
disabling/enabling the setting from the FE config (e.g. the buttons are 
shown, a button in a tile is selected, the user disables 1-click so the 
buttons are hidden, then the user enables 1-click again so the buttons are 
shown, but the button that was previously selected is still selected - 
programmatically this would be the ""do-nothing"" approach of just 
hiding/showing the button, and this is acceptable.).

5- When saving the workspace, the state of the 1-click button (selected vs 
deselected) in each separate agg tile should be saved and restored.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FETrading, FXregression, SWED;lzaharia;;;;QAP-27;;"Change the setting on one-click : option 1 from disabled to enabled
Or option 2 from enabled to disabled (if already enabled)
Save the workspace
Restart the FE";;"Check that the button 1-click is present if option 1 chosen or not present 
if option 2 chosen";;
;;;;;;;;;;;;;;;"Change the setting on double-click : option 1 from disabled to enabled
Or option 2 from enabled to disabled (if already enabled)";;"Check the option takes effect immediately :
button 1-click is present if option 1 chosen or not present if option 2 
chosen";;
;;;;;;;;;;;;;;;With one-click enabled, add a new aggregated panel for a new currency pair;;"Check that the panel is added with the option 1-click appearing and 
deselected";;
QAP-T3104;Smart Order Router Strategies : SOR order filled;Specified;;"From a rate panel, there are several ways to send an order :
- click on best bid to send buy IOC at best bid price
- click on best ask to send sell IOC at best ask price
- click on ASK to sell order Limit day at best ask
- click on BID to buy order Limit day at best bid
- one click on to directly send the order without displaying the order 
entry box";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, UAQA;lzaharia;;;;QAP-23;;Click on best bid then buy to send a buy IOC order;FX Front End;"The price of the order is the best price from aggregated venues (it can be 
different from the price of best ask displayed if the venue doesn't have 
the best price and cannot be change)";;
;;;;;;;;;;;;;;;Check the result in my order;FX Front End;"Price in the main line is the price sent for this order (not the price 
filled)
If there is slippage it can be send at a better price
Example : slippage 100
Order sent at 0.73772 in order entry, real price sent 0.74772";;
;;;;;;;;;;;;;;;Check the parent order update;FX Front End;Parent order updates : new / filled or new / partially filled / filled;;
;;;;;;;;;;;;;;;Check child order;FX Front End;"Price displayed is execution price. The child order update is displayed by 
clicking on + at the left side";;
QAP-T3105;1-click Orders test;Specified;;Order sending with double click is enabled from the aggregative rates;/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression, SWED;lzaharia;;PFX-4623, PFX-4679;;QAP-21;;"Set 1-click to Single click, check that 1-click on is enabled and purple
Click on the price from the TOB";;"Check that the order is sent with side S, price TOB and price type limit 
and TIF IOC";;
;;;;;;;;;;;;;;;"check that 1-click on is enabled and purple
Click on BID from TOB";;Check that the order was not sent to market, order box is opened;;
;;;;;;;;;;;;;;;Change 1-click to Double click (color changed to orange);;"Check that the change apply immediately (try to send an order after the 
change)
Check that the change is kept after a restart of the FE";;
;;;;;;;;;;;;;;;"check that 1-click on is enabled and orange
Click twice on the price from the TOB";;"Check that the order is sent with side S, price TOB and price type limit 
and TIF IOC";;
;;;;;;;;;;;;;;;"check that 1-click on is enabled and orange
Click twice on BID from TOB";;Check that the order was not sent to market, order box is opened;;
;;;;;;;;;;;;;;;Change to 2-click to disable;;"Check that the change apply immediately (try to send an order after the 
change)
Check that the change is kept after a restart of the FE";;
;;;;;;;;;;;;;;;Open a new aggregated panel;;Check that the 1-click policy chosen ios applied to that window;;
QAP-T3106;Smart Order Router Strategies : SOR order placed and canceled;Automated;;"From a rate panel, there are several ways to send an order :
- click on best bid to send buy IOC at best bid price
- click on best ask to send sell IOC at best ask price
- click on ASK to sell order Limit day at best ask
- click on BID to buy order Limit day at best bid
- one click on to directly send the order without displaying the order 
entry box";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, needs_refactoring_FX, SWED;lzaharia;;;;QAP-19;;"Click on 'ASK', set the slippage to zero then Sell to send a sell limit day 
order";FX Front End;"The price of the order is the Ask price from aggregated venues (it can be 
different from the price of best ask displayed if the venue doesn't have 
the best price)";;
;;;;;;;;;;;;;;;Check the parent order update;FX Front End;"Parent order updates : OPN. The SATS automatically creates a child (even if 
there is no opportunity)";;
;;;;;;;;;;;;;;;Modify the quantity of the order;FX Front End;"Parent is updating with the new quantity - the child order is also updated 
with the quantity. There can be a cancel - replace, but in all cases the 
child has its quantity updated";;
;;;;;;;;;;;;;;;Cancel the order;FX Front End;"The status will change to cancel in order main line and a new line canceled 
will be added in parent order update
The child order will also be canceled";;
QAP-T3107;Smart Order Router Strategies : aggressive solution based on sweepable rates;Specified;;"Aggressive order filled with sweeepable rates only
• A user clicks on a Top of Book price button in an aggregation tile to 
open an order ticket to Buy against the best Ask price or Sell against the 
best Bid price, adjusts the price and/or quantity, and clicks Send button 
to send the order to be executed by the selected strategy.";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, SWED;lzaharia;;;;QAP-17;;"On aggregated panel, use the filter to have only 3 venues (for example HFX, 
FAM, JPM)
send an aggressive order with a quantity 5,000,000 and a suitable price to 
grab the whole quantity";;"Check that the order is sent IOC
Check that the preselected venues in order ticket correspond to the 
filtered venues (in non full amount part)
Check that the order is filled for the whole quantity only on selected 
venues";;
QAP-T3108;Direct Venue Execution : Order sending;Specified;;"DMA are allowed from the panel 'Direct Venue Execution'.
1) Resting orders :
click on Bid : buy with quantity available on Bid
click on Ask : sell with quantity available on Ask
2) Aggressive orders (unclick resting orders)
click on Bid : sell with the available quantity on best bid
click on Ask : buy with the available quantity on best ask";/PFX/FX_UAQA;High - Must Have;FX_UAQA;AutomatedCodedUI, FETrading, FXregression, UAQA;lzaharia;;;;QAP-13;;"Open the panel 'Direct Venue Execution', resting orders unticked, click on 
the bid displayed on the venue (CITI)";FX Prototype;order ticket is opened;;
;;;;;;;;;;;;;;;Press enter and check the order is filled in the order book;;The order must be filled in the order book;;
QAP-T3109;Best Rates View : functioning of the window;Manual;;"Check the best rates window

 

!image-2020-07-29-16-30-35-839.png!

 

 ";/PFX/FX_UAQA;High - Must Have;FX_UAQA;FXregression, UAQA;lzaharia;;PFX-3408;;QAP-9;;"Open a best rates window with following currency pairs :
EUR/USD
USD/JPY";;"Check the presence of :
value date
qty
price statistics";;
;;;;;;;;;;;;;;;"Open a best rates window with following currency pairs :
EUR/USD
USD/JPY";;Check the display of the price (should be the same as VWAP display);;
;;;;;;;;;;;;;;;"Open a best rates window with following currency pairs :
EUR/USD
USD/JPY";;"Check the arrow : should be green up if the price is > than previous price, 
red low if price is < than previous price";;
;;;;;;;;;;;;;;;"Open a best rates window with following currency pairs :
EUR/USD
USD/JPY";;Check the availability of statistics graph;;
;;;;;;;;;;;;;;;"Open a best rates window with following currency pairs :
EUR/USD
USD/JPY";;Check the format of prices : 3 last digits in red/green;;
;;;;;;;;;;;;;;;"Open a best rates window with following currency pairs :
EUR/USD
USD/JPY
Select one of rows";;"Selected entry should be ""expanded"" in all columns";;
;;;;;;;;;;;;;;;Delete row which has one bellow;;Deleting only one row;;
QAP-T3110;RFQ Execution test;Automated;;"o The ability to submit a request for quote (RFQ) to multiple venues at the 
same time shall be possible for Spot, Forward Outrights, NDFs, and Swaps.
o The user shall be able to select from a list (or type in) the currency 
pair for a quote request.
*List of currencies with NDF market:*
CNY Chinese renminbi.
IDR Indonesian rupiah.
INR Indian rupee.
KRW South Korean won.
MYR Malaysian ringgit.
PHP Philippine peso.
TWD Taiwan dollar.
VND Vietnamese đồng.";/PFX/FX_Taker_RFQ;High - Must Have;FX_Taker_RFQ;AutotestTH2, FXregression, refactored_FX, SWED;lzaharia;;;;QAP-6;;Click on RFQ ticket in Forex ribbon to open a RFQ ticket;;Check that the RFQ ticket is correctly displayed;;
;;;;;;;;;;;;;;;Enter a spot instrument and a quantity;;Check that the quote request is successfully sent;;
;;;;;;;;;;;;;;;Enter a NDF instrument and a quantity;USD/PHP;Check that the quote request is successfully sent;;
;;;;;;;;;;;;;;;Enter a swap instrument and a quantity;;Check that the quote request is successfully sent;;
QAP-T3111;Manual Strategy Order Entry : general display;Specified;;"Order entry box must contain the following information :
- Currency Pair
- spot / forward
- Order type (SOR - Immediate or cancel)
- Price in FX looking way
- Qty in FX looking way
- Max Clip size
- Min Clip size
- Slippage
- Allowed venues

Precondition: Open FE=>Aggregates Rates=>ESP Tile+Aggregated Rates";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;AutomatedCodedUI, FXregression, SWED;lzaharia;;;;QAP-5;;From a Aggregated Rates, click on the best bid;Check the content of the order entry box;must look like on picture;;
;;;;;;;;;;;;;;;From a Aggregated Rates, click on BID;Check the content of the order entry box;must look like on picture;;
;;;;;;;;;;;;;;;Open Order Entry Box with TOB price, move it to any comfort place. Close it;;;;
;;;;;;;;;;;;;;;Open Order Entry Box with BId/ASk button or any other way;;Order Entry Box should open in the place which was chosen before.;;
QAP-T3112;Smart Order Router Strategies : SOR order placed and modified;Automated;;"Check the modification and cancel of an order
_to get {color:#57D9A3}OPEN{color} status you have to modify the price to 
have a very small price for a buy, very high price for a sell_";/PFX/FX_Taker_ESP;High - Must Have;FX_Taker_ESP;FXregression, needs_refactoring_FX, SWED;lzaharia;;;;QAP-2;;"Send an algo order on a currency pair to place the order on the book (click 
on BID with a lower price or ASK with a higher price";;Order placed on the book;;
;;;;;;;;;;;;;;;Modify the price of the algo order;;"Parent is updating with the new price - the child order is also updated 
with the price. There can be a cancel - replace, but in all cases the child 
has its quantity updated
Extra check : no slippage must be added to the price";;
;;;;;;;;;;;;;;;Modify the quantity of the algo order;;"Parent is updating with the new quantity - the child order is also updated 
with the quantity. There can be a cancel - replace, but in all cases the 
child has its quantity updated";;
;;;;;;;;;;;;;;;Cancel the order;;Check that the order is successfully canceled;;
QAP-T5123;Price Cleansing: Rate deviation: Reference on Itself;Open;;"This test checks that if TargetVenue and RefVenue are the same, the rule 
won't be triggered.

#1 Empty MD for RefVenue (CITI):
{code:java}
CITI:
8=FIXT.1.1|9=230|35=W|34=360|49=TEST|52=20220624-10:08:01.296|56=MARKETDATA|55=GBP/USD|167=FXSPOT|262=GBP/USD:SPO:REG:CITI_795|268=2|269=0|272=20220624|273=10:08:00|290=1|64=20220628|1070=1|269=1|272=20220624|273=10:08:00|290=1|64=20220628|1070=1|10=189|
{code}
#2 MD for TargetVenue:
{code:java}
HSBC:
8=FIXT.1.1|9=604|35=W|34=361|49=TEST|52=20220624-10:08:06.413|56=MARKETDATA|55=GBP/USD|167=FXSPOT|262=GBP/USD:SPO:REG:HSBC_800|268=6|269=0|270=1.18138|271=1000000|272=20220624|273=10:08:00|290=1|64=20220628|1070=1|269=1|270=1.18158|271=1000000|272=20220624|273=10:08:00|290=1|64=20220628|1070=1|269=0|270=1.18128|271=5000000|272=20220624|273=10:08:00|290=2|64=20220628|1070=1|269=1|270=1.18168|271=5000000|272=20220624|273=10:08:00|290=2|64=20220628|1070=1|269=0|270=1.18118|271=10000000|272=20220624|273=10:08:00|290=3|64=20220628|1070=1|269=1|270=1.18178|271=10000000|272=20220624|273=10:08:00|290=3|64=20220628|1070=1|10=059| 
{code}";/PFX/FX_Price Cleansing;High - Must Have;PriceCleansing;NeedAddToRegression;;;PFX-1217;;QAP-8214;;Create simple rule with following parameters;"(see attached screenshot)
Select as one common venue as TargetVenue and ReferenceVenue";Rule saved. No errors;;
;;;;;;;;;;;;;;;Send empty MD;#1;MD sent and applied, no prices on venue CITI;;
;;;;;;;;;;;;;;;Send MD for TargetVenue (with prices);#2;See that rule was not triggered, update published successfully;;
;;;;;;;;;;;;;;;Delete created rule;;Rule deleted;;
QAP-T5124;Price Cleansing: Rate deviation: Reference on Venues without prices;Open;;"This test checks that if TargetVenue and RefVenue are the same, the rule 
won't be triggered.

#1 Empty MD for RefVenue (CITI):
{code:java}
CITI:
8=FIXT.1.1|9=230|35=W|34=360|49=TEST|52=20220624-10:08:01.296|56=MARKETDATA|55=GBP/USD|167=FXSPOT|262=GBP/USD:SPO:REG:CITI_795|268=2|269=0|272=20220624|273=10:08:00|290=1|64=20220628|1070=1|269=1|272=20220624|273=10:08:00|290=1|64=20220628|1070=1|10=189|
{code}
#2 MD for TargetVenue:
{code:java}
HSBC:
8=FIXT.1.1|9=604|35=W|34=361|49=TEST|52=20220624-10:08:06.413|56=MARKETDATA|55=GBP/USD|167=FXSPOT|262=GBP/USD:SPO:REG:HSBC_800|268=6|269=0|270=1.18138|271=1000000|272=20220624|273=10:08:00|290=1|64=20220628|1070=1|269=1|270=1.18158|271=1000000|272=20220624|273=10:08:00|290=1|64=20220628|1070=1|269=0|270=1.18128|271=5000000|272=20220624|273=10:08:00|290=2|64=20220628|1070=1|269=1|270=1.18168|271=5000000|272=20220624|273=10:08:00|290=2|64=20220628|1070=1|269=0|270=1.18118|271=10000000|272=20220624|273=10:08:00|290=3|64=20220628|1070=1|269=1|270=1.18178|271=10000000|272=20220624|273=10:08:00|290=3|64=20220628|1070=1|10=059| 
{code}";/PFX/FX_Price Cleansing;High - Must Have;PriceCleansing;NeedAddToRegression;;;PFX-1217;;QAP-8136;;Create simple rule with following parameters;"(see attached screenshot)
Select as one common venue as TargetVenue and ReferenceVenue";Rule saved. No errors;;
;;;;;;;;;;;;;;;Send empty MD;#1;MD sent and applied, no prices on venue CITI;;
;;;;;;;;;;;;;;;Send MD for TargetVenue (with prices);#2;See that rule was not triggered, update published successfully;;
;;;;;;;;;;;;;;;Delete created rule;;Rule deleted;;
QAP-T5125;Price Cleansing: Rate deviation: Test with Disconnected Venues;Open;;"This test checks that if Disconnected Venue is taken as a RefVenue, the 
rule won't be triggered.

#1 Equal MD:
{code:java}
HSBC:
8=FIXT.1.1|9=397|35=W|34=10|49=TEST|52=20220603-10:52:47.968|56=MARKETDATA|55=GBP/USD|167=FXSPOT|207=HSBC|262=GBP/USD:SPO:REG:HSBC_20|963=1279|268=6|269=0|270=1.18138|271=1000000|290=1|1070=1|269=1|270=1.18158|271=1000000|290=1|1070=1|269=0|270=1.18128|271=5000000|290=2|1070=1|269=1|270=1.18168|271=5000000|290=2|1070=1|269=0|270=1.18118|271=10000000|290=3|1070=1|269=1|270=1.18178|271=10000000|290=3|1070=1|10=215|{code}
#2 Message in logs:
{code:java}
2022-06-20 07:15:58.742156892 QUOD.MDA [32173] INFO  ultramessaging 
(Writer.cpp:260) - sent 1162-byte UM message 
{MessageType=""Market_MarketDataSnapshotFullRefresh"" 
MarketDataFullList={0={MDEntryPosition=1 MDEntryPx=1.18147 
MDEntrySize=1e+06 MDEntryType=""BID"" MDQuoteType=""TRD"" OrdType=""LMT"" 
SettlDate=2022-Jun-22 12:00:00.000000} 1={MDEntryPosition=2 
MDEntryPx=1.18137 MDEntrySize=5e+06 MDEntryType=""BID"" MDQuoteType=""TRD"" 
OrdType=""LMT"" SettlDate=2022-Jun-22 12:00:00.000000} 2={MDEntryPosition=3 
MDEntryPx=1.18127 MDEntrySize=1e+07 MDEntryType=""BID"" MDQuoteType=""TRD"" 
OrdType=""LMT"" SettlDate=2022-Jun-22 12:00:00.000000} 3={MDEntryPosition=1 
MDEntryPx=1.18167 MDEntrySize=1e+06 MDEntryType=""OFR"" MDQuoteType=""TRD"" 
OrdType=""LMT"" SettlDate=2022-Jun-22 12:00:00.000000} 4={MDEntryPosition=2 
MDEntryPx=1.18177 MDEntrySize=5e+06 MDEntryType=""OFR"" MDQuoteType=""TRD"" 
OrdType=""LMT"" SettlDate=2022-Jun-22 12:00:00.000000} 5={MDEntryPosition=3 
MDEntryPx=1.18187 MDEntrySize=1e+07 MDEntryType=""OFR"" MDQuoteType=""TRD"" 
OrdType=""LMT"" SettlDate=2022-Jun-22 12:00:00.000000}} 
MDArrivalTime=2022-Jun-20 07:15:58.471118 MDBookType=""PRD"" 
MDReportID=""32041-29"" MDTime=2022-Jun-20 07:15:58.505254 VenueMDSeqNum=897 
sn=4 qseq=16030 sent=2022-Jun-20 07:15:58.741905} #4 on subject 
`MDA.GBP/USD:SPO:REG:HSBC.D.TEST', using UM lbtrm session mktDataCA
{code}";/PFX/FX_Price Cleansing;High - Must Have;PriceCleansing;NeedAddToRegression;;;PFX-1217;;QAP-8135;;Create simple rule with following parameters;"(see attached screenshot)
Select as RefVenue one or more disconnected venue";Rule saved. No errors;;
;;;;;;;;;;;;;;;Send MD;#1;MD sent and applied;;
;;;;;;;;;;;;;;;Check logs;#3;See that rule was not triggered, update published successfully;;
;;;;;;;;;;;;;;;Delete created rule;;Rule deleted;;
QAP-T5126;Price Cleansing: Rate deviation: Basic Test (FXPipPrecision);Open;;"This test checks that the final deviation calculates correctly if 
PriceDeviationFormat=FXPipPrecision

#1 MDA

Deviation = *PriceDeviation * 10^-Instrument.PxPrecision*

Check PxPrecision of instrument with next query:
{code:java}
select i.instrsymbol, i.instrtype, i.pxprecision  from instrument i where 
i.instrtype = 'SPO' and i.instrsymbol = 'GBP/USD'; {code}
!image-2022-06-07-10-24-03-171.png!

so, the fianal deviation for created rule (with {*}PriceDeviation=0.1{*}) 
should be equal to 0.00001
{code:java}
2022-06-07 07:25:06.953037293 QUOD.MDA [14077] INFO  cache 
(RecordCache.cpp:263) - inserting PrcClnRateDeviation={ 
PrcClnRateDeviationID=1400005 PriceCleansingRuleName=""test"" 
RemoveDetectedUpdate=Yes PriceDeviationFormat=FxPipPrecision 
PriceDeviation=0.1 VenueID=""HSBC"" InstrType=FXSpot InstrSymbol=""GBP/USD"" 
Alive=Alive, revision 1 } on cache notification

2022-06-07 07:25:06.953265231 QUOD.MDA [14077] DEBUG marketdata 
(control.cpp:140) - adding PrcClnRateDeviation={ 
PrcClnRateDeviationID=1400005 PriceCleansingRuleName=""test"" 
RemoveDetectedUpdate=Yes PriceDeviationFormat=FxPipPrecision 
PriceDeviation=0.1 VenueID=""HSBC"" InstrType=FXSpot InstrSymbol=""GBP/USD"" 
Alive=Alive, revision 1 }

2022-06-07 07:25:06.954139092 QUOD.MDA [14077] INFO  marketdata 
(control.cpp:440) - applying rule on listing 100000421 : 
PrcClnRateDeviation={ PrcClnRateDeviationID=1400005 
PriceCleansingRuleName=""test"" RemoveDetectedUpdate=Yes 
PriceDeviationFormat=FxPipPrecision PriceDeviation=0.1 VenueID=""HSBC"" 
InstrType=FXSpot InstrSymbol=""GBP/USD"" Alive=Alive, revision 1 }

2022-06-07 07:25:06.954236202 QUOD.MDA [14077] INFO  marketdata 
(control.cpp:490) - maximum allowed price deviation is 0.00001
{code}
#2 Equal MD:
{code:java}
HSBC:
8=FIXT.1.1|9=397|35=W|34=10|49=TEST|52=20220603-10:52:47.968|56=MARKETDATA|55=GBP/USD|167=FXSPOT|207=HSBC|262=GBP/USD:SPO:REG:HSBC_20|963=1279|268=6|269=0|270=1.18138|271=1000000|290=1|1070=1|269=1|270=1.18158|271=1000000|290=1|1070=1|269=0|270=1.18128|271=5000000|290=2|1070=1|269=1|270=1.18168|271=5000000|290=2|1070=1|269=0|270=1.18118|271=10000000|290=3|1070=1|269=1|270=1.18178|271=10000000|290=3|1070=1|10=215|
CITI:
8=FIXT.1.1|9=397|35=W|34=10|49=TEST|52=20220603-10:52:45.674|56=MARKETDATA|55=GBP/USD|167=FXSPOT|207=CITI|262=GBP/USD:SPO:REG:CITI_206|963=1279|268=6|269=0|270=1.18138|271=1000000|290=1|1070=1|269=1|270=1.18158|271=1000000|290=1|1070=1|269=0|270=1.18128|271=5000000|290=2|1070=1|269=1|270=1.18168|271=5000000|290=2|1070=1|269=0|270=1.18118|271=10000000|290=3|1070=1|269=1|270=1.18178|271=10000000|290=3|1070=1|10=215| 
{code}
#3 MD with deviation (deviation is 0.00004):
{code:java}
HSBC:
8=FIXT.1.1|9=397|35=W|34=10|49=TEST|52=20220603-10:52:47.968|56=MARKETDATA|55=GBP/USD|167=FXSPOT|207=HSBC|262=GBP/USD:SPO:REG:HSBC_20|963=1279|268=6|269=0|270=1.18142|271=1000000|290=1|1070=1|269=1|270=1.18162|271=1000000|290=1|1070=1|269=0|270=1.18132|271=5000000|290=2|1070=1|269=1|270=1.18172|271=5000000|290=2|1070=1|269=0|270=1.18122|271=10000000|290=3|1070=1|269=1|270=1.18182|271=10000000|290=3|1070=1|10=215|
CITI:
8=FIXT.1.1|9=397|35=W|34=10|49=TEST|52=20220603-10:52:45.674|56=MARKETDATA|55=GBP/USD|167=FXSPOT|207=CITI|262=GBP/USD:SPO:REG:CITI_206|963=1279|268=6|269=0|270=1.18138|271=1000000|290=1|1070=1|269=1|270=1.18158|271=1000000|290=1|1070=1|269=0|270=1.18128|271=5000000|290=2|1070=1|269=1|270=1.18168|271=5000000|290=2|1070=1|269=0|270=1.18118|271=10000000|290=3|1070=1|269=1|270=1.18178|271=10000000|290=3|1070=1|10=215| 
{code}
#4 Message in logs:
{code:java}
QUOD.MDA.log:2022-06-03 18:37:00.520079727 QUOD.MDA [17036] INFO 
 marketdata (aggregation.cpp:211) - best bid 1.18142 deviates from 
reference bid 1.18138 by 0.00004, more than 0.00001 on Depth feed 
GBP/USD:SPO:REG:HSBC from TEST source for listing 100000421 on venue HSBC 
with subject `GBP/USD:SPO:REG:HSBC.D.TEST' {code}";/PFX/FX_Price Cleansing;High - Must Have;PriceCleansing;NeedAddToRegression;;;PFX-1217;;QAP-7975;;Create simple rule with following parameters;(see attached screenshot);Rule saved. No errors;;
;;;;;;;;;;;;;;;Check MDA logs that the final deviation calculated correctly;#1;Deviation equals 0.00001;;
;;;;;;;;;;;;;;;Send MD (with equal prices);#2;MD sent and applied;;
;;;;;;;;;;;;;;;Send MD with deviation;#3;MD sent and applied. Prices for HSBC are cleared;;
;;;;;;;;;;;;;;;Check logs;#4;In log files present a message that indicates that cleansing triggered;;
;;;;;;;;;;;;;;;Delete created rule;;Rule deleted;;
QAP-T5127;Price Cleansing: Rate deviation: Basic Test (FIX);Open;;"This test checks that prices in the incoming MD update that deviates enough 
from the reference venue prices will be cleared.

*Precondition:* Configure a ClientTier with Instrument where only one venue 
attached (the one wich is TargetVenue for the rule)

#1 Equal MD:
{code:java}
HSBC:
8=FIXT.1.1|9=397|35=W|34=10|49=TEST|52=20220603-10:52:47.968|56=MARKETDATA|55=GBP/USD|167=FXSPOT|207=HSBC|262=GBP/USD:SPO:REG:HSBC_20|963=1279|268=6|269=0|270=1.18138|271=1000000|290=1|1070=1|269=1|270=1.18158|271=1000000|290=1|1070=1|269=0|270=1.18128|271=5000000|290=2|1070=1|269=1|270=1.18168|271=5000000|290=2|1070=1|269=0|270=1.18118|271=10000000|290=3|1070=1|269=1|270=1.18178|271=10000000|290=3|1070=1|10=215|
CITI:
8=FIXT.1.1|9=397|35=W|34=10|49=TEST|52=20220603-10:52:45.674|56=MARKETDATA|55=GBP/USD|167=FXSPOT|207=CITI|262=GBP/USD:SPO:REG:CITI_206|963=1279|268=6|269=0|270=1.18138|271=1000000|290=1|1070=1|269=1|270=1.18158|271=1000000|290=1|1070=1|269=0|270=1.18128|271=5000000|290=2|1070=1|269=1|270=1.18168|271=5000000|290=2|1070=1|269=0|270=1.18118|271=10000000|290=3|1070=1|269=1|270=1.18178|271=10000000|290=3|1070=1|10=215| 
{code}
#2
{code:java}
|35=V|49=QUOD3|56=QUODFX_UAT|34=3|52=20220607-06:47:59|50=CLIENT1|262=764635181|263=1|264=0|265=0|267=2|269=0|269=1|146=1|55=GBP/USD|460=4|63=0|167=FXSPOT|10=038|

|35=W|34=18|49=QUODFX_UAT|52=20220607-06:56:25.945|56=QUOD3|1128=9|55=GBP/USD|262=764635185|268=6|269=0|278=4_GBP/USD_20220607T065625940798387_Bid1|270=1.18138|271=1000000|272=20220607|273=06:56:24|299=4_GBP/USD_20220607T065513637919140_Bid1|290=1|1024=1|63=0|64=20220609|1070=1|269=1|278=4_GBP/USD_20220607T065625940798387_Ask1|270=1.18158|271=1000000|272=20220607|273=06:56:24|299=4_GBP/USD_20220607T065513637919140_Ask1|290=1|1024=1|63=0|64=20220609|1070=1|269=0|278=4_GBP/USD_20220607T065625940798387_Bid2|270=1.18128|271=5000000|272=20220607|273=06:56:24|299=4_GBP/USD_20220607T065513637919140_Bid2|290=2|1024=1|63=0|64=20220609|1070=1|269=1|278=4_GBP/USD_20220607T065625940798387_Ask2|270=1.18168|271=5000000|272=20220607|273=06:56:24|299=4_GBP/USD_20220607T065513637919140_Ask2|290=2|1024=1|63=0|64=20220609|1070=1|269=0|278=4_GBP/USD_20220607T065625940798387_Bid3|270=1.18118|271=10000000|272=20220607|273=06:56:24|299=4_GBP/USD_20220607T065513637919140_Bid3|290=3|1024=1|63=0|64=20220609|1070=1|269=1|278=4_GBP/USD_20220607T065625940798387_Ask3|270=1.18178|271=10000000|272=20220607|273=06:56:24|299=4_GBP/USD_20220607T065513637919140_Ask3|290=3|1024=1|63=0|64=20220609|1070=1|779=20220607-06:56:25.940|11501=20220607-06:42:07.554|11502=20220607-06:42:07.553|11503=HSBC-ID|10=059|
{code}
#3 MD with deviation (deviation is 0.00004):
{code:java}
HSBC:
8=FIXT.1.1|9=397|35=W|34=10|49=TEST|52=20220603-10:52:47.968|56=MARKETDATA|55=GBP/USD|167=FXSPOT|207=HSBC|262=GBP/USD:SPO:REG:HSBC_20|963=1279|268=6|269=0|270=1.18142|271=1000000|290=1|1070=1|269=1|270=1.18162|271=1000000|290=1|1070=1|269=0|270=1.18132|271=5000000|290=2|1070=1|269=1|270=1.18172|271=5000000|290=2|1070=1|269=0|270=1.18122|271=10000000|290=3|1070=1|269=1|270=1.18182|271=10000000|290=3|1070=1|10=215|
CITI:
8=FIXT.1.1|9=397|35=W|34=10|49=TEST|52=20220603-10:52:45.674|56=MARKETDATA|55=GBP/USD|167=FXSPOT|207=CITI|262=GBP/USD:SPO:REG:CITI_206|963=1279|268=6|269=0|270=1.18138|271=1000000|290=1|1070=1|269=1|270=1.18158|271=1000000|290=1|1070=1|269=0|270=1.18128|271=5000000|290=2|1070=1|269=1|270=1.18168|271=5000000|290=2|1070=1|269=0|270=1.18118|271=10000000|290=3|1070=1|269=1|270=1.18178|271=10000000|290=3|1070=1|10=215| 
{code}
#4
{code:java}
|35=V|49=QUOD3|56=QUODFX_UAT|34=3|52=20220607-06:47:59|50=CLIENT1|262=764635181|263=1|264=0|265=0|267=2|269=0|269=1|146=1|55=GBP/USD|460=4|63=0|167=FXSPOT|10=038|

|35=Y|34=23|49=QUODFX_UAT|52=20220607-06:58:39.499|56=QUOD3|1128=9|58=no 
available depth on GBP/USD SPO|262=764635186|10=238| {code}
#5 Message in logs:

MDA:
{code:java}
QUOD.MDA.log:2022-06-03 18:37:00.520079727 QUOD.MDA [17036] INFO 
 marketdata (aggregation.cpp:211) - best bid 1.18142 deviates from 
reference bid 1.18138 by 0.00004, more than 0.00001 on Depth feed 
GBP/USD:SPO:REG:HSBC from TEST source for listing 100000421 on venue HSBC 
with subject `GBP/USD:SPO:REG:HSBC.D.TEST' {code}
QS:
{code:java}
2022-06-07 06:58:39.498239896 QUOD.QS_ESP_STANDARD_SELL [17058] INFO 
 marketdata (aggregation.cpp:211) - best bid 1.181420000 deviates from 
reference bid 1.181380000 by 0.000040000, more than 0.000010000 on Depth 
feed GBP/USD:SPO:REG:HSBC from TEST source for listing 100000421 (GBP/USD) 
on venue HSBC with subject `GBP/USD:SPO:REG:HSBC.D.TEST'
2022-06-07 06:58:39.498257824 QUOD.QS_ESP_STANDARD_SELL [17058] WARN 
 marketdata (control.cpp:730) - excluding price deviation from 
bid=1000000.000000000@1.181380000`06:42:02.425058, 
ask=1000000.000000000@1.181580000`06:42:02.425058, trade=nan@nan`? by more 
than 0.000010000 : data (1min4.965239794s ? old : 2022-Jun-07 
06:57:34.533051000, arrival : 2022-Jun-07 06:57:34.532396000, sent 
500.746794000ms ago, received 1.762794000ms ago, dispatched 1.336476000ms 
ago) { #1 $^101 bid image [3]{ 1=1000000@1.18142>2022-Jun-09L|TRD| 
2=5000000@1.18132>2022-Jun-09L|TRD| 3=10000000@1.18122>2022-Jun-09L|TRD| } 
ask image [3]{ 1=1000000@1.18162>2022-Jun-09L|TRD| 
2=5000000@1.18172>2022-Jun-09L|TRD| 3=10000000@1.18182>2022-Jun-09L|TRD| } 
[flat] } on Depth feed GBP/USD:SPO:REG:HSBC from TEST source for listing 
100000421 (GBP/USD) on venue HSBC with subject 
`GBP/USD:SPO:REG:HSBC.D.TEST' as per rule `test' [1200004]
{code}";/PFX/FX_Price Cleansing;High - Must Have;PriceCleansing;NeedAddToRegression;;;PFX-1217;;QAP-7974;;Create simple rule with following parameters;(see attached screenshot);Rule saved. No errors;;
;;;;;;;;;;;;;;;Send MD (with equal prices) and subscribe to the client;#1, #2;MD sent and applied;;
;;;;;;;;;;;;;;;Send MD with deviation;#3;MD sent and applied. Prices for ClientTier based on HSBC venue are cleared;;
;;;;;;;;;;;;;;;Re-subscribe after cleansing is triggered;#4;"You should receive an 35=Y message because there is no prices on the client 
tier";;
;;;;;;;;;;;;;;;Check logs;#5;In log files present a message that indicates that cleansing triggered;;
;;;;;;;;;;;;;;;Delete created rule;;Rule deleted;;
QAP-T5128;Price Cleansing: Rate deviation: Basic Test (Maker);Open;;"This test checks that prices in the incoming MD update that deviates enough 
from the reference venue prices will be cleared.

*Precondition:* Configure a ClientTier with Instrument where only one venue 
attached (the one wich is TargetVenue for the rule)

#1 Equal MD:
{code:java}
HSBC:
8=FIXT.1.1|9=397|35=W|34=10|49=TEST|52=20220603-10:52:47.968|56=MARKETDATA|55=GBP/USD|167=FXSPOT|207=HSBC|262=GBP/USD:SPO:REG:HSBC_20|963=1279|268=6|269=0|270=1.18138|271=1000000|290=1|1070=1|269=1|270=1.18158|271=1000000|290=1|1070=1|269=0|270=1.18128|271=5000000|290=2|1070=1|269=1|270=1.18168|271=5000000|290=2|1070=1|269=0|270=1.18118|271=10000000|290=3|1070=1|269=1|270=1.18178|271=10000000|290=3|1070=1|10=215|
CITI:
8=FIXT.1.1|9=397|35=W|34=10|49=TEST|52=20220603-10:52:45.674|56=MARKETDATA|55=GBP/USD|167=FXSPOT|207=CITI|262=GBP/USD:SPO:REG:CITI_206|963=1279|268=6|269=0|270=1.18138|271=1000000|290=1|1070=1|269=1|270=1.18158|271=1000000|290=1|1070=1|269=0|270=1.18128|271=5000000|290=2|1070=1|269=1|270=1.18168|271=5000000|290=2|1070=1|269=0|270=1.18118|271=10000000|290=3|1070=1|269=1|270=1.18178|271=10000000|290=3|1070=1|10=215| 
{code}
#2 MD with deviation (deviation is 0.00004):
{code:java}
HSBC:
8=FIXT.1.1|9=397|35=W|34=10|49=TEST|52=20220603-10:52:47.968|56=MARKETDATA|55=GBP/USD|167=FXSPOT|207=HSBC|262=GBP/USD:SPO:REG:HSBC_20|963=1279|268=6|269=0|270=1.18142|271=1000000|290=1|1070=1|269=1|270=1.18162|271=1000000|290=1|1070=1|269=0|270=1.18132|271=5000000|290=2|1070=1|269=1|270=1.18172|271=5000000|290=2|1070=1|269=0|270=1.18122|271=10000000|290=3|1070=1|269=1|270=1.18182|271=10000000|290=3|1070=1|10=215|
CITI:
8=FIXT.1.1|9=397|35=W|34=10|49=TEST|52=20220603-10:52:45.674|56=MARKETDATA|55=GBP/USD|167=FXSPOT|207=CITI|262=GBP/USD:SPO:REG:CITI_206|963=1279|268=6|269=0|270=1.18138|271=1000000|290=1|1070=1|269=1|270=1.18158|271=1000000|290=1|1070=1|269=0|270=1.18128|271=5000000|290=2|1070=1|269=1|270=1.18168|271=5000000|290=2|1070=1|269=0|270=1.18118|271=10000000|290=3|1070=1|269=1|270=1.18178|271=10000000|290=3|1070=1|10=215| 
{code}
#3 Message in logs:

MDA:
{code:java}
QUOD.MDA.log:2022-06-03 18:37:00.520079727 QUOD.MDA [17036] INFO 
 marketdata (aggregation.cpp:211) - best bid 1.18142 deviates from 
reference bid 1.18138 by 0.00004, more than 0.00001 on Depth feed 
GBP/USD:SPO:REG:HSBC from TEST source for listing 100000421 on venue HSBC 
with subject `GBP/USD:SPO:REG:HSBC.D.TEST' {code}
QS:
{code:java}
2022-06-07 06:38:15.243050443 QUOD.QSFE [14338] INFO  marketdata 
(aggregation.cpp:211) - best bid 1.181420000 deviates from reference bid 
1.181380000 by 0.000040000, more than 0.000010000 on Depth feed 
GBP/USD:SPO:REG:HSBC from TEST source for listing 100000421 (GBP/USD) on 
venue HSBC with subject `GBP/USD:SPO:REG:HSBC.D.TEST'
2022-06-07 06:38:15.243085380 QUOD.QSFE [14338] WARN  marketdata 
(control.cpp:730) - excluding price deviation from 
bid=1000000.000000000@1.181380000`06:34:20.315677, 
ask=1000000.000000000@1.181580000`06:34:20.315677, trade=nan@nan`? by more 
than 0.000010000 : data (16.930314072s * old, arrival 16.930695072s ago, 
sent 13.860072000ms ago, received 1.248072000ms ago, dispatched 
1.107710000ms ago) { #1 $^59 bid image [3]{ 
1=1000000@1.18142>2022-Jun-09L|TRD| 2=5000000@1.18132>2022-Jun-09L|TRD| 
3=10000000@1.18122>2022-Jun-09L|TRD| } ask image [3]{ 
1=1000000@1.18162>2022-Jun-09L|TRD| 2=5000000@1.18172>2022-Jun-09L|TRD| 
3=10000000@1.18182>2022-Jun-09L|TRD| } [flat] } on Depth feed 
GBP/USD:SPO:REG:HSBC from TEST source for listing 100000421 (GBP/USD) on 
venue HSBC with subject `GBP/USD:SPO:REG:HSBC.D.TEST' as per rule `test' 
[1200004] {code}";/PFX/FX_Price Cleansing;High - Must Have;PriceCleansing;NeedAddToRegression;;;PFX-1217;;QAP-7964;;Create simple rule with following parameters;(see attached screenshot);Rule saved. No errors;;
;;;;;;;;;;;;;;;Send MD (with equal prices);#1;MD sent and applied;;
;;;;;;;;;;;;;;;Send MD with deviation;#2;MD sent and applied. Prices for ClientTier based on HSBC venue are cleared;;
;;;;;;;;;;;;;;;Check logs;#3;In log files present a message that indicates that cleansing triggered;;
;;;;;;;;;;;;;;;Delete crated rule;;Rule deleted;;
QAP-T5129;Price Cleansing: Rate deviation: Basic Test (Taker);Open;;"This test checks that prices in the incoming MD update deviate enough from 
the reference venue prices will be cleared.

#1 Equal MD:
{code:java}
HSBC:
8=FIXT.1.1|9=397|35=W|34=10|49=TEST|52=20220603-10:52:47.968|56=MARKETDATA|55=GBP/USD|167=FXSPOT|207=HSBC|262=GBP/USD:SPO:REG:HSBC_20|963=1279|268=6|269=0|270=1.18138|271=1000000|290=1|1070=1|269=1|270=1.18158|271=1000000|290=1|1070=1|269=0|270=1.18128|271=5000000|290=2|1070=1|269=1|270=1.18168|271=5000000|290=2|1070=1|269=0|270=1.18118|271=10000000|290=3|1070=1|269=1|270=1.18178|271=10000000|290=3|1070=1|10=215|
CITI:
8=FIXT.1.1|9=397|35=W|34=10|49=TEST|52=20220603-10:52:45.674|56=MARKETDATA|55=GBP/USD|167=FXSPOT|207=CITI|262=GBP/USD:SPO:REG:CITI_206|963=1279|268=6|269=0|270=1.18138|271=1000000|290=1|1070=1|269=1|270=1.18158|271=1000000|290=1|1070=1|269=0|270=1.18128|271=5000000|290=2|1070=1|269=1|270=1.18168|271=5000000|290=2|1070=1|269=0|270=1.18118|271=10000000|290=3|1070=1|269=1|270=1.18178|271=10000000|290=3|1070=1|10=215| 
{code}
#2 MD with deviation (deviation is 0.00004):
{code:java}
HSBC:
8=FIXT.1.1|9=397|35=W|34=10|49=TEST|52=20220603-10:52:47.968|56=MARKETDATA|55=GBP/USD|167=FXSPOT|207=HSBC|262=GBP/USD:SPO:REG:HSBC_20|963=1279|268=6|269=0|270=1.18142|271=1000000|290=1|1070=1|269=1|270=1.18162|271=1000000|290=1|1070=1|269=0|270=1.18132|271=5000000|290=2|1070=1|269=1|270=1.18172|271=5000000|290=2|1070=1|269=0|270=1.18122|271=10000000|290=3|1070=1|269=1|270=1.18182|271=10000000|290=3|1070=1|10=215|
CITI:
8=FIXT.1.1|9=397|35=W|34=10|49=TEST|52=20220603-10:52:45.674|56=MARKETDATA|55=GBP/USD|167=FXSPOT|207=CITI|262=GBP/USD:SPO:REG:CITI_206|963=1279|268=6|269=0|270=1.18138|271=1000000|290=1|1070=1|269=1|270=1.18158|271=1000000|290=1|1070=1|269=0|270=1.18128|271=5000000|290=2|1070=1|269=1|270=1.18168|271=5000000|290=2|1070=1|269=0|270=1.18118|271=10000000|290=3|1070=1|269=1|270=1.18178|271=10000000|290=3|1070=1|10=215| 
{code}
#3 Message in logs:
{code:java}
QUOD.MDA.log:2022-06-03 18:37:00.520079727 QUOD.MDA [17036] INFO 
 marketdata (aggregation.cpp:211) - best bid 1.18142 deviates from 
reference bid 1.18138 by 0.00004, more than 0.00001 on Depth feed 
GBP/USD:SPO:REG:HSBC from TEST source for listing 100000421 on venue HSBC 
with subject `GBP/USD:SPO:REG:HSBC.D.TEST' {code}";/PFX/FX_Price Cleansing;High - Must Have;PriceCleansing;NeedAddToRegression;;;PFX-1217;;QAP-7939;;Create simple rule with following parameters;(see attached screenshot);Rule saved. No errors;;
;;;;;;;;;;;;;;;Send MD (with equal prices);#1;MD sent and applied;;
;;;;;;;;;;;;;;;Send MD with deviation;#2;MD sent and applied. Prices for HSBC are cleared;;
;;;;;;;;;;;;;;;Check logs;#3;In log files present a message that indicates that cleansing triggered;;
;;;;;;;;;;;;;;;Delete created rule;;Rule deleted;;
QAP-T5130;Price Cleansing: Stale Rates - checking effects of <staleOnArrival> config token;Open;;"!image-2022-05-27-16-58-28-213.png!

*Precondition:* Configure a simple Stale rates rule:

!image-2022-05-27-17-09-27-377.png|thumbnail!";/PFX/FX_Price Cleansing;High - Must Have;PriceCleansing;NeedAddToRegression;;;PFX-1215;;QAP-7879;;Edit marketdata.xml and restart FH and MDA;"cdf; cd default; vi marketdata.xml;

set to false";cfg changed, components started with no errors.;;
;;;;;;;;;;;;;;;Send MD and check rule triggered;Send MD to HSBC EUR/USD-Spot.;"At luna314 with staleOnArrival=false difference should be approx. 2ms

Update excluded because it is stale (Prices are blank at FE)";;
;;;;;;;;;;;;;;;Edit marketdata.xml and restart FH and MDA;"cdf; cd default; vi marketdata.xml;

set to true";cfg changed, components started with no errors.;;
;;;;;;;;;;;;;;;Send MD and check rule triggered;Send MD to HSBC EUR/USD-Spot.;"At luna314 with staleOnArrival=true difference should be approx. -300us

Update pushed to the Fe and other components because it is fresh (Prices 
present at FE)";;
QAP-T5131;Price Cleansing: Unbalanced Rates;Specified;;"Create Unbalanced Rates rule in Price Cleansing section for EUR/USD Symbol 
and HSBC venue
!screenshot-1.png|thumbnail!
Send MD with BID which is not decreasing

{code:java}
< 
8=FIXT.1.1|9=603|35=W|49=TEST|56=MARKETDATA|34=13|52=20210209-12:59:04|262=313|55=EUR/USD|64=SP|268=6|269=0|290=1|270=1.19500|271=1000000|273=20210209-12:59:04|15=EUR|282=HSBC|64=20210210|269=1|290=1|270=1.19900|271=1000000|273=20210209-12:59:04|15=EUR|282=HSBC|64=20210210|269=0|290=2|270=1.19650|271=6000000|273=20210209-12:59:04|15=EUR|282=HSBC|64=20210210|269=1|290=2|270=1.19800|271=6000000|273=20210209-12:59:04|15=EUR|282=HSBC|64=20210210|269=0|290=3|270=1.19780|271=12000000|273=20210209-12:59:04|15=EUR|282=HSBC|64=20210210|269=1|290=3|270=1.19700|271=12000000|273=20210209-12:59:04|15=EUR|282=HSBC|64=20210210|10=181|

{code}";/PFX/FX_Price Cleansing;Low - Nice to Have;PriceCleansing;NeedAddToRegression;;;PFX-1216;;QAP-3420;;From MiniFix send MD for HSBC EUR/USD Spot;see Description;MD is sent;;
;;;;;;;;;;;;;;;Open FE trading => ESP tile;EUR/USD Spot HSBC;Tile is empty;;
;;;;;;;;;;;;;;;See MDA log files;;"Price Cleansing: Unbalanced Rates is active and rule is applied
see Comment";;
;;;;;;;;;;;;;;;Go to Unbalanced Rates and change your rule;;modify wizard is opened;;
;;;;;;;;;;;;;;;"Unchecked ""Remove Detected Price Updates"" and submit";;"no errors appeared
see comments";;
;;;;;;;;;;;;;;;Send the same MD again;;Prices are appeared on ESP tile;;
QAP-T5995;QS discards MD update with mismatched date (SWAP);Open;;"This test validates that QS discarding any MD update with a mismatched 
settle date.

#1
{code:java}
|35=R|49=QUOD5|56=QUODFX_UAT|34=358|52=20220608-11:06:06|131=576286771|146=1|55=GBP/USD|167=FXSWAP|15=GBP|1=CLIENT1|555=2|600=GBP/USD|609=FXSPOT|624=1|587=0|685=1000000|600=GBP/USD|609=FXFWD|624=2|587=W1|685=1000000|10=067|
{code}
#2 ({color:#00875a}*64=20220617*{color})
{code:java}
|35=W|34=555|49=TEST|52=20220608-11:06:21.383|56=MARKETDATA|55=GBP/USD|167=FXFWD|262=GBP/USD:FXF:WK1:HSBC_1453|268=6|269=0|270=1.18138|271=1000000|272=20220608|273=11:06:15|290=1|64=20220617|1070=1|1027=0.00001|269=1|270=1.18158|271=1000000|272=20220608|273=11:06:15|290=1|64=20220617|1070=1|1027=0.00001|269=0|270=1.18128|271=5000000|272=20220608|273=11:06:15|290=2|64=20220617|1070=1|1027=0.00002|269=1|270=1.18168|271=5000000|272=20220608|273=11:06:15|290=2|64=20220617|1070=1|1027=0.00002|269=0|270=1.18118|271=10000000|272=20220608|273=11:06:15|290=3|64=20220617|1070=1|1027=0.00003|269=1|270=1.18178|271=10000000|272=20220608|273=11:06:15|290=3|64=20220617|1070=1|1027=0.00003|10=047|
{code}
#3
{code:java}
|35=S|34=495|49=QUODFX_UAT|52=20220608-11:06:16.267|56=QUOD5|1128=9|15=GBP|55=GBP/USD|62=20220608-11:08:06.965|117=01220608110616103002|131=576286771|132=0.00003|133=0.00001|167=FXSWAP|188=1.18148|190=1.18148|460=4|537=1|555=2|600=GBP/USD|602=GBP/USD|603=8|616=XQFX|624=1|685=1000000|587=0|588=20220610|681=1.18148|684=1.18148|600=GBP/USD|602=GBP/USD|603=8|616=XQFX|624=2|685=1000000|587=W1|588=20220617|681=1.18151|684=1.18149|1067=0.00003|1068=0.00001|1065=0.00003|1066=0.00001|1166=01220608110616103002|10=155| 
{code}
#4 ({color:#de350b}*64=20220621*{color})
{code:java}
|35=W|34=556|49=TEST|52=20220608-11:06:26.529|56=MARKETDATA|55=GBP/USD|167=FXFWD|262=GBP/USD:FXF:WK1:HSBC_1453|268=6|269=0|270=1.18138|271=1000000|272=20220608|273=11:06:15|290=1|64=20220621|1070=1|1027=0.00007|269=1|270=1.18158|271=1000000|272=20220608|273=11:06:15|290=1|64=20220617|1070=1|1027=0.00007|269=0|270=1.18128|271=5000000|272=20220608|273=11:06:15|290=2|64=20220621|1070=1|1027=0.00008|269=1|270=1.18168|271=5000000|272=20220608|273=11:06:15|290=2|64=20220621|1070=1|1027=0.00008|269=0|270=1.18118|271=10000000|272=20220608|273=11:06:15|290=3|64=20220621|1070=1|1027=0.00009|269=1|270=1.18178|271=10000000|272=20220608|273=11:06:15|290=3|64=20220621|1070=1|1027=0.00009|10=066|{code}
#5
{code:java}
|35=Z|34=496|49=QUODFX_UAT|52=20220608-11:06:26.544|56=QUOD5|1128=9|117=0|131=576286771|295=1|55=GBP/USD|167=FXSWAP|298=5|10=237| 
{code}
#6
{code:java}
2022-06-08 11:06:26.540134362 QUOD.QS_RFQ_STANDARD_SELL [28707] DEBUG 
quoting (MarketManager.cpp:1686) - aggregation of GBP/USD Depth on HSBC
2022-06-08 11:06:26.540148484 QUOD.QS_RFQ_STANDARD_SELL [28707] INFO 
 quoting (MarketManager.cpp:1688) - got image with bid depth, ask depth, 
best bid is 1.181380000, best ask is 1.181580000, data (9.620166000ms old, 
arrival 10.343166000ms ago, sent 5.981166000ms ago, received 5.602166000ms 
ago, dispatched 5.284326000ms ago) { $^556 PriceDepth bid image [3]{ 
1=1000000@1.18138/1.18131+0.00007>2022-Jun-21L|TRD| 
2=5000000@1.18128/1.1812+0.00008>2022-Jun-21L|TRD| 
3=10000000@1.18118/1.18109+0.00009>2022-Jun-21L|TRD| } PriceDepth ask image 
[3]{ 1=1000000@1.18158/1.18151+0.00007>2022-Jun-17L|TRD| 
2=5000000@1.18168/1.1816+0.00008>2022-Jun-21L|TRD| 
3=10000000@1.18178/1.18169+0.00009>2022-Jun-21L|TRD| } [flat] }
2022-06-08 11:06:26.540282437 QUOD.QS_RFQ_STANDARD_SELL [28707] DEBUG cache 
(RecordCache.cpp:786) - found loaded VInstrument={ 
InstrID=""ImF85n9xE_Y-IBpQ17WQEA"" InstrType=FXForward InstrSymbol=""GBP/USD"" 
NoLegs=0 IsMultiListed=Yes Alive=Alive Tenor=W1 
PreferredSecurityExchange=""EBS-CITI"" BaseCurrency=""GBP"" QuoteCurrency=""USD"" 
LargeNumberPxPrecision=2 PxPrecision=4 ForwardPointDivisor=10000 
InstrSettlDate=""20220617"" EURMajorPairInstrID1=""AhSWXJKtLiN6K8G7xNdwqA"" 
EURDirectQuotation1=Yes EURMajorPairInstrID2=""us5tb5Ml30c-YAQOXVpmvA"" 
EURDirectQuotation2=Yes, revision 1 }
2022-06-08 11:06:26.540335195 QUOD.QS_RFQ_STANDARD_SELL [28707] DEBUG 
quoting (MarketManager.cpp:1733) - discarding entry with mismatched 
settlement 2022-Jun-21 (instead of 2022-Jun-17)
2022-06-08 11:06:26.540366236 QUOD.QS_RFQ_STANDARD_SELL [28707] DEBUG 
quoting (MarketManager.cpp:1733) - discarding entry with mismatched 
settlement 2022-Jun-21 (instead of 2022-Jun-17)
2022-06-08 11:06:26.540446829 QUOD.QS_RFQ_STANDARD_SELL [28707] DEBUG 
quoting (MarketManager.cpp:1718) - GBP/USD ask forward point data copied 
from HSBC Depth table
2022-06-08 11:06:26.540461355 QUOD.QS_RFQ_STANDARD_SELL [28707] DEBUG 
quoting (MarketManager.cpp:1733) - discarding entry with mismatched 
settlement 2022-Jun-21 (instead of 2022-Jun-17)
2022-06-08 11:06:26.540516413 QUOD.QS_RFQ_STANDARD_SELL [28707] DEBUG 
quoting (MarketManager.cpp:1733) - discarding entry with mismatched 
settlement 2022-Jun-21 (instead of 2022-Jun-17)
2022-06-08 11:06:26.540560476 QUOD.QS_RFQ_STANDARD_SELL [28707] DEBUG 
quoting (MarketManager.cpp:1733) - discarding entry with mismatched 
settlement 2022-Jun-21 (instead of 2022-Jun-17)
2022-06-08 11:06:26.540652479 QUOD.QS_RFQ_STANDARD_SELL [28707] INFO 
 quoting (MarketManager.cpp:1712) - no GBP/USD bid forward point data 
copied from HSBC Depth table
2022-06-08 11:06:26.540696223 QUOD.QS_RFQ_STANDARD_SELL [28707] INFO 
 quoting (MarketManager.cpp:1659) - no QuoteBook market data subscription 
for points of GBP/USD (tier 4)
2022-06-08 11:06:26.540715957 QUOD.QS_RFQ_STANDARD_SELL [28707] DEBUG 
quoting (MarketManager.cpp:837) - built cached aggregated book for GBP/USD 
: 20220617 (tier 4) GBP/USD { OfferPoints={ { 1000000.000000000@0.000070000 
T } } OrigMDTime=2022-Jun-08 11:06:26.530567000 
OrigMDArrivalTime=2022-Jun-08 11:06:26.529844000 
OrigMDSendingTime=not-a-date-time OrigVenueID=HSBC }, no D data on HSBC,
2022-06-08 11:06:26.540858809 QUOD.QS_RFQ_STANDARD_SELL [28707] DEBUG 
quoting (RequestManager.cpp:6464) - clearing prices for market data clients 
of GBP/USD (4)
2022-06-08 11:06:26.540866627 QUOD.QS_RFQ_STANDARD_SELL [28707] DEBUG 
quoting (RequestManager.cpp:6472) - no subscription for GBP/USD (4)
2022-06-08 11:06:26.541013212 QUOD.QS_RFQ_STANDARD_SELL [28707] DEBUG cache 
(RecordCache.cpp:786) - found inserted Quote={ QuoteID=442400000034 
UserID=""QA1"" RoleID=HeadOfSaleDealer CreationTime=2022-Jun-08 
11:06:06.971727134 Originator=""QS_RFQ_STANDARD_SELL"" QuoteType=Tradeable 
QuoteStatus=Accepted ListingID=506404432 AccountGroupID=""CLIENT1"" 
BidPx=1.181480000 BidSize=1.000000000 OfferPx=1.181480000 
OfferSize=1.000000000 QuoteRequestID=441700000060 
ValidUntilTime=2022-Jun-08 11:08:06.965538000 BidSpotRate=1.181480000 
OfferSpotRate=1.181480000 BidSwapPoints=0.000030000 
OfferSwapPoints=0.000010000 Currency=""GBP"" InstrID=""qtO5Agwi_-_HpiPGqd1HYQ"" 
Origin=Internal ClientQuoteID=""01220608110621103002"" 
QuoteCategory=Automatic AffectPosit=No QuoteTTL=500, revision 1 }
2022-06-08 11:06:26.541156464 QUOD.QS_RFQ_STANDARD_SELL [28707] DEBUG 
quoting (caches.cpp:4137) - clearing history for quote 442400000034
2022-06-08 11:06:26.541214352 QUOD.QS_RFQ_STANDARD_SELL [28707] INFO 
 quoting (RequestManager.cpp:6516) - killed Quote={ QuoteID=442400000034 
UserID=""QA1"" RoleID=HeadOfSaleDealer CreationTime=2022-Jun-08 
11:06:06.971727134 Originator=""QS_RFQ_STANDARD_SELL"" QuoteType=Tradeable 
QuoteStatus=RemovedFromMarket ListingID=506404432 AccountGroupID=""CLIENT1"" 
BidPx=1.181480000 BidSize=1.000000000 OfferPx=1.181480000 
OfferSize=1.000000000 TerminationTime=2022-Jun-08 11:06:26.541155420 
QuoteRequestID=441700000060 ValidUntilTime=2022-Jun-08 11:08:06.965538000 
BidSpotRate=1.181480000 OfferSpotRate=1.181480000 BidSwapPoints=0.000030000 
OfferSwapPoints=0.000010000 Currency=""GBP"" InstrID=""qtO5Agwi_-_HpiPGqd1HYQ"" 
Origin=Internal ClientQuoteID=""01220608110621103002"" 
QuoteCategory=Automatic AffectPosit=No QuoteTTL=500, revision 1 }{code}";/PFX/FX_MM_RFQ/FX_MM_RFQ;High - Must Have;FX_MM_RFQ;NeedAddToRegression;;;PFX-2940;;QAP-7997;;Send SWAP request to the instrument with only 1 venue attached;"#1
CLIENT1
GBP/USD-SPOT/1W";35=S messages received in reply;;
;;;;;;;;;;;;;;;Send MD to that venue with correct settle date;#2, #3;You receive 35=S with prices from the last MD update;;
;;;;;;;;;;;;;;;Send MD to that venue with mismached date;#4, #5;You receive an 35=Z message (Quodte Cancel);;
;;;;;;;;;;;;;;;Check logs;#6;MD update with incorrect settle date was discarded;;
QAP-T6856;Check hidden orders in Order book;Open;;;/PFX/FX_Display;High - Must Have;FX_Display;NeedAddToRegression;JIRAUSER13842;;PFX-3083;;;PFX;Check hidden orders in Order book;;"Check hidden orders in Order book
";;
;;;;;;;;;;;;;;;"Select couple order and RMC and select ""Hide for user session""";;"Orders checked
";;
;;;;;;;;;;;;;;;"Press the ""Alert"" button on the header of OrderBook

";;Selected orders hide in the Order book;;
;;;;;;;;;;;;;;;Select one more order as Hiden;;Order should disapear;;
;;;;;;;;;;;;;;;"Press the ""Alert"" button on the header of OrderBook one more time";;"Orders appears in order book
";;
